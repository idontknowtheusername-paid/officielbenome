const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-B8t_HgGJ.js","assets/ui-BkW4XaSf.js","assets/router-g3RhsYON.js","assets/vendor-DaBoii6j.js","assets/query-BZBOCxXK.js","assets/messaging-BRf0cVfO.js","assets/admin-DsSJuCG-.js","assets/animations-B7Vm-81o.js","assets/utils-iFD8Ag1C.js","assets/charts-B6pUC4mM.js","assets/forms-CVlSZARz.js","assets/supabase-CS--z241.js","assets/services-CqmL7Hwe.js","assets/maps-DILUY6PO.js","assets/messaging-DUfRhC-v.css","assets/chatbot-DuPz_slO.js","assets/web-YAsli6da.js","assets/web-BRLj-VSM.js","assets/AdminLayout-gE3WK5Lm.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r={}.hasOwnProperty,i={}.propertyIsEnumerable,n=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,l=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&n(e,t,s[t]);if(a)for(var t of a(s))i.call(s,t)&&n(e,t,s[t]);return e},o=(e,a)=>s(e,t(a)),c=(e,s)=>{var t={};for(var n in e)r.call(e,n)&&0>s.indexOf(n)&&(t[n]=e[n]);if(null!=e&&a)for(var n of a(e))0>s.indexOf(n)&&i.call(e,n)&&(t[n]=e[n]);return t},d=(e,s,t)=>new Promise(((a,r)=>{var i=e=>{try{l(t.next(e))}catch(s){r(s)}},n=e=>{try{l(t.throw(e))}catch(s){r(s)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((t=t.apply(e,s)).next())}));import{j as m}from"./ui-BkW4XaSf.js";import{d as u,N as x,r as h,R as p,u as g,L as j,f as v,O as f,c as b,g as y,h as N,i as w,B as k}from"./router-g3RhsYON.js";import{a as C,g as S}from"./vendor-DaBoii6j.js";import{c as P,_ as A,d as z,u as E,e as L,b as M,a as _,Q as q}from"./query-BZBOCxXK.js";import{a as F,b as T,c as D,C as I,U as R,S as V,L as O,P as U,D as B,E as $,R as X,B as H,T as W,t as G,d as J,e as K,f as Q,g as Y,h as Z,i as ee,j as se,k as te}from"./messaging-BRf0cVfO.js";import{u as ae,y as re,s as ie,B as ne,R as le,f as oe,ak as ce,H as de,a9 as me,ah as ue,aa as xe,al as he,am as pe,an as ge,p as je,ao as ve,ai as fe,q as be,X as ye,M as Ne,ap as we,aq as ke,ar as Ce,I as Se,a8 as Pe,as as Ae,at as ze,P as Ee,v as Le,au as Me,U as _e,c as qe,av as Fe,aw as Te,ax as De,ay as Ie,az as Re,L as Ve,aA as Oe,aB as Ue,aC as Be,aD as $e,o as Xe,k as He,l as We,Q as Ge,Y as Je,ag as Ke,aE as Qe,aF as Ye,S as Ze,T as es,r as ss,b as ts,aG as as,t as rs,aH as is,aI as ns,w as ls,D as os,aJ as cs,a5 as ds,aK as ms,x as us,aL as xs,aM as hs,aN as ps,aO as gs,aP as js,aQ as vs,aR as fs,F as bs,aj as ys,aS as Ns,m as ws,aT as ks,aU as Cs,aV as Ss,aW as Ps,aX as As,aY as zs,aZ as Es,a_ as Ls,a$ as Ms,b0 as _s,b1 as qs,b2 as Fs,b3 as Ts,b4 as Ds,b5 as Is,Z as Rs,b6 as Vs,b7 as Os,b8 as Us,b9 as Bs,G as $s,O as Xs,N as Hs,ba as Ws,bb as Gs,ab as Js,ac as Ks,ad as Qs,ae as Ys,bc as Zs,bd as et,be as st,E as tt,bf as at,bg as rt,bh as it,bi as nt,bj as lt,bk as ot,bl as ct,bm as dt,bn as mt,bo as ut,bp as xt,bq as ht,C as pt,br as gt,bs as jt,bt as vt,bu as ft,bv as bt,bw as yt,bx as Nt,by as wt,J as kt,bz as Ct,bA as St,bB as Pt,bC as At,bD as zt,bE as Et,bF as Lt,bG as Mt,bH as _t,bI as qt,bJ as Ft,bK as Tt,bL as Dt,bM as It,bN as Rt,bO as Vt,bP as Ot,bQ as Ut}from"./admin-DsSJuCG-.js";import{m as Bt,A as $t}from"./animations-B7Vm-81o.js";import{i as Xt,o as Ht,s as Wt}from"./forms-CVlSZARz.js";import{r as Gt}from"./chatbot-DuPz_slO.js";import{j as Jt,f as Kt}from"./utils-iFD8Ag1C.js";import"./services-CqmL7Hwe.js";import"./maps-DILUY6PO.js";import"./charts-B6pUC4mM.js";import"./supabase-CS--z241.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var Qt,Yt={};const Zt=S(function(){if(Qt)return Yt;Qt=1;var e=C();return Yt.createRoot=e.createRoot,Yt.hydrateRoot=e.hydrateRoot,Yt}()),ea=({children:e,requiredRole:s="user"})=>{const{user:t,loading:a}=ae(),r=u();if(a)return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:m.jsx(re,{className:"h-12 w-12 animate-spin text-blue-500"})});if(!t)return m.jsx(x,{to:"/connexion",state:{from:r},replace:!0});const i=Array.isArray(t.roles)&&t.roles.includes(s)||t.role===s||t.roles===s;return s&&!i?m.jsx(x,{to:"/",replace:!0}):e},sa=({children:e})=>m.jsx(ea,{requiredRole:"admin",children:e}),ta=new P({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,s)=>(null==s?void 0:s.status)>=500&&2>e,refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:!1}}}),aa={staleTime:12e4,gcTime:3e5};
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var ra,ia;(ia=ra||(ra={})).Unimplemented="UNIMPLEMENTED",ia.Unavailable="UNAVAILABLE";class na extends Error{constructor(e,s,t){super(e),this.message=e,this.code=s,this.data=t}}const la=(e=>e.Capacitor=(e=>{const s=e.CapacitorCustomPlatform||null,t=e.Capacitor||{},a=t.Plugins=t.Plugins||{},r=()=>null!==s?s.name:(e=>{var s,t;return(null==e?void 0:e.androidBridge)?"android":(null===(t=null===(s=null==e?void 0:e.webkit)||void 0===s?void 0:s.messageHandlers)||void 0===t?void 0:t.bridge)?"ios":"web"})(e),i=e=>{var s;return null===(s=t.PluginHeaders)||void 0===s?void 0:s.find((s=>s.name===e))},n=new Map;return t.convertFileSrc||(t.convertFileSrc=e=>e),t.getPlatform=r,t.handleError=s=>e.console.error(s),t.isNativePlatform=()=>"web"!==r(),t.isPluginAvailable=e=>{const s=n.get(e);return!!(null==s?void 0:s.platforms.has(r()))||!!i(e)},t.registerPlugin=(e,l={})=>{const o=n.get(e);if(o)return o.proxy;const c=r(),m=i(e);let u;const x=a=>{let r;const i=(...i)=>{const n=d(null,null,(function*(){return!u&&c in l?u=u="function"==typeof l[c]?yield l[c]():l[c]:null!==s&&!u&&"web"in l&&(u=u="function"==typeof l.web?yield l.web():l.web),u})).then((s=>{const n=((s,a)=>{var r,i;if(!m){if(s)return null===(i=s[a])||void 0===i?void 0:i.bind(s);throw new na(`"${e}" plugin is not implemented on ${c}`,ra.Unimplemented)}{const i=null==m?void 0:m.methods.find((e=>a===e.name));if(i)return"promise"===i.rtype?s=>t.nativePromise(e,a.toString(),s):(s,r)=>t.nativeCallback(e,a.toString(),s,r);if(s)return null===(r=s[a])||void 0===r?void 0:r.bind(s)}})(s,a);if(n){const e=n(...i);return r=null==e?void 0:e.remove,e}throw new na(`"${e}.${a}()" is not implemented on ${c}`,ra.Unimplemented)}));return"addListener"===a&&(n.remove=()=>d(null,null,(function*(){return r()}))),n};return i.toString=()=>a.toString()+"() { [capacitor code] }",Object.defineProperty(i,"name",{value:a,writable:!1,configurable:!1}),i},h=x("addListener"),p=x("removeListener"),g=(e,s)=>{const t=h({eventName:e},s),a=()=>d(null,null,(function*(){const a=yield t;p({eventName:e,callbackId:a},s)})),r=new Promise((e=>t.then((()=>e({remove:a})))));return r.remove=()=>d(null,null,(function*(){yield a()})),r},j=new Proxy({},{get(e,s){switch(s){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?g:h;case"removeListener":return p;default:return x(s)}}});return a[e]=j,n.set(e,{name:e,proxy:j,platforms:new Set([...Object.keys(l),...m?[c]:[]])}),j},t.Exception=na,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),oa=la.registerPlugin;class ca{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let t=!1;this.listeners[e]||(this.listeners[e]=[],t=!0),this.listeners[e].push(s);const a=this.windowListeners[e];return a&&!a.registered&&this.addWindowListener(a),t&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:()=>d(this,null,(function*(){return this.removeListener(e,s)}))})}removeAllListeners(){return d(this,null,(function*(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}))}notifyListeners(e,s,t){const a=this.listeners[e];if(a)a.forEach((e=>e(s)));else if(t){let t=this.retainedEventArguments[e];t||(t=[]),t.push(s),this.retainedEventArguments[e]=t}}hasListeners(e){var s;return!!(null===(s=this.listeners[e])||void 0===s?void 0:s.length)}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:e=>{this.notifyListeners(s,e)}}}unimplemented(e="not implemented"){return new la.Exception(e,ra.Unimplemented)}unavailable(e="not available"){return new la.Exception(e,ra.Unavailable)}removeListener(e,s){return d(this,null,(function*(){const t=this.listeners[e];if(!t)return;const a=t.indexOf(s);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}))}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach((s=>{this.notifyListeners(e,s)})))}}const da=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ma=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ua extends ca{getCookies(){return d(this,null,(function*(){const e=document.cookie,s={};return e.split(";").forEach((e=>{if(0>=e.length)return;let[t,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=ma(t).trim(),a=ma(a).trim(),s[t]=a})),s}))}setCookie(e){return d(this,null,(function*(){try{const s=da(e.key),t=da(e.value),a="; expires="+(e.expires||"").replace("expires=",""),r=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?"domain="+e.url:"";document.cookie=`${s}=${t||""}${a}; path=${r}; ${i};`}catch(s){return Promise.reject(s)}}))}deleteCookie(e){return d(this,null,(function*(){try{document.cookie=e.key+"=; Max-Age=0"}catch(s){return Promise.reject(s)}}))}clearCookies(){return d(this,null,(function*(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}))}clearAllCookies(){return d(this,null,(function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}}))}}oa("CapacitorCookies",{web:()=>new ua});class xa extends ca{request(e){return d(this,null,(function*(){const s=((e,s={})=>{const t=Object.assign({method:e.method||"GET",headers:e.headers},s),a=((e={})=>{const s=Object.keys(e);return Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((t,a,r)=>(t[a]=e[s[r]],t)),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)t.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[t,a]of Object.entries(e.data||{}))s.set(t,a);t.body=s.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,t)=>{s.append(t,e)}));else for(const t of Object.keys(e.data))s.append(t,e.data[t]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(t.body=JSON.stringify(e.data));return t})(e,e.webFetchExtra),t=((e,s=!0)=>e?Object.entries(e).reduce(((e,t)=>{const[a,r]=t;let i,n;return Array.isArray(r)?(n="",r.forEach((e=>{i=s?encodeURIComponent(e):e,n+=`${a}=${i}&`})),n.slice(0,-1)):(i=s?encodeURIComponent(r):r,n=`${a}=${i}`),`${e}&${n}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=t?`${e.url}?${t}`:e.url,r=yield fetch(a,s),i=r.headers.get("content-type")||"";let n,l,{responseType:o="text"}=r.ok?e:{};switch(i.includes("application/json")&&(o="json"),o){case"arraybuffer":case"blob":l=yield r.blob(),n=yield(e=>d(null,null,(function*(){return new Promise(((s,t)=>{const a=new FileReader;a.onload=()=>{const e=a.result;s(0>e.indexOf(",")?e:e.split(",")[1])},a.onerror=e=>t(e),a.readAsDataURL(e)}))})))(l);break;case"json":n=yield r.json();break;default:n=yield r.text()}const c={};return r.headers.forEach(((e,s)=>{c[s]=e})),{data:n,headers:c,status:r.status,url:r.url}}))}get(e){return d(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}))}post(e){return d(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}))}put(e){return d(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}))}patch(e){return d(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}))}delete(e){return d(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}))}}oa("CapacitorHttp",{web:()=>new xa});const ha=oa("Device",{web:()=>A((()=>import("./web-B8t_HgGJ.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then((e=>new e.DeviceWeb))});var pa,ga,ja,va;(ga=pa||(pa={})).Dark="DARK",ga.Light="LIGHT",ga.Default="DEFAULT",(va=ja||(ja={})).None="NONE",va.Slide="SLIDE",va.Fade="FADE";const fa=oa("StatusBar");var ba,ya,Na,wa;(ya=ba||(ba={})).Dark="DARK",ya.Light="LIGHT",ya.Default="DEFAULT",(wa=Na||(Na={})).Body="body",wa.Ionic="ionic",wa.Native="native",wa.None="none";const ka=oa("Keyboard"),Ca=new class{constructor(){this.isSupported="serviceWorker"in navigator,this.registration=null,this.updateAvailable=!1}register(){return d(this,null,(function*(){if(!this.isSupported)return!1;try{return this.registration=yield navigator.serviceWorker.register("/sw.js",{scope:"/"}),this.registration.addEventListener("updatefound",(()=>{this.updateAvailable=!0})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.updateAvailable=!1,window.location.reload()})),navigator.serviceWorker.addEventListener("message",(e=>{})),!0}catch(e){return!1}}))}unregister(){return d(this,null,(function*(){if(this.registration)try{return yield this.registration.unregister(),!0}catch(e){return!1}return!1}))}update(){return d(this,null,(function*(){if(this.registration&&this.updateAvailable)try{return this.registration.active.postMessage({type:"SKIP_WAITING"}),!0}catch(e){return!1}return!1}))}clearCache(){return d(this,null,(function*(){if(this.registration)try{return this.registration.active.postMessage({type:"CLEAR_CACHE"}),!0}catch(e){return!1}return!1}))}getStatus(){var e;return{isSupported:this.isSupported,isRegistered:!!this.registration,updateAvailable:this.updateAvailable,scope:(null==(e=this.registration)?void 0:e.scope)||null}}},Sa=oa("PushNotifications",{}),Pa=()=>d(null,null,(function*(){try{"granted"===(yield Sa.requestPermissions()).receive&&(yield Sa.register(),Sa.addListener("registration",(e=>d(null,null,(function*(){try{const{data:{user:s}}=yield ie.auth.getUser();s&&(yield ie.from("user_push_tokens").upsert({user_id:s.id,token:e.value,platform:"mobile",created_at:(new Date).toISOString()}))}catch(s){}})))),Sa.addListener("pushNotificationReceived",(e=>{e.data})),Sa.addListener("pushNotificationActionPerformed",(e=>{var s;(null==(s=e.notification.data)?void 0:s.action)&&Aa(e.notification.data.action)})))}catch(e){}})),Aa=e=>{switch(e){case"new_message":window.location.href="/messages";break;case"new_listing":window.location.href="/marketplace";break;case"boost_expired":window.location.href="/boosts"}};let za=class extends p.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){var e;return this.state.hasError?this.props.fallbackRender?this.props.fallbackRender({error:this.state.error,resetErrorBoundary:()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()}}):m.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Une erreur est survenue"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"Erreur inconnue"}),m.jsxs(ne,{onClick:()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()},variant:"outline",children:[m.jsx(le,{className:"w-4 h-4 mr-2"}),"R√©essayer"]})]})}):this.props.children}};const Ea=({children:e})=>{const{reset:s}=z();return m.jsx(za,{onReset:s,fallbackRender:({error:e,resetErrorBoundary:s})=>m.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:m.jsxs(F,{className:"max-w-md",children:[m.jsx(oe,{className:"h-4 w-4"}),m.jsx(T,{children:"Erreur de chargement"}),m.jsxs(D,{className:"mt-2",children:["Une erreur est survenue lors du chargement des donn√©es.",m.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:e.message})]}),m.jsxs(ne,{onClick:s,className:"mt-4",variant:"outline",children:[m.jsx(le,{className:"w-4 h-4 mr-2"}),"R√©essayer"]})]})}),children:e})},La={theme:"light",notifications:{email:!0,push:!0,sms:!1},privacy:{profile_visibility:"public",show_online_status:!0,allow_messages:!0},security_settings:{two_factor_auth:!1,login_notifications:!0,session_timeout:30,require_password_change:!1,remember_me_enabled:!0,auto_logout:!0,max_session_age:7},customization:{primary_color:"#3B82F6",accent_color:"#10B981",font_size:"medium",animations_enabled:!0}},Ma=()=>((()=>{const{session:e,logout:s,isRememberMe:t}=ae(),{preferences:a}=(()=>{const{user:e}=ae(),[s,t]=h.useState(La),[a,r]=h.useState(!1),[i,n]=h.useState(null),o=()=>d(null,null,(function*(){if(!e)return t(La),void r(!1);try{r(!0),n(null);const s=localStorage.getItem("maximarket-preferences-"+e.id);if(s){const e=JSON.parse(s);t(l(l({},La),e))}else t(La)}catch(s){n(s.message),t(La)}finally{r(!1)}}));return h.useEffect((()=>{o()}),[e]),{preferences:s,loading:a,error:i,updatePreference:(a,r)=>d(null,null,(function*(){if(e)try{const i=l({},s),n=a.split(".");let o=i;for(let e=0;e<n.length-1;e++)o[n[e]]||(o[n[e]]={}),o=o[n[e]];o[n[n.length-1]]=r,t(i),localStorage.setItem("maximarket-preferences-"+e.id,JSON.stringify(i))}catch(i){n(i.message)}})),updateMultiplePreferences:a=>d(null,null,(function*(){if(e)try{const r=l({},s);Object.entries(a).forEach((([e,s])=>{const t=e.split(".");let a=r;for(let r=0;r<t.length-1;r++)a[t[r]]||(a[t[r]]={}),a=a[t[r]];a[t[t.length-1]]=s})),t(r),localStorage.setItem("maximarket-preferences-"+e.id,JSON.stringify(r))}catch(r){n(r.message)}})),resetPreferences:()=>d(null,null,(function*(){if(e)try{t(La),localStorage.removeItem("maximarket-preferences-"+e.id)}catch(s){n(s.message)}})),reloadPreferences:o}})(),r=h.useRef(null),i=h.useRef(Date.now()),n=h.useCallback((()=>{var n,l,o,c;if(i.current=Date.now(),r.current&&clearTimeout(r.current),!e)return;if(t)return;if(null!=(l=null==(n=null==a?void 0:a.security_settings)?void 0:n.auto_logout)&&!l)return;const d=6e4*(null!=(c=null==(o=null==a?void 0:a.security_settings)?void 0:o.session_timeout)?c:30);r.current=setTimeout((()=>{s()}),d)}),[e,t,a,s]),o=h.useCallback((()=>{n()}),[n]);h.useEffect((()=>{if(!e)return;const s=["mousedown","mousemove","keypress","keydown","scroll","touchstart","click","focus","input","change"];return s.forEach((e=>{document.addEventListener(e,o,{passive:!0})})),n(),()=>{s.forEach((e=>{document.removeEventListener(e,o)})),r.current&&clearTimeout(r.current)}}),[e,o,n]),h.useEffect((()=>{!e&&r.current&&clearTimeout(r.current)}),[e]),i.current})(),null),_a=oa("App",{web:()=>A((()=>import("./web-YAsli6da.js")),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then((e=>new e.AppWeb))}),qa=()=>{const e=g();return h.useEffect((()=>{d(null,null,(function*(){try{_a.addListener("backButton",(({canGoBack:s})=>{s?e(-1):_a.exitApp()})),yield fa.setStyle({style:"dark"}),yield fa.setBackgroundColor({color:"#ffffff"})}catch(s){}}))}),[e]),null},Fa=({children:e})=>ce?e:m.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#1a1a1a",color:"#fff",fontFamily:"Arial, sans-serif",padding:"20px",textAlign:"center"},children:m.jsxs("div",{children:[m.jsx("h1",{style:{color:"#e74c3c",marginBottom:"20px"},children:"‚ö†Ô∏è Configuration Supabase requise"}),m.jsx("p",{style:{marginBottom:"15px"},children:"L'application n√©cessite la configuration des variables Supabase."}),m.jsxs("div",{style:{backgroundColor:"#2c3e50",padding:"15px",borderRadius:"5px",textAlign:"left",marginBottom:"20px"},children:[m.jsx("strong",{children:"Variables requises dans Vercel :"}),m.jsxs("div",{style:{marginTop:"10px",fontFamily:"monospace"},children:["VITE_SUPABASE_URL",m.jsx("br",{}),"VITE_SUPABASE_ANON_KEY"]})]}),m.jsx("button",{onClick:()=>window.location.reload(),style:{backgroundColor:"#3498db",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer"},children:"üîÑ Recharger"})]})}),Ta=()=>{const[e,s]=h.useState(!1),[t,a]=h.useState(!1),[r,i]=h.useState(!0),{user:n,logout:l}=ae(),o=h.useMemo((()=>[{name:"Immobilier",path:"/immobilier",icon:m.jsx(de,{className:"mr-2 h-4 w-4"})},{name:"Automobile",path:"/automobile",icon:m.jsx(me,{className:"mr-2 h-4 w-4"})},{name:"Services",path:"/services",icon:m.jsx(ue,{className:"mr-2 h-4 w-4"})},{name:"Marketplace",path:"/marketplace",icon:m.jsx(xe,{className:"mr-2 h-4 w-4"})}]),[]),c=h.useMemo((()=>({closed:{opacity:0,x:"-100%"},open:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}}})),[]),u=h.useMemo((()=>"text-muted-foreground hover:text-primary transition-colors px-3 py-2 rounded-md text-sm font-medium flex items-center"),[]),x=h.useMemo((()=>"text-primary bg-primary/10"),[]);h.useEffect((()=>{const e=()=>{a(window.scrollY>20)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}),[]),h.useEffect((()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[r]);const p=h.useMemo((()=>m.jsx(j,{to:"/",className:"flex items-center space-x-2","aria-label":"Accueil MaxiMarket",children:m.jsx("span",{className:"text-2xl font-bold gradient-text",children:he.siteName})})),[]);return m.jsxs("header",{role:"banner","aria-label":"Navigation principale",children:[m.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 transition-all duration-300 "+(t||e?"bg-background/95 shadow-lg backdrop-blur-md":"bg-transparent"),role:"navigation","aria-label":"Menu principal",children:m.jsx("div",{className:"container mx-auto px-4 md:px-6",children:m.jsxs("div",{className:"flex items-center justify-between h-20",children:[m.jsx(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:p}),m.jsx("nav",{role:"navigation","aria-label":"Navigation desktop",className:"hidden md:flex items-center space-x-2 lg:space-x-4",children:o.map((e=>m.jsxs(v,{to:e.path,className:({isActive:e})=>`${u} ${e?x:""}`,"aria-current":({isActive:e})=>e?"page":void 0,children:[e.icon,e.name]},e.name)))}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>{i(!r)},"aria-label":"Changer de th√®me",type:"button",children:r?m.jsx(pe,{className:"h-5 w-5"}):m.jsx(ge,{className:"h-5 w-5"})}),m.jsx(ne,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Rechercher",type:"button",children:m.jsx(je,{className:"h-5 w-5"})}),!n&&m.jsxs(m.Fragment,{children:[m.jsx(ne,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:m.jsxs(j,{to:"/connexion","aria-label":"Se connecter",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Connexion"]})}),m.jsx(ne,{asChild:!0,className:"hidden md:inline-flex btn-gradient-secondary",children:m.jsxs(j,{to:"/inscription","aria-label":"S'inscrire",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Inscription"]})})]}),n&&"admin"===n.role?m.jsx(ne,{asChild:!0,className:"hidden md:inline-flex btn-secondary",children:m.jsxs(j,{to:"/admin","aria-label":"Acc√©der √† l'administration",children:[m.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Admin"]})}):n&&m.jsxs(m.Fragment,{children:[m.jsx(ne,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:m.jsxs(j,{to:"/messages","aria-label":"Acc√©der aux messages",children:[m.jsx(be,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Messages"]})}),m.jsx(ne,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:m.jsxs(j,{to:"/profile","aria-label":"Acc√©der √† mon compte",children:[m.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Mon Compte"]})})]}),m.jsx("div",{className:"md:hidden",children:m.jsx(ne,{variant:"ghost",size:"icon",onClick:()=>s(!e),"aria-label":e?"Fermer le menu":"Ouvrir le menu","aria-expanded":e,type:"button",children:e?m.jsx(ye,{className:"h-6 w-6"}):m.jsx(Ne,{className:"h-6 w-6"})})})]})]})})}),m.jsx($t,{children:e&&m.jsxs(Bt.nav,{variants:c,initial:"closed",animate:"open",exit:"closed",className:"md:hidden fixed inset-0 top-20 bg-background/95 backdrop-blur-md z-40 p-4 space-y-3 border-t border-border",role:"navigation","aria-label":"Menu mobile",children:[o.map((e=>m.jsxs(v,{to:e.path,onClick:()=>s(!1),className:({isActive:e})=>`${u} text-base w-full justify-start ${e?x:""}`,"aria-current":({isActive:e})=>e?"page":void 0,children:[e.icon,e.name]},e.name))),!n&&m.jsxs(m.Fragment,{children:[m.jsxs(v,{to:"/connexion",onClick:()=>s(!1),className:u+" text-base w-full justify-start","aria-label":"Se connecter",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Connexion"]}),m.jsxs(v,{to:"/inscription",onClick:()=>s(!1),className:u+" text-base w-full justify-start","aria-label":"S'inscrire",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Inscription"]})]}),n&&"admin"===n.role?m.jsxs(v,{to:"/admin",onClick:()=>s(!1),className:({isActive:e})=>`${u} text-base w-full justify-start ${e?x:""}`,"aria-label":"Acc√©der √† l'administration",children:[m.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Admin"]}):n&&m.jsxs(m.Fragment,{children:[m.jsxs(v,{to:"/messages",onClick:()=>s(!1),className:({isActive:e})=>`${u} text-base w-full justify-start ${e?x:""}`,"aria-label":"Acc√©der aux messages",children:[m.jsx(be,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Messages"]}),m.jsxs(v,{to:"/profile",onClick:()=>s(!1),className:({isActive:e})=>`${u} text-base w-full justify-start ${e?x:""}`,"aria-label":"Acc√©der √† mon compte",children:[m.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Mon Compte"]}),m.jsxs("button",{onClick:()=>d(null,null,(function*(){try{yield l(),s(!1)}catch(e){}})),className:u+" text-base w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50","aria-label":"Se d√©connecter",children:[m.jsx(we,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," D√©connexion"]})]})]})})]})},Da=()=>{const e=(new Date).getFullYear(),{toast:s}=Le(),[t,a]=h.useState(""),[r,i]=h.useState(!1),n=[{title:"Explorer",links:[{name:"Immobilier",path:"/immobilier"},{name:"Automobile",path:"/automobile"},{name:"Services Pro",path:"/services"},{name:"Marketplace",path:"/marketplace"}]},{title:"Entreprise",links:[{name:"√Ä Propos",path:"/a-propos"},{name:"Carri√®res",path:"/carrieres"},{name:"Presse",path:"/presse"},{name:"Blog",path:"/blog"}]},{title:"Support",links:[{name:"Centre d'Aide",path:"/aide"},{name:"Contactez-nous",path:"/contact"},{name:"FAQ",path:"/faq"},{name:"Politique de Confidentialit√©",path:"/politique-confidentialite"},{name:"Termes & Conditions",path:"/conditions-utilisation"}]}],l=[{name:"Facebook",icon:m.jsx(ke,{className:"h-5 w-5"}),path:he.socials.facebook},{name:"Instagram",icon:m.jsx(Ce,{className:"h-5 w-5"}),path:he.socials.instagram},{name:"TikTok",icon:m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),path:he.socials.tiktok}].filter((e=>e.path&&""!==e.path)),o=e=>d(null,null,(function*(){if(e.preventDefault(),t.trim()){i(!0);try{const e=yield Me.subscribe(t.trim());s({title:"Inscription r√©ussie !",description:e.message}),a("")}catch(r){s({title:"Erreur d'inscription",description:r.message||"Une erreur s'est produite",variant:"destructive"})}finally{i(!1)}}else s({title:"Email requis",description:"Veuillez saisir votre adresse email",variant:"destructive"})}));return m.jsx("footer",{className:"bg-card text-card-foreground border-t border-border",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 pt-8 pb-6",children:[m.jsxs("div",{className:"md:col-span-2 lg:col-span-1 xl:col-span-2 pr-4",children:[m.jsx(j,{to:"/",className:"flex items-center space-x-2 mb-4",children:m.jsx("span",{className:"text-2xl font-bold gradient-text",children:he.siteName})}),m.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"La plateforme N¬∞1 en Afrique de l'Ouest pour l'immobilier, l'automobile, les services et bien plus."}),m.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Restez inform√© de nos nouveaut√©s :"}),m.jsxs("form",{onSubmit:o,className:"flex items-center gap-2",children:[m.jsx(Se,{type:"email",placeholder:"Votre adresse e-mail",className:"flex-grow",value:t,onChange:e=>a(e.target.value),disabled:r}),m.jsx(ne,{type:"submit",size:"icon",className:"bg-primary hover:bg-primary/90",disabled:r,children:r?m.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):m.jsx(Pe,{className:"h-4 w-4"})})]})]}),n.map((e=>m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold mb-3",children:e.title}),m.jsx("ul",{className:"space-y-1",children:e.links.map((e=>m.jsx("li",{children:m.jsxs(j,{to:e.path,className:"text-sm text-muted-foreground hover:text-primary transition-colors flex items-center group",children:[e.name,m.jsx(Ae,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})},e.name)))})]},e.title)))]}),m.jsxs("div",{className:"md:hidden",children:[m.jsxs("div",{className:"pt-6 pb-4 text-center",children:[m.jsx(j,{to:"/",className:"flex items-center justify-center space-x-2 mb-3",children:m.jsx("span",{className:"text-xl font-bold gradient-text",children:he.siteName})}),m.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:"La plateforme N¬∞1 en Afrique de l'Ouest"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Newsletter :"}),m.jsxs("form",{onSubmit:o,className:"flex items-center gap-2 max-w-xs mx-auto",children:[m.jsx(Se,{type:"email",placeholder:"Email",className:"flex-grow text-sm",value:t,onChange:e=>a(e.target.value),disabled:r}),m.jsx(ne,{type:"submit",size:"sm",className:"bg-primary hover:bg-primary/90",disabled:r,children:r?m.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-white border-t-transparent"}):m.jsx(Pe,{className:"h-3 w-3"})})]})]})]}),m.jsx("div",{className:"pb-4",children:m.jsx("div",{className:"grid grid-cols-3 gap-4",children:n.map((e=>m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"font-semibold mb-2 text-sm text-primary",children:e.title}),m.jsx("div",{className:"space-y-1",children:e.links.slice(0,3).map((e=>m.jsx(j,{to:e.path,className:"block text-xs text-muted-foreground hover:text-primary transition-colors",children:e.name},e.name)))})]},e.title)))})}),m.jsxs("div",{className:"pb-4",children:[m.jsx("p",{className:"text-center font-semibold mb-3 text-sm text-primary",children:"Suivez-nous"}),m.jsx("div",{className:"flex justify-center space-x-6",children:l.length>0?l.map((e=>m.jsx(j,{to:e.path,target:"_blank",rel:"noopener noreferrer","aria-label":e.name,className:"text-muted-foreground hover:text-primary transition-colors p-2 rounded-full hover:bg-accent",children:e.icon},e.name))):m.jsx("p",{className:"text-xs text-muted-foreground",children:"R√©seaux sociaux en cours de configuration"})})]}),m.jsxs("div",{className:"pb-4",children:[m.jsx("p",{className:"text-center font-semibold mb-3 text-sm text-primary",children:"Contact"}),m.jsxs("div",{className:"flex justify-center space-x-6 text-xs text-muted-foreground",children:[m.jsxs(j,{to:"/contact",className:"flex items-center space-x-1 hover:text-primary",children:[m.jsx(ze,{className:"h-3 w-3"}),m.jsx("span",{children:"Contact"})]}),m.jsxs(j,{to:"/aide",className:"flex items-center space-x-1 hover:text-primary",children:[m.jsx(Ee,{className:"h-3 w-3"}),m.jsx("span",{children:"Aide"})]})]})]})]}),m.jsx("div",{className:"hidden md:block border-t border-border pt-6 pb-6",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[m.jsxs("p",{className:"text-xs text-muted-foreground mb-4 md:mb-0",children:["¬© ",e," ",he.siteName,". Tous droits r√©serv√©s."]}),m.jsx("div",{className:"flex space-x-4",children:l.length>0?l.map((e=>m.jsx(j,{to:e.path,target:"_blank",rel:"noopener noreferrer","aria-label":e.name,className:"text-muted-foreground hover:text-primary transition-colors",children:e.icon},e.name))):m.jsx("p",{className:"text-xs text-muted-foreground",children:"R√©seaux sociaux en cours de configuration"})})]})}),m.jsx("div",{className:"md:hidden border-t border-border pt-4 pb-6 text-center",children:m.jsxs("p",{className:"text-xs text-muted-foreground",children:["¬© ",e," ",he.siteName,". Tous droits r√©serv√©s."]})})]})})},Ia=()=>{const{user:e}=ae(),[s,t]=h.useState(!1);h.useEffect((()=>{d(null,null,(function*(){try{const e=yield ha.getInfo();t("web"!==e.platform)}catch(e){t(!1)}}))}),[]);const a=[{name:"Accueil",path:"/",icon:de},{name:"Immobilier",path:"/immobilier",icon:de},{name:"Auto",path:"/automobile",icon:me},{name:"Services",path:"/services",icon:ue},{name:"Marketplace",path:"/marketplace",icon:xe}];return s?m.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-md border-t border-border z-50",children:m.jsxs("div",{className:"flex items-center justify-around px-2 py-2",children:[a.map((e=>{const s=e.icon;return m.jsxs(v,{to:e.path,className:({isActive:e})=>"flex flex-col items-center justify-center w-full py-2 px-1 touch-target transition-colors "+(e?"text-primary":"text-muted-foreground hover:text-primary"),"aria-label":e.name,children:[m.jsx(s,{className:"h-6 w-6 mb-1"}),m.jsx("span",{className:"text-xs font-medium",children:e.name})]},e.name)})),e?m.jsxs(v,{to:"/messages",className:({isActive:e})=>"flex flex-col items-center justify-center w-full py-2 px-1 touch-target transition-colors "+(e?"text-primary":"text-muted-foreground hover:text-primary"),"aria-label":"Messages",children:[m.jsx(be,{className:"h-6 w-6 mb-1"}),m.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}):m.jsxs(v,{to:"/connexion",className:({isActive:e})=>"flex flex-col items-center justify-center w-full py-2 px-1 touch-target transition-colors "+(e?"text-primary":"text-muted-foreground hover:text-primary"),"aria-label":"Connexion",children:[m.jsx(_e,{className:"h-6 w-6 mb-1"}),m.jsx("span",{className:"text-xs font-medium",children:"Connexion"})]})]})}):null},Ra=({children:e})=>{const[s,t]=h.useState(!1);return h.useEffect((()=>{d(null,null,(function*(){try{const e=yield ha.getInfo();t("web"!==e.platform)}catch(e){t(!1)}}))}),[]),m.jsx("div",{className:s?"pb-20":"",children:e})},Va=()=>{const e=u(),[s,t]=h.useState(!1),a=h.useCallback((()=>{t(window.scrollY>20)}),[]);h.useEffect((()=>(window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a))),[a]),h.useEffect((()=>{window.scrollTo(0,0)}),[e.pathname]);const r=h.useMemo((()=>qe("fixed top-0 left-0 right-0 z-50 transition-all duration-300",s?"py-3 glass-effect":"py-5 bg-transparent")),[s]),i=h.useMemo((()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}})),[]);return m.jsxs("div",{className:"min-h-screen flex flex-col bg-background grid-pattern",children:[m.jsx("header",{className:r,role:"banner","aria-label":"En-t√™te principal",children:m.jsx(Ta,{})}),m.jsx("main",{className:qe("flex-grow","/"===e.pathname?"":"pt-24"),role:"main","aria-label":"Contenu principal",id:"main-content",children:m.jsx(Ra,{children:m.jsx(Bt.div,o(l({},i),{children:m.jsx(f,{})}),e.pathname)})}),m.jsx(Da,{}),m.jsx(Ia,{})]})},Oa=()=>{const{login:e}=ae(),{register:s,handleSubmit:t,formState:{errors:a,isSubmitting:r}}=Xt(),[i,n]=h.useState(!1);return m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Connexion"}),m.jsx(Ie,{children:"Connectez-vous √† votre compte"})]}),m.jsx(Re,{children:m.jsxs("form",{onSubmit:t((s=>d(null,null,(function*(){yield e(s,i)})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"email",children:"Adresse e-mail"}),m.jsxs("div",{className:"relative",children:[m.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'adresse e-mail est requise",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse e-mail invalide"}})))]}),a.email&&m.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"password",children:"Mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"password",type:"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"pl-10"},s("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caract√®res"}})))]}),a.password&&m.jsx("p",{className:"text-sm text-destructive",children:a.password.message})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(I,{id:"rememberMe",checked:i,onCheckedChange:n}),m.jsx(Ve,{htmlFor:"rememberMe",className:"text-sm font-normal cursor-pointer",children:"Se souvenir de moi"})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:r,children:r?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion en cours..."]}):"Se connecter"})]})}),m.jsxs(Ue,{className:"flex flex-col space-y-2",children:[m.jsx(j,{to:"/mot-de-passe-oublie",className:"text-sm text-primary hover:underline",children:"Mot de passe oubli√© ?"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",m.jsx(j,{to:"/inscription",className:"text-primary hover:underline",children:"S'inscrire"})]})]})]})})},Ua=()=>{const{user:e,loading:s}=ae(),t=g(),a=u();return h.useEffect((()=>{var r;if(!s&&e){const s=(null==(r=a.state)?void 0:r.from)||("admin"===e.role?"/admin":"/");t(s,{replace:!0})}}),[e,s,t,a]),s||e?null:m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx(Oa,{})})},Ba=()=>{const{register:e}=ae(),{register:s,handleSubmit:t,watch:a,formState:{errors:r,isSubmitting:i}}=Xt(),[n,o]=h.useState({shown:!1,email:""}),[c,u]=h.useState(!1),[x,p]=h.useState(null),g=a("password");return n.shown?m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Be,{className:"h-5 w-5 text-green-600"}),m.jsx(De,{children:"Inscription r√©ussie"})]}),m.jsx(Ie,{children:"V√©rifiez votre email pour confirmer votre compte."})]}),m.jsxs(Re,{className:"space-y-4",children:[m.jsxs("div",{className:"text-sm text-muted-foreground",children:["Nous avons envoy√© un lien de confirmation √†:",m.jsx("div",{className:"mt-1 font-medium text-foreground",children:n.email})]}),x&&m.jsx("div",{className:"text-sm",children:x}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ne,{type:"button",onClick:()=>d(null,null,(function*(){try{u(!0),p(null);const{error:e}=yield ie.auth.resend({type:"signup",email:n.email,options:{emailRedirectTo:window.location.origin+"/auth/callback"}});if(e)throw e;p("Un nouvel email de confirmation a √©t√© envoy√©.")}catch(e){p(e.message||"Impossible d'envoyer l'email de confirmation.")}finally{u(!1)}})),disabled:c,className:"inline-flex items-center",children:c?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):m.jsxs(m.Fragment,{children:[m.jsx($e,{className:"mr-2 h-4 w-4"}),"Renvoyer l'email"]})}),m.jsx(ne,{type:"button",variant:"outline",onClick:()=>o({shown:!1,email:""}),children:"Utiliser une autre adresse"})]})]}),m.jsxs(Ue,{className:"flex flex-col items-start gap-2",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©j√† confirm√© ?"}),m.jsx(j,{to:"/connexion",className:"text-primary hover:underline text-sm",children:"Se connecter"})]})]})}):m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Inscription"}),m.jsx(Ie,{children:"Cr√©ez votre compte MaxiMarket"})]}),m.jsx(Re,{children:m.jsxs("form",{onSubmit:t((s=>d(null,null,(function*(){const t=yield e(s);t&&t.needsConfirmation&&o({shown:!0,email:s.email})})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"firstName",children:"Pr√©nom"}),m.jsxs("div",{className:"relative",children:[m.jsx(_e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"firstName",type:"text",placeholder:"John",className:"pl-10"},s("firstName",{required:"Le pr√©nom est requis",minLength:{value:2,message:"Le pr√©nom doit contenir au moins 2 caract√®res"}})))]}),r.firstName&&m.jsx("p",{className:"text-sm text-destructive",children:r.firstName.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"lastName",children:"Nom"}),m.jsxs("div",{className:"relative",children:[m.jsx(_e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"lastName",type:"text",placeholder:"Doe",className:"pl-10"},s("lastName",{required:"Le nom est requis",minLength:{value:2,message:"Le nom doit contenir au moins 2 caract√®res"}})))]}),r.lastName&&m.jsx("p",{className:"text-sm text-destructive",children:r.lastName.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"email",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),r.email&&m.jsx("p",{className:"text-sm text-destructive",children:r.email.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"phoneNumber",children:"T√©l√©phone"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ee,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"phoneNumber",type:"tel",placeholder:"+221 77 123 45 67",className:"pl-10"},s("phoneNumber",{required:"Le num√©ro de t√©l√©phone est requis",pattern:{value:/^\+?[1-9]\d{1,14}$/,message:"Num√©ro de t√©l√©phone invalide"}})))]}),r.phoneNumber&&m.jsx("p",{className:"text-sm text-destructive",children:r.phoneNumber.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"password",children:"Mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"password",type:"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"pl-10"},s("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caract√®res"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caract√®re sp√©cial"}})))]}),r.password&&m.jsx("p",{className:"text-sm text-destructive",children:r.password.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"confirmPassword",type:"password",placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"pl-10"},s("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:e=>e===g||"Les mots de passe ne correspondent pas"})))]}),r.confirmPassword&&m.jsx("p",{className:"text-sm text-destructive",children:r.confirmPassword.message})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:i,children:i?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Inscription en cours..."]}):"S'inscrire"})]})}),m.jsx(Ue,{children:m.jsxs("p",{className:"text-sm text-muted-foreground",children:["D√©j√† un compte ?"," ",m.jsx(j,{to:"/connexion",className:"text-primary hover:underline",children:"Se connecter"})]})})]})})},$a=()=>m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx(Ba,{})}),Xa=()=>{const{toast:e}=Le(),{register:s,handleSubmit:t,formState:{errors:a,isSubmitting:r}}=Xt();return m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"w-full max-w-md",children:m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Mot de passe oubli√©"}),m.jsx(Ie,{children:"Entrez votre adresse email pour recevoir les instructions de r√©initialisation"})]}),m.jsx(Re,{children:m.jsxs("form",{onSubmit:t((s=>d(null,null,(function*(){try{e({title:"Email envoy√©",description:"Si un compte existe avec cet email, vous recevrez les instructions de r√©initialisation."})}catch(s){e({title:"Erreur",description:s.message,variant:"destructive"})}})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"email",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),a.email&&m.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:r,children:r?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer les instructions"})]})}),m.jsx(Ue,{children:m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Retour √† la"," ",m.jsx(j,{to:"/connexion",className:"text-primary hover:underline",children:"page de connexion"})]})})]})})})},Ha=()=>{const{toast:e}=Le(),s=g(),[t]=b(),a=t.get("token"),{register:r,handleSubmit:i,watch:n,formState:{errors:o,isSubmitting:c}}=Xt(),u=n("password");return a?m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"w-full max-w-md",children:m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"R√©initialisation du mot de passe"}),m.jsx(Ie,{children:"Choisissez votre nouveau mot de passe"})]}),m.jsx(Re,{children:m.jsxs("form",{onSubmit:i((t=>d(null,null,(function*(){try{if(!a)throw Error("Token de r√©initialisation manquant");e({title:"Mot de passe r√©initialis√©",description:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe."}),s("/connexion")}catch(t){e({title:"Erreur",description:t.message,variant:"destructive"})}})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"password",children:"Nouveau mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"password",type:"password",className:"pl-10"},r("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caract√®res"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caract√®re sp√©cial"}})))]}),o.password&&m.jsx("p",{className:"text-sm text-destructive",children:o.password.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"confirmPassword",type:"password",className:"pl-10"},r("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:e=>e===u||"Les mots de passe ne correspondent pas"})))]}),o.confirmPassword&&m.jsx("p",{className:"text-sm text-destructive",children:o.confirmPassword.message})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:c,children:c?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"R√©initialisation en cours..."]}):"R√©initialiser le mot de passe"})]})})]})})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx(Fe,{children:m.jsxs(Te,{children:[m.jsx(De,{className:"text-destructive",children:"Lien invalide"}),m.jsx(Ie,{children:"Le lien de r√©initialisation est invalide ou a expir√©. Veuillez faire une nouvelle demande de r√©initialisation."})]})})})},Wa=({title:e,value:s,icon:t,trend:a,trendValue:r,color:i="blue",className:n})=>m.jsx(Fe,{className:qe(`bg-gradient-to-br ${{blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600",teal:"from-teal-500 to-teal-600",indigo:"from-indigo-500 to-indigo-600",pink:"from-pink-500 to-pink-600"}[i]} text-white overflow-hidden`,n),children:m.jsx(Re,{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm opacity-90 mb-1",children:e}),m.jsx("p",{className:"text-2xl font-bold",children:s}),a&&m.jsx("div",{className:"flex items-center mt-2",children:m.jsxs(Xe,{variant:"secondary",className:qe("text-xs bg-white/20 text-white border-0","up"===a?"text-green-200":"text-red-200"),children:["up"===a?"‚Üó":"‚Üò"," ",r]})})]}),t&&m.jsx("div",{className:qe("p-3 rounded-full bg-white/10",{blue:"text-blue-200",green:"text-green-200",purple:"text-purple-200",orange:"text-orange-200",red:"text-red-200",teal:"text-teal-200",indigo:"text-indigo-200",pink:"text-pink-200"}[i]),children:m.jsx(t,{className:"h-6 w-6"})})]})})}),Ga=e=>{var s=e,{src:t,alt:a="",className:r="",placeholder:i=null,errorPlaceholder:n=null,onLoad:o=null,onError:d=null,priority:u="medium",showSkeleton:x=!0,enableAnimations:p=!0}=s,g=c(s,["src","alt","className","placeholder","errorPlaceholder","onLoad","onError","priority","showSkeleton","enableAnimations"]);const[j,v]=h.useState(!1),f={rootMargin:"high"===u?"50px":"medium"===u?"100px":"150px",threshold:.1},{imgRef:b,isLoaded:y,isInView:N,error:w}=((e,s={})=>{const[t,a]=h.useState(!1),[r,i]=h.useState(!1),[n,o]=h.useState(null),c=h.useRef(null),d=h.useRef(null),m=l({root:null,rootMargin:"50px",threshold:.1},s),u=h.useCallback((()=>{if(!e||t)return;const s=new Image;s.onload=()=>{a(!0),o(null)},s.onerror=()=>{o("Erreur lors du chargement de l'image"),a(!1)},s.src=e}),[e,t]);return h.useEffect((()=>{if(!c.current||!e)return;const s=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(i(!0),u(),s.unobserve(e.target))}))}),m);return d.current=s,s.observe(c.current),()=>{d.current&&d.current.disconnect()}}),[e,u,m]),h.useEffect((()=>()=>{d.current&&d.current.disconnect()}),[]),{imgRef:c,isLoaded:t,isInView:r,error:n}})(t,f),k=h.useCallback((()=>{v(!0),d&&d()}),[d]),C=h.useCallback((()=>{o&&o()}),[o]),S=m.jsx("div",{className:qe("bg-gradient-to-br from-muted to-muted/50 animate-pulse flex items-center justify-center",r),children:m.jsx("div",{className:"w-8 h-8 text-muted-foreground/50",children:m.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),P=m.jsx("div",{className:qe("bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center text-muted-foreground/50",r),children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-6 h-6 mx-auto mb-1",children:m.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),m.jsx("span",{className:"text-xs",children:"Image non disponible"})]})});return w||j?n||P:N?y?m.jsx($t,{children:m.jsx(Bt.img,l({ref:b,src:t,alt:a,className:qe("w-full h-full object-cover transition-all duration-300",p&&"hover:scale-105",r),onLoad:C,onError:k,initial:p?{opacity:0,scale:1.05}:{opacity:0},animate:p?{opacity:1,scale:1}:{opacity:1},transition:p?{duration:.4,ease:"easeOut"}:{duration:.2},loading:"high"===u?"eager":"lazy",decoding:"async"},g))}):m.jsx("div",{ref:b,className:r,children:m.jsx($t,{children:m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:i||S})})}):m.jsx("div",{ref:b,className:r,children:i||S})},Ja=p.memo((({images:e=[],title:s="Galerie d'images",className:t=""})=>{const[a,r]=h.useState(0),[i,n]=h.useState(!1),l=e.filter((e=>{return null!==((s=e)?"string"==typeof s?s:(null==s?void 0:s.url)?s.url:(null==s?void 0:s.file)?URL.createObjectURL(s.file):(null==s?void 0:s.src)?s.src:(null==s?void 0:s.displayUrl)?s.displayUrl:null:null);var s}));if(h.useEffect((()=>{if(!i||1>=l.length)return;const e=setInterval((()=>{r((e=>(e+1)%l.length))}),3e3);return()=>clearInterval(e)}),[i,l.length]),!l||0===l.length)return m.jsx("div",{className:"relative bg-muted flex items-center justify-center "+t,children:m.jsx("div",{className:"text-center text-muted-foreground",children:m.jsx("p",{className:"text-xs sm:text-sm",children:"Aucune image"})})});const o=l[a];return m.jsxs("div",{className:"relative bg-muted overflow-hidden group "+t,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[m.jsx($t,{mode:"wait",children:m.jsx(Bt.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"w-full h-full",children:m.jsx(Ga,{src:o,alt:`${s} - Image ${a+1}`,className:"w-full h-full object-cover",priority:"medium",showSkeleton:!0,enableAnimations:!0})},a)}),l.length>1&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:e=>{e.stopPropagation(),l.length>0&&r((e=>(e-1+l.length)%l.length))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 z-10","aria-label":"Image pr√©c√©dente",children:m.jsx(He,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),m.jsx("button",{onClick:e=>{e.stopPropagation(),l.length>0&&r((e=>(e+1)%l.length))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 z-10","aria-label":"Image suivante",children:m.jsx(We,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),l.length>1&&m.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 sm:gap-1.5",children:l.map(((e,s)=>m.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{e>=0&&e<l.length&&r(e)})(s)},className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all duration-200 "+(s===a?"bg-white":"bg-white/50 hover:bg-white/75"),"aria-label":"Aller √† l'image "+(s+1)},s)))})]})})),Ka=({listing:e,onEdit:s,onDelete:t,onRefresh:a,onBoost:r,showActions:i=!0})=>{var n,l;return m.jsxs(Fe,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 group",children:[m.jsxs("div",{className:"relative",children:[m.jsx(Ja,{images:e.images||[e.image],title:e.title,className:"h-48"}),m.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[m.jsx(Xe,{variant:"secondary",className:qe("text-xs font-medium",(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"expired":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.status)),children:(e=>{switch(e){case"active":return"Active";case"pending":return"En attente";case"expired":return"Expir√©e";case"draft":return"Brouillon";default:return e}})(e.status)}),e.featured&&m.jsx(Xe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 text-xs",children:"‚≠ê Premium"})]}),m.jsx("div",{className:"absolute top-2 left-2",children:m.jsx("span",{className:"text-2xl",children:(e=>{let s="";if("string"==typeof e)s=e;else{if(!e||"object"!=typeof e||!e.name)return"üì¶";s=e.name}switch(s.toLowerCase()){case"immobilier":return"üè†";case"automobile":return"üöó";case"services":return"üîß";case"marketplace":return"üõçÔ∏è";default:return"üì¶"}})(e.category)})})]}),m.jsx(Re,{className:"p-4",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-lg mb-1 line-clamp-2",children:e.title}),m.jsx("p",{className:"text-primary font-bold text-lg",children:e.price})]}),m.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ge,{className:"h-3 w-3 mr-1"}),e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:(null==(n=e.location)?void 0:n.city)||(null==(l=e.location)?void 0:l.country)||"Localisation non sp√©cifi√©e"]}),m.jsxs("span",{className:"flex items-center",children:[m.jsx(Je,{className:"h-3 w-3 mr-1"}),e.createdAt||e.created_at?new Date(e.createdAt||e.created_at).toLocaleDateString("fr-FR"):"Date inconnue"]})]}),m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ke,{className:"h-4 w-4 mr-1"}),e.views||e.views_count||0," vues"]}),m.jsxs("span",{className:"flex items-center",children:[m.jsx(Qe,{className:"h-4 w-4 mr-1"}),e.contacts||e.contacts_count||0," contacts"]})]}),e.boosted&&m.jsxs(Xe,{variant:"outline",className:"text-xs",children:[m.jsx(Ye,{className:"h-3 w-3 mr-1"}),"Boost√©"]})]}),i&&m.jsxs("div",{className:"flex space-x-2 pt-2 border-t",children:[m.jsxs(ne,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>null==s?void 0:s(e),children:[m.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Modifier"]}),"active"===e.status&&m.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>null==r?void 0:r(e),className:"flex-1",children:[m.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Booster"]}),m.jsx(ne,{size:"sm",variant:"outline",onClick:()=>null==a?void 0:a(e),children:m.jsx(le,{className:"h-4 w-4"})}),m.jsx(ne,{size:"sm",variant:"outline",onClick:()=>null==t?void 0:t(e),className:"text-red-600 hover:text-red-700",children:m.jsx(es,{className:"h-4 w-4"})})]})]})})]})},Qa=({conversation:e,onReply:s,onArchive:t,onDelete:a,onMarkAsRead:r,onStar:i,showActions:n=!0})=>{const{user:l}=ae();if("welcome-message"===e.id||"system"===e.type||e.is_system)return m.jsx(Fe,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200 shadow-sm",children:m.jsx(Re,{className:"p-4",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"relative",children:m.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-white text-lg",children:"ü§ñ"})})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx("h3",{className:"font-semibold text-blue-800",children:"AIDA"}),m.jsx(Xe,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"Syst√®me"})]}),m.jsx("p",{className:"text-gray-700 whitespace-pre-line text-sm leading-relaxed",children:e.content||"Bienvenue sur MaxiMarket !"}),m.jsx("div",{className:"flex items-center space-x-1 mt-2",children:m.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),"√Ä l'instant"]})})]})]})})});const o=e.messages&&e.messages.length>0?e.messages[e.messages.length-1]:null;let c=null,d="unknown";l&&e.participant1&&e.participant2?e.participant1_id===l.id?(c=e.participant2,d="participant2"):e.participant2_id===l.id?(c=e.participant1,d="participant1"):"00000000-0000-0000-0000-000000000000"===e.participant1_id?(c=e.participant2,d="assistant_participant2"):"00000000-0000-0000-0000-000000000000"===e.participant2_id?(c=e.participant1,d="assistant_participant1"):(c=e.participant1,d="fallback_participant1"):e.participant1?(c=e.participant1,d="only_participant1"):e.participant2&&(c=e.participant2,d="only_participant2");const u=(e=>{if(!e)return"Utilisateur inconnu";if(e.first_name&&e.last_name)return`${e.first_name} ${e.last_name}`;if(e.first_name)return e.first_name;if(e.last_name)return e.last_name;if(e.name)return e.name;if(e.email){const s=e.email.split("@")[0];return s.charAt(0).toUpperCase()+s.slice(1)}return"Utilisateur"})(c),x=e.messages&&e.messages.some((e=>!e.is_read&&e.sender_id!==(null==l?void 0:l.id))),h=!c||!c.first_name&&!c.last_name&&!c.name;return m.jsx(Fe,{className:qe("transition-all duration-200 hover:shadow-md",x&&"bg-blue-50 border-blue-200",e.starred&&"bg-yellow-50 border-yellow-200",h&&"bg-orange-50 border-orange-200"),children:m.jsx(Re,{className:"p-4",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx(R,{user:c,size:"lg",className:"flex-shrink-0"}),x&&m.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 border-2 border-white rounded-full"})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-start justify-between mb-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("h3",{className:"font-semibold text-sm",children:u}),h&&m.jsxs(Xe,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:[m.jsx(oe,{className:"h-3 w-3 mr-1"}),"Donn√©es manquantes"]}),x&&m.jsx(Xe,{variant:"destructive",className:"text-xs",children:"Nouveau"})]}),m.jsxs("div",{className:"flex items-center space-x-1",children:[e.starred&&m.jsx(ts,{className:"h-4 w-4 text-yellow-500 fill-current"}),m.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),(e=>{if(!e)return"√Ä l'instant";try{const s=new Date(e),t=new Date,a=Math.floor((t-s)/36e5),r=Math.floor((t-s)/864e5);return 1>a?"√Ä l'instant":24>a?`Il y a ${a}h`:7>r?`Il y a ${r}j`:s.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}catch(s){return"√Ä l'instant"}})(e.last_message_at)]})]})]}),o&&m.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:o.content||"Aucun contenu"}),m.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[e.listing&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(de,{className:"h-3 w-3 mr-1"}),e.listing.title||"Annonce"]}),e.messages&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(be,{className:"h-3 w-3 mr-1"}),e.messages.length," message",e.messages.length>1?"s":""]})]})}),n&&m.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t",children:[m.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>null==s?void 0:s(e),className:"flex-1",children:[m.jsx(as,{className:"h-3 w-3 mr-1"}),"R√©pondre"]}),m.jsxs(ne,{size:"sm",variant:"outline",onClick:()=>null==r?void 0:r(e),className:"flex-1",children:[m.jsx(Ke,{className:"h-3 w-3 mr-1"}),"Marquer lu"]}),m.jsx(ne,{size:"sm",variant:"outline",onClick:()=>null==t?void 0:t(e),children:m.jsx(rs,{className:"h-3 w-3"})}),m.jsx(ne,{size:"sm",variant:"outline",onClick:()=>null==i?void 0:i(e),children:m.jsx(ts,{className:"h-3 w-3"})})]})]})]})})})},Ya=({activities:e=[]})=>{const s=e=>{switch(e){case"view":return m.jsx(Ke,{className:"h-4 w-4"});case"message":return m.jsx(be,{className:"h-4 w-4"});case"favorite":return m.jsx(cs,{className:"h-4 w-4"});case"boost":return m.jsx(Ye,{className:"h-4 w-4"});case"approval":return m.jsx(os,{className:"h-4 w-4"});case"warning":return m.jsx(ls,{className:"h-4 w-4"});case"info":return m.jsx(ns,{className:"h-4 w-4"});default:return m.jsx(is,{className:"h-4 w-4"})}},t=e=>{switch(e){case"view":case"info":return"bg-blue-50 border-blue-200";case"message":case"approval":return"bg-green-50 border-green-200";case"favorite":return"bg-pink-50 border-pink-200";case"boost":return"bg-purple-50 border-purple-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}},a=e=>{switch(e){case"view":case"info":return"text-blue-500";case"message":case"approval":return"text-green-500";case"favorite":return"text-pink-500";case"boost":return"text-purple-500";case"warning":return"text-yellow-500";default:return"text-gray-500"}};return 0===e.length?m.jsxs(Fe,{children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center space-x-2",children:[m.jsx(Ye,{className:"h-5 w-5"}),m.jsx("span",{children:"Activit√© R√©cente"})]})}),m.jsx(Re,{children:m.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[m.jsx(Ye,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{className:"text-sm",children:"Aucune activit√© r√©cente"}),m.jsx("p",{className:"text-xs mt-1",children:"Vos activit√©s appara√Ætront ici"})]})})]}):m.jsxs(Fe,{children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center space-x-2",children:[m.jsx(Ye,{className:"h-5 w-5"}),m.jsx("span",{children:"Activit√© R√©cente"})]})}),m.jsxs(Re,{children:[m.jsx("div",{className:"space-y-4",children:e.map((e=>m.jsxs("div",{className:qe("flex items-start space-x-3 p-3 rounded-lg transition-colors",t(e.type),e.unread&&"bg-blue-50 border-blue-200"),children:[m.jsx("div",{className:qe("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",t(e.type).replace("border-","bg-").replace("-50","-100")),children:m.jsx("div",{className:a(e.type),children:s(e.type)})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-medium text-foreground",children:e.title}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),m.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[e.listing&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ke,{className:"h-3 w-3 mr-1"}),e.listing]}),e.location&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ge,{className:"h-3 w-3 mr-1"}),e.location]}),e.sender&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(_e,{className:"h-3 w-3 mr-1"}),e.sender]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[e.unread&&m.jsx(Xe,{variant:"destructive",className:"text-xs",children:"Nouveau"}),m.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[m.jsx(Je,{className:"h-3 w-3 mr-1"}),e.time]})]})]})})]},e.id)))}),0===activitiesToShow.length&&m.jsxs("div",{className:"text-center py-8",children:[m.jsx(is,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune activit√©"}),m.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore d'activit√© r√©cente."})]})]})]})},Za=({stats:e={}})=>{const s=[{id:"new-listing",title:"Nouvelle Annonce",description:"Publier une nouvelle annonce",icon:ds,color:"from-primary to-blue-600",href:"/creer-annonce",badge:null},{id:"messages",title:"Messages",description:"Voir vos conversations",icon:be,color:"from-green-500 to-green-600",href:"/messages",badge:e.unreadMessages||0},{id:"favorites",title:"Mes Favoris",description:"Annonces sauvegard√©es",icon:cs,color:"from-pink-500 to-pink-600",href:"/favorites",badge:e.totalFavorites||0},{id:"analytics",title:"Analytics",description:"Voir vos statistiques",icon:Ye,color:"from-purple-500 to-purple-600",href:"/admin/analytics",badge:null},{id:"settings",title:"Param√®tres",description:"Configurer votre compte",icon:fe,color:"from-gray-500 to-gray-600",href:"/profile",badge:null},{id:"support",title:"Support",description:"Besoin d'aide ?",icon:ms,color:"from-orange-500 to-orange-600",href:"/aide",badge:null}];return m.jsxs(Fe,{children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center space-x-2",children:[m.jsx(ds,{className:"h-5 w-5"}),m.jsx("span",{children:"Actions Rapides"})]})}),m.jsx(Re,{children:m.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map((e=>m.jsx(ne,{variant:"outline",className:`h-12 bg-gradient-to-r ${e.color} hover:from-primary/90 hover:to-blue-600/90 text-white border-0 transition-all duration-200 hover:scale-105`,asChild:!0,children:m.jsxs(j,{to:e.href,className:"flex items-center space-x-2",children:[m.jsx(e.icon,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm font-medium",children:e.title}),e.badge&&e.badge>0&&m.jsx(Xe,{variant:"secondary",className:"ml-auto bg-white/20 text-white border-0",children:e.badge})]})},e.id)))})})]})},er=()=>{var e,s,t,a;const{user:r,loading:i,logout:n}=ae(),{toast:c}=Le(),u=g(),[x,p]=h.useState(!1),{activeTab:v,handleTabChange:f}=((e="dashboard")=>{const[s,t]=b(),[a,r]=h.useState(e);return h.useEffect((()=>{const e=s.get("tab");e&&r(e)}),[s]),{activeTab:a,handleTabChange:e=>{r(e),t({tab:e})},setActiveTab:r}})("dashboard"),[y,N]=h.useState([]),[w,k]=h.useState([]),[C,S]=h.useState([]),[P,A]=h.useState({totalListings:0,activeListings:0,totalViews:0,totalContacts:0,unreadMessages:0,totalFavorites:0}),[z,E]=h.useState({isOpen:!1,item:null}),[L,M]=h.useState({isOpen:!1,item:null}),[_,q]=h.useState({isOpen:!1,item:null}),[F,T]=h.useState({isOpen:!1,item:null}),[D,I]=h.useState(1),[R,W]=h.useState(1),[G]=h.useState(6),{register:J,handleSubmit:K,formState:{errors:Q}}=Xt({defaultValues:{firstName:(null==r?void 0:r.firstName)||"",lastName:(null==r?void 0:r.lastName)||"",email:(null==r?void 0:r.email)||"",phoneNumber:(null==r?void 0:r.phoneNumber)||""}});h.useEffect((()=>{d(null,null,(function*(){if(r)try{const t=yield ys.getUserListings();N(t);let a=[];try{a=yield Ns.getUserFavorites()}catch(e){}S(a);let r=[];try{r=yield ws.getUserConversations()}catch(s){}k(r);const i=t.filter((e=>"approved"===e.status)).length,n=t.reduce(((e,s)=>e+(s.views_count||0)),0),l=r.filter((e=>!e.read)).length;A({totalListings:t.length,activeListings:i,totalViews:n,totalContacts:r.length,unreadMessages:l,totalFavorites:a.length}),W(Math.ceil(t.length/G))}catch(t){c({title:"Erreur",description:"Impossible de charger vos donn√©es",variant:"destructive"})}}))}),[r,c]);const Y=e=>{M({isOpen:!0,item:e})},Z=e=>{E({isOpen:!0,item:e})},ee=e=>{T({isOpen:!0,item:e})},se=e=>{q({isOpen:!0,item:e})},te=e=>{u("/messages?conversation="+e.id)},ie=e=>d(null,null,(function*(){try{yield ws.archiveConversation(e.id);const s=w.map((s=>s.id===e.id?o(l({},s),{is_archived:!0}):s));k(s),c({title:"Conversation archiv√©e",description:"La conversation a √©t√© archiv√©e"})}catch(s){c({title:"Erreur",description:"Impossible d'archiver la conversation",variant:"destructive"})}})),le=e=>d(null,null,(function*(){try{yield ws.markMessagesAsRead(e.id);const s=w.map((s=>{var t;return s.id===e.id?o(l({},s),{messages:null==(t=s.messages)?void 0:t.map((e=>o(l({},e),{is_read:!0})))}):s}));k(s),A((e=>o(l({},e),{unreadMessages:Math.max(0,e.unreadMessages-1)}))),c({title:"Messages marqu√©s comme lus",description:"Les messages ont √©t√© marqu√©s comme lus"})}catch(s){c({title:"Erreur",description:"Impossible de marquer les messages comme lus",variant:"destructive"})}})),oe=e=>d(null,null,(function*(){try{const s=!e.starred;yield ws.toggleConversationStar(e.id,s);const t=w.map((t=>t.id===e.id?o(l({},t),{starred:s}):t));k(t),c({title:s?"Conversation ajout√©e aux favoris":"Conversation retir√©e des favoris",description:s?"La conversation a √©t√© ajout√©e √† vos favoris":"La conversation a √©t√© retir√©e de vos favoris"})}catch(s){c({title:"Erreur",description:"Impossible de modifier le statut favori",variant:"destructive"})}}));return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx(re,{className:"h-8 w-8 animate-spin"})}):m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/20",children:[m.jsxs("div",{className:"container mx-auto py-8 px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"flex items-center space-x-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center overflow-hidden shadow-lg",children:(null==r?void 0:r.profileImage)?m.jsx("img",{src:r.profileImage,alt:`${r.firstName} ${r.lastName}`,className:"w-full h-full object-cover"}):m.jsx(_e,{className:"h-10 w-10 text-white"})}),m.jsx(ne,{size:"icon",variant:"secondary",className:"absolute -bottom-1 -right-1 rounded-full shadow-md",children:m.jsx(us,{className:"h-4 w-4"})})]}),m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:[null==r?void 0:r.firstName," ",null==r?void 0:r.lastName]}),m.jsxs("p",{className:"text-muted-foreground flex items-center",children:[m.jsx(ze,{className:"h-4 w-4 mr-2"}),null==r?void 0:r.email]}),m.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-green-100 text-green-800",children:[m.jsx(xs,{className:"h-3 w-3 mr-1"}),"Compte v√©rifi√©"]}),m.jsxs(Xe,{variant:"outline",children:["Membre depuis ",new Date(null==r?void 0:r.createdAt).toLocaleDateString()]})]})]})]})}),m.jsxs(hs,{value:v,onValueChange:f,className:"w-full",children:[m.jsxs(ps,{className:"grid w-full grid-cols-7 bg-white/50 backdrop-blur-sm border border-border/50",children:[m.jsxs(gs,{value:"dashboard",className:"flex items-center space-x-2",children:[m.jsx(js,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),m.jsxs(gs,{value:"listings",className:"flex items-center space-x-2",children:[m.jsx(de,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"})]}),m.jsxs(gs,{value:"messages",className:"flex items-center space-x-2",children:[m.jsx(be,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Messages"}),P.unreadMessages>0&&m.jsx(Xe,{variant:"destructive",className:"h-5 w-5 p-0 text-xs",children:P.unreadMessages})]}),m.jsxs(gs,{value:"favorites",className:"flex items-center space-x-2",children:[m.jsx(cs,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Favoris"})]}),m.jsxs(gs,{value:"transactions",className:"flex items-center space-x-2",children:[m.jsx(vs,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Transactions"})]}),m.jsxs(gs,{value:"profile",className:"flex items-center space-x-2",children:[m.jsx(_e,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),m.jsxs(gs,{value:"security",className:"flex items-center space-x-2",children:[m.jsx(xs,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"S√©curit√©"})]})]}),m.jsxs(fs,{value:"dashboard",className:"space-y-6",children:[i?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...[,,,,]].map(((e,s)=>m.jsx(V,{},s)))}):m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(Wa,{title:"Annonces Actives",value:P.activeListings,icon:de,color:"blue"}),m.jsx(Wa,{title:"Total des Vues",value:P.totalViews.toLocaleString(),icon:Ke,color:"green"}),m.jsx(Wa,{title:"Contacts Re√ßus",value:P.totalContacts,icon:Qe,color:"purple"}),m.jsx(Wa,{title:"Messages Non Lus",value:P.unreadMessages,icon:is,color:"orange"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsx(Ya,{}),m.jsx(Za,{stats:P})]})]}),m.jsxs(fs,{value:"listings",className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Mes Annonces"}),m.jsx("p",{className:"text-muted-foreground",children:"G√©rez vos annonces publi√©es"})]}),m.jsx(ne,{asChild:!0,className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-white",children:m.jsxs(j,{to:"/creer-annonce",children:[m.jsx(ds,{className:"h-4 w-4 mr-2"}),"Nouvelle Annonce"]})})]}),i?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...[,,,,,,]].map(((e,s)=>m.jsx(O,{},s)))}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(()=>{const e=(D-1)*G,s=e+G;return y.slice(e,s)})().map((e=>m.jsx(Ka,{listing:e,onEdit:Y,onDelete:Z,onRefresh:se,onBoost:ee,showActions:!0},e.id)))}),m.jsx(U,{currentPage:D,totalPages:R,onPageChange:e=>{I(e)},hasNextPage:R>D,hasPrevPage:D>1,isLoading:i})]})]}),m.jsxs(fs,{value:"messages",className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Messages"}),m.jsx("p",{className:"text-muted-foreground",children:"G√©rez vos conversations"})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs(ne,{variant:"outline",size:"sm",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),"Filtrer"]}),m.jsxs(ne,{variant:"outline",size:"sm",children:[m.jsx(je,{className:"h-4 w-4 mr-2"}),"Rechercher"]})]})]}),m.jsx("div",{className:"space-y-4",children:w.map((e=>m.jsx(Qa,{conversation:e,onReply:te,onArchive:ie,onDelete:()=>{},onMarkAsRead:le,onStar:oe,showActions:!0},e.id)))})]}),m.jsxs(fs,{value:"favorites",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Mes Favoris"}),m.jsx("p",{className:"text-muted-foreground",children:"Annonces que vous avez sauvegard√©es"})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((e=>m.jsx(Ka,{listing:e,showActions:!1},e.id)))})]}),m.jsxs(fs,{value:"transactions",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Transactions"}),m.jsx("p",{className:"text-muted-foreground",children:"Historique de vos transactions"})]})}),m.jsx(Fe,{children:m.jsx(Re,{className:"p-6",children:m.jsxs("div",{className:"text-center py-8",children:[m.jsx(vs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune transaction"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore effectu√© de transactions sur MaxiMarket."}),m.jsx(ne,{variant:"outline",children:"D√©couvrir nos services"})]})})})]}),m.jsxs(fs,{value:"profile",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Informations du profil"}),m.jsx("p",{className:"text-muted-foreground",children:"G√©rez vos informations personnelles"})]})}),m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Param√®tres du profil"}),m.jsx(Ie,{children:"G√©rez vos informations personnelles et vos pr√©f√©rences"})]}),m.jsx(Re,{children:m.jsxs("form",{onSubmit:K((e=>d(null,null,(function*(){try{p(!0),yield ks.updateProfile(e),c({title:"Profil mis √† jour",description:"Vos informations ont √©t√© mises √† jour avec succ√®s."})}catch(s){c({title:"Erreur",description:s.message,variant:"destructive"})}finally{p(!1)}})))),className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"firstName",children:"Pr√©nom"}),m.jsxs("div",{className:"relative",children:[m.jsx(_e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"firstName",className:"pl-10"},J("firstName",{required:"Le pr√©nom est requis"})))]}),Q.firstName&&m.jsx("p",{className:"text-sm text-destructive",children:Q.firstName.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"lastName",children:"Nom"}),m.jsxs("div",{className:"relative",children:[m.jsx(_e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"lastName",className:"pl-10"},J("lastName",{required:"Le nom est requis"})))]}),Q.lastName&&m.jsx("p",{className:"text-sm text-destructive",children:Q.lastName.message})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"email",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"email",type:"email",className:"pl-10"},J("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),Q.email&&m.jsx("p",{className:"text-sm text-destructive",children:Q.email.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"phoneNumber",children:"T√©l√©phone"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ee,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"phoneNumber",type:"tel",className:"pl-10"},J("phoneNumber",{pattern:{value:/^\+?[1-9]\d{1,14}$/,message:"Num√©ro de t√©l√©phone invalide"}})))]}),Q.phoneNumber&&m.jsx("p",{className:"text-sm text-destructive",children:Q.phoneNumber.message})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:x,children:x?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise √† jour en cours..."]}):"Mettre √† jour le profil"})]})})]})]}),m.jsxs(fs,{value:"security",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"S√©curit√©"}),m.jsx("p",{className:"text-muted-foreground",children:"G√©rez la s√©curit√© de votre compte"})]})}),m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Changer le mot de passe"}),m.jsx(Ie,{children:"Assurez-vous d'utiliser un mot de passe fort et unique"})]}),m.jsx(Re,{children:m.jsxs("form",{onSubmit:K((e=>d(null,null,(function*(){try{p(!0),yield ks.updatePassword(e.newPassword),c({title:"Mot de passe mis √† jour",description:"Votre mot de passe a √©t√© chang√© avec succ√®s."})}catch(s){c({title:"Erreur",description:s.message,variant:"destructive"})}finally{p(!1)}})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"currentPassword",type:"password",className:"pl-10"},J("currentPassword",{required:"Le mot de passe actuel est requis"})))]}),Q.currentPassword&&m.jsx("p",{className:"text-sm text-destructive",children:Q.currentPassword.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Oe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Se,l({id:"newPassword",type:"password",className:"pl-10"},J("newPassword",{required:"Le nouveau mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caract√®res"}})))]}),Q.newPassword&&m.jsx("p",{className:"text-sm text-destructive",children:Q.newPassword.message})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:x,children:x?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise √† jour en cours..."]}):"Changer le mot de passe"})]})})]}),m.jsx("div",{className:"mt-6",children:m.jsxs(ne,{onClick:()=>d(null,null,(function*(){try{if(!(yield n()))throw Error("√âchec de la d√©connexion");c({title:"D√©connexion r√©ussie",description:"Vous avez √©t√© d√©connect√© avec succ√®s."}),u("/")}catch(e){c({title:"Erreur de d√©connexion",description:e.message||"Une erreur est survenue lors de la d√©connexion",variant:"destructive"})}})),variant:"destructive",className:"w-full",children:[m.jsx(we,{className:"mr-2 h-4 w-4"}),"Se d√©connecter"]})})]})]})]}),m.jsx(B,{isOpen:z.isOpen,onClose:()=>E({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=z.item;yield ys.deleteListing(e.id);const s=y.filter((s=>s.id!==e.id));N(s),c({title:"Annonce supprim√©e",description:`"${e.title}" a √©t√© supprim√©e`}),E({isOpen:!1,item:null})}catch(e){c({title:"Erreur",description:"Impossible de supprimer l'annonce",variant:"destructive"})}})),itemName:null==(e=z.item)?void 0:e.title,isLoading:x}),m.jsx($,{isOpen:L.isOpen,onClose:()=>M({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=L.item;u("/editer-annonce/"+e.id),M({isOpen:!1,item:null})}catch(e){c({title:"Erreur",description:"Impossible de modifier l'annonce",variant:"destructive"})}})),itemName:null==(s=L.item)?void 0:s.title,isLoading:x}),m.jsx(X,{isOpen:_.isOpen,onClose:()=>q({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=_.item;yield ys.updateListing(e.id,{updated_at:(new Date).toISOString()}),c({title:"Annonce actualis√©e",description:`"${e.title}" a √©t√© actualis√©e`}),q({isOpen:!1,item:null})}catch(e){c({title:"Erreur",description:"Impossible d'actualiser l'annonce",variant:"destructive"})}})),itemName:null==(t=_.item)?void 0:t.title,isLoading:x}),m.jsx(H,{isOpen:F.isOpen,onClose:()=>T({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=F.item;yield ys.updateListing(e.id,{boosted:!e.boosted});const s=y.map((s=>s.id===e.id?o(l({},s),{boosted:!s.boosted}):s));N(s),c({title:"Annonce boost√©e",description:`"${e.title}" a √©t√© boost√©e`}),T({isOpen:!1,item:null})}catch(e){c({title:"Erreur",description:"Impossible de booster l'annonce",variant:"destructive"})}})),itemName:null==(a=F.item)?void 0:a.title,isLoading:x})]})},sr=()=>{const e=g();return h.useEffect((()=>{d(null,null,(function*(){try{const{data:{session:s}}=yield ie.auth.getSession();(null==s?void 0:s.user)?e("/",{replace:!0}):e("/connexion",{replace:!0})}catch(s){e("/connexion",{replace:!0})}}))}),[e]),m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"flex items-center text-muted-foreground",children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Traitement de la confirmation..."]})})},tr=(e=null,s={})=>{const t=E(),{user:a}=ae(),[r,i]=h.useState(new Set);h.useEffect((()=>{a&&n()}),[a]);const n=()=>d(null,null,(function*(){try{const e=yield Ns.getUserFavoritesWithStatus();i(e)}catch(e){}})),{data:c,fetchNextPage:m,hasNextPage:u,isFetchingNextPage:x,isLoading:p,error:g,refetch:j}=L({queryKey:["listings",e,s],queryFn:({pageParam:t=0})=>{const a=l({status:"approved",category:e,search:s.search,minPrice:s.minPrice,maxPrice:s.maxPrice,location:s.location,page:t,limit:12},s);return ys.getAllListings(a)},getNextPageParam:(e,s)=>e.hasMore?s.length:void 0,staleTime:aa.staleTime,gcTime:aa.gcTime,keepPreviousData:!0}),v=M({mutationFn:e=>{if(!a)throw Error("Vous devez √™tre connect√© pour cr√©er une annonce");return ys.createListing(o(l({},e),{user_id:a.id,status:"pending"}))},onSuccess:()=>{t.invalidateQueries(["listings"])}}),f=M({mutationFn:({id:e,updates:s})=>ys.updateListing(e,s),onSuccess:(e,s)=>{t.setQueryData(["listings"],(e=>e?o(l({},e),{pages:e.pages.map((e=>o(l({},e),{data:e.data.map((e=>e.id===s.id?l(l({},e),s.updates):e))})))}):e))}}),b=M({mutationFn:e=>ys.deleteListing(e),onSuccess:(e,s)=>{t.setQueryData(["listings"],(e=>e?o(l({},e),{pages:e.pages.map((e=>o(l({},e),{data:e.data.filter((e=>e.id!==s))})))}):e))}}),y=M({mutationFn:e=>d(null,null,(function*(){if(!a)throw Error("Vous devez √™tre connect√© pour ajouter aux favoris");const s=yield Ns.toggleFavorite(e);return i((t=>{const a=new Set(t);return s.is_favorite?a.add(e):a.delete(e),a})),s})),onSuccess:(e,s)=>{t.setQueryData(["listings"],(t=>t?o(l({},t),{pages:t.pages.map((t=>o(l({},t),{data:t.data.map((t=>t.id===s?o(l({},t),{is_favorite:e.is_favorite}):t))})))}):t)),t.invalidateQueries(["favorites"]),t.invalidateQueries(["userStats"])},onError:(e,s)=>{i((e=>{const t=new Set(e);return r.has(s)?t.delete(s):t.add(s),t}))}});return{listings:((null==c?void 0:c.pages.flatMap((e=>e.data)))||[]).map((e=>o(l({},e),{is_favorite:r.has(e.id)}))),loading:p,error:g,hasMore:u,isFetchingMore:x,loadMore:m,refresh:j,createListing:v.mutate,updateListing:f.mutate,deleteListing:b.mutate,toggleFavorite:y.mutate,isCreating:v.isLoading,isUpdating:f.isLoading,isDeleting:b.isLoading,isTogglingFavorite:y.isLoading,isFavorite:e=>r.has(e),favoriteIds:r,loadUserFavorites:n}},ar=(e=[],s={})=>{const{batchSize:t=3,delay:a=100,priority:r="medium",onProgress:i=null,onComplete:n=null,onError:c=null}=s,[m,u]=h.useState({loaded:new Set,loading:new Set,errors:new Set,progress:0,isComplete:!1}),x=h.useRef(0),p=h.useRef(null),g=h.useCallback((e=>new Promise(((s,t)=>{const a=new Image;a.onload=()=>{u((s=>o(l({},s),{loaded:new Set([...s.loaded,e]),loading:new Set([...s.loading].filter((s=>s!==e)))}))),s(e)},a.onerror=()=>{u((s=>o(l({},s),{errors:new Set([...s.errors,e]),loading:new Set([...s.loading].filter((s=>s!==e)))}))),t(Error("Failed to load image: "+e))},a.src=e}))),[]),j=h.useCallback((e=>d(null,null,(function*(){u((s=>o(l({},s),{loading:new Set([...s.loading,...e])})));try{yield Promise.allSettled(e.map(g))}catch(s){}}))),[g]),v=h.useCallback((()=>{0!==e.length&&(u({loaded:new Set,loading:new Set,errors:new Set,progress:0,isComplete:!1}),x.current=0,d(null,null,(function*(){const s=[];for(let a=0;a<e.length;a+=t)s.push(e.slice(a,a+t));for(const t of s){yield j(t);const r=m.loaded.size+t.length,n=Math.min(r/e.length*100,100);u((e=>o(l({},e),{progress:n}))),i&&i(n,r,e.length),t!==s[s.length-1]&&(yield new Promise((e=>{p.current=setTimeout(e,a)})))}u((e=>o(l({},e),{isComplete:!0}))),n&&n(m.loaded.size,m.errors.size)})))}),[e,t,a,j,i,n,m.loaded.size,m.errors.size]);h.useEffect((()=>(e.length>0&&v(),()=>{p.current&&clearTimeout(p.current)})),[e,v]);const f=h.useCallback((e=>m.loaded.has(e)),[m.loaded]),b=h.useCallback((e=>m.loading.has(e)),[m.loading]),y=h.useCallback((e=>m.errors.has(e)),[m.errors]),N=h.useCallback((()=>{const e=Array.from(m.errors);e.length>0&&j(e)}),[m.errors,j]);return o(l({},m),{isImageLoaded:f,isImageLoading:b,isImageError:y,retryFailedImages:N,startPreloading:v})},rr=(e,s="gallery",t="medium")=>{if(!e)return e;if(e.includes("unsplash.com")||e.includes("cloudinary.com"))return e;const a={hero:{width:1920,height:1080,quality:85,format:"webp"},gallery:{width:800,height:600,quality:80,format:"webp"},thumbnail:{width:400,height:300,quality:75,format:"webp"},avatar:{width:150,height:150,quality:80,format:"webp"}},r=a[s]||a.gallery;if(e.startsWith("/")||e.startsWith("./")||e.startsWith("../"))return e;try{const s=new URL(e);if(s.hostname.includes("unsplash.com"))return s.searchParams.set("w",r.width),s.searchParams.set("h",r.height),s.searchParams.set("q",r.quality),s.searchParams.set("auto","format"),s.searchParams.set("fit","crop"),s.toString();if(s.hostname.includes("cloudinary.com")){const e=s.pathname.split("/"),t=e.findIndex((e=>"upload"===e));if(-1!==t)return e.splice(t+1,0,`f_${r.format},q_${r.quality},w_${r.width},h_${r.height},c_fill`),s.pathname=e.join("/"),s.toString()}return e}catch(i){return e}},ir=e=>{const s=h.useMemo((()=>{if((null==e?void 0:e.images)&&e.images.length>0){const s=e.images.map((e=>"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.file)?URL.createObjectURL(e.file):(null==e?void 0:e.src)?e.src:(null==e?void 0:e.displayUrl)?e.displayUrl:null)).filter(Boolean);if(s.length>0)return s}const s={real_estate:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop"],automobile:["https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=600&fit=crop"],services:["https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop"],marketplace:["https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop"]};let t=null==e?void 0:e.category;return t&&(t={immobilier:"real_estate",automobile:"automobile",services:"services",marketplace:"marketplace"}[t.toLowerCase()]||t),((e,s="gallery",t="medium")=>Array.isArray(e)?e.map((e=>rr(e,s,t))):[])(s[t]||s.marketplace,"gallery","medium")}),[null==e?void 0:e.images,null==e?void 0:e.category]),t=h.useMemo((()=>s[0]),[s]),a=h.useMemo((()=>s.length>1),[s]);return{images:s,mainImage:t,hasMultipleImages:a,imageCount:s.length}},nr=({listingId:e,listing:s,size:t="default",showActions:a=!0,className:r=""})=>{var i;const{user:n}=ae(),l=g(),{toast:o}=Le(),[c,u]=h.useState(null),[x,p]=h.useState(!1),[j,v]=h.useState(!1);h.useEffect((()=>{e&&n&&f()}),[e,n]);const f=()=>d(null,null,(function*(){try{p(!0);const s=yield Ss.getBoostStatus(e);u(s)}catch(s){}finally{p(!1)}})),b=(()=>{if(!(null==c?void 0:c.hasActiveBoost))return{icon:m.jsx(Ms,{className:"h-4 w-4"}),label:"Non boost√©",color:"secondary",description:"Aucun boost actif"};const e=c.currentBoost,s=new Date,t=new Date(e.end_date),a=Math.ceil((t-s)/864e5);return a>0?a>3?a>7?{icon:m.jsx(os,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"default",description:"Boost actif"}:{icon:m.jsx(Ye,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"default",description:"Boost actif"}:{icon:m.jsx(ss,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"destructive",description:"Boost expire bient√¥t"}:{icon:m.jsx(ss,{className:"h-4 w-4"}),label:"Expir√©",color:"secondary",description:"Boost expir√©"}})(),y=(e=>{switch(e){case"small":return"text-xs px-2 py-1";case"large":return"text-sm px-3 py-1.5";default:return"text-xs px-2.5 py-1"}})(t),N=(e=>{switch(e){case"small":return"h-3 w-3";case"large":return"h-5 w-5";default:return"h-4 w-4"}})(t);return n&&s?n.id!==s.user_id?null:m.jsx(Ps,{children:m.jsxs("div",{className:"flex items-center gap-2 "+r,children:[m.jsxs(As,{children:[m.jsx(zs,{asChild:!0,children:m.jsx(Xe,{variant:b.color,className:y+" cursor-help transition-all duration-200 hover:scale-105",children:m.jsxs("div",{className:"flex items-center gap-1",children:[b.icon,m.jsx("span",{className:"hidden sm:inline",children:b.label})]})})}),m.jsxs(Es,{children:[m.jsx("p",{children:b.description}),(null==c?void 0:c.hasActiveBoost)&&c.currentBoost&&m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Package: ",null==(i=c.currentBoost.boost_packages)?void 0:i.name]})]})]}),a&&(null==c?void 0:c.hasActiveBoost)&&c.currentBoost&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs(As,{children:[m.jsx(zs,{asChild:!0,children:m.jsx(ne,{onClick:()=>d(null,null,(function*(){if(null==c?void 0:c.currentBoost)try{v(!0),(yield Ss.renewBoost(c.currentBoost.id,n.id)).success&&(o({title:"Boost renouvel√© !",description:"Votre boost a √©t√© prolong√© avec succ√®s."}),f())}catch(e){o({title:"Erreur",description:e.message||"Erreur lors du renouvellement",variant:"destructive"})}finally{v(!1)}})),disabled:j,variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-primary/10",children:m.jsx(le,{className:N+" text-primary"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Renouveler le boost"})})]}),m.jsxs(As,{children:[m.jsx(zs,{asChild:!0,children:m.jsx(ne,{onClick:()=>d(null,null,(function*(){if((null==c?void 0:c.currentBoost)&&confirm("√ätes-vous s√ªr de vouloir annuler ce boost ?"))try{v(!0),(yield Ss.cancelBoost(c.currentBoost.id,n.id)).success&&(o({title:"Boost annul√©",description:"Votre boost a √©t√© annul√© avec succ√®s."}),f())}catch(e){o({title:"Erreur",description:e.message||"Erreur lors de l'annulation",variant:"destructive"})}finally{v(!1)}})),disabled:j,variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-destructive/10",children:m.jsx(Ls,{className:N+" text-destructive"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Annuler le boost"})})]}),m.jsxs(As,{children:[m.jsx(zs,{asChild:!0,children:m.jsx(ne,{onClick:()=>l("/booster-annonce/"+e),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-500/10",children:m.jsx(js,{className:N+" text-blue-500"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Voir les d√©tails et analytics"})})]})]}),a&&!(null==c?void 0:c.hasActiveBoost)&&m.jsxs(As,{children:[m.jsx(zs,{asChild:!0,children:m.jsx(ne,{onClick:()=>l("/booster-annonce/"+e),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-primary/10",children:m.jsx(Ye,{className:N+" text-primary"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Booster cette annonce"})})]}),x&&m.jsx(Bt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),j&&m.jsx(Bt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-green-500 border-t-transparent rounded-full"})]})}):null},lr=({listing:e,onToggleFavorite:s,showActions:t=!0})=>{var a,r;const{user:i}=ae(),n=g(),{images:l}=ir(e),[o,c]=h.useState(e.is_favorite||!1),[u,x]=h.useState(!1),j=e=>{const s="text-xs px-1 py-0.5 sm:px-2 sm:py-1 md:px-3 md:py-1.5 inline-flex items-center whitespace-nowrap";switch(e){case"approved":return m.jsx(Xe,{variant:"default",className:"badge-approved "+s,children:"Approuv√©"});case"pending":return m.jsx(Xe,{variant:"secondary",className:s,children:"En attente"});case"rejected":return m.jsx(Xe,{variant:"destructive",className:s,children:"Rejet√©"});default:return m.jsx(Xe,{variant:"outline",className:s,children:e})}};p.useEffect((()=>{c(e.is_favorite||!1)}),[e.is_favorite]);const v=e.featured||e.boosted||e.is_premium||e.premium;return m.jsxs(Bt.div,{whileHover:{y:-4},className:qe("group rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden",v?"bg-gradient-to-br from-amber-50/50 to-yellow-100/50 border-2 border-amber-300/50 shadow-amber-200/50":"bg-card border border-border/50"),onClick:()=>{e.id&&n("/annonce/"+e.id)},children:[m.jsxs("div",{className:"relative h-40 sm:h-48 md:h-56 bg-muted overflow-hidden",children:[m.jsx(Ja,{images:l,title:e.title,className:"h-full"}),m.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 sm:flex-row sm:gap-2 items-start",children:m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Xe,{variant:"secondary",className:"bg-black/70 text-white text-xs px-1 py-0.5 sm:px-2 sm:py-1 md:px-3 md:py-1.5 inline-flex items-center whitespace-nowrap",children:m.jsxs("span",{className:"inline-flex items-center",children:[(e=>{switch(e){case"real_estate":return"üè†";case"automobile":return"üöó";case"services":return"üîß";case"marketplace":return"üõçÔ∏è";default:return"üìã"}})(e.category)," ","real_estate"===e.category?"Immobilier":"automobile"===e.category?"Automobile":"services"===e.category?"Services":"Marketplace"]})}),"approved"===e.status&&v?m.jsx("span",{className:"hidden sm:inline-flex",children:j(e.status)}):j(e.status)]})}),t&&m.jsx(Bt.button,{onClick:t=>d(null,null,(function*(){if(t.stopPropagation(),i){if(!u)try{x(!0),c(!o),s&&(yield s(e.id))}catch(a){c(!o)}finally{x(!1)}}else n("/connexion")})),disabled:u,className:`absolute top-2 right-2 p-1.5 sm:p-2 rounded-full transition-all duration-200 ${o?"bg-red-500 hover:bg-red-600 text-white":"bg-black/20 hover:bg-black/40 text-white"} ${u?"opacity-50 cursor-not-allowed":""}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:m.jsx(cs,{className:"h-4 w-4 sm:h-5 sm:w-5 "+(o?"fill-current":"")})})]}),m.jsxs("div",{className:"p-1.5 sm:p-3 md:p-5",children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-1 sm:mb-2 truncate group-hover:text-primary transition-colors",children:e.title}),m.jsxs("div",{className:"flex items-center text-muted-foreground mb-1 sm:mb-3",children:[m.jsx(Ge,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 flex-shrink-0"}),m.jsx("span",{className:"truncate text-sm sm:text-base",children:e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:(null==(a=e.location)?void 0:a.city)||(null==(r=e.location)?void 0:r.country)||"Localisation non sp√©cifi√©e"})]}),m.jsx("div",{className:qe("text-xl sm:text-2xl font-bold mb-1 sm:mb-3",v?"text-slate-800":"text-primary"),children:e.price?(b=e.price,((e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e))(b,e.currency||"XOF")):"Prix sur demande"}),m.jsx("p",{className:"text-muted-foreground mb-2 sm:mb-4 text-sm sm:text-base line-clamp-2 sm:line-clamp-2",children:e.description||"Aucune description disponible"}),v&&m.jsx("div",{className:"mb-2 sm:mb-3",children:m.jsx(Xe,{variant:"secondary",className:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-300 text-xs font-medium",children:"‚≠ê Premium"})}),m.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Je,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),m.jsx("span",{className:"text-xs sm:text-sm",children:e.created_at?(f=e.created_at,(e=>new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)))(new Date(f))):"Date inconnue"})]}),m.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.views_count>0&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ke,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),m.jsx("span",{className:"text-xs sm:text-sm",children:e.views_count})]}),e.favorites_count>0&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),m.jsx("span",{className:"text-xs sm:text-sm",children:e.favorites_count})]})]})]}),m.jsx(nr,{listingId:e.id,listing:e,size:"small",showActions:t,className:"mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-border/20"})]})]});var f,b},or=p.memo((e=>{var s=e,{src:t,alt:a,className:r="",placeholder:i=null,context:n="gallery",quality:d="medium",onLoad:u=null,onError:x=null,showSkeleton:g=!0,priority:j="medium",fallbackSrc:v=null,enableHeroAnimations:f=!1,showOverlay:b=!1,overlayGradient:y="to-b from-transparent via-transparent to-black/20"}=s,N=c(s,["src","alt","className","placeholder","context","quality","onLoad","onError","showSkeleton","priority","fallbackSrc","enableHeroAnimations","showOverlay","overlayGradient"]);const[w,k]=h.useState(!1),[C,S]=h.useState(!1),P=e=>e?"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.file)?URL.createObjectURL(e.file):(null==e?void 0:e.src)?e.src:(null==e?void 0:e.displayUrl)?e.displayUrl:null:null,A=h.useMemo((()=>{const e=P(t);return e?rr(e,n,d):null}),[t,n,d]),z=h.useMemo((()=>{if(v)return v;const e={hero:"https://images.unsplash.com/photo-1542044896530-05d85be9b11a?q=80&w=2070&auto=format&fit=crop",city:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?q=80&w=1920&auto=format&fit=crop",business:"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=1932&auto=format&fit=crop"};return e[n]||e.hero}),[v,n]),{elementRef:E,isIntersecting:L,imageState:M,setImageSrc:_}=((e={})=>{const{threshold:s=.1,rootMargin:t="100px",placeholder:a=null,onLoad:r=null,onError:i=null}=e,[n,c]=h.useState({src:null,isLoading:!1,hasLoaded:!1,hasError:!1}),[d,m]=((e={})=>{const{threshold:s=.1,rootMargin:t="50px",root:a=null,triggerOnce:r=!1}=e,[i,n]=h.useState(!1),[l,o]=h.useState(!1),c=h.useRef(null),d=h.useCallback((e=>{const[s]=e;s.isIntersecting?(n(!0),r&&!l&&o(!0)):r||n(!1)}),[r,l]);return h.useEffect((()=>{const e=c.current;if(!e)return;const r=new IntersectionObserver(d,{threshold:s,rootMargin:t,root:a});return r.observe(e),()=>{r.unobserve(e),r.disconnect()}}),[d,s,t,a]),[c,i]})({threshold:s,rootMargin:t,triggerOnce:!0}),u=h.useCallback((e=>{if(!e||n.src===e)return;c((s=>o(l({},s),{src:e,isLoading:!0,hasLoaded:!1,hasError:!1})));const s=new Image;s.onload=()=>{c((e=>o(l({},e),{isLoading:!1,hasLoaded:!0}))),null==r||r(e)},s.onerror=()=>{c((e=>o(l({},e),{isLoading:!1,hasError:!0}))),null==i||i(e)},s.src=e}),[n.src,r,i]);h.useEffect((()=>{m&&n.src&&u(n.src)}),[m,n.src,u]);const x=h.useCallback((e=>{e!==n.src&&c((s=>o(l({},s),{src:e})))}),[n.src]);return{elementRef:d,isIntersecting:m,imageState:n,setImageSrc:x,loadImage:u}})({threshold:.1,rootMargin:"high"===j?"50px":"100px",onLoad:e=>{S(!0),k(!1),null==u||u(e)},onError:e=>{k(!0),S(!1),null==x||x(e)}});p.useEffect((()=>{L&&A&&_(A)}),[L,A,_]);const q=h.useCallback((e=>{N.onClick&&N.onClick(e)}),[N.onClick]),F=w?z:M.src||P(t),T=()=>m.jsx("div",{className:"animate-pulse bg-muted rounded-lg",children:m.jsx("div",{className:"w-full h-full bg-gradient-to-r from-muted via-muted/50 to-muted"})}),D=()=>m.jsx("div",{className:"flex items-center justify-center w-full h-full bg-muted text-muted-foreground",children:m.jsxs("div",{className:"text-center",children:[m.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.jsx("p",{className:"text-sm",children:"Image non disponible"})]})});if(!t)return m.jsx("div",{className:r,children:m.jsx(D,{})});const I=null!==P(t);return m.jsxs("div",{ref:E,className:"relative overflow-hidden "+r,children:[g&&!C&&!w&&I&&m.jsx($t,{children:m.jsx(Bt.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-10",children:m.jsx(T,{})})}),i&&!C&&!w&&I&&m.jsx($t,{children:m.jsx(Bt.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-10",children:m.jsx("img",{src:i,alt:"Placeholder",className:"w-full h-full object-cover"})})}),m.jsx($t,{mode:"wait",children:!w&&I&&m.jsx(Bt.img,l({src:F,alt:a,className:"w-full h-full object-cover transition-opacity duration-300 "+(C?"opacity-100":"opacity-0"),initial:f?{opacity:0,scale:1.1}:{opacity:0},animate:f?{opacity:C?1:.7,scale:C?1:1.05}:{opacity:C?1:0},exit:f?{opacity:0,scale:.95}:{opacity:0},transition:f?{duration:.8,ease:"easeOut",opacity:{duration:.5}}:{duration:.3},onLoad:()=>{F&&(S(!0),k(!1),null==u||u(F))},onError:()=>{k(!0),S(!1),null==x||x(F)},onClick:q,loading:"high"===j?"eager":"lazy",decoding:"async"},N),F)}),b&&C&&m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.2},className:"absolute inset-0 bg-gradient-"+y}),w&&m.jsx($t,{children:m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"absolute inset-0 z-20",children:m.jsx(D,{})})}),M.isLoading&&!C&&!w&&I&&m.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/10",children:m.jsx(Bt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full"})}),!I&&m.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-muted",children:m.jsxs("div",{className:"text-center text-muted-foreground",children:[m.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.jsx("p",{className:"text-sm",children:"Format d'image non support√©"})]})})]})})),cr=({listings:e=[],category:s,hour:t,timeSlot:a})=>{var r;const[i,n]=h.useState(0),[l,o]=h.useState(!0),[c,d]=h.useState({hour:t,timeSlot:a});h.useEffect((()=>{const e=()=>{const e=(new Date).getHours();var s;d({hour:e,timeSlot:(s=e,s>=6&&12>s?"matin":s>=12&&18>s?"apr√®s-midi":s>=18&&22>s?"soir√©e":"nuit")})};e();const s=setInterval(e,6e4);return()=>clearInterval(s)}),[]),h.useEffect((()=>{if(!l||1>=e.length)return;const s=setInterval((()=>{n((s=>(s+1)%e.length))}),8e3);return()=>clearInterval(s)}),[l,e.length]);const u=h.useCallback((()=>o(!1)),[]),x=h.useCallback((()=>o(!0)),[]),p=h.useCallback((e=>{n(e)}),[]);if(!e||0===e.length)return m.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx(ss,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Aucune annonce disponible"}),m.jsx("p",{className:"text-gray-300",children:"Revenez plus tard pour d√©couvrir de nouvelles annonces"})]})});const g=e[i],j=(null==g?void 0:g.category)||s;return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:"\n  .hero-container {\n    position: relative;\n    height: 100vh;\n    overflow: hidden;\n  }\n  \n  .hero-content {\n    position: absolute;\n    inset: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    padding: 0 1rem 4rem;\n  }\n  \n  .hero-badges {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.75rem;\n    margin-bottom: 2rem;\n  }\n  \n  .hero-title {\n    font-size: clamp(2.5rem, 5vw, 4.5rem);\n    font-weight: 700;\n    line-height: 1.1;\n    margin-bottom: 1.5rem;\n  }\n  \n  .hero-subtitle {\n    font-size: clamp(1.125rem, 2.5vw, 1.5rem);\n    line-height: 1.6;\n    margin-bottom: 3rem;\n    max-width: 48rem;\n  }\n  \n  .hero-navigation {\n    position: absolute;\n    bottom: 2rem;\n    left: 50%;\n    transform: translateX(-50%);\n    display: flex;\n    gap: 0.75rem;\n    z-index: 50;\n  }\n  \n  .hero-search {\n    position: absolute;\n    bottom: 8rem;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 100%;\n    max-width: 42rem;\n    padding: 0 1rem;\n    z-index: 20;\n  }\n  \n  @media (max-width: 768px) {\n    .hero-content {\n      padding: 0 1rem 8rem;\n    }\n    \n    .hero-badges {\n      gap: 0.5rem;\n      margin-bottom: 1.5rem;\n    }\n    \n    .hero-title {\n      margin-bottom: 1rem;\n      font-size: clamp(2rem, 8vw, 3rem);\n    }\n    \n    .hero-subtitle {\n      margin-bottom: 2rem;\n      font-size: clamp(1rem, 4vw, 1.25rem);\n    }\n    \n    .hero-search {\n      bottom: 6rem;\n      max-width: 90%;\n    }\n    \n    .hero-navigation {\n      bottom: 2rem;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .hero-content {\n      padding: 0 0.75rem 7rem;\n    }\n    \n    .hero-badges {\n      flex-direction: column;\n      gap: 0.75rem;\n      margin-bottom: 1rem;\n    }\n    \n    .hero-title {\n      margin-bottom: 0.75rem;\n      font-size: clamp(1.75rem, 10vw, 2.5rem);\n    }\n    \n    .hero-subtitle {\n      margin-bottom: 1.5rem;\n      font-size: clamp(0.9rem, 5vw, 1.1rem);\n    }\n    \n    .hero-search {\n      bottom: 5rem;\n      max-width: 95%;\n      padding: 0 0.5rem;\n    }\n    \n    .hero-navigation {\n      bottom: 1.5rem;\n    }\n  }\n"}),m.jsxs("div",{className:"hero-container",onMouseEnter:u,onMouseLeave:x,children:[m.jsx($t,{mode:"wait",children:m.jsx(Bt.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.8,ease:"easeOut"},className:"absolute inset-0",children:m.jsx(or,{src:(null==(r=g.images)?void 0:r[0])||g.image_url,alt:g.title,className:"w-full h-full object-cover",context:"hero",quality:"high",priority:"high",showSkeleton:!0,enableHeroAnimations:!0,showOverlay:!1})},g.id)}),m.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsx("div",{className:"hero-content",children:m.jsxs("div",{className:"text-center relative z-10",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"hero-badges",children:[m.jsxs(Xe,{className:qe("text-white/90 border-0 text-sm px-4 py-2",(e=>{switch(e){case"real_estate":return"bg-blue-500";case"automobile":return"bg-green-500";case"services":return"bg-purple-500";case"marketplace":return"bg-orange-500";default:return"bg-gray-500"}})(j)),children:[m.jsx("span",{className:"mr-2",children:(e=>{switch(e){case"real_estate":return"üè†";case"automobile":return"üöó";case"services":return"üîß";case"marketplace":return"üõçÔ∏è";default:return"üìã"}})(j)}),(e=>{switch(e){case"real_estate":return"Immobilier";case"automobile":return"Automobile";case"services":return"Services";case"marketplace":return"Marketplace";default:return"Annonces"}})(j)]}),m.jsxs(Xe,{variant:"outline",className:"text-white/90 border-white/30 text-sm px-4 py-2",children:[m.jsx(ss,{className:"h-4 w-4 mr-2"}),c.timeSlot," ‚Ä¢ ",c.hour,"h"]})]}),m.jsxs(Bt.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4},className:"hero-title text-white",children:["Bienvenue sur"," ",m.jsx("span",{className:"gradient-text",children:"MaxiMarket"})]}),m.jsx(Bt.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.6},className:"hero-subtitle text-gray-200",children:"Explorez, d√©couvrez, connectez. Votre marketplace de confiance."})]})}),e.length>1&&m.jsx("div",{className:"hero-navigation",children:e.map(((e,s)=>m.jsx("button",{className:qe("w-3 h-3 rounded-full transition-all duration-300 cursor-pointer",s===i?"bg-white scale-110 shadow-lg":"bg-white/40 hover:bg-white/60 hover:scale-105"),onClick:()=>p(s)},s)))})]})]})},dr="homepage-hero-listings",mr="homepage-popular-listings",ur="homepage-premium-listings",xr="homepage-last-update",hr=6e5,pr=()=>{const e=g(),{user:s}=ae(),{heroListings:t,popularListings:a,premiumListings:r,loading:i,error:n}=(()=>{const[e,s]=h.useState([]),[t,a]=h.useState([]),[r,i]=h.useState([]),[n,m]=h.useState({hero:!0,popular:!1,premium:!1}),[u,x]=h.useState({hero:null,popular:null,premium:null}),p=((e=[])=>((e=[],s={})=>{const t=s,{maxImages:a=20,priority:r="medium"}=t,i=c(t,["maxImages","priority"]),n=e.slice(0,a).flatMap((e=>e.images&&Array.isArray(e.images)?e.images.map((e=>"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.src)?e.src:null)).filter(Boolean):[]));return ar(n,o(l({},i),{priority:r}))})(e,{maxImages:6,priority:"high",batchSize:2,delay:50}))(e),g=h.useCallback((()=>{const e=_s.get(xr);if(!e)return!1;const s=Date.now()-e;return hr>s}),[]),j=h.useCallback((()=>{try{const e=_s.get(dr),t=_s.get(mr),r=_s.get(ur);return!!(e&&t&&r)&&(s(e),a(t),i(r),!0)}catch(e){return!1}}),[]),v=h.useCallback(((e,s,t)=>{try{const a=Date.now();_s.set(dr,e,hr),_s.set(mr,s,hr),_s.set(ur,t,hr),_s.set(xr,a,hr)}catch(a){}}),[]),f=h.useCallback((()=>d(null,null,(function*(){try{m((e=>o(l({},e),{hero:!0}))),x((e=>o(l({},e),{hero:null})));const e=yield qs.getHeroListings(6),t=(null==e?void 0:e.data)||[];return s(t),t}catch(e){return x((s=>o(l({},s),{hero:(null==e?void 0:e.message)||"Erreur lors du chargement des annonces hero"}))),[]}finally{m((e=>o(l({},e),{hero:!1})))}}))),[]),b=h.useCallback((()=>d(null,null,(function*(){try{m((e=>o(l({},e),{popular:!0}))),x((e=>o(l({},e),{popular:null})));const e=yield qs.getTopViewedListings(6);return a(e||[]),e||[]}catch(e){return x((s=>o(l({},s),{popular:(null==e?void 0:e.message)||"Erreur lors du chargement des annonces populaires"}))),[]}finally{m((e=>o(l({},e),{popular:!1})))}}))),[]),y=h.useCallback((()=>d(null,null,(function*(){try{m((e=>o(l({},e),{premium:!0}))),x((e=>o(l({},e),{premium:null})));const e=yield qs.getPremiumListings(10);return i((null==e?void 0:e.data)||[]),(null==e?void 0:e.data)||[]}catch(e){return x((s=>o(l({},s),{premium:(null==e?void 0:e.message)||"Erreur lors du chargement des annonces premium"}))),[]}finally{m((e=>o(l({},e),{premium:!1})))}}))),[]),N=h.useCallback((()=>d(null,null,(function*(){if(g()&&j())return void m({hero:!1,popular:!1,premium:!1});const e=yield f(),[s,t]=yield Promise.allSettled([b(),y()]);v(e,s.value||[],t.value||[])}))),[g,j,f,b,y,v]),w=h.useCallback((()=>d(null,null,(function*(){_s.delete(dr),_s.delete(mr),_s.delete(ur),_s.delete(xr),yield N()}))),[N]);return h.useEffect((()=>{N()}),[N]),h.useEffect((()=>{const e=setInterval((()=>{g()||N()}),6e5);return()=>clearInterval(e)}),[g,N]),{heroListings:e,popularListings:t,premiumListings:r,loading:n,error:u,forceRefresh:w,loadData:N,isCacheValid:g(),cacheStats:_s.getStats(),imagePreloader:p}})(),u={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:.1*e,duration:.5,ease:"easeOut"}})},x=[{name:"Immobilier",icon:m.jsx(de,{className:"h-10 w-10 mb-3 text-primary"}),path:"/immobilier",description:"Maisons, appartements, terrains."},{name:"Automobile",icon:m.jsx(Ts,{className:"h-10 w-10 mb-3 text-primary"}),path:"/automobile",description:"Voitures, motos, utilitaires."},{name:"Services Pro",icon:m.jsx(ue,{className:"h-10 w-10 mb-3 text-primary"}),path:"/services",description:"Experts qualifi√©s √† votre service."},{name:"Marketplace",icon:m.jsx(xe,{className:"h-10 w-10 mb-3 text-primary"}),path:"/marketplace",description:"Produits neufs et d'occasion."}];return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-900 to-blue-900/20 text-foreground",children:[i.hero?m.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Chargement des annonces..."}),m.jsx("p",{className:"text-gray-300",children:"Pr√©paration de votre exp√©rience personnalis√©e"})]})}):n.hero?m.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("span",{className:"text-2xl",children:"‚ö†Ô∏è"})}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erreur de chargement"}),m.jsx("p",{className:"text-gray-300",children:n.hero})]})}):m.jsxs(m.Fragment,{children:[m.jsx(cr,{listings:t,category:"marketplace",hour:0,timeSlot:""}),m.jsx("div",{className:"hero-search",children:m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1.2},children:m.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=s.currentTarget.querySelector('input[name="q"]'),a=(null==t?void 0:t.value)||"",{section:r,params:i}=Gt(a),n=new URLSearchParams(i);e(`${"immobilier"===r?"/immobilier":"automobile"===r?"/automobile":"services"===r?"/services":"/marketplace"}?${n.toString()}`)},className:"relative",children:[m.jsx(Se,{name:"q",type:"search",placeholder:"Que recherchez-vous sur MaxiMarket ?",className:"w-full py-3 px-4 sm:py-4 sm:px-6 pr-12 sm:pr-16 rounded-full text-base sm:text-lg bg-white/20 text-white placeholder-gray-300 border-2 border-white/30 focus:border-primary focus:ring-primary focus:outline-none backdrop-blur-md h-12 sm:h-16 shadow-xl"}),m.jsx(ne,{type:"submit",size:"lg",className:"absolute right-1 sm:right-2 top-1/2 transform -translate-y-1/2 rounded-full bg-primary hover:bg-primary/90 h-10 w-10 sm:h-12 sm:w-12 p-0",children:m.jsx(Fs,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]})})})]}),m.jsx("section",{className:"py-16 md:py-24",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Bt.h2,{className:"text-3xl md:text-4xl font-bold text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["Explorez nos ",m.jsx("span",{className:"gradient-text",children:"Univers"})]}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:x.map(((s,t)=>m.jsxs(Bt.div,{custom:t,variants:u,initial:"hidden",animate:"visible",onClick:()=>{return t=s.path,void e(t);var t},className:"bg-card p-6 rounded-xl shadow-2xl hover:shadow-primary/40 transition-all duration-300 transform hover:-translate-y-2 flex flex-col items-center text-center glassmorphic-card border border-transparent hover:border-primary/50 cursor-pointer group",children:[s.icon,m.jsx("h3",{className:"text-xl font-semibold mb-2 group-hover:text-primary transition-colors",children:s.name}),m.jsx("p",{className:"text-muted-foreground text-sm mb-5 flex-grow group-hover:text-primary/80 transition-colors",children:s.description}),m.jsxs("div",{className:"w-full border border-primary/50 rounded-md px-3 py-2 text-primary group-hover:bg-primary group-hover:text-white transition-all duration-300 flex items-center justify-center",children:[m.jsx("span",{className:"text-sm",children:"D√©couvrir"}),m.jsx(Ae,{className:"ml-2 h-3 w-3 group-hover:translate-x-1 transition-transform flex-shrink-0"})]})]},s.name)))})]})}),m.jsx("section",{className:"py-16 md:py-24 bg-background/30",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Bt.h2,{className:"text-3xl md:text-4xl font-bold text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["‚≠ê Annonces ",m.jsx("span",{className:"gradient-text",children:"Premium"})]}),n.premium&&m.jsx("p",{className:"text-center text-destructive mb-8",children:n.premium}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[i.premium&&!r.length&&Array.from({length:10}).map(((e,s)=>m.jsxs("div",{className:"bg-gradient-to-br from-amber-50/80 to-yellow-100/80 rounded-lg shadow-xl overflow-hidden glassmorphic-card border-2 border-amber-300/50",children:[m.jsx("div",{className:"h-40 sm:h-48 md:h-56 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 animate-pulse"}),m.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[m.jsx("div",{className:"h-6 w-3/4 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 rounded mb-3 animate-pulse"}),m.jsx("div",{className:"h-4 w-1/2 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 rounded mb-4 animate-pulse"}),m.jsx("div",{className:"h-10 w-1/3 bg-gradient-to-r from-amber-300/50 to-yellow-300/50 rounded animate-pulse"})]})]},s))),!i.premium&&0===r.length&&m.jsxs("div",{className:"col-span-full text-center py-16",children:[m.jsx("div",{className:"text-6xl mb-4",children:"‚≠ê"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce premium pour le moment"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Soyez le premier √† passer premium et boostez votre visibilit√© !"}),m.jsx(ne,{onClick:()=>e("/creer-annonce"),variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Cr√©er une Annonce Premium"})]}),r.slice(0,10).map((e=>m.jsx(lr,{listing:e,showActions:!1},e.id)))]}),m.jsx("div",{className:"text-center mt-8",children:m.jsxs(ne,{size:"lg",variant:"default",className:"bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white shadow-lg",onClick:()=>e("/premium"),children:["Voir Toutes les Annonces Premium"," ",m.jsx(Ae,{className:"ml-2 h-5 w-5"})]})})]})}),m.jsx("section",{className:"py-12 md:py-16 bg-background/30",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12",children:["üî• ",m.jsx("span",{className:"gradient-text",children:"Annonces Populaires"})]}),n.popular&&m.jsx("p",{className:"text-center text-destructive mb-8",children:n.popular}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[i.popular&&!a.length&&Array.from({length:6}).map(((e,s)=>m.jsxs("div",{className:"bg-card rounded-lg shadow-xl overflow-hidden glassmorphic-card border border-transparent",children:[m.jsx("div",{className:"h-40 sm:h-48 md:h-56 bg-muted animate-pulse"}),m.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[m.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-3 animate-pulse"}),m.jsx("div",{className:"h-4 w-1/2 bg-muted rounded mb-4 animate-pulse"}),m.jsx("div",{className:"h-10 w-1/3 bg-muted rounded animate-pulse"})]})]},s))),!i.popular&&0===a.length&&m.jsx("p",{className:"col-span-full text-center text-muted-foreground",children:"Aucune annonce populaire pour le moment."}),a.slice(0,6).map((e=>m.jsx(lr,{listing:e,showActions:!1},e.id)))]}),m.jsx("div",{className:"text-center mt-12",children:m.jsxs(ne,{size:"lg",variant:"default",className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-primary-foreground",onClick:()=>e("/marketplace?sort=popular&per=24"),children:["Voir Toutes les Annonces ",m.jsx(Ae,{className:"ml-2 h-5 w-5"})]})})]})}),m.jsx("section",{className:"py-20 md:py-32",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6 text-center",children:[m.jsxs(Bt.h2,{className:"text-3xl md:text-4xl font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["Pr√™t √† ",m.jsx("span",{className:"gradient-text",children:"Rejoindre MaxiMarket"})," ?"]}),m.jsx(Bt.p,{className:"text-lg text-muted-foreground mb-10 max-w-xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"Cr√©ez un compte, publiez votre premi√®re annonce ou trouvez l'affaire parfaite en quelques clics."}),m.jsxs(Bt.div,{className:"space-y-4 sm:space-y-0 sm:flex sm:justify-center sm:space-x-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[m.jsx(ne,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground w-full sm:w-auto",onClick:()=>{s?e("/creer-annonce"):e("/connexion",{state:{from:"/creer-annonce"}})},children:"Publier une Annonce"}),m.jsx(ne,{size:"lg",variant:"outline",className:"w-full sm:w-auto",onClick:()=>e("/inscription"),children:"Cr√©er un Compte"})]})]})})]})},gr=()=>{const{user:e}=ae(),s=g(),t=u(),a=h.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",c=a.get("location")||"",[x,p]=h.useState({search:r,location:c,type:"",minPrice:i,maxPrice:n}),{listings:j,loading:v,error:f,hasMore:b,loadMore:y}=tr("real_estate",x),{toggleFavorite:N}=(()=>{const{user:e}=ae(),s=E(),[t,a]=h.useState(new Set),{data:r,isLoading:i,error:n,refetch:c}=_({queryKey:["favorites",null==e?void 0:e.id],queryFn:()=>Ns.getUserFavorites(),enabled:!!e,staleTime:3e5,gcTime:6e5}),{data:m,isLoading:u,error:x}=_({queryKey:["favoriteIds",null==e?void 0:e.id],queryFn:()=>Ns.getUserFavoritesWithStatus(),enabled:!!e,staleTime:12e4,gcTime:3e5});h.useEffect((()=>{m&&a(m)}),[m]);const p=M({mutationFn:s=>d(null,null,(function*(){if(!e)throw Error("Vous devez √™tre connect√© pour ajouter aux favoris");const t=yield Ns.toggleFavorite(s);return o(l({},t),{listingId:s})})),onMutate:r=>d(null,null,(function*(){yield s.cancelQueries(["favorites",null==e?void 0:e.id]),yield s.cancelQueries(["favoriteIds",null==e?void 0:e.id]);const i=s.getQueryData(["favorites",null==e?void 0:e.id]),n=s.getQueryData(["favoriteIds",null==e?void 0:e.id]),l=new Set(t);return l.has(r)?l.delete(r):l.add(r),a(l),s.setQueryData(["favoriteIds",null==e?void 0:e.id],l),{previousFavorites:i,previousIds:n,listingId:r}})),onSuccess:(t,a)=>{s.invalidateQueries(["favorites",null==e?void 0:e.id]),s.invalidateQueries(["favoriteIds",null==e?void 0:e.id]),s.invalidateQueries(["listings"]),s.invalidateQueries(["userStats"])},onError:(t,r,i)=>{(null==i?void 0:i.previousIds)&&(a(i.previousIds),s.setQueryData(["favoriteIds",null==e?void 0:e.id],i.previousIds))}}),g=e=>t.has(e),j=e=>{p.mutate(e)};return{favorites:r||[],favoriteIds:t,isLoading:i||u,error:n||x,isToggling:p.isLoading,isFavorite:g,toggleFavorite:j,addToFavorites:e=>{g(e)||j(e)},removeFromFavorites:e=>{g(e)&&j(e)},refreshFavorites:()=>{c()},totalFavorites:(null==r?void 0:r.length)||0,toggleFavoriteMutation:p}})(),w=(e,s)=>{p((t=>o(l({},t),{[e]:s})))},k=()=>{p({search:"",location:"",type:"",minPrice:"",maxPrice:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-green-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur de l'",m.jsx("span",{className:"gradient-text-emerald",children:"Immobilier"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Appartements, maisons, terrains et locaux commerciaux. Trouvez votre prochaine propri√©t√© ou investissement ici."})]}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Se,{id:"search",type:"text",placeholder:"Entrez une ville, quartier, mots-cl√©s...",value:x.search,onChange:e=>w("search",e.target.value),className:"pl-10"}),m.jsx(je,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Se,{id:"location",type:"text",placeholder:"Ville, r√©gion...",value:x.location,onChange:e=>w("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"minPrice",className:"block text-sm font-medium mb-1",children:"Prix min"}),m.jsx(Se,{id:"minPrice",type:"number",placeholder:"0",value:x.minPrice,onChange:e=>w("minPrice",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"maxPrice",className:"block text-sm font-medium mb-1",children:"Prix max"}),m.jsx(Se,{id:"maxPrice",type:"number",placeholder:"‚àû",value:x.maxPrice,onChange:e=>w("maxPrice",e.target.value)})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ne,{type:"submit",className:"flex-1",children:[m.jsx(je,{className:"mr-2 h-4 w-4"}),"Rechercher"]}),m.jsx(ne,{type:"button",variant:"outline",onClick:k,children:m.jsx(bs,{className:"h-4 w-4"})})]})]})}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"text-center mb-12",children:m.jsx(ne,{onClick:()=>{s(e?"/creer-annonce/real-estate":"/connexion")},size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",children:"Publier une annonce immobili√®re"})}),v&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des annonces..."})]}),f&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:f}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ne,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"R√©essayer"})]})]}),!v&&j.length>0&&m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:j.map(((e,s)=>m.jsx(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(lr,{listing:e,onToggleFavorite:N})},e.id)))}),!v&&!f&&0===j.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üè†"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce trouv√©e"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucune annonce immobili√®re ne correspond √† vos crit√®res de recherche."}),m.jsx(ne,{onClick:k,variant:"outline",children:"Effacer les filtres"})]}),b&&j.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ne,{onClick:y,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:v,children:v?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus d'annonces ",m.jsx(Ae,{className:"ml-2 h-5 w-5"})]})})}),j.length>0&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[j.length," annonce",j.length>1?"s":""," immobili√®re",j.length>1?"s":""," trouv√©e",j.length>1?"s":""]})})]})})},jr=()=>{const{user:e}=ae(),s=g(),t=u(),a=h.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",c=a.get("location")||"",d=a.get("brand")||"",[x,p]=h.useState({search:r,location:c,brand:d,minPrice:i,maxPrice:n,year:"",fuel:""}),{listings:j,loading:v,error:f,hasMore:b,loadMore:y,toggleFavorite:N}=tr("automobile",x),w=(e,s)=>{p((t=>o(l({},t),{[e]:s})))},k=()=>{p({search:"",location:"",brand:"",minPrice:"",maxPrice:"",year:"",fuel:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-blue-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur de l'",m.jsx("span",{className:"gradient-text-blue",children:"Automobile"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Voitures, motos, utilitaires et pi√®ces d√©tach√©es. Trouvez votre prochain v√©hicule ou vendez le v√¥tre ici."})]}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Se,{id:"search",type:"text",placeholder:"Marque, mod√®le, mots-cl√©s...",className:"pl-10 h-12 text-base",value:x.search,onChange:e=>w("search",e.target.value)}),m.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Se,{id:"location",type:"text",placeholder:"Ville, r√©gion...",className:"h-12 text-base",value:x.location,onChange:e=>w("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium mb-1",children:"Marque"}),m.jsxs("select",{id:"brand",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:x.brand,onChange:e=>w("brand",e.target.value),children:[m.jsx("option",{value:"",children:"Toutes marques"}),m.jsx("option",{value:"Toyota",children:"Toyota"}),m.jsx("option",{value:"Peugeot",children:"Peugeot"}),m.jsx("option",{value:"Renault",children:"Renault"}),m.jsx("option",{value:"Citro√´n",children:"Citro√´n"}),m.jsx("option",{value:"Ford",children:"Ford"}),m.jsx("option",{value:"Volkswagen",children:"Volkswagen"}),m.jsx("option",{value:"BMW",children:"BMW"}),m.jsx("option",{value:"Mercedes",children:"Mercedes"}),m.jsx("option",{value:"Audi",children:"Audi"}),m.jsx("option",{value:"Honda",children:"Honda"}),m.jsx("option",{value:"Nissan",children:"Nissan"}),m.jsx("option",{value:"Hyundai",children:"Hyundai"}),m.jsx("option",{value:"Kia",children:"Kia"}),m.jsx("option",{value:"Autre",children:"Autre"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"year",className:"block text-sm font-medium mb-1",children:"Ann√©e"}),m.jsxs("select",{id:"year",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:x.year,onChange:e=>w("year",e.target.value),children:[m.jsx("option",{value:"",children:"Toutes ann√©es"}),Array.from({length:25},((e,s)=>2024-s)).map((e=>m.jsx("option",{value:e,children:e},e)))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"fuel",className:"block text-sm font-medium mb-1",children:"Carburant"}),m.jsxs("select",{id:"fuel",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:x.fuel,onChange:e=>w("fuel",e.target.value),children:[m.jsx("option",{value:"",children:"Tous carburants"}),m.jsx("option",{value:"essence",children:"Essence"}),m.jsx("option",{value:"diesel",children:"Diesel"}),m.jsx("option",{value:"hybride",children:"Hybride"}),m.jsx("option",{value:"electrique",children:"√âlectrique"}),m.jsx("option",{value:"gpl",children:"GPL"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ne,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[m.jsx(bs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),m.jsx(ne,{type:"button",variant:"outline",className:"h-12 px-3",onClick:k,children:"Effacer"})]})]})}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:m.jsx(ne,{onClick:()=>{s(e?"/creer-annonce/automobile":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"üöó Publier une annonce automobile"})}),v&&0===j.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin text-primary mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des v√©hicules..."})]}),f&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:f}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ne,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"R√©essayer"})]})]}),!v&&j.length>0&&m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:j.map(((e,s)=>m.jsx(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(lr,{listing:e,onToggleFavorite:N})},e.id)))}),!v&&!f&&0===j.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üöó"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun v√©hicule trouv√©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun v√©hicule ne correspond √† vos crit√®res de recherche."}),m.jsx(ne,{onClick:k,variant:"outline",children:"Effacer les filtres"})]}),b&&j.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ne,{onClick:y,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:v,children:v?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus de v√©hicules ",m.jsx(Ae,{className:"ml-2 h-5 w-5"})]})})}),j.length>0&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[j.length," v√©hicule",j.length>1?"s":""," trouv√©",j.length>1?"s":""]})})]})})},vr=()=>{const{user:e}=ae(),s=g(),t=u(),a=h.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",c=a.get("location")||"",[d,x]=h.useState({search:r,location:c,serviceType:"",minPrice:i,maxPrice:n}),{listings:p,loading:j,error:v,hasMore:f,loadMore:b,toggleFavorite:y}=tr("services",d),N=(e,s)=>{x((t=>o(l({},t),{[e]:s})))},w=()=>{x({search:"",location:"",serviceType:"",minPrice:"",maxPrice:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-purple-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur des ",m.jsx("span",{className:"gradient-text-purple",children:"Services"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Plomberie, √©lectricit√©, cours particuliers, √©v√©nementiel et bien plus. Trouvez le service dont vous avez besoin."})]}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Se,{id:"search",type:"text",placeholder:"Type de service, mots-cl√©s...",className:"pl-10 h-12 text-base",value:d.search,onChange:e=>N("search",e.target.value)}),m.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Se,{id:"location",type:"text",placeholder:"Ville, quartier...",className:"h-12 text-base",value:d.location,onChange:e=>N("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"service-type",className:"block text-sm font-medium mb-1",children:"Type de service"}),m.jsxs("select",{id:"service-type",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:d.serviceType,onChange:e=>N("serviceType",e.target.value),children:[m.jsx("option",{value:"",children:"Tous services"}),m.jsx("option",{value:"plomberie",children:"Plomberie"}),m.jsx("option",{value:"electricite",children:"√âlectricit√©"}),m.jsx("option",{value:"menage",children:"M√©nage"}),m.jsx("option",{value:"jardinage",children:"Jardinage"}),m.jsx("option",{value:"education",children:"√âducation"}),m.jsx("option",{value:"informatique",children:"Informatique"}),m.jsx("option",{value:"coiffure",children:"Coiffure"}),m.jsx("option",{value:"beaute",children:"Beaut√©"}),m.jsx("option",{value:"evenementiel",children:"√âv√©nementiel"}),m.jsx("option",{value:"transport",children:"Transport"}),m.jsx("option",{value:"reparation",children:"R√©paration"}),m.jsx("option",{value:"conseil",children:"Conseil"}),m.jsx("option",{value:"autre",children:"Autre"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"price-range",className:"block text-sm font-medium mb-1",children:"Prix (FCFA)"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Se,{type:"number",placeholder:"Min",className:"h-12 text-base",value:d.minPrice,onChange:e=>N("minPrice",e.target.value)}),m.jsx(Se,{type:"number",placeholder:"Max",className:"h-12 text-base",value:d.maxPrice,onChange:e=>N("maxPrice",e.target.value)})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ne,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[m.jsx(bs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),m.jsx(ne,{type:"button",variant:"outline",className:"h-12 px-3",onClick:w,children:"Effacer"})]})]})}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:m.jsx(ne,{onClick:()=>{s(e?"/creer-annonce/services":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"üîß Proposer un service"})}),j&&0===p.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin text-primary mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des services..."})]}),v&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:v}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ne,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"R√©essayer"})]})]}),!j&&p.length>0&&m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:p.map(((e,s)=>m.jsx(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(lr,{listing:e,onToggleFavorite:y})},e.id)))}),!j&&!v&&0===p.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üîß"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun service trouv√©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun service ne correspond √† vos crit√®res de recherche."}),m.jsx(ne,{onClick:w,variant:"outline",children:"Effacer les filtres"})]}),f&&p.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ne,{onClick:b,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:j,children:j?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus de services ",m.jsx(Ae,{className:"ml-2 h-5 w-5"})]})})}),p.length>0&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[p.length," service",p.length>1?"s":""," trouv√©",p.length>1?"s":""]})})]})})},fr=()=>{const{user:e}=ae(),s=g(),t=u(),a=h.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("sort")||"",i=parseInt(a.get("per")||"12",10),n=a.get("search")||"",c=a.get("minPrice")||"",d=a.get("maxPrice")||"",x=a.get("location")||"",[p,j]=h.useState({search:n,location:x,category:"",minPrice:c,maxPrice:d,condition:"",sort:r,per:isNaN(i)?12:Math.min(Math.max(i,6),48)}),{listings:v,loading:f,error:b,hasMore:y,loadMore:N,toggleFavorite:w}=tr("marketplace",p);h.useMemo((()=>"popular"===p.sort?[...v].sort(((e,s)=>((null==s?void 0:s.views_count)||0)-((null==e?void 0:e.views_count)||0))):v),[p.sort,v]);const k=(e,s)=>{j((t=>o(l({},t),{[e]:s})))},C=()=>{j({search:"",location:"",category:"",minPrice:"",maxPrice:"",condition:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-orange-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur ",m.jsx("span",{className:"gradient-text-orange",children:"Marketplace"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"T√©l√©phones, v√™tements, meubles, livres et bien plus. Achetez et vendez en toute s√©curit√©."})]}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Se,{id:"search",type:"text",placeholder:"Produit, marque, mots-cl√©s...",className:"pl-10 h-12 text-base",value:p.search,onChange:e=>k("search",e.target.value)}),m.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Se,{id:"location",type:"text",placeholder:"Ville, quartier...",className:"h-12 text-base",value:p.location,onChange:e=>k("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"Cat√©gorie"}),m.jsxs("select",{id:"category",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:p.category,onChange:e=>k("category",e.target.value),children:[m.jsx("option",{value:"",children:"Toutes cat√©gories"}),m.jsx("option",{value:"telephonie",children:"T√©l√©phonie"}),m.jsx("option",{value:"informatique",children:"Informatique"}),m.jsx("option",{value:"vetements",children:"V√™tements"}),m.jsx("option",{value:"chaussures",children:"Chaussures"}),m.jsx("option",{value:"accessoires",children:"Accessoires"}),m.jsx("option",{value:"mobilier",children:"Mobilier"}),m.jsx("option",{value:"electromenager",children:"√âlectrom√©nager"}),m.jsx("option",{value:"livres",children:"Livres"}),m.jsx("option",{value:"sport",children:"Sport"}),m.jsx("option",{value:"beaute",children:"Beaut√©"}),m.jsx("option",{value:"jouets",children:"Jouets"}),m.jsx("option",{value:"bricolage",children:"Bricolage"}),m.jsx("option",{value:"jardinage",children:"Jardinage"}),m.jsx("option",{value:"autre",children:"Autre"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium mb-1",children:"√âtat"}),m.jsxs("select",{id:"condition",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:p.condition,onChange:e=>k("condition",e.target.value),children:[m.jsx("option",{value:"",children:"Tous √©tats"}),m.jsx("option",{value:"neuf",children:"Neuf"}),m.jsx("option",{value:"excellent",children:"Excellent"}),m.jsx("option",{value:"bon",children:"Bon"}),m.jsx("option",{value:"moyen",children:"Moyen"}),m.jsx("option",{value:"usage",children:"Usage"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"price-range",className:"block text-sm font-medium mb-1",children:"Prix (FCFA)"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Se,{type:"number",placeholder:"Min",className:"h-12 text-base",value:p.minPrice,onChange:e=>k("minPrice",e.target.value)}),m.jsx(Se,{type:"number",placeholder:"Max",className:"h-12 text-base",value:p.maxPrice,onChange:e=>k("maxPrice",e.target.value)})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ne,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[m.jsx(bs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),m.jsx(ne,{type:"button",variant:"outline",className:"h-12 px-3",onClick:C,children:"Effacer"})]})]})}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:m.jsx(ne,{onClick:()=>{s(e?"/creer-annonce/marketplace":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"üõçÔ∏è Vendre un produit"})}),f&&0===v.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin text-primary mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des produits..."})]}),b&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:b}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ne,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ne,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"R√©essayer"})]})]}),!f&&v.length>0&&m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:v.map(((e,s)=>m.jsx(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(lr,{listing:e,onToggleFavorite:w})},e.id)))}),!f&&!b&&0===v.length&&m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üõçÔ∏è"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun produit trouv√©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun produit ne correspond √† vos crit√®res de recherche."}),m.jsx(ne,{onClick:C,variant:"outline",children:"Effacer les filtres"})]}),y&&v.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ne,{onClick:N,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:f,children:f?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus de produits ",m.jsx(Ae,{className:"ml-2 h-5 w-5"})]})})}),v.length>0&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[v.length," produit",v.length>1?"s":""," trouv√©",v.length>1?"s":""]})})]})})},br=()=>{const e=g(),[s,t]=h.useState([]),[a,r]=h.useState(!0),[i,n]=h.useState(null),[c,u]=h.useState(1),[x,p]=h.useState(1),[j,v]=h.useState(!1),[f,b]=h.useState({category:"",minPrice:"",maxPrice:"",location:"",search:""}),y=(...e)=>d(null,[...e],(function*(e=1,s=f){try{r(!0),n(null);const a=yield ys.getPremiumListings(100,!0);if(null==a?void 0:a.data){let r=a.data;s.category&&(r=r.filter((e=>e.category===s.category))),s.minPrice&&(r=r.filter((e=>e.price>=parseFloat(s.minPrice)))),s.maxPrice&&(r=r.filter((e=>e.price<=parseFloat(s.maxPrice)))),s.location&&(r=r.filter((e=>{var t,a,r,i;return(null==(a=null==(t=e.location)?void 0:t.city)?void 0:a.toLowerCase().includes(s.location.toLowerCase()))||(null==(i=null==(r=e.location)?void 0:r.country)?void 0:i.toLowerCase().includes(s.location.toLowerCase()))}))),s.search&&(r=r.filter((e=>e.title.toLowerCase().includes(s.search.toLowerCase())||e.description.toLowerCase().includes(s.search.toLowerCase()))));const i=12,n=r.length,l=Math.ceil(n/i),o=(e-1)*i,c=o+i,d=r.slice(o,c);t(d),p(l),v(l>e),u(e)}}catch(a){n((null==a?void 0:a.message)||"Erreur lors du chargement des annonces premium")}finally{r(!1)}}));h.useEffect((()=>{y(1,f)}),[]);const N=(e,s)=>{const t=o(l({},f),{[e]:s});b(t),u(1),y(1,t)},w=()=>{const e={category:"",minPrice:"",maxPrice:"",location:"",search:""};b(e),y(1,e)},k=e=>{1>e||e>x||y(e,f)};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-900 to-blue-900/20",children:[m.jsx(Bt.section,{className:"relative py-16 md:py-24 bg-gradient-to-r from-amber-500/10 via-yellow-500/10 to-orange-500/10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsx("div",{className:"flex items-center mb-6",children:m.jsxs(ne,{variant:"ghost",onClick:()=>e(-1),className:"mr-4 hover:bg-amber-100",children:[m.jsx(Ds,{className:"h-5 w-5 mr-2"}),"Retour"]})}),m.jsxs(Bt.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[m.jsxs("div",{className:"flex justify-center items-center mb-6",children:[m.jsx(Is,{className:"h-16 w-16 text-amber-500 mr-4"}),m.jsx(ts,{className:"h-12 w-12 text-yellow-500"})]}),m.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Annonces ",m.jsx("span",{className:"gradient-text",children:"Premium"})]}),m.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"D√©couvrez notre s√©lection exclusive d'annonces premium. Qualit√© garantie, visibilit√© maximale."}),m.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-300",children:[m.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Mise en avant garantie"]}),m.jsxs(Xe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[m.jsx(ts,{className:"h-4 w-4 mr-2"}),"Qualit√© premium"]}),m.jsxs(Xe,{variant:"secondary",className:"bg-orange-100 text-orange-800 border-orange-300",children:[m.jsx(Is,{className:"h-4 w-4 mr-2"}),"Support prioritaire"]})]})]})]})}),m.jsx("section",{className:"py-8 bg-background/50",children:m.jsx("div",{className:"container mx-auto px-4 md:px-6",children:m.jsx(Bt.div,{className:"bg-card rounded-xl p-6 shadow-lg border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:m.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault(),y(1,f)},className:"relative",children:[m.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),m.jsx(Se,{type:"text",placeholder:"Rechercher dans les annonces premium...",value:f.search,onChange:e=>N("search",e.target.value),className:"pl-10 pr-4 py-3"})]})}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsxs("select",{value:f.category,onChange:e=>N("category",e.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[m.jsx("option",{value:"",children:"Toutes cat√©gories"}),[{value:"real_estate",label:"üè† Immobilier",color:"bg-blue-100 text-blue-800"},{value:"automobile",label:"üöó Automobile",color:"bg-green-100 text-green-800"},{value:"services",label:"üîß Services",color:"bg-purple-100 text-purple-800"},{value:"marketplace",label:"üõçÔ∏è Marketplace",color:"bg-orange-100 text-orange-800"}].map((e=>m.jsx("option",{value:e.value,children:e.label},e.value)))]}),m.jsx(Se,{type:"number",placeholder:"Prix min",value:f.minPrice,onChange:e=>N("minPrice",e.target.value),className:"w-32"}),m.jsx(Se,{type:"number",placeholder:"Prix max",value:f.maxPrice,onChange:e=>N("maxPrice",e.target.value),className:"w-32"}),m.jsx(Se,{type:"text",placeholder:"Localisation",value:f.location,onChange:e=>N("location",e.target.value),className:"w-40"}),m.jsxs(ne,{variant:"outline",onClick:w,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),"Effacer"]})]})]})})})}),m.jsx("section",{className:"py-16",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[i&&m.jsx(Bt.div,{className:"text-center text-destructive mb-8 p-4 bg-destructive/10 rounded-lg",initial:{opacity:0},animate:{opacity:1},children:i}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?Array.from({length:9}).map(((e,s)=>m.jsxs(Bt.div,{className:"bg-card rounded-lg shadow-lg overflow-hidden border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:[m.jsx("div",{className:"h-48 bg-muted animate-pulse"}),m.jsxs("div",{className:"p-4",children:[m.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-3 animate-pulse"}),m.jsx("div",{className:"h-4 w-1/2 bg-muted rounded mb-4 animate-pulse"}),m.jsx("div",{className:"h-8 w-1/3 bg-muted rounded animate-pulse"})]})]},s))):s.length>0?s.map(((e,s)=>m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:m.jsx(lr,{listing:e,showActions:!1})},e.id))):m.jsxs(Bt.div,{className:"col-span-full text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[m.jsx("div",{className:"text-6xl mb-4",children:"‚≠ê"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce premium trouv√©e"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Essayez de modifier vos filtres ou revenez plus tard"}),m.jsx(ne,{onClick:w,variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Effacer les filtres"})]})}),!a&&x>1&&m.jsxs(Bt.div,{className:"flex justify-center items-center mt-12 gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[m.jsx(ne,{variant:"outline",onClick:()=>k(c-1),disabled:1===c,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Pr√©c√©dent"}),Array.from({length:x},((e,s)=>s+1)).map((e=>m.jsx(ne,{variant:c===e?"default":"outline",onClick:()=>k(e),className:c===e?"bg-amber-500 hover:bg-amber-600":"border-amber-300 text-amber-700 hover:bg-amber-100",children:e},e))),m.jsx(ne,{variant:"outline",onClick:()=>k(c+1),disabled:c===x,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Suivant"})]}),!a&&s.length>0&&m.jsx(Bt.div,{className:"text-center mt-8 text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:m.jsxs("p",{children:["Affichage de ",s.length," annonces premium",x>1&&` (page ${c} sur ${x})`]})})]})})]})},yr=[{value:"real_estate",label:"Immobilier"},{value:"automobile",label:"Automobile"},{value:"services",label:"Service"},{value:"marketplace",label:"Produit"}],Nr={title:"",description:"",price:"",currency:"XOF",category:"",subCategory:"",location:{city:"",country:""},images:[],videos:[],specificData:{}},wr=({onSuccess:e,category:s,onDataChange:t,currentStep:a=1,onStepChange:r})=>{const{toast:i}=Le(),[n,c]=h.useState(o(l({},Nr),{category:s?(u=s,{"real-estate":"real_estate",automobile:"automobile",services:"services",marketplace:"marketplace"}[u]||""):""}));var u;const[x,p]=h.useState(!1),[g,j]=h.useState(!1),[v,f]=h.useState({current:0,total:0}),[b,y]=h.useState(a);h.useEffect((()=>{y(a)}),[a]);const N=[{code:"BJ",name:"B√©nin",cities:["Cotonou","Porto-Novo","Parakou","Djougou","Bohicon","Kandi","Abomey","Natitingou","Ouidah","Lokossa"]},{code:"CI",name:"C√¥te d'Ivoire",cities:["Abidjan","Bouak√©","Daloa","Yamoussoukro","San Pedro","Korhogo","Man","Gagnoa","Abengourou","Divo"]},{code:"NG",name:"Nigeria",cities:["Lagos","Kano","Ibadan","Abuja","Port Harcourt","Benin City","Maiduguri","Zaria","Aba","Jos"]}],w=e=>{const{name:s,value:a}=e.target;if(s.startsWith("location.")){const e=s.split(".")[1];c((s=>o(l({},s),{location:o(l({},s.location),{[e]:a})})))}else c((e=>o(l({},e),{[s]:a})));t&&t({[s]:a})},k=e=>{const{name:s,value:t}=e.target;c((e=>o(l({},e),{specificData:o(l({},e.specificData),{[s]:t})})))},C=e=>new Promise((s=>{const t=new FileReader;t.onload=t=>{s({url:t.target.result,file:e,id:Date.now()+Math.random()})},t.readAsDataURL(e)})),S=e=>d(null,null,(function*(){const s=Array.from(e.target.files);if(s.length)if(8<n.images.length+s.length)i({title:"Limite atteinte",description:"Vous pouvez uploader jusqu'√† 8 images maximum.",variant:"destructive"});else if(s.filter((e=>!e.type.startsWith("image/"))).length>0)i({title:"Type de fichier invalide",description:"Seules les images sont accept√©es.",variant:"destructive"});else{j(!0),f({current:0,total:s.length});try{const e=yield Promise.all(s.map(C)),a=[...n.images,...e.map((e=>({url:e.url,isPreview:!0,id:e.id,file:e.file})))];c((e=>o(l({},e),{images:a}))),t&&t({images:a});const r=yield Promise.all(s.map((e=>((e,s=1920,t=.8)=>new Promise((a=>{const r=document.createElement("canvas"),i=r.getContext("2d"),n=new Image;n.onload=()=>{let{width:l,height:o}=n;l>s&&(o=o*s/l,l=s),r.width=l,r.height=o,i.drawImage(n,0,0,l,o),r.toBlob((s=>{const t=new File([s],e.name,{type:"image/jpeg",lastModified:Date.now()});a(t)}),"image/jpeg",t)},n.src=URL.createObjectURL(e)})))(e,1920,.8)))),m=(e,s)=>d(null,null,(function*(){const t=e.slice(s,s+3);return Promise.all(t.map(((t,a)=>d(null,null,(function*(){const r=s+a;try{const s=yield Vs.uploadImage(t,"listings");return f({current:r+1,total:e.length}),{success:!0,url:s,index:r}}catch(i){return f({current:r+1,total:e.length}),{success:!1,error:i.message,index:r}}})))))})),u=[];for(let s=0;s<r.length;s+=3){const e=yield m(r,s);u.push(...e)}const x=u.filter((e=>e.success)),h=u.filter((e=>!e.success));if(x.length>0){const s=[...a];x.forEach((({url:t,index:a})=>{const r=s.findIndex((s=>s.isPreview&&s.id===e[a].id));-1!==r&&(s[r]={url:t,isPreview:!1})})),c((e=>o(l({},e),{images:s}))),t&&t({images:s}),i({title:"Images ajout√©es",description:x.length+" image(s) t√©l√©charg√©e(s) avec succ√®s."})}h.length>0&&i({title:"Erreurs d'upload",description:`Erreurs pour ${h.length} fichier(s): ${h.map((e=>e.error)).join(", ")}`,variant:"destructive"})}catch(a){i({title:"Erreur upload",description:(null==a?void 0:a.message)||"Erreur lors de l'upload.",variant:"destructive"})}finally{j(!1),f({current:0,total:0})}}})),P=()=>{switch(n.category){case"real_estate":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"propertyType",children:"Type de bien immobilier"}),m.jsx(Se,{id:"propertyType",name:"propertyType",placeholder:"Ex: Appartement, Maison, Terrain, Local commercial...",value:n.specificData.propertyType||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"transactionType",children:"Type de transaction"}),m.jsx(Se,{id:"transactionType",name:"transactionType",placeholder:"Ex: Vente, Location, Location-vente...",value:n.specificData.transactionType||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"bedrooms",children:"Nombre de chambres"}),m.jsx(Se,{id:"bedrooms",name:"bedrooms",type:"number",placeholder:"Ex: 3",min:"0",value:n.specificData.bedrooms||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"bathrooms",children:"Nombre de salles de bain"}),m.jsx(Se,{id:"bathrooms",name:"bathrooms",type:"number",placeholder:"Ex: 2",min:"0",value:n.specificData.bathrooms||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"areaSqMeters",children:"Surface en m√®tres carr√©s"}),m.jsx(Se,{id:"areaSqMeters",name:"areaSqMeters",type:"number",placeholder:"Ex: 120",min:"1",value:n.specificData.areaSqMeters||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{children:"Commodit√©s et √©quipements"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ajoutez les commodit√©s disponibles (piscine, parking, climatisation, etc.)"}),(n.specificData.amenities||[]).map(((e,s)=>m.jsxs("div",{className:"flex gap-2 mb-1",children:[m.jsx(Se,{value:e,onChange:e=>L(s,e.target.value),placeholder:"Ex: Piscine, Parking, Climatisation..."}),m.jsx(ne,{type:"button",size:"icon",variant:"destructive",onClick:()=>_(s),title:"Supprimer",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"√ó"})]},s))),m.jsx(ne,{type:"button",size:"sm",variant:"outline",onClick:M,className:"mb-2 border-gray-400 text-gray-700 hover:bg-gray-50",children:"+ Ajouter une commodit√©"})]})]});case"automobile":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"vehicleType",children:"Type de v√©hicule"}),m.jsx(Se,{id:"vehicleType",name:"vehicleType",placeholder:"Ex: Voiture, Moto, Camion, Bus...",value:n.specificData.vehicleType||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"make",children:"Marque du v√©hicule"}),m.jsx(Se,{id:"make",name:"make",placeholder:"Ex: Toyota, Honda, BMW...",value:n.specificData.make||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"model",children:"Mod√®le du v√©hicule"}),m.jsx(Se,{id:"model",name:"model",placeholder:"Ex: Corolla, Civic, X5...",value:n.specificData.model||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"year",children:"Ann√©e de fabrication"}),m.jsx(Se,{id:"year",name:"year",type:"number",placeholder:"Ex: 2020",min:"1900",max:(new Date).getFullYear()+1,value:n.specificData.year||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"mileage",children:"Kilom√©trage en km"}),m.jsx(Se,{id:"mileage",name:"mileage",type:"number",placeholder:"Ex: 50000",min:"0",value:n.specificData.mileage||"",onChange:k})]})]});case"services":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"serviceCategory",children:"Cat√©gorie de service"}),m.jsx(Se,{id:"serviceCategory",name:"serviceCategory",placeholder:"Ex: Plomberie, √âlectricit√©, Design, Formation...",value:n.specificData.serviceCategory||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"availability",children:"Disponibilit√©"}),m.jsx(Se,{id:"availability",name:"availability",placeholder:"Ex: Lundi-Vendredi 9h-18h, Weekends...",value:n.specificData.availability||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"experienceYears",children:"Ann√©es d'exp√©rience"}),m.jsx(Se,{id:"experienceYears",name:"experienceYears",type:"number",placeholder:"Ex: 5",min:"0",value:n.specificData.experienceYears||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{children:"Liens de portfolio et r√©f√©rences"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ajoutez des liens vers vos r√©alisations, portfolio ou r√©f√©rences"}),(n.specificData.portfolioLinks||[]).map(((e,s)=>m.jsxs("div",{className:"flex gap-2 mb-1",children:[m.jsx(Se,{value:e,onChange:e=>A(s,e.target.value),placeholder:"https://votre-portfolio.com ou lien vers vos r√©alisations..."}),m.jsx(ne,{type:"button",size:"icon",variant:"destructive",onClick:()=>E(s),title:"Supprimer",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"√ó"})]},s))),m.jsx(ne,{type:"button",size:"sm",variant:"outline",onClick:z,className:"mb-2 border-gray-400 text-gray-700 hover:bg-gray-50",children:"+ Ajouter un lien de portfolio"})]})]});case"marketplace":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"productCategory",children:"Cat√©gorie de produit"}),m.jsx(Se,{id:"productCategory",name:"productCategory",placeholder:"Ex: √âlectronique, V√™tements, Livres, Sport...",value:n.specificData.productCategory||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"brand",children:"Marque du produit"}),m.jsx(Se,{id:"brand",name:"brand",placeholder:"Ex: Apple, Nike, Samsung...",value:n.specificData.brand||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"stockQuantity",children:"Quantit√© disponible en stock"}),m.jsx(Se,{id:"stockQuantity",name:"stockQuantity",type:"number",placeholder:"Ex: 10",min:"0",value:n.specificData.stockQuantity||"",onChange:k})]})]});default:return null}},A=(e,s)=>{c((t=>{var a;return o(l({},t),{specificData:o(l({},t.specificData),{portfolioLinks:(null==(a=t.specificData.portfolioLinks)?void 0:a.map(((t,a)=>a===e?s:t)))||[]})})}))},z=()=>{c((e=>o(l({},e),{specificData:o(l({},e.specificData),{portfolioLinks:[...e.specificData.portfolioLinks||[],""]})})))},E=e=>{c((s=>{var t;return o(l({},s),{specificData:o(l({},s.specificData),{portfolioLinks:(null==(t=s.specificData.portfolioLinks)?void 0:t.filter(((s,t)=>t!==e)))||[]})})}))},L=(e,s)=>{c((t=>{var a;return o(l({},t),{specificData:o(l({},t.specificData),{amenities:(null==(a=t.specificData.amenities)?void 0:a.map(((t,a)=>a===e?s:t)))||[]})})}))},M=()=>{c((e=>o(l({},e),{specificData:o(l({},e.specificData),{amenities:[...e.specificData.amenities||[],""]})})))},_=e=>{c((s=>{var t;return o(l({},s),{specificData:o(l({},s.specificData),{amenities:(null==(t=s.specificData.amenities)?void 0:t.filter(((s,t)=>t!==e)))||[]})})}))};return m.jsxs("div",{className:"space-y-6",children:[(()=>{var e,s;switch(b){case 1:return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Informations de base"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Commencez par les informations essentielles de votre annonce."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"title",children:"Titre de l'annonce *"}),m.jsx(Se,{id:"title",name:"title",value:n.title,onChange:w,placeholder:"Ex: Appartement moderne 3 pi√®ces √† Cotonou",required:!0,className:"h-12"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"description",children:"Description *"}),m.jsx(Rs,{id:"description",name:"description",value:n.description,onChange:w,placeholder:"D√©crivez votre offre en d√©tail...",rows:4,required:!0,className:"max-w-2xl resize-none transition-all duration-200",style:{minHeight:"120px",height:"auto",overflow:"hidden"},onInput:e=>{e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,300)+"px"}})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"category",children:"Cat√©gorie *"}),m.jsxs("select",{id:"category",name:"category",value:n.category,onChange:w,required:!0,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[m.jsx("option",{value:"",className:"text-foreground",children:"S√©lectionner une cat√©gorie"}),yr.map((e=>m.jsx("option",{value:e.value,className:"text-foreground",children:e.label},e.value)))]})]})]}),m.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[m.jsx("h4",{className:"text-lg font-medium text-foreground",children:"Prix et localisation"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"price",children:"Prix *"}),m.jsx(Se,{id:"price",name:"price",type:"number",value:n.price,onChange:w,placeholder:"0",required:!0,className:"h-12"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"currency",children:"Devise"}),m.jsxs("select",{id:"currency",name:"currency",value:n.currency,onChange:w,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[m.jsx("option",{value:"XOF",className:"text-foreground",children:"XOF (Franc CFA)"}),m.jsx("option",{value:"EUR",className:"text-foreground",children:"EUR (Euro)"}),m.jsx("option",{value:"USD",className:"text-foreground",children:"USD (Dollar US)"}),m.jsx("option",{value:"NGN",className:"text-foreground",children:"NGN (Naira)"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"country",children:"Pays"}),m.jsxs("select",{id:"country",name:"location.country",value:n.location.country,onChange:w,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[m.jsx("option",{value:"",className:"text-foreground",children:"S√©lectionner un pays"}),N.map((e=>m.jsx("option",{value:e.name,className:"text-foreground",children:e.name},e.code)))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"city",children:"Ville"}),m.jsxs("select",{id:"city",name:"location.city",value:n.location.city,onChange:w,required:!0,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground disabled:opacity-50 disabled:cursor-not-allowed",disabled:!n.location.country,children:[m.jsx("option",{value:"",className:"text-foreground",children:"S√©lectionner une ville"}),null==(s=null==(e=N.find((e=>e.name===n.location.country)))?void 0:e.cities)?void 0:s.map(((e,s)=>m.jsx("option",{value:e,className:"text-foreground",children:e},`${n.location.country||"unknown"}-${e}-${s}`)))]})]})]})]})]});case 2:return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"M√©dias et d√©tails"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Ajoutez des photos et des informations sp√©cifiques √† votre cat√©gorie."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-medium text-foreground",children:"Images et m√©dias"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"image-upload",children:"S√©lectionner des images"}),m.jsxs("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-6 text-center transition-colors "+(g?"border-blue-400 bg-blue-50":"hover:border-primary"),children:[m.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:S,className:"hidden",id:"image-upload",disabled:g}),m.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer "+(g?"cursor-not-allowed":""),children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"mx-auto w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:g?m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}):m.jsx(us,{className:"h-6 w-6 text-gray-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900",children:g?"Chargement en cours...":"Cliquez pour ajouter des images"}),m.jsx("p",{className:"text-xs text-gray-600",children:g?`Veuillez patienter (${v.current}/${v.total})`:"PNG, JPG jusqu'√† 10MB"}),g&&v.total>0&&m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:v.current/v.total*100+"%"}})})]})]})})]})]}),n.images.length>0&&m.jsxs("div",{className:"space-y-3",children:[m.jsxs(Ve,{children:["Images s√©lectionn√©es (",n.images.length,")"]}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:n.images.map(((e,s)=>m.jsxs("div",{className:"relative group aspect-square",children:[m.jsx("img",{src:e.url,alt:"Aper√ßu "+(s+1),className:"w-full h-full object-cover rounded-lg border "+(e.isPreview?"opacity-70":"")}),e.isPreview&&m.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:m.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}),m.jsx("button",{type:"button",onClick:()=>{return e=s,void c((s=>{const a=s.images.filter(((s,t)=>t!==e));return t&&t({images:a}),o(l({},s),{images:a})}));var e},className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1.5 text-xs opacity-0 group-hover:opacity-100 transition-opacity shadow-md",title:"Supprimer cette image",disabled:e.isPreview,children:"√ó"})]},s)))})]})]}),m.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[m.jsx("h4",{className:"text-lg font-medium text-foreground",children:"D√©tails sp√©cifiques √† la cat√©gorie"}),n.category?m.jsx("div",{className:"space-y-4",children:P()}):m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-muted-foreground",children:"Veuillez d'abord s√©lectionner une cat√©gorie √† l'√©tape 1."})})]})]});default:return null}})(),m.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[m.jsx(ne,{type:"button",variant:"outline",onClick:()=>{b>1&&(y(b-1),r&&r(b-1))},disabled:1===b,children:"Pr√©c√©dent"}),m.jsx("div",{className:"flex items-center space-x-2",children:2>b?m.jsx(ne,{type:"button",onClick:()=>{2>b&&(y(b+1),r&&r(b+1))},disabled:!n.title||!n.description||!n.category,children:"Suivant"}):m.jsx(ne,{type:"submit",onClick:s=>d(null,null,(function*(){s.preventDefault();const t=!n.title||5>n.title.length?"Le titre est requis (min 5 caract√®res)":!n.description||10>n.description.length?"La description est requise (min 10 caract√®res)":!n.price||isNaN(+n.price)?"Le prix est requis et doit √™tre un nombre":n.category?null:"La cat√©gorie est requise";if(t)i({title:"Erreur de validation",description:t,variant:"destructive"});else{p(!0);try{const s=n.images.filter((e=>!e.isPreview)).map((e=>e.url)),t=o(l({},n),{images:s,price:+n.price}),a=yield ys.createListing(t);i({title:"Annonce cr√©√©e !",description:"Votre annonce a √©t√© soumise avec succ√®s."}),c(Nr),e&&e(a)}catch(a){i({title:"Erreur",description:(null==a?void 0:a.message)||"Erreur lors de la cr√©ation.",variant:"destructive"})}finally{p(!1)}}})),disabled:x,className:"bg-green-600 hover:bg-green-700",children:x?"Publication...":"Publier l'annonce"})})]})]})},kr=({formData:e,onClose:s})=>{var t,a;const[r,i]=h.useState(0),[n,c]=h.useState(!1),d=(u=e.category,{real_estate:Bs,automobile:me,services:ue,marketplace:xe}[u]||Bs);var u;const x=e.images&&Array.isArray(e.images)?e.images.map((e=>{const s=(t=e)?"string"==typeof t?t:(null==t?void 0:t.url)?t.url:(null==t?void 0:t.file)?URL.createObjectURL(t.file):(null==t?void 0:t.src)?t.src:null:null;var t;return s?o(l({},e),{displayUrl:s}):null})).filter(Boolean):[];return m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:s,children:m.jsxs(Bt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[m.jsxs("div",{className:"sticky top-0 bg-background border-b border-border px-6 py-4 flex items-center justify-between z-10",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Aper√ßu de l'annonce"}),(!e.title||!e.description||!e.price)&&m.jsx(Xe,{variant:"outline",className:"text-xs text-yellow-600 border-yellow-600",children:"Preview partiel"})]}),m.jsx(ne,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:"‚úï"})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"relative aspect-video bg-muted rounded-lg overflow-hidden",children:x.length>0?m.jsxs(m.Fragment,{children:[m.jsx($t,{mode:"wait",children:m.jsx(Bt.img,{src:null==(t=x[r])?void 0:t.displayUrl,alt:"Image "+(r+1),className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},r)}),x.length>1&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>{x.length>0&&i((e=>0===e?x.length-1:e))},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:m.jsx(He,{className:"h-5 w-5"})}),m.jsx("button",{onClick:()=>{x.length>0&&i((e=>e===x.length-1?0:e+1))},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:m.jsx(We,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm",children:[r+1," / ",x.length]}),m.jsxs("div",{className:"absolute top-4 left-4 flex space-x-2",children:[m.jsx("button",{onClick:()=>c(!n),className:"p-2 rounded-full transition-all "+(n?"bg-red-500 text-white":"bg-white bg-opacity-80 text-gray-700 hover:bg-opacity-100"),children:m.jsx(cs,{className:"h-5 w-5 "+(n?"fill-current":"")})}),m.jsx("button",{className:"p-2 rounded-full bg-white bg-opacity-80 text-gray-700 hover:bg-opacity-100 transition-all",children:m.jsx(Os,{className:"h-5 w-5"})})]})]}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Us,{className:"h-8 w-8"})}),m.jsx("p",{children:"Aucune image"}),m.jsx("p",{className:"text-xs mt-1",children:"Ajoutez des images √† l'√©tape 2"})]})})}),x.length>1&&m.jsx("div",{className:"flex space-x-2 mt-4 overflow-x-auto",children:x.map(((e,s)=>m.jsx("button",{onClick:()=>(e=>{e>=0&&e<x.length&&i(e)})(s),className:"flex-shrink-0 w-20 h-16 rounded-lg overflow-hidden border-2 transition-all "+(s===r?"border-primary":"border-border hover:border-primary/50"),children:m.jsx("img",{src:e.displayUrl,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover"})},s)))})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:[m.jsx(d,{className:"h-3 w-3 mr-1"}),(e=>({real_estate:"Immobilier",automobile:"Automobile",services:"Service",marketplace:"Produit"}[e]||"Autre"))(e.category)]}),m.jsx(Xe,{variant:"outline",className:"text-green-600 border-green-600",children:"Actif"})]}),m.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:e.title||"Titre de l'annonce (√† d√©finir)"}),m.jsxs("div",{className:"flex items-center text-muted-foreground text-sm",children:[m.jsx(Ge,{className:"h-4 w-4 mr-1"}),e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non d√©finie"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"text-3xl font-bold text-foreground",children:e.price?`${e.price} ${e.currency||"XOF"}`:"Prix √† d√©finir"}),"real_estate"===e.category&&(null==(a=e.specificData)?void 0:a.areaSqMeters)&&m.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[e.specificData.areaSqMeters," m¬≤"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"Description"}),m.jsx("p",{className:"text-foreground leading-relaxed",children:e.description||"Description √† ajouter pour votre annonce."})]}),e.specificData&&Object.keys(e.specificData).length>0&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"D√©tails"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:["real_estate"===e.category&&m.jsxs(m.Fragment,{children:[e.specificData.propertyType&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Type:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.propertyType})]}),e.specificData.bedrooms&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Chambres:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.bedrooms})]}),e.specificData.bathrooms&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Salles de bain:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.bathrooms})]}),e.specificData.areaSqMeters&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Surface:"}),m.jsxs("div",{className:"font-medium text-foreground",children:[e.specificData.areaSqMeters," m¬≤"]})]})]}),"automobile"===e.category&&m.jsxs(m.Fragment,{children:[e.specificData.make&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Marque:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.make})]}),e.specificData.model&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Mod√®le:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.model})]}),e.specificData.year&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Ann√©e:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.year})]}),e.specificData.mileage&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Kilom√©trage:"}),m.jsxs("div",{className:"font-medium text-foreground",children:[e.specificData.mileage," km"]})]})]})]})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[m.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Images"}),m.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.jsxs("p",{children:["‚Ä¢ ",x.length," image(s) ajout√©e(s)"]}),0===x.length&&m.jsx("p",{className:"text-yellow-600 mt-1",children:"‚ö†Ô∏è Aucune image - Ajoutez des images √† l'√©tape 2"})]})]})})]})]})]})})};var Cr,Sr,Pr,Ar,zr,Er;(Sr=Cr||(Cr={})).Prompt="PROMPT",Sr.Camera="CAMERA",Sr.Photos="PHOTOS",(Ar=Pr||(Pr={})).Rear="REAR",Ar.Front="FRONT",(Er=zr||(zr={})).Uri="uri",Er.Base64="base64",Er.DataUrl="dataUrl";class Lr extends ca{getPhoto(e){return d(this,null,(function*(){return new Promise(((s,t)=>d(this,null,(function*(){if(e.webUseInput||e.source===Cr.Photos)this.fileInputExperience(e,s,t);else if(e.source===Cr.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",(a=>d(this,null,(function*(){0===a.detail?this.fileInputExperience(e,s,t):this.cameraExperience(e,s,t)}))))}else this.cameraExperience(e,s,t)}))))}))}pickImages(e){return d(this,null,(function*(){return new Promise(((e,s)=>d(this,null,(function*(){this.multipleFileInputExperience(e,s)}))))}))}cameraExperience(e,s,t){return d(this,null,(function*(){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===Pr.Front?"user":"environment",document.body.appendChild(r);try{yield r.componentOnReady(),r.addEventListener("onPhoto",(a=>d(this,null,(function*(){const i=a.detail;null===i?t(new na("User cancelled photos app")):i instanceof Error?t(i):s(yield this._getCameraPhoto(i,e)),r.dismiss(),document.body.removeChild(r)})))),r.present()}catch(a){this.fileInputExperience(e,s,t)}}else this.fileInputExperience(e,s,t)}))}fileInputExperience(e,s,t){let a=document.querySelector("#_capacitor-camera-input");const r=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",(t=>{const i=a.files[0];let n="jpeg";if("image/png"===i.type?n="png":"image/gif"===i.type&&(n="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const t=new FileReader;t.addEventListener("load",(()=>{if("dataUrl"===e.resultType)s({dataUrl:t.result,format:n});else if("base64"===e.resultType){const e=t.result.split(",")[1];s({base64String:e,format:n})}r()})),t.readAsDataURL(i)}else s({webPath:URL.createObjectURL(i),format:n}),r()})),a.addEventListener("cancel",(e=>{t(new na("User cancelled photos app")),r()}))),a.accept="image/*",a.capture=!0,e.source===Cr.Photos||e.source===Cr.Prompt?a.removeAttribute("capture"):e.direction===Pr.Front?a.capture="user":e.direction===Pr.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(e,s){let t=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",(s=>{const r=[];for(let e=0;e<t.files.length;e++){const s=t.files[e];let a="jpeg";"image/png"===s.type?a="png":"image/gif"===s.type&&(a="gif"),r.push({webPath:URL.createObjectURL(s),format:a})}e({photos:r}),a()})),t.addEventListener("cancel",(e=>{s(new na("User cancelled photos app")),a()}))),t.accept="image/*",t.click()}_getCameraPhoto(e,s){return new Promise(((t,a)=>{const r=new FileReader,i=e.type.split("/")[1];"uri"===s.resultType?t({webPath:URL.createObjectURL(e),format:i,saved:!1}):(r.readAsDataURL(e),r.onloadend=()=>{const e=r.result;"dataUrl"===s.resultType?t({dataUrl:e,format:i,saved:!1}):t({base64String:e.split(",")[1],format:i,saved:!1})},r.onerror=e=>{a(e)})}))}checkPermissions(){return d(this,null,(function*(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}))}requestPermissions(){return d(this,null,(function*(){throw this.unimplemented("Not implemented on web.")}))}pickLimitedLibraryPhotos(){return d(this,null,(function*(){throw this.unavailable("Not implemented on web.")}))}getLimitedLibraryPhotos(){return d(this,null,(function*(){throw this.unavailable("Not implemented on web.")}))}}const Mr=oa("Camera",{web:()=>new Lr}),_r=({onImageSelected:e,maxImages:s=5})=>{const[t,a]=h.useState(!1),[r,i]=h.useState([]),n=t=>{if(r.length<s){const s=[...r,t];i(s),null==e||e(s)}};return m.jsxs(Fe,{className:"w-full",children:[m.jsxs(Te,{children:[m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx($s,{className:"h-5 w-5"}),"Ajouter des Photos"]}),m.jsx(Ie,{children:"Prenez une photo ou s√©lectionnez depuis votre galerie"})]}),m.jsxs(Re,{className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ne,{onClick:()=>d(null,null,(function*(){try{a(!0);const e=yield Mr.getPhoto({quality:90,allowEditing:!0,resultType:zr.Uri,source:Cr.Camera});if(e.webPath){const s={uri:e.webPath,name:`photo_${Date.now()}.jpg`,type:"image/jpeg"};n(s)}}catch(e){}finally{a(!1)}})),disabled:t||r.length>=s,className:"flex-1",variant:"outline",children:[m.jsx(us,{className:"mr-2 h-4 w-4"}),"üì∏ Photo"]}),m.jsxs(ne,{onClick:()=>d(null,null,(function*(){try{a(!0);const e=yield Mr.getPhoto({quality:90,allowEditing:!0,resultType:zr.Uri,source:Cr.Photos});if(e.webPath){const s={uri:e.webPath,name:`gallery_${Date.now()}.jpg`,type:"image/jpeg"};n(s)}}catch(e){}finally{a(!1)}})),disabled:t||r.length>=s,className:"flex-1",variant:"outline",children:[m.jsx(Xs,{className:"mr-2 h-4 w-4"}),"üñºÔ∏è Galerie"]})]}),r.length>0&&m.jsxs("div",{className:"space-y-2",children:[m.jsxs("h4",{className:"text-sm font-medium",children:["Images s√©lectionn√©es (",r.length,"/",s,")"]}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(((s,t)=>m.jsxs("div",{className:"relative group",children:[m.jsx("img",{src:s.uri,alt:"Image "+(t+1),className:"w-full h-24 object-cover rounded-lg"}),m.jsx(ne,{onClick:()=>(s=>{const t=r.filter(((e,t)=>t!==s));i(t),null==e||e(t)})(t),size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx(ye,{className:"h-3 w-3"})})]},t)))})]}),m.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.jsxs("p",{children:["üí° ",m.jsx("strong",{children:"Instructions :"})]}),m.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[m.jsx("li",{children:'Cliquez sur "Photo" pour prendre une nouvelle photo'}),m.jsx("li",{children:'Cliquez sur "Galerie" pour s√©lectionner depuis vos photos'}),m.jsxs("li",{children:["Maximum ",s," images autoris√©es"]}),m.jsx("li",{children:"Survolez une image pour la supprimer"})]})]})]})]})},qr=()=>{var e;const s=g(),{category:t,id:a}=y(),{toast:r}=Le(),[i,n]=h.useState(1),[o,c]=h.useState({}),[u,x]=h.useState(!1),[j,v]=h.useState(!1),[f,b]=h.useState(!1);p.useEffect((()=>{var e;a&&(v(!0),e=a,d(null,null,(function*(){try{b(!0);const s=yield ys.getListingById(e);if(s){const e={title:s.title||"",description:s.description||"",price:s.price||"",category:s.category||t,location:s.location||{},images:s.images||[],contact_info:s.contact_info||{},real_estate_details:s.real_estate_details||{},automobile_details:s.automobile_details||{},service_details:s.service_details||{},product_details:s.product_details||{}};c(e),r({title:"Annonce charg√©e",description:"Les donn√©es de l'annonce ont √©t√© charg√©es avec succ√®s."})}}catch(s){r({title:"Erreur",description:"Impossible de charger les donn√©es de l'annonce. Veuillez r√©essayer.",variant:"destructive"})}finally{b(!1)}})))}),[a]);const N=e=>({"real-estate":"Immobili√®re",automobile:"Automobile",services:"de Service",marketplace:"Marketplace"}[e]||""),w={"real-estate":de,automobile:me,services:ue,marketplace:xe}[t]||de,k=[{id:1,title:"Informations de base",description:"Titre, description, cat√©gorie, prix et localisation",icon:Hs,completed:!1},{id:2,title:"M√©dias et publication",description:"Photos, vid√©os, caract√©ristiques sp√©cifiques et publication",icon:us,completed:!1}],C=()=>o.title||o.description||o.price;return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("div",{className:"bg-background/80 backdrop-blur-sm border-b border-border sticky top-0 z-50",children:m.jsx("div",{className:"container mx-auto px-4 py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>s(-1),className:"text-muted-foreground hover:text-foreground",children:[m.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsx("div",{className:"flex items-center space-x-3",children:t&&m.jsxs("div",{className:"flex items-center space-x-2 bg-primary/10 px-3 py-1 rounded-full",children:[m.jsx(w,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm font-medium text-primary",children:N(t)})]})})]}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>x(!u),disabled:!C(),className:C()?"":"opacity-50 cursor-not-allowed",title:C()?"Voir l'aper√ßu de votre annonce":o.title||o.description||o.price?"Aper√ßu disponible (certaines donn√©es peuvent √™tre manquantes)":"Commencez √† remplir le formulaire pour voir l'aper√ßu",children:[m.jsx(Ke,{className:"h-4 w-4 mr-2"}),u?"Masquer":"Aper√ßu"]})})]})})}),m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground mb-3",children:j?"Modifier l'annonce":t?"Cr√©er une annonce "+N(t):"Cr√©er une annonce"}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:j?f?"Chargement des donn√©es de l'annonce...":"Modifiez les informations de votre annonce existante.":"Partagez votre offre avec notre communaut√©. Remplissez les informations ci-dessous pour publier votre annonce."})]}),m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[m.jsx("div",{className:"flex items-center justify-center space-x-4",children:k.map(((e,s)=>m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 "+(i<e.id?"bg-card border-border text-muted-foreground":"bg-primary border-primary text-white"),children:i>e.id?m.jsx(os,{className:"h-5 w-5"}):m.jsx(e.icon,{className:"h-5 w-5"})}),s<k.length-1&&m.jsx("div",{className:"w-16 h-0.5 mx-2 "+(i>e.id?"bg-primary":"bg-border")})]},e.id)))}),m.jsx("div",{className:"text-center mt-4",children:m.jsxs("p",{className:"text-sm text-muted-foreground",children:["√âtape ",i," sur ",k.length," : ",null==(e=k[i-1])?void 0:e.title]})})]}),u&&m.jsx(kr,{formData:o,onClose:()=>x(!1)}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsx(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:m.jsx(Fe,{className:"shadow-lg border-0",children:m.jsx(Re,{className:"p-6",children:m.jsx(wr,{onSuccess:e=>{(null==e?void 0:e.id)?s("/profile",{state:{message:j?"Annonce modifi√©e avec succ√®s ! Les changements sont maintenant visibles sur le site.":"Annonce cr√©√©e avec succ√®s ! Elle est maintenant visible sur le site.",type:"success"}}):s("/profile")},category:t,onDataChange:e=>{c((s=>l(l({},s),e)))},currentStep:i,onStepChange:n})})})})}),m.jsxs("div",{className:"space-y-6",children:[m.jsx(Bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:m.jsx(Fe,{className:"shadow-lg border-0",children:m.jsxs(Re,{className:"p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[m.jsx(os,{className:"h-5 w-5 text-green-500 mr-2"}),"Conseils pour une annonce r√©ussie"]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Utilisez un titre clair et descriptif"})]}),m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez des photos de qualit√©"})]}),m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©crivez pr√©cis√©ment votre offre"})]}),m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Fixez un prix comp√©titif"})]})]})]})})}),m.jsx(Bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:m.jsx(Fe,{className:"shadow-lg border-0",children:m.jsxs(Re,{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Besoin d'aide ?"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Notre √©quipe est l√† pour vous accompagner dans la cr√©ation de votre annonce."}),m.jsx(ne,{variant:"outline",className:"w-full",onClick:()=>{const e=encodeURIComponent("Support cr√©ation annonce - MaxiMarket"),s=encodeURIComponent(`Bonjour l'√©quipe MaxiMarket,\n\nJe rencontre des difficult√©s lors de la cr√©ation de mon annonce et j'aurais besoin de votre aide.\n\nüìã D√©tails de ma demande :\n‚Ä¢ Cat√©gorie d'annonce : ${t?N(t):"Non sp√©cifi√©e"}\n‚Ä¢ √âtape actuelle : √âtape ${i} sur ${k.length}\n‚Ä¢ Probl√®me rencontr√© : [Veuillez d√©crire votre probl√®me ici]\n\nüìß Mon email de contact : [Votre email]\nüì± Mon t√©l√©phone : [Votre t√©l√©phone]\n\nMerci de votre aide !\n\nCordialement,\n[Votre nom]\n\n---\nCe message a √©t√© g√©n√©r√© automatiquement depuis le formulaire de cr√©ation d'annonce MaxiMarket.\nSupport : support@maxiimarket.com\nSite : https://maxiimarket.com`),a=`mailto:${he.supportEmail}?subject=${e}&body=${s}`;window.open(a,"_blank","noopener,noreferrer")},children:"Contacter le support"})]})})})]})]})]})}),m.jsx(W,{})]})},Fr=p.memo((({images:e=[],title:s="Galerie d'images"})=>{const[t,a]=h.useState(0),[r,i]=h.useState(!1),[n,c]=h.useState(!1),d=h.useRef(null);ar(e,t);const{touchHandlers:u,zoomLevel:x}=((e,s,t)=>{const[a,r]=h.useState(1),[i,n]=h.useState(!1),c=h.useCallback((({scale:e})=>{const s=Math.max(.5,Math.min(3,e));r(s),n(!0),null==t||t(s)}),[t]),d=h.useCallback((()=>{a>1||null==e||e()}),[e,a]),m=h.useCallback((()=>{a>1||null==s||s()}),[s,a]),{touchHandlers:u}=((e={})=>{const{onSwipeLeft:s,onSwipeRight:t,onSwipeUp:a,onSwipeDown:r,onPinch:i,onDoubleTap:n,minSwipeDistance:c=50,minPinchDistance:d=10,doubleTapDelay:m=300}=e,[u,x]=h.useState({startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1,isDoubleTap:!1}),p=h.useRef(null),g=h.useRef(null),j=h.useRef(0),v=h.useCallback(((e,s)=>Math.hypot(e.clientX-s.clientX,e.clientY-s.clientY)),[]),f=h.useCallback(((e,s)=>180*Math.atan2(s.clientY-e.clientY,s.clientX-e.clientX)/Math.PI),[]),b=h.useCallback((e=>{const s=Date.now(),t=Array.from(e.touches);if(2===t.length){const e=v(t[0],t[1]),a=f(t[0],t[1]);x((t=>o(l({},t),{startDistance:e,startAngle:a,isPinching:!0,startTime:s})))}else if(1===t.length){const e=t[0],a=s-j.current;if(m>a)return x((e=>o(l({},e),{isDoubleTap:!0}))),null==n||n(e),void setTimeout((()=>{x((e=>o(l({},e),{isDoubleTap:!1})))}),100);j.current=s,x((t=>o(l({},t),{startX:e.clientX,startY:e.clientY,startTime:s,isPinching:!1})))}}),[v,f,n,m]),y=h.useCallback((e=>{e.preventDefault();const s=Array.from(e.touches);if(u.isPinching&&2===s.length){const e=v(s[0],s[1]),t=f(s[0],s[1]),a=e-u.startDistance,r=t-u.startAngle;if(Math.abs(a)>d){const t=e/u.startDistance;null==i||i({scale:t,distanceDelta:a,angleDelta:r,center:{x:(s[0].clientX+s[1].clientX)/2,y:(s[0].clientY+s[1].clientY)/2}})}}}),[u,v,f,d,i]),N=h.useCallback((e=>{const i=Array.from(e.changedTouches);if(u.isPinching)x((e=>o(l({},e),{isPinching:!1})));else{if(1===i.length&&!u.isDoubleTap){const e=i[0],n=e.clientX-u.startX,l=e.clientY-u.startY,o=Date.now()-u.startTime,d=Math.hypot(n,l),m=d/o;d>c&&m>.3&&(Math.abs(n)>Math.abs(l)?n>0?null==t||t({deltaX:n,deltaY:l,velocity:m,distance:d}):null==s||s({deltaX:n,deltaY:l,velocity:m,distance:d}):l>0?null==r||r({deltaX:n,deltaY:l,velocity:m,distance:d}):null==a||a({deltaX:n,deltaY:l,velocity:m,distance:d}))}x((e=>o(l({},e),{startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1})))}}),[u,c,s,t,a,r]),w=h.useCallback((()=>{x((e=>o(l({},e),{startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1,isDoubleTap:!1})))}),[]),k=h.useCallback((()=>{p.current&&clearTimeout(p.current),g.current&&clearTimeout(g.current)}),[]);return{touchHandlers:{onTouchStart:b,onTouchMove:y,onTouchEnd:N,onTouchCancel:w},touchState:u,cleanup:k}})({onSwipeLeft:d,onSwipeRight:m,onPinch:c,minSwipeDistance:30}),x=h.useCallback((()=>{r(1),n(!1),null==t||t(1)}),[t]);return{touchHandlers:u,zoomLevel:a,isZooming:i,resetZoom:x}})((()=>a((s=>(s+1)%e.length))),(()=>a((s=>(s-1+e.length)%e.length))),(e=>c(e>1))),p=h.useCallback((()=>{a((s=>(s+1)%e.length))}),[e.length]),g=h.useCallback((()=>{a((s=>(s-1+e.length)%e.length))}),[e.length]),j=e=>{a(e)};h.useEffect((()=>{const e=e=>{if(r)switch(e.key){case"ArrowLeft":e.preventDefault(),g();break;case"ArrowRight":e.preventDefault(),p();break;case"Escape":e.preventDefault(),i(!1),c(!1);break;case" ":e.preventDefault(),c(!n)}};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[r,n,p,g]);const v=()=>{r?c(!n):i(!0)};if(!e||0===e.length)return m.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-muted flex items-center justify-center",children:m.jsx("div",{className:"text-center text-muted-foreground",children:m.jsx("p",{children:"Aucune image disponible"})})});const f=e[t];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",o(l({ref:d,className:"relative aspect-video rounded-lg overflow-hidden bg-muted cursor-pointer group"},u),{onClick:v,children:[m.jsx(or,{src:f,alt:`${s} - Image ${t+1}`,className:"w-full h-full",context:"gallery",quality:"high",showSkeleton:!0}),m.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300",children:m.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),i(!0)},children:m.jsx(Ws,{className:"h-4 w-4"})})}),e.length>1&&m.jsxs(m.Fragment,{children:[m.jsx(ne,{variant:"ghost",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),g()},children:m.jsx(He,{className:"h-4 w-4"})}),m.jsx(ne,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),p()},children:m.jsx(We,{className:"h-4 w-4"})})]})]})),e.length>1&&m.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:e.map(((e,s)=>m.jsx("button",{onClick:()=>j(s),className:"w-2 h-2 rounded-full transition-all duration-300 "+(s===t?"bg-primary scale-125":"bg-muted-foreground/30 hover:bg-muted-foreground/50"),"aria-label":"Aller √† l'image "+(s+1)},s)))}),e.length>1&&m.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[t+1," / ",e.length]})]}),m.jsx($t,{children:r&&m.jsxs(Bt.div,o(l({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center"},u),{children:[m.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white z-10",onClick:()=>{i(!1),c(!1)},children:m.jsx(ye,{className:"h-6 w-6"})}),m.jsx(ne,{variant:"ghost",size:"sm",className:"absolute top-4 right-16 bg-black/50 hover:bg-black/70 text-white z-10",onClick:()=>{c(!n)},children:n?m.jsx(Gs,{className:"h-6 w-6"}):m.jsx(Ws,{className:"h-6 w-6"})}),m.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:m.jsx(or,{src:f,alt:`${s} - Image ${t+1}`,className:"max-w-full max-h-full object-contain transition-transform duration-300 "+(n?"cursor-zoom-out":"cursor-zoom-in"),context:"fullscreen",quality:"high",showSkeleton:!1,onClick:v,style:{transform:`scale(${x})`,cursor:n?"zoom-out":"zoom-in"}})}),e.length>1&&m.jsxs(m.Fragment,{children:[m.jsx(ne,{variant:"ghost",size:"lg",className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:g,children:m.jsx(He,{className:"h-8 w-8"})}),m.jsx(ne,{variant:"ghost",size:"lg",className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:p,children:m.jsx(We,{className:"h-8 w-8"})})]}),e.length>1&&m.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-3",children:e.map(((e,s)=>m.jsx("button",{onClick:()=>j(s),className:"w-3 h-3 rounded-full transition-all duration-300 "+(s===t?"bg-white scale-125":"bg-white/50 hover:bg-white/75"),"aria-label":"Aller √† l'image "+(s+1)},s)))}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white text-sm px-3 py-1 rounded",children:[t+1," / ",e.length]}),m.jsx("div",{className:"absolute top-4 left-4 text-white/70 text-sm",children:m.jsx("p",{children:"‚Üê ‚Üí Navigation ‚Ä¢ Espace Zoom ‚Ä¢ √âchap Fermer"})})]}))})]})})),Tr=({listing:e,variant:s="default"})=>{const{toast:t}=Le(),[a,r]=h.useState(!1),i=`${window.location.origin}/annonce/${e.id}`,n=s=>{var t,a,r,n;const l="üè† D√©couvrez cette annonce sur MaxiMarket : "+e.title;switch(s){case"facebook":return`${l}\n\nüí∞ Prix : ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\n\nüìç ${(null==(t=e.location)?void 0:t.city)||"Localisation non sp√©cifi√©e"}`;case"instagram":return`${l}\n\nüí∞ ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nüìç ${(null==(a=e.location)?void 0:a.city)||"Localisation non sp√©cifi√©e"}\n\n#MaxiMarket #Marketplace #Afrique`;case"tiktok":return`${l}\nüí∞ ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nüìç ${(null==(r=e.location)?void 0:r.city)||"Localisation non sp√©cifi√©e"}\n\n#MaxiMarket #Marketplace #Afrique #FYP`;case"whatsapp":return`${l}\n\nüí∞ Prix : ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nüìç ${(null==(n=e.location)?void 0:n.city)||"Localisation non sp√©cifi√©e"}\n\n${i}`;default:return l}},l=()=>{r(!0);const e=n("facebook"),s=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}&quote=${encodeURIComponent(e)}`;window.open(s,"_blank","width=600,height=500,scrollbars=yes,resizable=yes"),setTimeout((()=>r(!1)),1e3),t({title:"Partag√© sur Facebook",description:"L'annonce a √©t√© partag√©e sur Facebook"})},o=()=>{r(!0),navigator.clipboard.writeText(i).then((()=>{t({title:"Lien copi√© !",description:"Le lien a √©t√© copi√©. Ouvrez Instagram et collez-le dans votre story ou post."}),window.open("https://www.instagram.com","_blank","noopener,noreferrer")})).catch((()=>{t({title:"Erreur",description:"Impossible de copier le lien automatiquement.",variant:"destructive"})})),setTimeout((()=>r(!1)),1e3)},c=()=>{r(!0),navigator.clipboard.writeText(i).then((()=>{t({title:"Lien copi√© !",description:"Le lien a √©t√© copi√©. Ouvrez TikTok et collez-le dans votre vid√©o ou description."}),window.open("https://www.tiktok.com","_blank","noopener,noreferrer")})).catch((()=>{t({title:"Erreur",description:"Impossible de copier le lien automatiquement.",variant:"destructive"})})),setTimeout((()=>r(!1)),1e3)},u=()=>{r(!0);const e=n("whatsapp"),s="https://wa.me/?text="+encodeURIComponent(e);window.open(s,"_blank","noopener,noreferrer"),setTimeout((()=>r(!1)),1e3),t({title:"Partag√© sur WhatsApp",description:"L'annonce a √©t√© partag√©e sur WhatsApp"})},x=()=>d(null,null,(function*(){try{yield navigator.clipboard.writeText(i),t({title:"Lien copi√© !",description:"Le lien de l'annonce a √©t√© copi√© dans le presse-papiers."})}catch(e){t({title:"Erreur",description:"Impossible de copier le lien.",variant:"destructive"})}})),p=()=>{window.open(i,"_blank","noopener,noreferrer")};return"compact"===s?m.jsxs(Js,{children:[m.jsx(Ks,{asChild:!0,children:m.jsxs(ne,{variant:"outline",size:"sm",disabled:a,className:"flex items-center space-x-1 px-1.5 py-0.5 text-xs",children:[m.jsx(Os,{className:"h-2.5 w-2.5"}),m.jsx("span",{children:"Partager"})]})}),m.jsxs(Qs,{align:"end",className:"w-48",children:[m.jsxs(Ys,{onClick:l,children:[m.jsx(ke,{className:"h-4 w-4 mr-2 text-blue-600"}),"Facebook"]}),m.jsxs(Ys,{onClick:o,children:[m.jsx(Ce,{className:"h-4 w-4 mr-2 text-pink-600"}),"Instagram"]}),m.jsxs(Ys,{onClick:c,children:[m.jsx("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),"TikTok"]}),m.jsxs(Ys,{onClick:u,children:[m.jsx("svg",{className:"h-4 w-4 mr-2 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]}),m.jsxs(Ys,{onClick:x,children:[m.jsx(Zs,{className:"h-4 w-4 mr-2"}),"Copier le lien"]}),m.jsxs(Ys,{onClick:p,children:[m.jsx(et,{className:"h-4 w-4 mr-2"}),"Ouvrir l'annonce"]})]})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Os,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"text-sm font-medium",children:"Partager cette annonce"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsxs(ne,{variant:"outline",size:"sm",onClick:l,disabled:a,className:"flex items-center space-x-2 bg-blue-50 hover:bg-blue-100 border-blue-200",children:[m.jsx(ke,{className:"h-4 w-4 text-blue-600"}),m.jsx("span",{children:"Facebook"})]}),m.jsxs(ne,{variant:"outline",size:"sm",onClick:o,disabled:a,className:"flex items-center space-x-2 bg-pink-50 hover:bg-pink-100 border-pink-200",children:[m.jsx(Ce,{className:"h-4 w-4 text-pink-600"}),m.jsx("span",{children:"Instagram"})]}),m.jsxs(ne,{variant:"outline",size:"sm",onClick:c,disabled:a,className:"flex items-center space-x-2 bg-black hover:bg-gray-800 text-white border-gray-700",children:[m.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),m.jsx("span",{children:"TikTok"})]}),m.jsxs(ne,{variant:"outline",size:"sm",onClick:u,disabled:a,className:"flex items-center space-x-2 bg-green-50 hover:bg-green-100 border-green-200",children:[m.jsx("svg",{className:"h-4 w-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),m.jsx("span",{children:"WhatsApp"})]}),m.jsxs(ne,{variant:"outline",size:"sm",onClick:x,className:"flex items-center space-x-2",children:[m.jsx(Zs,{className:"h-4 w-4"}),m.jsx("span",{children:"Copier le lien"})]}),m.jsxs(ne,{variant:"outline",size:"sm",onClick:p,className:"flex items-center space-x-2",children:[m.jsx(et,{className:"h-4 w-4"}),m.jsx("span",{children:"Ouvrir l'annonce"})]})]})]})},Dr=({rating:e=0,onRatingChange:s,readonly:t=!1,size:a="md",showLabel:r=!1,className:i=""})=>{const[n,l]=h.useState(0),o={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6"},c=()=>{t||l(0)};return m.jsxs("div",{className:qe("flex items-center space-x-1",i),children:[m.jsx("div",{className:"flex items-center space-x-0.5",children:[1,2,3,4,5].map((r=>{return m.jsx("button",{type:"button",onClick:()=>{!t&&s&&s(r)},onMouseEnter:()=>{t||l(r)},onMouseLeave:c,disabled:t,className:qe("transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 rounded-sm",o[a],t?"cursor-default":"cursor-pointer hover:scale-110",(i=r,i>(n||e)?"text-gray-300":"text-yellow-400 fill-current")),"aria-label":`${r} √©toile${r>1?"s":""}`,children:m.jsx(ts,{className:"w-full h-full"})},r);var i}))}),r&&m.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:(d=e,{0:"Aucune note",1:"Tr√®s mauvais",2:"Mauvais",3:"Moyen",4:"Bon",5:"Excellent"}[d]||"Aucune note")}),!t&&m.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:e>0?e+"/5":"Cliquez pour noter"})]});var d},Ir=Ht({content:Wt().min(1,"Le commentaire ne peut pas √™tre vide").max(1e3,"Le commentaire ne peut pas d√©passer 1000 caract√®res"),parent_id:Wt().uuid().optional()}),Rr=({listingId:e,onSubmit:s,onCancel:t,initialData:a=null,parentId:r=null,className:i=""})=>{const{toast:n}=Le(),[c,u]=h.useState(!1),[x,p]=h.useState((null==a?void 0:a.rating)||0),{register:g,handleSubmit:j,watch:v,formState:{errors:f,isValid:b},reset:y}=Xt({resolver:G(Ir),defaultValues:{content:(null==a?void 0:a.content)||"",parent_id:r||(null==a?void 0:a.parent_id)},mode:"onChange"}),N=v("content"),w=!!a,k=i=>d(null,null,(function*(){u(!0);try{const c=o(l({},i),{rating:x||null,listing_id:e,parent_id:r||(null==a?void 0:a.parent_id)}),d=yield s(c);if(d.error)throw Error(d.error);n({title:w?"Commentaire modifi√©":"Commentaire ajout√©",description:w?"Votre commentaire a √©t√© modifi√© avec succ√®s.":"Votre commentaire a √©t√© ajout√© avec succ√®s."}),w||(y(),p(0)),t&&t()}catch(c){n({title:"Erreur",description:c.message||"Une erreur est survenue lors de l'envoi du commentaire.",variant:"destructive"})}finally{u(!1)}})),C=()=>(null==N?void 0:N.length)||0;return m.jsxs("div",{className:qe("space-y-4",i),children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold",children:w?"Modifier le commentaire":"Ajouter un commentaire"}),r&&m.jsx(Xe,{variant:"secondary",className:"text-xs",children:"R√©ponse"})]}),m.jsxs("form",{onSubmit:j(k),className:"space-y-4",children:[void 0,void 0,m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",children:"Votre note (optionnelle)"}),m.jsx(Dr,{rating:x,onRatingChange:e=>{p(e)},size:"lg",showLabel:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"content",className:"text-sm font-medium",children:"Votre commentaire *"}),m.jsx(Rs,o(l({id:"content"},g("content")),{placeholder:w?"Modifiez votre commentaire...":"Partagez votre exp√©rience avec cette annonce...",className:qe("min-h-[120px] resize-none",f.content&&"border-red-500 focus:border-red-500"),maxLength:1e3})),m.jsx("div",{className:"flex items-center justify-between text-xs",children:m.jsxs("span",{className:(()=>{const e=C();return 0===e?"text-red-500":e>900?"text-orange-500":"text-muted-foreground"})(),children:[C(),"/1000 caract√®res"]})}),f.content&&m.jsxs("p",{className:"text-sm text-red-500 flex items-center",children:[m.jsx(ls,{className:"h-4 w-4 mr-1"}),f.content.message]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("div",{className:"flex items-center space-x-2",children:t&&m.jsx(ne,{type:"button",variant:"outline",onClick:t,disabled:c,children:"Annuler"})}),m.jsx(ne,{type:"submit",disabled:c||!(null==N?void 0:N.trim()),className:"flex items-center space-x-2",onClick:e=>{e.preventDefault(),(null==N?void 0:N.trim())&&!c&&j(k)()},children:c?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),m.jsx("span",{children:"Envoi..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(Pe,{className:"h-4 w-4"}),m.jsx("span",{children:w?"Modifier":"Publier"})]})})]})]})]})},Vr=({comment:e,onUpdate:s,onDelete:t,onReply:a,onReport:r,showReplies:i=!0,className:n=""})=>{var l;const{user:o}=ae(),{toast:c}=Le(),[u,x]=h.useState(!1),[p,g]=h.useState(!1),[j,v]=h.useState(!1),[f,b]=h.useState(e.replies||[]),y=(null==o?void 0:o.id)===e.user_id,N="admin"===(null==o?void 0:o.role),w=y||N,k=()=>{g(!0)};return u?m.jsx("div",{className:qe("border rounded-lg p-4 bg-muted/30",n),children:m.jsx(Rr,{listingId:e.listing_id,onSubmit:t=>d(null,null,(function*(){try{const r=yield s(e.id,t);if(r.error)throw Error(r.error);return a=r.comment,x(!1),s&&s(a),r}catch(r){return{error:r.message}}var a})),onCancel:()=>x(!1),initialData:e})}):m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:qe("transition-all",n),children:[m.jsxs("div",{className:"flex items-start justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(J,{className:"h-10 w-10",children:m.jsx(K,{className:"bg-primary/10 text-primary",children:(C=e.user_id||"U",(null==C?void 0:C.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2))||"U")})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("h4",{className:"font-medium text-sm",children:e.user_display_name||`Utilisateur ${null==(l=e.user_id)?void 0:l.slice(0,8)}...`}),e.is_verified_purchase&&m.jsxs(Xe,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-300",children:[m.jsx(os,{className:"h-3 w-3 mr-1"}),"Achat v√©rifi√©"]})]}),m.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[m.jsx("span",{children:st(e.created_at)}),e.updated_at!==e.created_at&&m.jsx("span",{children:"(modifi√©)"})]})]})]}),m.jsxs(Js,{children:[m.jsx(Ks,{asChild:!0,children:m.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:m.jsx(tt,{className:"h-4 w-4"})})}),m.jsxs(Qs,{align:"end",children:[m.jsxs(Ys,{onClick:k,children:[m.jsx(as,{className:"h-4 w-4 mr-2"}),"R√©pondre"]}),w&&m.jsxs(m.Fragment,{children:[m.jsxs(Ys,{onClick:()=>{x(!0)},children:[m.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Modifier"]}),m.jsxs(Ys,{onClick:()=>d(null,null,(function*(){if(confirm("√ätes-vous s√ªr de vouloir supprimer ce commentaire ?"))try{const s=yield t(e.id);if(s.error)throw Error(s.error);c({title:"Commentaire supprim√©",description:"Votre commentaire a √©t√© supprim√© avec succ√®s."})}catch(s){c({title:"Erreur",description:s.message||"Impossible de supprimer le commentaire.",variant:"destructive"})}})),className:"text-red-600",children:[m.jsx(es,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]}),!y&&m.jsxs(Ys,{onClick:()=>d(null,null,(function*(){try{const s=yield r(e.id,{reason:"inappropriate",description:"Commentaire signal√© par l'utilisateur"});if(s.error)throw Error(s.error);c({title:"Commentaire signal√©",description:"Le commentaire a √©t√© signal√© aux mod√©rateurs."})}catch(s){c({title:"Erreur",description:s.message||"Impossible de signaler le commentaire.",variant:"destructive"})}})),children:[m.jsx(at,{className:"h-4 w-4 mr-2"}),"Signaler"]})]})]})]}),"approved"!==e.status&&m.jsx("div",{className:"mb-3",children:(e=>{switch(e){case"approved":return m.jsxs(Xe,{variant:"default",className:"bg-green-100 text-green-800 border-green-300",children:[m.jsx(os,{className:"h-3 w-3 mr-1"}),"Approuv√©"]});case"pending":return m.jsxs(Xe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),"En attente"]});case"rejected":return m.jsxs(Xe,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-300",children:[m.jsx(at,{className:"h-3 w-3 mr-1"}),"Rejet√©"]});default:return null}})(e.status)}),m.jsx("div",{className:"mb-3",children:m.jsx(Dr,{rating:e.rating,readonly:!0,size:"sm"})}),m.jsx("div",{className:"mb-4",children:m.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.content})}),m.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[m.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.likes_count>0&&m.jsxs("span",{children:[e.likes_count," j'aime"]}),e.replies_count>0&&m.jsxs("button",{onClick:()=>v(!j),className:"flex items-center space-x-1 hover:text-foreground transition-colors",children:[m.jsx(be,{className:"h-3 w-3"}),m.jsxs("span",{children:[e.replies_count," r√©ponse",e.replies_count>1?"s":""]})]})]}),m.jsxs(ne,{variant:"ghost",size:"sm",onClick:k,className:"text-xs",children:[m.jsx(as,{className:"h-3 w-3 mr-1"}),"R√©pondre"]})]}),p&&m.jsx("div",{className:"mt-4 pt-4 border-t",children:m.jsx(Rr,{listingId:e.listing_id,onSubmit:e=>d(null,null,(function*(){try{const t=yield a(e);if(t.error)throw Error(t.error);return s=t.comment,g(!1),b((e=>[s,...e])),a&&a(s),t}catch(t){return{error:t.message}}var s})),onCancel:()=>g(!1),parentId:e.id})}),i&&e.replies_count>0&&j&&m.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[m.jsxs("h5",{className:"text-sm font-medium text-muted-foreground",children:["R√©ponses (",e.replies_count,")"]}),f.map((e=>m.jsx(Vr,{comment:e,onUpdate:s,onDelete:t,onReply:a,onReport:r,showReplies:!1,className:"ml-4 border-l-2 border-muted pl-4"},e.id)))]})]});var C},Or=({listingId:e,listing:s,className:t="",showStats:a=!0,showFilters:r=!0})=>{const{user:i}=ae(),{toast:n}=Le(),[c,u]=h.useState(!1),{comments:x,loading:p,error:g,pagination:j,addComment:v,updateComment:f,deleteComment:b,reportComment:y,changePage:N,refresh:w,forceRefresh:k}=((e,s={})=>{const[t,a]=h.useState([]),[r,i]=h.useState(!0),[n,c]=h.useState(null),[m,u]=h.useState({}),[x,p]=h.useState(null),g=h.useCallback(((...t)=>d(null,[...t],(function*(t={}){if(e)try{i(!0),c(null);const{comments:r,pagination:n,error:o}=yield Cs.getComments(e,l(l({},s),t));if(o)throw Error(o);a(r),u(n)}catch(r){c(r.message)}finally{i(!1)}}))),[e]),j=h.useCallback((()=>d(null,null,(function*(){try{"undefined"!=typeof window&&window.localStorage&&Object.keys(localStorage).filter((e=>e.includes("comment")||e.includes("benome"))).forEach((e=>{localStorage.removeItem(e)}))}catch(e){}yield g({forceRefresh:!0})}))),[g]),v=h.useCallback((s=>d(null,null,(function*(){try{c(null);const{comment:t,error:r}=yield Cs.createComment(o(l({},s),{listing_id:e}));if(r)throw Error(r);return a((e=>[t,...e])),{comment:t,error:null}}catch(t){const e=t.message;return c(e),{comment:null,error:e}}}))),[e]),f=h.useCallback(((e,s)=>d(null,null,(function*(){try{c(null);const{comment:t,error:r}=yield Cs.updateComment(e,s);if(r)throw Error(r);return a((s=>s.map((s=>s.id===e?t:s)))),{comment:t,error:null}}catch(t){const e=t.message;return c(e),{comment:null,error:e}}}))),[]),b=h.useCallback((e=>d(null,null,(function*(){try{c(null);const{error:s}=yield Cs.deleteComment(e);if(s)throw Error(s);return a((s=>s.filter((s=>s.id!==e)))),{error:null}}catch(s){const e=s.message;return c(e),{error:e}}}))),[]),y=h.useCallback(((e,s)=>d(null,null,(function*(){try{c(null);const{report:t,error:a}=yield Cs.reportComment(e,s);if(a)throw Error(a);return{report:t,error:null}}catch(t){const e=t.message;return c(e),{report:null,error:e}}}))),[]),N=h.useCallback((e=>{g({page:e})}),[g]),w=h.useCallback((e=>{g(o(l({},e),{page:1}))}),[g]),k=h.useCallback((()=>{g()}),[g]);return h.useEffect((()=>{e&&g()}),[e]),{comments:t,loading:r,error:n,pagination:m,fetchComments:g,addComment:v,updateComment:f,deleteComment:b,reportComment:y,changePage:N,changeFilters:w,refresh:k,forceRefresh:j}})(e),C=(e,s)=>d(null,null,(function*(){return yield f(e,s)})),S=e=>d(null,null,(function*(){return yield b(e)})),P=e=>d(null,null,(function*(){return i?yield v(o(l({},e),{user_id:i.id})):(n({title:"Connexion requise",description:"Vous devez √™tre connect√© pour r√©pondre.",variant:"destructive"}),{error:"Connexion requise"})})),A=(e,s)=>d(null,null,(function*(){return i?yield y(e,o(l({},s),{reporter_id:i.id})):(n({title:"Connexion requise",description:"Vous devez √™tre connect√© pour signaler un commentaire.",variant:"destructive"}),{error:"Connexion requise"})}));return g?m.jsx(Fe,{className:qe("mt-8",t),children:m.jsx(Re,{className:"p-6",children:m.jsxs("div",{className:"text-center text-muted-foreground",children:[m.jsx(be,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Impossible de charger les commentaires"}),m.jsx("p",{className:"mb-4",children:"Une erreur est survenue lors du chargement des commentaires."}),m.jsxs(ne,{onClick:w,variant:"outline",children:[m.jsx(le,{className:"h-4 w-4 mr-2"}),"R√©essayer"]})]})})}):m.jsxs("div",{className:qe("space-y-6",t),children:[m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(be,{className:"h-6 w-6 text-primary"}),m.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Commentaires et Avis"})]}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{k()},disabled:p,className:"flex items-center space-x-2",children:[m.jsx(le,{className:"h-4 w-4 "+(p?"animate-spin":"")}),m.jsx("span",{className:"hidden sm:inline",children:"Actualiser"})]})})]}),m.jsx($t,{children:c&&m.jsx(Bt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:m.jsxs(Fe,{children:[m.jsx(Te,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(De,{children:"Ajouter un commentaire"}),m.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:m.jsx(ye,{className:"h-4 w-4"})})]})}),m.jsx(Re,{children:m.jsx(Rr,{listingId:e,onSubmit:e=>d(null,null,(function*(){if(!i)return void n({title:"Connexion requise",description:"Vous devez √™tre connect√© pour ajouter un commentaire.",variant:"destructive"});const s=yield v(o(l({},e),{user_id:i.id}));return s.error||u(!1),s})),onCancel:()=>u(!1)})})]})})}),m.jsx(Fe,{children:m.jsx(Re,{className:"p-0",children:p?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",children:"Chargement des commentaires..."})]}):0===x.length?m.jsxs("div",{className:"p-8 text-center",children:[m.jsx(be,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun commentaire"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Soyez le premier √† laisser un commentaire sur cette annonce !"}),i&&m.jsxs(ne,{onClick:()=>{u(!0)},children:[m.jsx(ds,{className:"h-4 w-4 mr-2"}),"Ajouter un commentaire"]})]}):m.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[m.jsx("div",{className:"divide-y divide-border",children:x.map(((e,s)=>m.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:m.jsx(Vr,{comment:e,onUpdate:C,onDelete:S,onReply:P,onReport:A,className:"border-0 p-0 shadow-none"})},e.id)))}),j&&j.pages>1&&m.jsxs("div",{className:"flex items-center justify-center space-x-2 p-4 border-t",children:[m.jsx(ne,{variant:"outline",size:"sm",onClick:()=>N(j.page-1),disabled:1>=j.page,children:"Pr√©c√©dent"}),m.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",j.page," sur ",j.pages]}),m.jsx(ne,{variant:"outline",size:"sm",onClick:()=>N(j.page+1),disabled:j.page>=j.pages,children:"Suivant"})]})]})})})]})},Ur=({listings:e=[],title:s="Annonces similaires",currentListing:t=null})=>{const a=e.slice(0,8);return e&&0!==e.length?m.jsxs("div",{className:"mt-12",children:[m.jsx("div",{className:"mb-6",children:m.jsx("h2",{className:"text-2xl font-bold",children:s})}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map((e=>{var s,t;return m.jsx(j,{to:"/annonce/"+e.id,className:"group block",children:m.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary hover:shadow-lg",children:[m.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:e.title,src:(null==(s=e.images)?void 0:s[0])||"/placeholder-image.jpg",loading:"lazy"}),(e.is_featured||e.is_boosted||e.is_premium)&&m.jsx("div",{className:"absolute top-2 right-2",children:m.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white text-xs px-2 py-1 rounded-full",children:"‚≠ê Premium"})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors line-clamp-1",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),e.location&&m.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[m.jsx("span",{className:"mr-1",children:"üìç"}),m.jsx("span",{children:e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non sp√©cifi√©e"})]}),m.jsx("p",{className:"text-lg font-bold text-primary",children:(t=e.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(t))})]})]})},e.id)}))}),e.length>8&&t&&m.jsx("div",{className:"mt-8 text-center",children:m.jsxs(j,{to:"/marketplace?category="+t.category,className:"inline-flex items-center px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors font-medium",children:["Voir plus d'annonces similaires (",e.length-8," autres)"]})})]}):m.jsxs("div",{className:"mt-12",children:[m.jsx("div",{className:"mb-6",children:m.jsx("h2",{className:"text-2xl font-bold",children:s})}),m.jsx("div",{className:"text-center py-8 text-muted-foreground",children:m.jsx("p",{children:"Aucune annonce similaire trouv√©e"})})]})},Br=({isOpen:e,onClose:s,listing:t,onReportSubmitted:a})=>{const[r,i]=h.useState(""),[n,l]=h.useState(""),[o,c]=h.useState("medium"),[u,x]=h.useState(!1),{toast:p}=Le(),g=()=>{u||s()};return e?m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:m.jsxs(Fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[m.jsxs(Te,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(at,{className:"h-5 w-5 text-red-500"}),m.jsxs("div",{children:[m.jsx(De,{children:"Signaler cette annonce"}),m.jsx(Ie,{children:"Aidez-nous √† maintenir la qualit√© de notre plateforme"})]})]}),m.jsx(ne,{variant:"ghost",size:"sm",onClick:g,disabled:u,className:"h-8 w-8 p-0",children:m.jsx(ye,{className:"h-4 w-4"})})]}),m.jsxs(Re,{className:"space-y-6",children:[m.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Annonce signal√©e :"}),m.jsxs("div",{className:"flex items-start space-x-3",children:[t.images&&t.images[0]&&m.jsx("img",{src:t.images[0],alt:t.title,className:"w-16 h-16 object-cover rounded-lg"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h5",{className:"font-medium truncate",children:t.title}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Publi√©e le ",new Date(t.created_at).toLocaleDateString()]}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cat√©gorie : ",t.category]})]})]})]}),m.jsxs("form",{onSubmit:e=>d(null,null,(function*(){if(e.preventDefault(),r)if(n.trim()){x(!0);try{const e={listing_id:t.id,type:"listing",reason:r,description:n.trim(),severity:o,status:"pending"};yield ct.createReport(e),p({title:"Signalement envoy√©",description:"Votre signalement a √©t√© enregistr√© et sera examin√© par notre √©quipe."}),i(""),l(""),c("medium"),s(),a&&a()}catch(d){p({title:"Erreur",description:"Impossible d'envoyer le signalement. Veuillez r√©essayer.",variant:"destructive"})}finally{x(!1)}}else p({title:"Erreur",description:"Veuillez d√©crire le probl√®me.",variant:"destructive"});else p({title:"Erreur",description:"Veuillez s√©lectionner une raison de signalement.",variant:"destructive"})})),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"reason",children:"Raison du signalement *"}),m.jsxs(rt,{value:r,onValueChange:i,disabled:u,children:[m.jsx(it,{children:m.jsx(nt,{placeholder:"S√©lectionnez une raison"})}),m.jsx(lt,{children:[{value:"inappropriate_content",label:"Contenu inappropri√©",description:"Contenu offensant, violent ou choquant"},{value:"fake_listing",label:"Annonce fausse",description:"Produit/service inexistant ou trompeur"},{value:"spam",label:"Spam",description:"Annonce r√©p√©titive ou non pertinente"},{value:"scam",label:"Arnaque",description:"Tentative de fraude ou d'escroquerie"},{value:"copyright",label:"Violation de droits",description:"Contenu prot√©g√© par des droits d'auteur"},{value:"other",label:"Autre",description:"Autre raison non list√©e"}].map((e=>m.jsx(ot,{value:e.value,children:m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"font-medium",children:e.label}),m.jsx("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value)))})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"severity",children:"Niveau de gravit√©"}),m.jsxs(rt,{value:o,onValueChange:c,disabled:u,children:[m.jsx(it,{children:m.jsx(nt,{})}),m.jsx(lt,{children:[{value:"low",label:"Faible",color:"bg-blue-100 text-blue-800"},{value:"medium",label:"Moyen",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"√âlev√©",color:"bg-red-100 text-red-800"}].map((e=>m.jsx(ot,{value:e.value,children:m.jsx(Xe,{className:e.color,variant:"secondary",children:e.label})},e.value)))})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Ve,{htmlFor:"description",children:["Description d√©taill√©e du probl√®me *",m.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"(minimum 20 caract√®res)"})]}),m.jsx(Rs,{id:"description",value:n,onChange:e=>l(e.target.value),placeholder:"D√©crivez en d√©tail le probl√®me que vous avez identifi√©...",rows:4,disabled:u,minLength:20,required:!0}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length,"/500 caract√®res"]})]}),m.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:m.jsxs("div",{className:"flex items-start space-x-2",children:[m.jsx(oe,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[m.jsx("p",{className:"font-medium",children:"Important :"}),m.jsx("p",{children:"Les signalements abusifs peuvent entra√Æner la suspension de votre compte. Assurez-vous que votre signalement est justifi√© et bas√© sur des faits."})]})]})}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx(ne,{type:"button",variant:"outline",onClick:g,disabled:u,children:"Annuler"}),m.jsx(ne,{type:"submit",disabled:u||!r||20>n.length,className:"bg-red-600 hover:bg-red-700",children:u?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent mr-2"}),"Envoi en cours..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Envoyer le signalement"]})})]})]})]})]})}):null},$r=()=>{const{id:e}=y(),s=g(),{user:t}=ae(),{toast:a}=Le(),[r,i]=h.useState(null),[n,l]=h.useState([]),[o,c]=h.useState(!0),[u,x]=h.useState(!1),[p,v]=h.useState(!1),[f,b]=h.useState(!1),[N,w]=h.useState(!1),{images:k}=ir(r);h.useEffect((()=>{e&&d(null,null,(function*(){c(!0);try{if(!e||""===e||"string"!=typeof e)throw Error(`ID d'annonce invalide: "${e}"`);const r=yield ys.getListingById(e);if(r){i(r);try{ys.incrementViews(r.id)}catch(t){}"approved"!==r.status&&a({title:"Annonce en attente",description:"Cette annonce est en cours de mod√©ration.",variant:"default"});const{data:e}=yield ys.getAllListings({category:r.category,status:"approved",limit:15});l(e.filter((e=>e.id!==r.id)).slice(0,10))}else a({title:"Annonce non trouv√©e",description:"L'annonce que vous recherchez n'existe pas ou a √©t√© supprim√©e.",variant:"destructive"}),s("/marketplace")}catch(r){a({title:"Erreur",description:"Impossible de charger les d√©tails de l'annonce: "+r.message,variant:"destructive"}),s("/marketplace")}finally{c(!1)}}))}),[e,s,a]),h.useEffect((()=>{try{if("undefined"!=typeof window&&r){const e=(null==r?void 0:r.location)&&"object"==typeof r.location&&r.location.city||"";window.__MAXIMARKET_CONTEXT={listing:{id:r.id,title:r.title,price:r.price,locationCity:e,sellerId:r.user_id,category:r.category}}}}catch(e){}return()=>{try{"undefined"!=typeof window&&window.__MAXIMARKET_CONTEXT&&delete window.__MAXIMARKET_CONTEXT}catch(e){}}}),[r]);const C=e=>{switch(e){case"real_estate":return"Immobilier";case"automobile":return"Automobile";case"services":return"Services";case"marketplace":return"Marketplace";default:return"Autre"}},S=e=>d(null,null,(function*(){var i,n;if("whatsapp"!==e&&"phone"!==e){if("message"===e){if(!t)return a({title:"Connexion requise",description:"Connectez-vous pour envoyer un message priv√© au vendeur.",variant:"default"}),void s("/connexion");if(r.user_id===t.id)return void a({title:"Action impossible",description:"Vous ne pouvez pas vous contacter vous-m√™me.",variant:"destructive"});if(!r.user_id||"test-user-1"===r.user_id)return void a({title:"Annonce de test",description:"Cette annonce est en mode test. Les fonctionnalit√©s de contact ne sont pas disponibles.",variant:"default"});try{const e=yield ws.createConversation(r.user_id,r.id);s(`/messages?conversation=${e.id}&listing=${r.id}`),a({title:"Conversation cr√©√©e",description:"Vous avez √©t√© redirig√© vers la messagerie."})}catch(l){a({title:"Erreur",description:"Impossible de cr√©er la conversation. Veuillez r√©essayer.",variant:"destructive"})}}}else{const s=(null==(i=r.contact_info)?void 0:i.phone)||(null==(n=r.users)?void 0:n.phone_number);if(!s)return void a({title:"Pas de num√©ro disponible",description:"Aucun num√©ro de t√©l√©phone n'est disponible pour cette annonce.",variant:"destructive"});const t=s.replace(/[\s\-\(\)]/g,""),l=t.startsWith("+")?t:t.startsWith("221")?"+"+t:"+221"+t;if("phone"===e)window.open("tel:"+l,"_blank","noopener,noreferrer"),a({title:"Appel en cours",description:"Appel vers "+l});else if("whatsapp"===e){const e=encodeURIComponent(`Bonjour ! Je suis int√©ress√©(e) par votre annonce "${r.title}".\n\nPouvez-vous me donner plus d'informations ?`);window.open(`https://wa.me/${l}?text=${e}`,"_blank","noopener,noreferrer"),a({title:"WhatsApp ouvert",description:"Conversation WhatsApp avec "+l})}}}));return o?m.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de l'annonce..."})]})}):r?m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs(ne,{variant:"ghost",onClick:()=>s(-1),className:"mb-4",children:[m.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[m.jsx(j,{to:"/",className:"hover:text-primary",children:"Accueil"}),m.jsx("span",{children:"/"}),m.jsx(j,{to:"/"+("real_estate"===r.category?"immobilier":"automobile"===r.category?"automobile":"services"===r.category?"services":"marketplace"),className:"hover:text-primary",children:C(r.category)}),m.jsx("span",{children:"/"}),m.jsx("span",{className:"text-foreground",children:r.title})]})]}),m.jsx("div",{className:"max-w-4xl mx-auto",children:m.jsxs("div",{children:[m.jsx("div",{className:"mb-8",children:m.jsx(Fr,{images:k,title:r.title})}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.title}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ge,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"text-sm",children:r.location&&"object"==typeof r.location&&r.location.city?`${r.location.city}, ${r.location.country||""}`:"Localisation non sp√©cifi√©e"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Je,{className:"h-4 w-4 mr-1"}),m.jsxs("span",{className:"text-sm",children:["Publi√© le ",(A=r.created_at,new Date(A).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}))]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Tr,{listing:r,variant:"compact"}),m.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{t?v(!0):s("/connexion")},children:[m.jsx(at,{className:"h-4 w-4 mr-1"}),"Signaler"]})]})]}),m.jsxs("div",{className:"text-3xl font-bold text-primary mb-4",children:[(P=r.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(P)),(r.is_featured||r.is_boosted||r.is_premium)&&m.jsx(Xe,{className:"ml-3 bg-gradient-to-r from-amber-500 to-yellow-500 text-white border-amber-600",children:"‚≠ê Premium"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-primary/10 text-primary",children:[(e=>{switch(e){case"real_estate":return"üè†";case"automobile":return"üöó";case"services":return"üîß";case"marketplace":return"üõçÔ∏è";default:return"üìã"}})(r.category)," ",C(r.category)]}),"approved"===r.status&&m.jsx(Xe,{variant:"default",className:"badge-approved",children:"Approuv√©"}),t&&r.user_id===t.id&&m.jsx(nr,{listingId:r.id,listing:r,size:"default",showActions:!0,className:"ml-auto"})]})]}),m.jsx(dt,{className:"my-8"}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Description"}),m.jsx("div",{className:"prose prose-invert max-w-none",children:m.jsx("p",{className:"whitespace-pre-line",children:r.description})})]}),r.real_estate_details&&m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"D√©tails immobiliers"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.real_estate_details.type&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),m.jsx("p",{className:"font-medium",children:r.real_estate_details.type})]}),r.real_estate_details.rooms&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Pi√®ces"}),m.jsx("p",{className:"font-medium",children:r.real_estate_details.rooms})]}),r.real_estate_details.surface&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Surface"}),m.jsxs("p",{className:"font-medium",children:[r.real_estate_details.surface," m¬≤"]})]})]})]}),r.automobile_details&&m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"D√©tails automobile"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.automobile_details.brand&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Marque"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.brand})]}),r.automobile_details.model&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Mod√®le"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.model})]}),r.automobile_details.year&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Ann√©e"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.year})]}),r.automobile_details.fuel&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Carburant"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.fuel})]})]})]}),m.jsx("div",{className:"mt-12 mb-8",children:m.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Contacter le vendeur"}),r.users&&m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendeur"}),m.jsxs("p",{className:"font-medium",children:[r.users.first_name," ",r.users.last_name]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[m.jsxs(ne,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>S("whatsapp"),children:[m.jsx(be,{className:"h-4 w-4 mr-2"}),"WhatsApp"]}),m.jsxs(ne,{className:"w-full",onClick:()=>S("phone"),children:[m.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Appeler"]}),m.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>S("message"),children:[m.jsx(ze,{className:"h-4 w-4 mr-2"}),"Message"]}),m.jsxs(ne,{variant:"outline",className:"w-full",onClick:()=>d(null,null,(function*(){if(t)try{x(!u),a({title:u?"Retir√© des favoris":"Ajout√© aux favoris",description:u?"L'annonce a √©t√© retir√©e de vos favoris.":"L'annonce a √©t√© ajout√©e √† vos favoris."})}catch(e){a({title:"Erreur",description:"Impossible de modifier les favoris.",variant:"destructive"})}else s("/connexion")})),children:[m.jsx(cs,{className:"h-4 w-4 mr-2 "+(u?"fill-red-500 text-red-500":"")}),u?"Retirer":"Favoris"]})]}),!t&&m.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["üí° ",m.jsx("strong",{children:"Conseil :"})," Vous pouvez contacter le vendeur directement par WhatsApp ou t√©l√©phone sans cr√©er de compte. Connectez-vous uniquement si vous souhaitez utiliser la messagerie priv√©e."]})})]})}),m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"text-amber-600 dark:text-amber-400 text-lg mr-2",children:"‚ö†Ô∏è"}),m.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Conseils de s√©curit√©"})]}),m.jsx("button",{onClick:()=>b(!f),className:"text-xs text-amber-600 dark:text-amber-400 hover:underline",children:f?"Masquer":"Voir plus"})]}),m.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300 mb-2",children:"ü§ù Lieu public ‚Ä¢ üîç V√©rifiez le bien ‚Ä¢ üí∞ Paiement s√©curis√© ‚Ä¢ üö® Signalez les probl√®mes"}),f&&m.jsx("div",{className:"mt-3 pt-3 border-t border-amber-200 dark:border-amber-700",children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Rencontre :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Lieu public, √©vitez les heures tardives"})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"V√©rification :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Inspectez, testez, demandez les documents"})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Paiement :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Esp√®ces privil√©gi√©es, m√©fiez-vous des prix bas"})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Signalement :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Conservez les communications, signalez les abus"})]})]})})]})}),m.jsx("div",{className:"mb-8",children:m.jsx(Or,{listingId:r.id,listing:r,className:"mt-8"})}),m.jsx(Ur,{listings:n,title:"Annonces similaires",currentListing:r})]})}),m.jsx(Br,{isOpen:p,onClose:()=>v(!1),listing:r,onReportSubmitted:()=>{}})]}):null;var P,A},Xr=()=>{const{user:e}=ae(),[s,t]=h.useState([]),[a,r]=h.useState([]),[i,n]=h.useState(!0),[c,u]=h.useState("grid"),[x,p]=h.useState(""),[g,j]=h.useState([]),[v,f]=h.useState(null),[b,y]=h.useState("");h.useEffect((()=>{d(null,null,(function*(){if(e){n(!0);try{const{data:s,error:a}=yield ie.from("favorites").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;const i=s.map((e=>e.listing_id));if(i.length>0){const{data:e,error:a}=yield ie.from("listings").select("\n            *,\n            user:users(id, full_name, avatar_url),\n            category:categories(name, slug)\n          ").in("id",i).eq("status","approved");if(a)throw a;const n=s.map((s=>{const t=e.find((e=>e.id===s.listing_id));return o(l({},s),{listing:t})})).filter((e=>e.listing));t(n),r(e)}else t([]),r([])}catch(s){}finally{n(!1)}}}))}),[e]);const N=s.filter((e=>{var s,t;const a=e.listing;if(!a)return!1;const r=""===x||a.title.toLowerCase().includes(x.toLowerCase())||(null==(s=a.description)?void 0:s.toLowerCase().includes(x.toLowerCase()))||(null==(t=e.notes)?void 0:t.toLowerCase().includes(x.toLowerCase())),i=0===g.length||g.some((s=>{var t;return null==(t=e.tags)?void 0:t.includes(s)}));return r&&i})),w=[...new Set(s.flatMap((e=>e.tags||[])))].sort(),k={total:s.length,withNotes:s.filter((e=>e.notes)).length,withTags:s.filter((e=>e.tags&&e.tags.length>0)).length,categories:[...new Set(s.map((e=>{var s,t;return null==(t=null==(s=e.listing)?void 0:s.category)?void 0:t.name})).filter(Boolean))]};return e?m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Favoris"}),m.jsxs("p",{className:"text-gray-600 mt-2",children:[k.total," annonce(s) sauvegard√©e(s)"]})]}),m.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[m.jsxs("span",{children:[k.withNotes," avec notes"]}),m.jsxs("span",{children:[k.withTags," avec tags"]}),m.jsxs("span",{children:[k.categories.length," cat√©gories"]})]})]})}),m.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),m.jsx("input",{type:"text",placeholder:"Rechercher dans vos favoris...",value:x,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(bs,{size:20,className:"text-gray-400"}),m.jsxs("select",{value:g.length>0?g[0]:"",onChange:e=>j(e.target.value?[e.target.value]:[]),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"Tous les tags"}),w.map((e=>m.jsx("option",{value:e,children:e},e)))]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>u("grid"),className:"p-2 rounded "+("grid"===c?"bg-blue-100 text-blue-600":"text-gray-400"),children:m.jsx(mt,{size:20})}),m.jsx("button",{onClick:()=>u("list"),className:"p-2 rounded "+("list"===c?"bg-blue-100 text-blue-600":"text-gray-400"),children:m.jsx(ut,{size:20})})]})]})}),i?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement de vos favoris..."})]}):0===N.length?m.jsxs("div",{className:"text-center py-12",children:[m.jsx(cs,{className:"mx-auto h-12 w-12 text-gray-400"}),m.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:x||g.length>0?"Aucun r√©sultat":"Aucun favori"}),m.jsx("p",{className:"mt-2 text-gray-600",children:x||g.length>0?"Essayez de modifier vos crit√®res de recherche":"Commencez √† ajouter des annonces √† vos favoris"})]}):m.jsx("div",{className:"grid"===c?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:N.map((e=>m.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[m.jsx("div",{className:"p-4",children:m.jsx(lr,{listing:e.listing,compact:"list"===c})}),m.jsxs("div",{className:"px-4 pb-4",children:[e.tags&&e.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e=>m.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[m.jsx(Us,{size:12,className:"mr-1"}),e]},e)))}),m.jsx("div",{className:"mb-3",children:v===e.id?m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:b,onChange:e=>y(e.target.value),placeholder:"Ajouter une note...",className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",rows:"2"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>{return s=e.id,a=b,d(null,null,(function*(){try{const{error:e}=yield ie.from("favorites").update({notes:a}).eq("id",s);if(e)throw e;t((e=>e.map((e=>e.id===s?o(l({},e),{notes:a}):e)))),f(null),y("")}catch(e){}}));var s,a},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Sauvegarder"}),m.jsx("button",{onClick:()=>{f(null),y("")},className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400",children:"Annuler"})]})]}):m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.notes||"Aucune note"}),m.jsx("button",{onClick:()=>{f(e.id),y(e.notes||"")},className:"ml-2 p-1 text-gray-400 hover:text-gray-600",children:m.jsx(xt,{size:14})})]})}),m.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[m.jsxs("span",{className:"text-xs text-gray-500",children:["Ajout√© le ",new Date(e.created_at).toLocaleDateString("fr-FR")]}),m.jsxs("button",{onClick:()=>{return s=e.id,d(null,null,(function*(){try{const{error:e}=yield ie.from("favorites").delete().eq("id",s);if(e)throw e;t((e=>e.filter((e=>e.id!==s))))}catch(e){}}));var s},className:"flex items-center space-x-1 text-red-600 hover:text-red-800 text-sm",children:[m.jsx(ht,{size:14}),m.jsx("span",{children:"Retirer"})]})]})]})]},e.id)))})]}):m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-gray-500",children:"Connectez-vous pour voir vos favoris"})})},Hr=()=>m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsxs("div",{className:"flex items-center justify-center mb-4",children:[m.jsx(cs,{className:"h-12 w-12 text-primary mr-4"}),m.jsx("h1",{className:"text-4xl font-bold",children:"Mes Favoris"})]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Retrouvez toutes vos annonces sauvegard√©es et g√©rez vos favoris en toute simplicit√©."})]}),m.jsxs(Fe,{className:"shadow-lg border-0",children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center space-x-2",children:[m.jsx(cs,{className:"h-5 w-5 text-primary"}),m.jsx("span",{children:"Annonces Favorites"})]})}),m.jsx(Re,{children:m.jsx(Xr,{})})]}),m.jsxs("div",{className:"text-center mt-12",children:[m.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous ne trouvez pas ce que vous cherchez ?"}),m.jsx(ne,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>window.location.href="/marketplace",children:"Explorer le Marketplace"})]})]})}),Wr=({listingId:e,onPackageSelected:s,onClose:t})=>{const{user:a}=ae(),r=g(),[i,n]=h.useState([]),[l,o]=h.useState(!0),[c,u]=h.useState(null),[x,p]=h.useState(!1),[j,v]=h.useState(null);h.useEffect((()=>{f()}),[]);const f=()=>d(null,null,(function*(){try{o(!0);const e=yield Ss.getBoostPackages();n(e.packages||[])}catch(e){v("Erreur lors du chargement des packages de boost")}finally{o(!1)}})),b=e=>{switch(e){case"priority":return m.jsx(Ye,{className:"h-4 w-4"});case"badge":return m.jsx(ts,{className:"h-4 w-4"});case"featured":return m.jsx(Is,{className:"h-4 w-4"});case"analytics":return m.jsx(js,{className:"h-4 w-4"});case"support":return m.jsx(Qe,{className:"h-4 w-4"});default:return m.jsx(pt,{className:"h-4 w-4"})}},y=(e,s)=>{switch(e){case"priority":return"highest"===s?"Priorit√© maximale":"high"===s?"Priorit√© √©lev√©e":"Priorit√© moyenne";case"badge":return"Badge boost√© visible";case"featured":return s?"Mise en avant premium":"Visibilit√© standard";case"analytics":return"premium"===s?"Analytics d√©taill√©s":"detailed"===s?"Analytics avanc√©s":"Analytics de base";case"support":return"Support prioritaire";default:return s}},N=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return l?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):j?m.jsxs("div",{className:"text-center p-6",children:[m.jsx("div",{className:"text-red-500 mb-4",children:j}),m.jsx(ne,{onClick:f,variant:"outline",children:"R√©essayer"})]}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"üöÄ Booster votre annonce"}),m.jsx("p",{className:"text-muted-foreground",children:"Choisissez le package qui correspond √† vos besoins et boostez votre visibilit√© !"})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(((e,s)=>{var t,a;return m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:m.jsxs(Fe,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg "+((null==c?void 0:c.id)===e.id?"ring-2 ring-primary border-primary":"hover:border-primary/50"),onClick:()=>(e=>{u(e)})(e),children:[m.jsxs(Te,{className:"text-center pb-4",children:[m.jsx("div",{className:"flex justify-center mb-3",children:(null==(t=e.features)?void 0:t.featured)?m.jsx(Is,{className:"h-8 w-8 text-yellow-500"}):"highest"===(null==(a=e.features)?void 0:a.priority)?m.jsx(ts,{className:"h-8 w-8 text-purple-500"}):m.jsx(Ms,{className:"h-8 w-8 text-blue-500"})}),m.jsx(De,{className:"text-xl",children:e.name}),m.jsx("p",{className:"text-muted-foreground text-sm",children:e.description})]}),m.jsxs(Re,{className:"space-y-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:N(e.price)}),m.jsxs("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[m.jsx(ss,{className:"h-4 w-4 mr-1"}),e.duration_days," jour",e.duration_days>1?"s":""]})]}),m.jsx("div",{className:"space-y-2",children:Object.entries(e.features||{}).map((([e,s])=>m.jsxs("div",{className:"flex items-center text-sm",children:[m.jsx("div",{className:"text-primary mr-2",children:b(e)}),m.jsx("span",{children:y(e,s)})]},e)))}),(null==c?void 0:c.id)===e.id&&m.jsx("div",{className:"flex justify-center",children:m.jsxs(Xe,{variant:"default",className:"bg-primary",children:[m.jsx(pt,{className:"h-4 w-4 mr-1"}),"S√©lectionn√©"]})})]})]})},e.id)}))}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[m.jsx(ne,{onClick:t,variant:"outline",className:"flex-1 sm:flex-none",children:"Annuler"}),m.jsx(ne,{onClick:()=>d(null,null,(function*(){if(a)if(c)try{p(!0),v(null);const r=yield Ss.purchaseBoost(c.id,e,a.id);r.success&&(null==s||s(r),null==t||t())}catch(i){v(i.message||"Erreur lors de l'achat du boost")}finally{p(!1)}else v("Veuillez s√©lectionner un package");else r("/connexion",{state:{from:"/booster-annonce"}})})),disabled:!c||x,className:"flex-1 sm:flex-none bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:x?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Achat en cours..."]}):m.jsxs(m.Fragment,{children:["üöÄ Acheter le Boost",c&&" - "+N(c.price)]})})]}),m.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[m.jsx("p",{children:"üí° Les boosts sont activ√©s imm√©diatement apr√®s confirmation du paiement"}),m.jsx("p",{children:"üîÑ Vous pouvez renouveler ou annuler vos boosts √† tout moment"})]})]})},Gr=()=>{var e;const{id:s}=y(),t=g(),{user:a}=ae(),{toast:r}=Le(),[i,n]=h.useState(null),[l,o]=h.useState(null),[c,u]=h.useState(!0),[x,p]=h.useState(null),[j,v]=h.useState(!1),[f,b]=h.useState(null);h.useEffect((()=>{s&&N()}),[s]);const N=()=>d(null,null,(function*(){try{u(!0),p(null);const e=yield ys.getListingById(s);n(e);const t=yield Ss.getBoostStatus(s);o(t)}catch(e){p(e.message||"Erreur lors du chargement des donn√©es")}finally{u(!1)}}));return c?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):x?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"‚ö†Ô∏è"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erreur"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:x}),m.jsx(ne,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})}):i?(null==a?void 0:a.id)!==i.user_id?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üö´"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Acc√®s non autoris√©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous ne pouvez booster que vos propres annonces."}),m.jsx(ne,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[m.jsxs(ne,{onClick:()=>t(-1),variant:"ghost",className:"mb-4",children:[m.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"üöÄ Booster votre annonce"}),m.jsx("p",{className:"text-muted-foreground text-lg",children:"Augmentez votre visibilit√© et obtenez plus de contacts"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m.jsxs(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Votre annonce"}),m.jsx(lr,{listing:i,showActions:!1})]}),m.jsx(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:m.jsxs(Fe,{children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center",children:[m.jsx(Ye,{className:"h-5 w-5 mr-2 text-primary"}),"Statut du boost"]})}),m.jsx(Re,{children:(null==l?void 0:l.hasActiveBoost)?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(ts,{className:"h-5 w-5 text-green-600 mr-2"}),m.jsxs("div",{children:[m.jsxs("p",{className:"font-semibold text-green-800",children:["Boost actif : ",null==(e=l.currentBoost.boost_packages)?void 0:e.name]}),m.jsxs("p",{className:"text-sm text-green-600",children:["Expire le ",new Date(l.currentBoost.end_date).toLocaleDateString("fr-FR")]})]})]}),m.jsx(Xe,{variant:"default",className:"bg-green-600",children:"Actif"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ne,{onClick:()=>d(null,null,(function*(){if(null==l?void 0:l.currentBoost)try{(yield Ss.renewBoost(l.currentBoost.id,a.id)).success&&(r({title:"Boost renouvel√© !",description:"Votre boost a √©t√© prolong√© avec succ√®s."}),N())}catch(e){r({title:"Erreur",description:e.message||"Erreur lors du renouvellement",variant:"destructive"})}})),variant:"outline",className:"flex-1",children:"üîÑ Renouveler"}),m.jsx(ne,{onClick:()=>d(null,null,(function*(){if((null==l?void 0:l.currentBoost)&&confirm("√ätes-vous s√ªr de vouloir annuler ce boost ?"))try{(yield Ss.cancelBoost(l.currentBoost.id,a.id)).success&&(r({title:"Boost annul√©",description:"Votre boost a √©t√© annul√© avec succ√®s."}),N())}catch(e){r({title:"Erreur",description:e.message||"Erreur lors de l'annulation",variant:"destructive"})}})),variant:"outline",className:"flex-1",children:"‚ùå Annuler"})]})]}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üìà"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun boost actif"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre annonce n'est actuellement pas boost√©e"}),m.jsx(ne,{onClick:()=>v(!0),className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:"üöÄ Booster maintenant"})]})})]})})]}),m.jsx(Bt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-6",children:!(null==l?void 0:l.hasActiveBoost)&&m.jsx(Fe,{className:"bg-gradient-to-br from-primary/10 to-blue-500/10 border-primary/20",children:m.jsxs(Re,{className:"p-6 text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:"üöÄ"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pr√™t √† booster ?"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Augmentez votre visibilit√© et obtenez plus de contacts"}),m.jsx(ne,{onClick:()=>v(!0),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:"Commencer maintenant"})]})})})]}),f&&m.jsx(gt,{open:!!f,onOpenChange:()=>b(null),children:m.jsxs(jt,{className:"sm:max-w-md",children:[m.jsx(vt,{children:m.jsx(ft,{className:"text-center",children:"üéâ Boost achet√© !"})}),m.jsxs("div",{className:"text-center py-6",children:[m.jsx("div",{className:"text-6xl mb-4",children:"‚úÖ"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"F√©licitations !"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre boost a √©t√© achet√© avec succ√®s et sera activ√© apr√®s confirmation du paiement."}),m.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:m.jsxs("p",{className:"text-sm text-green-800",children:[m.jsx("strong",{children:"Package :"})," ",f.packageData.name,m.jsx("br",{}),m.jsx("strong",{children:"Prix :"})," ",f.packageData.price," FCFA",m.jsx("br",{}),m.jsx("strong",{children:"Dur√©e :"})," ",f.packageData.duration_days," jours"]})})]}),m.jsx("div",{className:"flex justify-center",children:m.jsx(ne,{onClick:()=>b(null),children:"Continuer"})})]})}),m.jsx(gt,{open:j,onOpenChange:v,children:m.jsxs(jt,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[m.jsx(vt,{children:m.jsx(ft,{children:"Choisir un package de boost"})}),m.jsx(Wr,{listingId:s,onPackageSelected:e=>{b(e),v(!1),e.boostId?t("/paiement/"+e.boostId):r({title:"Erreur",description:"Erreur lors de la cr√©ation du boost. Veuillez r√©essayer.",variant:"destructive"})},onClose:()=>v(!1)})]})})]})}):m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üîç"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce non trouv√©e"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"L'annonce que vous recherchez n'existe pas."}),m.jsx(ne,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})})},Jr=({amount:e,currency:s="XOF",onPaymentMethodSelected:t,onClose:a,packageName:r="Package Premium",userCountry:i="BJ"})=>{var n,c;const[u,x]=h.useState(""),[p,g]=h.useState(""),[j,v]=h.useState({number:"",expiry:"",cvv:"",name:"",brand:"visa"}),[f,b]=h.useState(!1),[y,N]=h.useState(null),[w,k]=h.useState(!1),[C,S]=h.useState(""),[P,A]=h.useState(i),z=bt.getPaymentMethods(P),E=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),L=e=>{switch(e){case"orange":return"border-orange-200 bg-gradient-to-r from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100";case"yellow":return"border-yellow-200 bg-gradient-to-r from-yellow-50 to-orange-50 hover:from-yellow-100 hover:to-orange-100";case"blue":return"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100";case"green":return"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100";default:return"border-gray-200 bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100"}};return m.jsx(Ps,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"üí≥ Choisir le mode de paiement"}),m.jsx("p",{className:"text-muted-foreground",children:"S√©lectionnez votre m√©thode de paiement pr√©f√©r√©e pour finaliser votre achat"}),m.jsx("div",{className:"mt-4 flex justify-center",children:m.jsxs("div",{className:"flex items-center gap-2 bg-white/50 px-4 py-2 rounded-lg border",children:[m.jsx(yt,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:"Pays :"}),m.jsxs(rt,{value:P,onValueChange:A,children:[m.jsx(it,{className:"w-32 h-8",children:m.jsx(nt,{})}),m.jsxs(lt,{children:[m.jsx(ot,{value:"BJ",children:"üáßüáØ B√©nin"}),m.jsx(ot,{value:"CI",children:"üá®üáÆ C√¥te d'Ivoire"}),m.jsx(ot,{value:"SN",children:"üá∏üá≥ S√©n√©gal"}),m.jsx(ot,{value:"ML",children:"üá≤üá± Mali"}),m.jsx(ot,{value:"BF",children:"üáßüá´ Burkina Faso"}),m.jsx(ot,{value:"NE",children:"üá≥üá™ Niger"}),m.jsx(ot,{value:"TG",children:"üáπüá¨ Togo"}),m.jsx(ot,{value:"GH",children:"üá¨üá≠ Ghana"}),m.jsx(ot,{value:"NG",children:"üá≥üá¨ Nigeria"})]})]})]})}),m.jsxs(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-6 p-6 bg-gradient-to-r from-primary/5 to-blue-500/5 rounded-xl border border-primary/20 shadow-sm",children:[m.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"R√©sum√© de votre commande"}),m.jsx("div",{className:"font-semibold text-lg text-primary",children:r}),m.jsx("div",{className:"text-3xl font-bold text-primary",children:E(e)}),m.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Paiement s√©curis√© via Kkiapay ‚Ä¢ Frais : 1.5% + 50 FCFA"})]})]}),m.jsx(Q,{value:u,onValueChange:e=>{x(e),N(null)},children:m.jsx("div",{className:"space-y-4",children:Object.entries(z).map((([e,s],t)=>m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:[m.jsx(Y,{value:e,id:e,className:"sr-only"}),m.jsx(Ve,{htmlFor:e,className:"block cursor-pointer p-6 border-2 rounded-xl transition-all duration-300 hover:shadow-lg "+(u===e?"border-primary bg-gradient-to-r from-primary/5 to-blue-500/5 shadow-lg scale-[1.02]":L(s.color||"blue")),children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(Bt.div,{whileHover:{scale:1.1},className:"p-3 rounded-lg bg-white shadow-sm",children:m.jsx("span",{className:"text-2xl",children:s.icon})})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:s.name}),s.popular&&m.jsxs(Xe,{variant:"default",className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs",children:[m.jsx(ts,{className:"h-3 w-3 mr-1"}),"Populaire"]}),m.jsxs(As,{children:[m.jsx(zs,{children:m.jsx(ns,{className:"h-4 w-4 text-muted-foreground"})}),m.jsx(Es,{children:m.jsxs("p",{children:["Temps de traitement : ",s.processingTime]})})]})]}),m.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["‚è±Ô∏è Traitement : ",s.processingTime]})]}),m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-6 h-6 rounded-full border-2 transition-all duration-300 "+(u===e?"border-primary bg-primary shadow-lg":"border-gray-300"),children:u===e&&m.jsx(Bt.div,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 bg-white rounded-full m-0.5"})})})]})})]},e)))})}),m.jsx($t,{mode:"wait",children:u&&m.jsxs(Bt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[("orange_money"===u||"mtn_mobile_money"===u||"moov_money"===u)&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:m.jsxs(Fe,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(Nt,{className:"h-5 w-5"}),null==(n=z[u])?void 0:n.name]})}),m.jsxs(Re,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"phone",className:"text-sm font-medium",children:"Num√©ro de t√©l√©phone"}),m.jsx(Se,{id:"phone",type:"tel",placeholder:"Ex: "+("BJ"===P?"90 12 34 56":"CI"===P?"07 08 09 10 11":"Num√©ro local"),value:p,onChange:e=>(e=>{const s=bt.formatPhoneNumber(e,P);g(s)})(e.target.value),className:"mt-2 h-12 text-lg",onFocus:()=>S("phone"),onBlur:()=>S("")}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Entrez votre num√©ro ",null==(c=z[u])?void 0:c.name]})]}),m.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(xs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-blue-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"Paiement s√©curis√©"}),m.jsx("p",{children:"Vous recevrez un SMS de confirmation pour valider le paiement"})]})]})})]})]})}),"card"===u&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:m.jsxs(Fe,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[m.jsx(Te,{children:m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(vs,{className:"h-5 w-5"}),"Informations de la carte"]})}),m.jsxs(Re,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"cardNumber",className:"text-sm font-medium",children:"Num√©ro de carte"}),m.jsxs("div",{className:"relative mt-2",children:[m.jsx(Se,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:j.number,onChange:e=>(e=>{var s;const t=(null==(s=e.replace(/\D/g,"").match(/.{1,4}/g))?void 0:s.join(" "))||"";v((e=>o(l({},e),{number:t})));const a=e.replace(/\D/g,"")[0];let r="visa";"5"===a?r="mastercard":"3"===a?r="amex":"6"===a&&(r="discover"),v((e=>o(l({},e),{brand:r})))})(e.target.value),maxLength:19,className:"h-12 text-lg pr-12",onFocus:()=>S("cardNumber"),onBlur:()=>S("")}),m.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-2xl",children:(j.brand,"üí≥")})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"expiry",className:"text-sm font-medium",children:"Date d'expiration"}),m.jsx(Se,{id:"expiry",type:"text",placeholder:"MM/AA",value:j.expiry,onChange:e=>(e=>{let s=e.replace(/\D/g,"");2>s.length||(s=s.substring(0,2)+"/"+s.substring(2,4)),v((e=>o(l({},e),{expiry:s})))})(e.target.value),maxLength:5,className:"mt-2 h-12",onFocus:()=>S("expiry"),onBlur:()=>S("")})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"cvv",className:"text-sm font-medium",children:"Code de s√©curit√©"}),m.jsxs("div",{className:"relative mt-2",children:[m.jsx(Se,{id:"cvv",type:w?"text":"password",placeholder:"123",value:j.cvv,onChange:e=>v((s=>o(l({},s),{cvv:e.target.value}))),maxLength:4,className:"h-12 pr-12",onFocus:()=>S("cvv"),onBlur:()=>S("")}),m.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>k(!w),children:w?m.jsx(wt,{className:"h-4 w-4"}):m.jsx(Ke,{className:"h-4 w-4"})})]})]})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"cardName",className:"text-sm font-medium",children:"Nom sur la carte"}),m.jsx(Se,{id:"cardName",type:"text",placeholder:"Nom et pr√©nom",value:j.name,onChange:e=>v((s=>o(l({},s),{name:e.target.value}))),className:"mt-2 h-12",onFocus:()=>S("cardName"),onBlur:()=>S("")})]}),m.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Oe,{className:"h-5 w-5 text-green-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-green-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"Paiement s√©curis√© SSL"}),m.jsx("p",{children:"Vos informations sont chiffr√©es et prot√©g√©es"})]})]})})]})]})})]},u)}),m.jsx($t,{children:y&&m.jsx(Bt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:m.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[m.jsx(ls,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm",children:y})]})})}),m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row gap-3 justify-center",children:[m.jsx(ne,{onClick:a,variant:"outline",className:"flex-1 sm:flex-none h-12",children:"Annuler"}),m.jsx(ne,{onClick:()=>d(null,null,(function*(){if(N(null),u)if("orange_money"!==u&&"mtn_mobile_money"!==u&&"moov_money"!==u||p&&bt.validatePhoneNumber(p,P))if("card"!==u||j.number&&j.expiry&&j.cvv&&j.name)try{b(!0);const a=l(l({method:u,amount:e,currency:s,packageName:r,country:P},"orange_money"===u||"mtn_mobile_money"===u||"moov_money"===u?{phoneNumber:p}:{}),"card"===u?{cardData:j}:{});t(a)}catch(a){N(a.message||"Erreur lors de la s√©lection de la m√©thode de paiement")}finally{b(!1)}else N("Veuillez remplir tous les champs de la carte correctement");else N("Veuillez entrer un num√©ro de t√©l√©phone valide");else N("Veuillez s√©lectionner une m√©thode de paiement")})),disabled:!u||f,className:"flex-1 sm:flex-none h-12 bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 shadow-lg",children:f?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Traitement..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Payer ",E(e)]})})]}),m.jsxs(Bt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-sm text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[m.jsx(Oe,{className:"h-4 w-4"}),m.jsx("span",{children:"Paiement 100% s√©curis√© via Kkiapay"})]}),m.jsx("p",{children:"Vos informations de paiement sont prot√©g√©es par un chiffrement SSL de niveau bancaire"})]})]})})},Kr=()=>{var e,s,t,a,r,i;const{boostId:n}=y(),l=g(),o=u(),{user:c}=ae(),{toast:x}=Le(),[p,j]=h.useState("method-selection"),[v,f]=h.useState(null),[b,N]=h.useState(null),[w,k]=h.useState("pending"),[C,S]=h.useState(!0),[P,A]=h.useState(null),[z,E]=h.useState(!1),[L,M]=h.useState(0),[_,q]=h.useState(0),[F,T]=h.useState(!1);h.useEffect((()=>{n&&D()}),[n]);const D=()=>d(null,null,(function*(){var e;try{if(S(!0),A(null),null==(e=o.state)?void 0:e.boostData)f(o.state.boostData);else{const e=yield Ss.getBoostStatus(n);if(e.currentBoost)f(e.currentBoost);else{const{data:e,error:s}=yield ie.from("listing_boosts").select("\n              *,\n              boost_packages (*)\n            ").eq("id",n).single();if(s||!e)throw Error("Boost non trouv√©");f(e)}}}catch(s){A(s.message||"Erreur lors du chargement des donn√©es du boost"),x({title:"Erreur",description:s.message,variant:"destructive"})}finally{S(!1)}})),I=()=>{j("method-selection"),N(null),k("pending"),A(null),M(0)},R=e=>{switch(e){case"orange_money":return"Orange Money";case"mtn_mobile_money":return"MTN Mobile Money";case"card":return"Carte Bancaire";default:return"M√©thode de paiement"}};return c?C?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(Fe,{className:"w-full max-w-md mx-4",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Chargement..."}),m.jsx("p",{className:"text-muted-foreground",children:"Pr√©paration de votre paiement"})]})})}):P&&"error"===p?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(Fe,{className:"w-full max-w-md mx-4",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"‚ö†Ô∏è"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erreur de paiement"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:P}),3>_&&m.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-yellow-800",children:["Tentative ",_+1," sur 3"]})}),m.jsxs("div",{className:"space-y-3",children:[3>_&&m.jsxs(ne,{onClick:()=>d(null,null,(function*(){q((e=>e+1)),A(null),j("method-selection")})),className:"w-full",children:[m.jsx(le,{className:"h-4 w-4 mr-2"}),"R√©essayer"]}),m.jsx(ne,{onClick:I,variant:"outline",className:"w-full",children:"Changer de m√©thode"}),m.jsx(ne,{onClick:()=>l(-1),variant:"ghost",className:"w-full",children:"Retour"})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[m.jsxs(ne,{onClick:()=>l(-1),variant:"ghost",className:"mb-4 hover:bg-white/50",children:[m.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"üí≥ Paiement S√©curis√©"}),m.jsx("p",{className:"text-muted-foreground text-lg",children:"Finalisez votre achat de boost premium en toute s√©curit√©"})]})]}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[m.jsxs("div",{className:"flex items-center "+("method-selection"===p?"text-primary":"text-muted-foreground"),children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("method-selection"===p?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"1"}),m.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"M√©thode de paiement"})]}),m.jsx("div",{className:"w-8 h-1 bg-muted-foreground/30"}),m.jsxs("div",{className:"flex items-center "+("payment-processing"===p?"text-primary":"text-muted-foreground"),children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("payment-processing"===p?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"2"}),m.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"Traitement"})]}),m.jsx("div",{className:"w-8 h-1 bg-muted-foreground/30"}),m.jsxs("div",{className:"flex items-center "+("success"===p?"text-primary":"text-muted-foreground"),children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("success"===p?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"3"}),m.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"Confirmation"})]})]}),"payment-processing"===p&&m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx(kt,{value:L,className:"h-2"}),m.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-2",children:[L,"% termin√©"]})]})]}),m.jsxs($t,{mode:"wait",children:["method-selection"===p&&m.jsx(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"max-w-2xl mx-auto",children:m.jsx(Jr,{amount:(null==(e=null==v?void 0:v.boost_packages)?void 0:e.price)||0,currency:"XOF",packageName:(null==(s=null==v?void 0:v.boost_packages)?void 0:s.name)||"Package Premium",onPaymentMethodSelected:e=>d(null,null,(function*(){try{j("payment-processing"),M(0);const s=v.boost_packages,t=(null==s?void 0:s.price)||0,a=yield bt.createPayment({userId:c.id,amount:t,currency:"XOF",paymentMethod:e.method,boostId:v.id,packageName:(null==s?void 0:s.name)||"Package Premium",listingId:v.listing_id,description:"Boost "+((null==s?void 0:s.name)||"Premium"),phoneNumber:e.phoneNumber,email:c.email,country:e.country,cardData:e.cardData});if(!a.success)throw Error("Erreur lors de la cr√©ation du paiement");let r;if(M(30),"orange_money"===e.method?r=yield bt.initiateOrangeMoneyPayment(a.paymentId,e.phoneNumber):"mtn_mobile_money"===e.method?r=yield bt.initiateMTNPayment(a.paymentId,e.phoneNumber):"moov_money"===e.method?r=yield bt.initiateMoovPayment(a.paymentId,e.phoneNumber):"card"===e.method&&(r=yield bt.initiateCardPayment(a.paymentId,e.cardData)),M(60),!r.success)throw Error("Erreur lors de l'initialisation du paiement");if(M(80),!r.paymentUrl)throw Error("URL de paiement non disponible");window.open(r.paymentUrl,"_blank","noopener,noreferrer"),M(100)}catch(s){A(s.message),j("error")}})),onClose:()=>l(-1)})},"method-selection"),"payment-processing"===p&&m.jsx(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"max-w-md mx-auto",children:m.jsx(Fe,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx(Bt.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"mb-6",children:(e=>{switch(e){case"orange_money":return m.jsx(At,{className:"h-6 w-6 text-orange-500"});case"mtn_mobile_money":return m.jsx(Pt,{className:"h-6 w-6 text-yellow-500"});case"card":return m.jsx(vs,{className:"h-6 w-6 text-blue-500"});default:return m.jsx(vs,{className:"h-6 w-6"})}})(null==b?void 0:b.method)}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Traitement en cours..."}),m.jsxs("p",{className:"text-muted-foreground mb-6",children:["Votre paiement via ",R(null==b?void 0:b.method)," est en cours de traitement."]}),m.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground mb-6",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(os,{className:"h-4 w-4 text-green-500"}),m.jsx("span",{children:"V√©rification de la transaction"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(os,{className:"h-4 w-4 text-green-500"}),m.jsx("span",{children:"Confirmation du paiement"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(ss,{className:"h-4 w-4 text-blue-500"}),m.jsx("span",{children:"Activation de votre boost"})]})]}),m.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6",children:m.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[m.jsx(ns,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm",children:"Ne fermez pas cette page pendant le traitement"})]})}),m.jsx(ne,{onClick:I,variant:"outline",size:"sm",children:"Annuler"})]})})},"payment-processing"),"success"===p&&m.jsx(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"max-w-md mx-auto",children:m.jsx(Fe,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 shadow-xl",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx(Bt.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"text-6xl mb-4",children:"üéâ"}),m.jsx("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"Paiement r√©ussi !"}),m.jsx("p",{className:"text-green-700 mb-6",children:"Votre boost premium a √©t√© activ√© avec succ√®s."}),m.jsx("div",{className:"bg-white p-4 rounded-lg border border-green-200 mb-6 shadow-sm",children:m.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Package :"}),m.jsx("span",{className:"font-semibold",children:null==(t=null==v?void 0:v.boost_packages)?void 0:t.name})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Montant :"}),m.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format((null==(a=null==v?void 0:v.boost_packages)?void 0:a.price)||0)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"M√©thode :"}),m.jsx("span",{children:R(null==b?void 0:b.method)})]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs(ne,{onClick:()=>{E(!0)},variant:"outline",className:"w-full hover:bg-green-50",children:[m.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Voir le re√ßu"]}),m.jsxs(ne,{onClick:()=>l("/booster-annonce/"+(null==v?void 0:v.listing_id)),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 shadow-lg",children:[m.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Voir mon boost"]}),m.jsx(ne,{onClick:()=>l("/mes-boosts"),variant:"ghost",className:"w-full hover:bg-green-50",children:"Mes boosts"})]})]})})},"success")]}),m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-muted-foreground bg-white/50 px-4 py-2 rounded-full border",children:[m.jsx(xs,{className:"h-4 w-4"}),m.jsx("span",{children:"Paiement 100% s√©curis√© SSL"}),m.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>T(!0),className:"h-6 w-6 p-0",children:m.jsx(ns,{className:"h-3 w-3"})})]})}),m.jsx(gt,{open:z,onOpenChange:E,children:m.jsxs(jt,{className:"sm:max-w-md",children:[m.jsx(vt,{children:m.jsxs(ft,{className:"flex items-center gap-2",children:[m.jsx(Ct,{className:"h-5 w-5"}),"Re√ßu de paiement"]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.jsxs("div",{className:"text-sm space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Num√©ro de transaction :"}),m.jsxs("span",{className:"font-mono",children:["TXN-",Date.now()]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Date :"}),m.jsx("span",{children:(new Date).toLocaleDateString("fr-FR")})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Package :"}),m.jsx("span",{children:null==(r=null==v?void 0:v.boost_packages)?void 0:r.name})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Montant :"}),m.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format((null==(i=null==v?void 0:v.boost_packages)?void 0:i.price)||0)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"M√©thode :"}),m.jsx("span",{children:R(null==b?void 0:b.method)})]})]})}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ne,{onClick:()=>d(null,null,(function*(){try{const e=yield bt.generateReceipt(null==b?void 0:b.paymentId);if(e.success){const s=document.createElement("a");s.href=e.receiptUrl,s.download=`receipt-${n}.pdf`,s.target="_blank",s.rel="noopener noreferrer",document.body.appendChild(s),s.click(),document.body.removeChild(s),x({title:"Re√ßu t√©l√©charg√©",description:"Le re√ßu a √©t√© t√©l√©charg√© avec succ√®s."})}}catch(e){x({title:"Erreur",description:"Impossible de t√©l√©charger le re√ßu",variant:"destructive"})}})),className:"flex-1",children:[m.jsx(St,{className:"h-4 w-4 mr-2"}),"T√©l√©charger"]}),m.jsx(ne,{onClick:()=>E(!1),variant:"outline",className:"flex-1",children:"Fermer"})]})]})]})}),m.jsx(gt,{open:F,onOpenChange:T,children:m.jsxs(jt,{className:"sm:max-w-md",children:[m.jsx(vt,{children:m.jsxs(ft,{className:"flex items-center gap-2",children:[m.jsx(xs,{className:"h-5 w-5"}),"S√©curit√© du paiement"]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Oe,{className:"h-5 w-5 text-green-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"Chiffrement SSL"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Vos donn√©es sont prot√©g√©es par un chiffrement de niveau bancaire"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(xs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"Conformit√© PCI DSS"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Nos partenaires de paiement respectent les standards internationaux"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Ke,{className:"h-5 w-5 text-purple-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"Aucun stockage"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Nous ne stockons jamais vos informations de paiement"})]})]})]}),m.jsx(ne,{onClick:()=>T(!1),className:"w-full",children:"Compris"})]})]})})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(Fe,{className:"w-full max-w-md mx-4",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx("div",{className:"text-6xl mb-4",children:"üîí"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Connexion requise"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous devez √™tre connect√© pour effectuer un paiement."}),m.jsx(ne,{onClick:()=>l("/connexion"),className:"w-full",children:"Se connecter"})]})})})},Qr=()=>{const[e]=b(),s=g(),{toast:t}=Le(),[a,r]=h.useState("processing"),[i,n]=h.useState(null),[l,o]=h.useState(!0),[c,u]=h.useState(null);h.useEffect((()=>{x()}),[]);const x=()=>d(null,null,(function*(){try{o(!0);const s=e.get("payment_id"),a=e.get("transaction_id"),i=e.get("status"),l=e.get("reference");if(!s)throw Error("ID de paiement manquant");if("success"===i||"successful"===i){const e=yield bt.confirmPayment(s,{transactionId:a,reference:l,status:"successful"});if(!e.success)throw Error("Erreur lors de la confirmation du paiement");r("success"),n(e.paymentData),t({title:"üéâ Paiement r√©ussi !",description:"Votre boost a √©t√© activ√© avec succ√®s."})}else if("failed"===i||"cancelled"===i)r("failed"),u("Le paiement a √©chou√© ou a √©t√© annul√©"),t({title:"‚ùå Paiement √©chou√©",description:"Le paiement n'a pas pu √™tre trait√©.",variant:"destructive"});else{const e=yield bt.getPaymentStatus(s);"completed"===e.status?(r("success"),n(e)):"failed"===e.status||"cancelled"===e.status?(r("failed"),u("Le paiement a √©chou√©")):(r("pending"),u("Le statut du paiement est en attente de confirmation"))}}catch(s){r("error"),u(s.message),t({title:"Erreur",description:s.message,variant:"destructive"})}finally{o(!1)}}));return l?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(Fe,{className:"w-full max-w-md mx-4",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("h2",{className:"text-lg font-semibold mb-2",children:"V√©rification du paiement..."}),m.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous v√©rifions votre transaction"})]})})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx("div",{className:"max-w-md mx-auto",children:m.jsx(Bt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:m.jsx(Fe,{className:"shadow-xl border-0",children:m.jsxs(Re,{className:"p-8 text-center",children:[m.jsx(Bt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mb-6",children:(()=>{switch(a){case"success":return m.jsx(os,{className:"h-16 w-16 text-green-500"});case"failed":case"error":return m.jsx(Ls,{className:"h-16 w-16 text-red-500"});case"pending":return m.jsx(ss,{className:"h-16 w-16 text-yellow-500"});default:return m.jsx(ls,{className:"h-16 w-16 text-blue-500"})}})()}),m.jsx("h1",{className:"text-2xl font-bold mb-2",children:(()=>{switch(a){case"success":return"Paiement r√©ussi !";case"failed":return"Paiement √©chou√©";case"error":return"Erreur de paiement";case"pending":return"Paiement en attente";default:return"Traitement en cours..."}})()}),m.jsx("p",{className:"text-muted-foreground mb-6",children:(()=>{switch(a){case"success":return"Votre boost premium a √©t√© activ√© avec succ√®s.";case"failed":return"Le paiement n'a pas pu √™tre trait√©. Veuillez r√©essayer.";case"error":return"Une erreur s'est produite lors du traitement du paiement.";case"pending":return"Votre paiement est en cours de traitement.";default:return"V√©rification du statut de votre paiement..."}})()}),"success"===a&&i&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-green-50 p-4 rounded-lg border border-green-200 mb-6",children:m.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"R√©f√©rence :"}),m.jsx("span",{className:"font-mono",children:i.reference})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Montant :"}),m.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:i.currency||"XOF"}).format(i.amount)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"M√©thode :"}),m.jsx("span",{children:i.paymentMethod})]})]})}),"failed"===a||"error"===a&&m.jsx(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-6",children:m.jsxs("div",{className:"text-sm text-red-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"D√©tails de l'erreur :"}),m.jsx("p",{children:c})]})}),m.jsxs("div",{className:"space-y-3",children:["success"===a&&m.jsxs(m.Fragment,{children:[m.jsxs(ne,{onClick:()=>s("/mes-boosts"),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[m.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Voir mes boosts"]}),m.jsxs(ne,{onClick:()=>s("/dashboard"),variant:"outline",className:"w-full",children:[m.jsx(de,{className:"h-4 w-4 mr-2"}),"Retour au tableau de bord"]})]}),("failed"===a||"error"===a)&&m.jsxs(m.Fragment,{children:[m.jsxs(ne,{onClick:()=>s(-2),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[m.jsx(Ae,{className:"h-4 w-4 mr-2"}),"R√©essayer le paiement"]}),m.jsxs(ne,{onClick:()=>s("/"),variant:"outline",className:"w-full",children:[m.jsx(de,{className:"h-4 w-4 mr-2"}),"Retour √† l'accueil"]})]}),"pending"===a&&m.jsxs(m.Fragment,{children:[m.jsxs(ne,{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[m.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Actualiser le statut"]}),m.jsxs(ne,{onClick:()=>s("/"),variant:"outline",className:"w-full",children:[m.jsx(de,{className:"h-4 w-4 mr-2"}),"Retour √† l'accueil"]})]})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:m.jsx("p",{className:"text-xs text-muted-foreground",children:"Si vous avez des questions, contactez notre support client."})})]})})})})})})},Yr=new class{constructor(){this.publicKey=void 0,this.secretKey=void 0,this.baseUrl="https://api.fedapay.com/v1",this.isTestMode=!1,this.isTestMode&&(this.baseUrl="https://sandbox-api.fedapay.com/v1")}initializePayment(e){return d(this,null,(function*(){try{const s=yield fetch(this.baseUrl+"/transactions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.secretKey},body:JSON.stringify({amount:e.amount,currency:e.currency||"XOF",description:e.description,customer:{email:e.email,phone:e.phone,name:e.name},payment_method:e.payment_method,callback_url:e.callback_url,metadata:{boost_id:e.boost_id,listing_id:e.listing_id,package_name:e.package_name,user_id:e.user_id}})}),t=yield s.json();if(!s.ok)throw Error(t.message||"Erreur lors de l'initialisation du paiement");return{success:!0,transactionId:t.id,reference:t.reference,paymentUrl:t.payment_url,status:t.status,message:"Paiement initialis√© avec succ√®s"}}catch(s){throw Error("Erreur FedaPay: "+s.message)}}))}verifyPayment(e){return d(this,null,(function*(){try{const s=yield fetch(`${this.baseUrl}/transactions/${e}`,{method:"GET",headers:{Authorization:"Bearer "+this.secretKey}}),t=yield s.json();if(!s.ok)throw Error(t.message||"Erreur lors de la v√©rification du paiement");return{success:!0,status:t.status,amount:t.amount,currency:t.currency,reference:t.reference,paymentMethod:t.payment_method,customer:t.customer,metadata:t.metadata,createdAt:t.created_at,updatedAt:t.updated_at}}catch(s){throw Error("Erreur v√©rification: "+s.message)}}))}refundPayment(e,s=null){return d(this,null,(function*(){try{const t=s?{amount:s}:{},a=yield fetch(`${this.baseUrl}/transactions/${e}/refunds`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.secretKey},body:JSON.stringify(t)}),r=yield a.json();if(!a.ok)throw Error(r.message||"Erreur lors du remboursement");return{success:!0,refundId:r.id,amount:r.amount,status:r.status,message:"Remboursement effectu√© avec succ√®s"}}catch(t){throw Error("Erreur remboursement: "+t.message)}}))}getPaymentMethods(e="BJ"){return[{id:"orange_money",name:"Orange Money",icon:"üü†",description:"Paiement via Orange Money",available:!0,minAmount:100,maxAmount:5e5},{id:"mtn_mobile_money",name:"MTN Mobile Money",icon:"üü°",description:"Paiement via MTN Mobile Money",available:!0,minAmount:100,maxAmount:5e5},{id:"moov_money",name:"Moov Money",icon:"üîµ",description:"Paiement via Moov Money",available:!0,minAmount:100,maxAmount:5e5},{id:"card",name:"Carte Bancaire",icon:"üí≥",description:"Paiement par carte Visa/Mastercard",available:!0,minAmount:100,maxAmount:1e6}]}calculateFees(e){const s=.025*e+50;return{amount:e,fee:Math.round(s),total:e+Math.round(s),percentage:2.5,fixedFee:50}}validatePhoneNumber(e,s="BJ"){return/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,""))}formatPhoneNumber(e,s="BJ"){const t=e.replace(/\D/g,"");return 8===t.length?`+229 ${t.slice(0,2)} ${t.slice(2,4)} ${t.slice(4,6)} ${t.slice(6,8)}`:e}isConfigured(){return!(!this.publicKey||!this.secretKey)}getConfig(){return{isConfigured:this.isConfigured(),isTestMode:this.isTestMode,baseUrl:this.baseUrl,hasPublicKey:!!this.publicKey,hasSecretKey:!!this.secretKey}}};function Zr(){const[e,s]=h.useState(null),[t,a]=h.useState(!1),[r,i]=h.useState(null),[n,c]=h.useState(null),[u,x]=h.useState({amount:1e3,currency:"XOF",description:"Test FedaPay - MaxiMarket",email:"test@maxiimarket.com",phone:"+229 90 12 34 56",name:"Test Utilisateur",payment_method:"orange_money"});h.useEffect((()=>{const e=Yr.getConfig();s(e)}),[]);const p=(e,s)=>{x((t=>o(l({},t),{[e]:s})))},g=Yr.getPaymentMethods(),j=Yr.calculateFees(u.amount);return m.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{className:"flex items-center gap-2",children:"üè¶ Test FedaPay - Paiements B√©nin"}),m.jsx(Ie,{children:"Testez l'int√©gration FedaPay pour les paiements Orange Money, MTN, Moov et cartes bancaires"})]}),m.jsxs(Re,{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Configuration"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx(Xe,{variant:(null==e?void 0:e.isConfigured)?"default":"destructive",children:(null==e?void 0:e.isConfigured)?"‚úÖ Configur√©":"‚ùå Non configur√©"}),m.jsx(Xe,{variant:(null==e?void 0:e.isTestMode)?"secondary":"default",children:(null==e?void 0:e.isTestMode)?"üß™ Mode Test":"üöÄ Mode Production"}),m.jsx(Xe,{variant:(null==e?void 0:e.hasPublicKey)?"default":"destructive",children:(null==e?void 0:e.hasPublicKey)?"üîë Cl√© Publique":"‚ùå Pas de cl√©"}),m.jsx(Xe,{variant:(null==e?void 0:e.hasSecretKey)?"default":"destructive",children:(null==e?void 0:e.hasSecretKey)?"üîê Cl√© Secr√®te":"‚ùå Pas de cl√©"})]})]}),m.jsx(dt,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Donn√©es de Test"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"amount",children:"Montant (FCFA)"}),m.jsx(Se,{id:"amount",type:"number",value:u.amount,onChange:e=>p("amount",parseInt(e.target.value)),placeholder:"1000"})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"currency",children:"Devise"}),m.jsxs(rt,{value:u.currency,onValueChange:e=>p("currency",e),children:[m.jsx(it,{children:m.jsx(nt,{})}),m.jsxs(lt,{children:[m.jsx(ot,{value:"XOF",children:"XOF (FCFA)"}),m.jsx(ot,{value:"EUR",children:"EUR (Euro)"})]})]})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"email",children:"Email"}),m.jsx(Se,{id:"email",type:"email",value:u.email,onChange:e=>p("email",e.target.value),placeholder:"test@maxiimarket.com"})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"phone",children:"T√©l√©phone"}),m.jsx(Se,{id:"phone",type:"tel",value:u.phone,onChange:e=>p("phone",e.target.value),placeholder:"+229 90 12 34 56"})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"name",children:"Nom complet"}),m.jsx(Se,{id:"name",type:"text",value:u.name,onChange:e=>p("name",e.target.value),placeholder:"Test Utilisateur"})]}),m.jsxs("div",{children:[m.jsx(Ve,{htmlFor:"payment_method",children:"M√©thode de paiement"}),m.jsxs(rt,{value:u.payment_method,onValueChange:e=>p("payment_method",e),children:[m.jsx(it,{children:m.jsx(nt,{})}),m.jsx(lt,{children:g.map((e=>m.jsxs(ot,{value:e.id,children:[e.icon," ",e.name]},e.id)))})]})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Calcul des Frais"}),m.jsx("div",{className:"bg-muted p-4 rounded-lg",children:m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Montant:"}),m.jsxs("div",{className:"text-lg font-bold",children:[j.amount.toLocaleString()," FCFA"]})]}),m.jsxs("div",{children:[m.jsxs("span",{className:"font-medium",children:["Frais (",j.percentage,"%):"]}),m.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fee.toLocaleString()," FCFA"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Frais fixes:"}),m.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fixedFee," FCFA"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Total:"}),m.jsxs("div",{className:"text-lg font-bold text-green-600",children:[j.total.toLocaleString()," FCFA"]})]})]})})]}),m.jsx(dt,{}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsx(ne,{onClick:()=>d(null,null,(function*(){a(!0),c(null),i(null);try{const e=yield Yr.initializePayment(o(l({},u),{callback_url:window.location.origin+"/payment-callback?test=true"}));i(e),e.paymentUrl&&window.open(e.paymentUrl,"_blank","noopener,noreferrer")}catch(e){c(e.message)}finally{a(!1)}})),disabled:t||!(null==e?void 0:e.isConfigured),className:"flex-1",children:t?"‚è≥ Initialisation...":"üöÄ Tester le Paiement"}),m.jsx(ne,{variant:"outline",onClick:()=>{i(null),c(null)},children:"üîÑ R√©initialiser"})]}),(null==r?void 0:r.transactionId)&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"V√©rification Manuelle"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Se,{placeholder:"ID de transaction",value:r.transactionId,readOnly:!0}),m.jsx(ne,{variant:"outline",onClick:()=>{return e=r.transactionId,d(null,null,(function*(){if(e){a(!0),c(null);try{const s=yield Yr.verifyPayment(e);i(s)}catch(s){c(s.message)}finally{a(!1)}}else c("ID de transaction requis")}));var e},disabled:t,children:t?"‚è≥ V√©rification...":"üîç V√©rifier"})]})]}),n&&m.jsx(F,{variant:"destructive",children:m.jsxs(D,{children:[m.jsx("strong",{children:"Erreur:"})," ",n]})}),r&&m.jsx(F,{children:m.jsx(D,{children:m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Statut:"})," ",r.success?"‚úÖ Succ√®s":"‚ùå √âchec"]}),r.transactionId&&m.jsxs("div",{children:[m.jsx("strong",{children:"ID Transaction:"})," ",r.transactionId]}),r.reference&&m.jsxs("div",{children:[m.jsx("strong",{children:"R√©f√©rence:"})," ",r.reference]}),r.paymentUrl&&m.jsxs("div",{children:[m.jsx("strong",{children:"URL Paiement:"})," ",m.jsx("a",{href:r.paymentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:r.paymentUrl})]}),r.status&&m.jsxs("div",{children:[m.jsx("strong",{children:"Statut:"})," ",r.status]}),r.message&&m.jsxs("div",{children:[m.jsx("strong",{children:"Message:"})," ",r.message]})]})})})]})]})})}function ei(){return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:m.jsxs("div",{className:"container mx-auto",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"üè¶ Test FedaPay - Paiements B√©nin"}),m.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Testez l'int√©gration FedaPay pour les paiements mobiles et cartes bancaires au B√©nin. Orange Money, MTN Mobile Money, Moov Money et cartes Visa/Mastercard."})]}),m.jsx(Zr,{}),m.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:m.jsxs("p",{children:["üí° ",m.jsx("strong",{children:"Note:"})," Ceci est un environnement de test. Les paiements ne seront pas r√©ellement d√©bit√©s."]})})]})})}const si=()=>{const[e,s]=h.useState(!1),[t,a]=h.useState(!1);return m.jsxs(Fe,{className:"w-full max-w-md mx-auto",children:[m.jsxs(Te,{children:[m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(is,{className:"h-5 w-5"}),"Test Notifications Push"]}),m.jsx(Ie,{children:"Testez les notifications push sur votre device mobile"})]}),m.jsxs(Re,{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsxs(ne,{onClick:()=>d(null,null,(function*(){a(!0);try{yield Pa(),s(!0)}catch(e){}finally{a(!1)}})),disabled:t||e,className:"w-full",variant:e?"outline":"default",children:[m.jsx(is,{className:"mr-2 h-4 w-4"}),e?"Notifications Activ√©es":"Activer Notifications"]}),e&&m.jsxs(ne,{onClick:()=>d(null,null,(function*(){a(!0);try{yield d(null,null,(function*(){try{const{data:{user:e}}=yield ie.auth.getUser()}catch(e){}}))}catch(e){}finally{a(!1)}})),disabled:t,className:"w-full",variant:"secondary",children:[m.jsx(zt,{className:"mr-2 h-4 w-4"}),"Envoyer Notification Test"]}),e&&m.jsxs(ne,{onClick:()=>d(null,null,(function*(){a(!0);try{yield d(null,null,(function*(){try{const{data:{user:e}}=yield ie.auth.getUser();e&&(yield ie.from("user_push_tokens").delete().eq("user_id",e.id)),yield Sa.removeAllListeners()}catch(e){}})),s(!1)}catch(e){}finally{a(!1)}})),disabled:t,className:"w-full",variant:"destructive",children:[m.jsx(Et,{className:"mr-2 h-4 w-4"}),"D√©sactiver Notifications"]})]}),m.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.jsxs("p",{children:["üí° ",m.jsx("strong",{children:"Instructions :"})]}),m.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[m.jsx("li",{children:'Cliquez sur "Activer Notifications" pour demander les permissions'}),m.jsx("li",{children:"Acceptez les permissions dans la popup du syst√®me"}),m.jsx("li",{children:'Testez avec "Envoyer Notification Test"'}),m.jsx("li",{children:"V√©rifiez les logs dans la console pour le debug"})]})]})]})]})},ti=oa("Geolocation",{web:()=>A((()=>import("./web-BRLj-VSM.js")),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then((e=>new e.GeolocationWeb))});!function(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||e?void 0!==window.cordova&&function(e){e.CapacitorUtils.Synapse=new Proxy({},{get:(s,t)=>e.cordova.plugins[t]})}(window):function(e){e.CapacitorUtils.Synapse=new Proxy({},{get:(s,t)=>new Proxy({},{get:(s,a)=>(s,r,i)=>{const n=e.Capacitor.Plugins[t];void 0!==n?"function"==typeof n[a]?d(null,null,(function*(){try{const e=yield n[a](s);r(e)}catch(e){i(e)}})):i(Error(`Method ${a} not found in Capacitor plugin ${t}`)):i(Error(`Capacitor plugin ${t} not found`))}})})}(window))}();const ai=()=>{const[e,s]=h.useState({}),[t,a]=h.useState(!1),[r,i]=h.useState(null),n=s=>void 0===e[s]?"pending":e[s]?"passed":"failed",l=e=>{switch(e){case"passed":return m.jsx(os,{className:"h-4 w-4 text-green-500"});case"failed":return m.jsx(Ls,{className:"h-4 w-4 text-red-500"});default:return m.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"})}},o=e=>{switch(e){case"passed":return m.jsx(Xe,{variant:"default",className:"bg-green-500",children:"‚úÖ R√©ussi"});case"failed":return m.jsx(Xe,{variant:"destructive",children:"‚ùå √âchou√©"});default:return m.jsx(Xe,{variant:"secondary",children:"‚è≥ En attente"})}};return m.jsxs("div",{className:"space-y-6 p-4",children:[m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(Nt,{className:"h-5 w-5"}),"Suite de Tests Mobile - MaxiMarket"]}),m.jsx(Ie,{children:"Tests automatis√©s pour valider toutes les fonctionnalit√©s mobiles"})]}),m.jsxs(Re,{className:"space-y-4",children:[r&&m.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[m.jsx("h4",{className:"font-medium mb-2",children:"üì± Informations du Device"}),m.jsxs("div",{className:"text-sm space-y-1",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Platform:"})," ",r.platform]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Model:"})," ",r.model]}),m.jsxs("p",{children:[m.jsx("strong",{children:"OS Version:"})," ",r.osVersion]}),m.jsxs("p",{children:[m.jsx("strong",{children:"App Version:"})," ",r.appVersion]})]})]}),m.jsx(ne,{onClick:()=>d(null,null,(function*(){a(!0);const e={};try{const s=yield ha.getInfo();i(s),e.nativeApp="web"!==s.platform;try{const s=yield d(null,null,(function*(){try{const e=yield ti.checkPermissions();return"granted"===e.location||"denied"!==e.location&&"granted"===(yield ti.requestPermissions()).location}catch(e){return!1}}));e.geolocation=s}catch(t){e.geolocation=!1}try{const s=yield d(null,null,(function*(){try{const e=yield ti.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4});return{latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:e.timestamp}}catch(t){throw t}}));e.location=!!s}catch(t){e.location=!1}e.navigation=!0;const a=performance.now();yield new Promise((e=>setTimeout(e,100)));const r=performance.now();e.performance=200>r-a,e.responsive=768>=window.innerWidth,e.touchTargets=!0}catch(t){}s(e),a(!1)})),disabled:t,className:"w-full",children:t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Tests en cours..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Ms,{className:"mr-2 h-4 w-4"}),"Lancer Tous les Tests"]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h4",{className:"font-medium",children:"üìä R√©sultats des Tests"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("nativeApp")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"App Native"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"D√©tection de l'app Capacitor"})]})]}),o(n("nativeApp"))]}),m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("geolocation")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Permissions GPS"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Acc√®s √† la g√©olocalisation"})]})]}),o(n("geolocation"))]}),m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("location")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Obtenir Position"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"R√©cup√©ration des coordonn√©es"})]})]}),o(n("location"))]}),m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("navigation")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Navigation Mobile"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"BottomNavigation et bouton retour"})]})]}),o(n("navigation"))]}),m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("performance")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Performance"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Temps de r√©ponse < 200ms"})]})]}),o(n("performance"))]}),m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("responsive")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Responsive Design"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Adaptation mobile"})]})]}),o(n("responsive"))]}),m.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[l(n("touchTargets")),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Touch Targets"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Boutons ‚â• 44px"})]})]}),o(n("touchTargets"))]})]})]})]})]}),m.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(us,{className:"h-5 w-5"}),"Test Cam√©ra"]}),m.jsx(Ie,{children:"Testez la prise de photos et la s√©lection depuis la galerie"})]}),m.jsx(Re,{children:m.jsx(_r,{onImageSelected:e=>{},maxImages:3})})]}),m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(is,{className:"h-5 w-5"}),"Test Notifications"]}),m.jsx(Ie,{children:"Testez les notifications push"})]}),m.jsx(Re,{children:m.jsx(si,{})})]})]}),m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsxs(De,{className:"flex items-center gap-2",children:[m.jsx(Lt,{className:"h-5 w-5"}),"Tests Manuels Requis"]}),m.jsx(Ie,{children:"Tests qui n√©cessitent une intervention manuelle"})]}),m.jsx(Re,{children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Navigation entre les pages"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez la navigation entre toutes les sections"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Cr√©ation d'annonces avec photos"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Cr√©ez une annonce avec photos prises via l'app"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Messagerie en temps r√©el"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez l'envoi et r√©ception de messages"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Paiements"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez le processus de paiement"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Performance et fluidit√©"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"V√©rifiez que l'app reste fluide"})]})]})]})})]})]})},ri=()=>m.jsx("div",{className:"container mx-auto py-8",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4",children:"üß™ Tests Mobile - MaxiMarket"}),m.jsx("p",{className:"text-muted-foreground",children:"Suite compl√®te de tests pour valider toutes les fonctionnalit√©s mobiles"})]}),m.jsx(ai,{})]})}),ii=()=>m.jsxs("div",{className:"container mx-auto px-4 py-12 flex flex-col items-center justify-center min-h-[60vh]",children:[m.jsxs(Bt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center max-w-lg",children:[m.jsx("h1",{className:"text-9xl font-bold gradient-text mb-4",children:"404"}),m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Page non trouv√©e"}),m.jsx("p",{className:"text-muted-foreground mb-8",children:"La page que vous recherchez n'existe pas ou a √©t√© d√©plac√©e."}),m.jsx(ne,{asChild:!0,size:"lg",children:m.jsxs(j,{to:"/",children:[m.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Retour √† l'accueil"]})})]}),m.jsx("div",{className:"absolute top-1/3 left-1/4 w-64 h-64 bg-primary/5 rounded-full blur-3xl"}),m.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl"})]}),ni=()=>{const e=[{icon:m.jsx(_t,{className:"h-8 w-8 text-primary"}),title:"Innovation Continue",description:"Nous repoussons constamment les limites pour offrir des solutions de pointe."},{icon:m.jsx(qt,{className:"h-8 w-8 text-primary"}),title:"Confiance & S√©curit√©",description:"La s√©curit√© de vos transactions et de vos donn√©es est notre priorit√© absolue."},{icon:m.jsx(Qe,{className:"h-8 w-8 text-primary"}),title:"Approche Communautaire",description:"Nous construisons une plateforme pour et avec la communaut√© ouest-africaine."},{icon:m.jsx(yt,{className:"h-8 w-8 text-primary"}),title:"Impact Local Positif",description:"Nous visons √† dynamiser l'√©conomie locale et √† cr√©er des opportunit√©s."}];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-16",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["√Ä Propos de ",m.jsx("span",{className:"gradient-text",children:he.siteName})]}),m.jsxs("p",{className:"text-xl text-muted-foreground",children:[he.tagline,". Notre mission est de r√©volutionner le commerce en ligne en Afrique de l'Ouest gr√¢ce √† une technologie innovante et une approche centr√©e sur l'utilisateur."]})]}),m.jsxs("div",{className:"max-w-5xl mx-auto",children:[m.jsxs(Bt.section,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"mb-20 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center",children:[m.jsx(Bs,{className:"h-8 w-8 mr-3 text-primary"}),"Notre Histoire"]}),m.jsxs("p",{className:"text-muted-foreground mb-4",children:["Fond√©e avec la vision de simplifier et de s√©curiser les √©changes commerciaux en Afrique de l'Ouest, ",he.siteName," est n√©e d'une passion pour la technologie et d'un engagement profond envers le d√©veloppement √©conomique de la r√©gion. Nous avons identifi√© un besoin crucial pour une plateforme unifi√©e, moderne et fiable, capable de connecter acheteurs et vendeurs de mani√®re transparente."]}),m.jsxs("p",{className:"text-muted-foreground",children:["Depuis nos d√©buts, nous avons travaill√© sans rel√¢che pour construire une marketplace qui non seulement r√©pond aux besoins actuels, mais anticipe √©galement les tendances futures du commerce √©lectronique. Notre √©quipe est compos√©e d'experts locaux et internationaux, tous unis par l'objectif de faire de ",he.siteName," le leader incontest√© du march√©."]})]}),m.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden shadow-2xl",children:[m.jsx("img",{className:"w-full h-full object-cover",alt:"√âquipe MaxiMarket travaillant ensemble",src:"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=1932&auto=format&fit=crop"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]})]}),m.jsx(dt,{className:"my-20"}),m.jsxs(Bt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-20 text-center",children:[m.jsxs("h2",{className:"text-3xl font-bold mb-10 flex items-center justify-center",children:[m.jsx(Mt,{className:"h-8 w-8 mr-3 text-primary"}),"Notre Mission & Vision"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border glassmorphic-card",children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-primary",children:"Mission"}),m.jsx("p",{className:"text-muted-foreground",children:"Connecter l'Afrique de l'Ouest au futur du commerce en fournissant une plateforme marketplace innovante, s√©curis√©e et accessible √† tous. Nous nous engageons √† autonomiser les individus et les entreprises en facilitant les transactions et en stimulant la croissance √©conomique locale."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border glassmorphic-card",children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-primary",children:"Vision"}),m.jsx("p",{className:"text-muted-foreground",children:"Devenir la marketplace de r√©f√©rence en Afrique, reconnue pour son excellence technologique, son impact positif sur les communaut√©s et sa contribution √† un √©cosyst√®me commercial num√©rique florissant et inclusif pour le continent."})]})]})]}),m.jsx(dt,{className:"my-20"}),m.jsxs(Bt.section,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"mb-16",children:[m.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Nos Valeurs Fondamentales"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map(((e,s)=>m.jsxs(Bt.div,{className:"bg-card p-6 rounded-xl shadow-lg text-center border border-border hover:border-primary transition-colors duration-300 glassmorphic-card",whileHover:{y:-5},children:[m.jsx("div",{className:"p-4 bg-primary/10 rounded-full inline-block mb-4",children:e.icon}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},s)))})]}),m.jsx("div",{className:"text-center mt-16",children:m.jsxs("p",{className:"text-lg text-muted-foreground",children:["Pr√™t √† d√©couvrir la diff√©rence ",he.siteName," ? ",m.jsx("a",{href:"/",className:"text-primary font-semibold hover:underline",children:"Explorez notre plateforme d√®s maintenant."})]})})]})]})},li=()=>{const{toast:e}=Le(),[s,t]=h.useState({name:"",email:"",subject:"",message:""}),[a,r]=h.useState(!1),i=e=>{const{name:s,value:a}=e.target;t((e=>o(l({},e),{[s]:a})))};return m.jsxs(Bt.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onSubmit:s=>{s.preventDefault(),r(!0),setTimeout((()=>{e({title:"Message envoy√© !",description:"Merci pour votre message. Je vous r√©pondrai d√®s que possible.",duration:5e3}),t({name:"",email:"",subject:"",message:""}),r(!1)}),1500)},className:"space-y-6 gradient-border p-6 bg-card rounded-lg",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"name",children:"Nom"}),m.jsx(Se,{id:"name",name:"name",placeholder:"Votre nom",value:s.name,onChange:i,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"email",children:"Email"}),m.jsx(Se,{id:"email",name:"email",type:"email",placeholder:"votre@email.com",value:s.email,onChange:i,required:!0})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"subject",children:"Sujet"}),m.jsx(Se,{id:"subject",name:"subject",placeholder:"Sujet de votre message",value:s.subject,onChange:i,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ve,{htmlFor:"message",children:"Message"}),m.jsx(Rs,{id:"message",name:"message",placeholder:"Votre message...",rows:6,value:s.message,onChange:i,required:!0})]}),m.jsx(ne,{type:"submit",className:"w-full",disabled:a,children:a?m.jsxs("span",{className:"flex items-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi en cours..."]}):m.jsxs("span",{className:"flex items-center",children:[m.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Envoyer le message"]})})]})},oi=()=>{const e=[{icon:m.jsx(ze,{className:"h-6 w-6"}),label:"Email",value:he.contactEmail,href:"mailto:"+he.contactEmail},{icon:m.jsx(Ee,{className:"h-6 w-6"}),label:"T√©l√©phone",value:he.phone,href:"tel:"+he.phone},{icon:m.jsx(Ge,{className:"h-6 w-6"}),label:"Adresse",value:he.address,href:"https://maps.google.com/?q="+encodeURIComponent(he.address)}],s=[{icon:m.jsx(ke,{className:"h-6 w-6"}),label:"Facebook",href:he.socials.facebook},{icon:m.jsx(Ce,{className:"h-6 w-6"}),label:"Instagram",href:he.socials.instagram},{icon:m.jsx("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),label:"TikTok",href:he.socials.tiktok}];return m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Contactez ",m.jsx("span",{className:"gradient-text",children:he.name})]}),m.jsx("p",{className:"text-muted-foreground",children:"Vous avez un projet en t√™te ou une question ? N'h√©sitez pas √† nous contacter !"})]}),m.jsx("div",{className:"max-w-5xl mx-auto",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[m.jsxs(Bt.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Informations de contact"}),m.jsx("div",{className:"space-y-6",children:e.map(((e,s)=>m.jsxs(Bt.a,{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-4 p-4 rounded-lg glass-effect hover:border-primary transition-colors",whileHover:{y:-5},whileTap:{scale:.95},children:[m.jsx("div",{className:"p-3 rounded-full bg-primary/10 text-primary",children:e.icon}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:e.label}),m.jsx("p",{className:"text-muted-foreground",children:e.value})]})]},s)))})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"R√©seaux sociaux"}),m.jsx("div",{className:"flex space-x-4",children:s.map(((e,s)=>m.jsx(Bt.a,{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.label,className:"p-4 rounded-full bg-secondary hover:bg-primary/20 transition-colors",whileHover:{y:-5},whileTap:{scale:.95},children:e.icon},s)))})]})]}),m.jsx(Bt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"space-y-8",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Envoyez un message"}),m.jsx(li,{})]})})]})})]})},ci=()=>{const e=[{title:"D√©veloppeur Frontend Senior (React)",location:"Dakar, S√©n√©gal (Hybride)",type:"Temps Plein",link:"#"},{title:"Chef de Produit Marketplace",location:"Abidjan, C√¥te d'Ivoire",type:"Temps Plein",link:"#"},{title:"Sp√©cialiste Marketing Digital",location:"Lagos, Nig√©ria (Remote)",type:"Temps Plein",link:"#"},{title:"Responsable Service Client Bilingue",location:"Dakar, S√©n√©gal",type:"Temps Plein",link:"#"}];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-16",children:[m.jsx(ue,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Rejoignez l'√âquipe ",m.jsx("span",{className:"gradient-text",children:he.siteName})]}),m.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Fa√ßonnez l'avenir du commerce en Afrique de l'Ouest avec nous. D√©couvrez nos opportunit√©s de carri√®re passionnantes."})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-16 bg-card p-8 md:p-12 rounded-xl shadow-xl glassmorphic-card",children:[m.jsxs("h2",{className:"text-3xl font-bold mb-8 text-center flex items-center justify-center",children:["Pourquoi travailler chez ",he.siteName," ?"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[m.jsxs("div",{className:"p-6",children:[m.jsx(Ft,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Impact Significatif"}),m.jsx("p",{className:"text-muted-foreground",children:"Contribuez √† un projet qui transforme r√©ellement la vie des gens et l'√©conomie locale."})]}),m.jsxs("div",{className:"p-6",children:[m.jsx(Qe,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Culture Collaborative"}),m.jsx("p",{className:"text-muted-foreground",children:"Rejoignez une √©quipe passionn√©e, diverse et solidaire o√π chaque voix compte."})]}),m.jsxs("div",{className:"p-6",children:[m.jsx(ue,{className:"h-12 w-12 text-green-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Croissance et Apprentissage"}),m.jsx("p",{className:"text-muted-foreground",children:"B√©n√©ficiez d'opportunit√©s de d√©veloppement professionnel continu et relevez des d√©fis stimulants."})]})]})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[m.jsx("h2",{className:"text-3xl font-bold mb-10 text-center",children:"Postes Ouverts Actuellement"}),e.length>0?m.jsx("div",{className:"space-y-6 max-w-3xl mx-auto",children:e.map(((e,s)=>m.jsxs(Bt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1*s+.5},className:"bg-card p-6 rounded-lg shadow-md border border-border hover:border-primary transition-colors flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-primary",children:e.title}),m.jsxs("p",{className:"text-muted-foreground text-sm",children:[e.location," - ",e.type]})]}),m.jsx(ne,{asChild:!0,className:"mt-4 sm:mt-0 bg-primary hover:bg-primary/90",children:m.jsxs("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:["Voir l'Offre ",m.jsx(et,{className:"ml-2 h-4 w-4"})]})})]},s)))}):m.jsx("p",{className:"text-center text-muted-foreground text-lg",children:"Nous n'avons pas de postes ouverts pour le moment, mais nous sommes toujours √† la recherche de talents exceptionnels. N'h√©sitez pas √† nous envoyer une candidature spontan√©e !"}),m.jsx("div",{className:"text-center mt-12",children:m.jsx(ne,{variant:"outline",size:"lg",children:"Envoyer une Candidature Spontan√©e"})})]})]})},di=()=>{const e={logos:[{name:"Logo Principal",format:"PNG, SVG",size:"2MB",url:"#"},{name:"Logo Monochrome",format:"PNG, SVG",size:"1.5MB",url:"#"}],photos:[{name:"Photos de l'√©quipe",format:"JPG",size:"5MB",url:"#"},{name:"Interface utilisateur",format:"JPG",size:"3MB",url:"#"}]},s={name:"Service Relations Presse",email:"press@maxiimarket.com",phone:he.phone};return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(Tt,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Espace ",m.jsx("span",{className:"gradient-text",children:"Presse"})]}),m.jsxs("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:["Retrouvez toutes les actualit√©s, ressources et informations pour la presse concernant ",he.siteName,"."]})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-16",children:[m.jsxs("h2",{className:"text-2xl font-bold mb-8 flex items-center",children:[m.jsx(Dt,{className:"h-6 w-6 mr-2 text-primary"}),"Derniers Communiqu√©s de Presse"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:1,title:"MaxiMarket r√©volutionne le e-commerce en Afrique de l'Ouest",date:"01 Juin 2025",description:"Lancement officiel de la plateforme marketplace innovante MaxiMarket.",pdfUrl:"#"},{id:2,title:"Partenariat strat√©gique avec PayDunya",date:"15 Mai 2025",description:"MaxiMarket s'associe √† PayDunya pour faciliter les paiements en ligne.",pdfUrl:"#"}].map((e=>m.jsxs(Fe,{className:"hover:border-primary transition-colors",children:[m.jsxs(Te,{children:[m.jsx(De,{children:e.title}),m.jsx(Ie,{children:e.date})]}),m.jsxs(Re,{children:[m.jsx("p",{className:"mb-4 text-muted-foreground",children:e.description}),m.jsx(ne,{variant:"outline",className:"w-full",asChild:!0,children:m.jsxs("a",{href:e.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:[m.jsx(St,{className:"mr-2 h-4 w-4"})," T√©l√©charger le PDF"]})})]})]},e.id)))})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold mb-8",children:"Kit M√©dia"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Logos"}),m.jsx(Ie,{children:"T√©l√©chargez nos logos officiels"})]}),m.jsx(Re,{children:m.jsx("ul",{className:"space-y-4",children:e.logos.map(((e,s)=>m.jsxs("li",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:e.name}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.format," ‚Ä¢ ",e.size]})]}),m.jsx(ne,{variant:"outline",size:"sm",asChild:!0,children:m.jsx("a",{href:e.url,download:!0,children:m.jsx(St,{className:"h-4 w-4"})})})]},s)))})})]}),m.jsxs(Fe,{children:[m.jsxs(Te,{children:[m.jsx(De,{children:"Photos"}),m.jsx(Ie,{children:"Photos officielles haute r√©solution"})]}),m.jsx(Re,{children:m.jsx("ul",{className:"space-y-4",children:e.photos.map(((e,s)=>m.jsxs("li",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:e.name}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.format," ‚Ä¢ ",e.size]})]}),m.jsx(ne,{variant:"outline",size:"sm",asChild:!0,children:m.jsx("a",{href:e.url,download:!0,children:m.jsx(St,{className:"h-4 w-4"})})})]},s)))})})]})]})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"text-center bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Contact Presse"}),m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("p",{className:"font-medium text-lg mb-2",children:s.name}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Pour toute demande d'interview ou d'information compl√©mentaire"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(ne,{variant:"outline",className:"w-full",asChild:!0,children:m.jsxs("a",{href:"mailto:"+s.email,children:[m.jsx(et,{className:"mr-2 h-4 w-4"}),s.email]})}),m.jsxs(ne,{variant:"outline",className:"w-full",children:[m.jsx(et,{className:"mr-2 h-4 w-4"}),s.phone]})]})]})]})]})},mi=()=>{const[e,s]=h.useState(""),t=[{name:"Comptes et Profils",icon:m.jsx(Qe,{className:"h-8 w-8 text-primary"}),description:"Gestion de votre compte, param√®tres et notifications."},{name:"Acheter sur MaxiMarket",icon:m.jsx(Rt,{className:"h-8 w-8 text-primary"}),description:"Recherche, achat, paiements et livraisons."},{name:"Vendre sur MaxiMarket",icon:m.jsx(Us,{className:"h-8 w-8 text-primary"}),description:"Cr√©ation d'annonces, gestion des ventes, boosters."},{name:"S√©curit√© et Confiance",icon:m.jsx(qt,{className:"h-8 w-8 text-primary"}),description:"Prot√©ger votre compte, √©viter les fraudes."}];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(ms,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Centre d'Aide ",m.jsx("span",{className:"gradient-text",children:he.siteName})]}),m.jsx("p",{className:"text-xl text-muted-foreground",children:"Comment pouvons-nous vous aider aujourd'hui ?"})]}),m.jsxs(Bt.form,{onSubmit:e=>{e.preventDefault()},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto mb-16 relative",children:[m.jsx(Se,{type:"search",placeholder:"Rechercher des articles d'aide (ex: mot de passe oubli√©)",className:"w-full h-14 pl-12 pr-4 text-lg rounded-full shadow-lg",value:e,onChange:e=>s(e.target.value)}),m.jsx(je,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-6 w-6 text-muted-foreground"}),m.jsx(ne,{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-10 rounded-full",children:"Rechercher"})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Sujets Populaires"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Comment publier une annonce ?",link:"/faq#publier-annonce"},{title:"S√©curiser mon compte",link:"/faq#securite-compte"},{title:"Probl√®mes de paiement",link:"/faq#paiement"},{title:"Contacter un vendeur/acheteur",link:"/faq#contacter-utilisateur"},{title:"Signaler un probl√®me",link:"/faq#signaler-probleme"}].map(((e,s)=>m.jsxs(j,{to:e.link,className:"block bg-card p-6 rounded-lg shadow-md hover:shadow-lg hover:border-primary border border-transparent transition-all duration-300 transform hover:-translate-y-1 glassmorphic-card",children:[m.jsxs("h3",{className:"text-lg font-semibold text-primary mb-2 flex items-center",children:[e.title," ",m.jsx(Ae,{className:"ml-auto h-4 w-4 opacity-50 group-hover:opacity-100"})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultez notre FAQ pour une r√©ponse rapide."})]},s)))})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Parcourir par Cat√©gorie"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(((e,s)=>m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s+.7},className:"bg-card p-6 rounded-xl shadow-lg text-center border border-border hover:border-primary transition-colors glassmorphic-card",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-full inline-block mb-4",children:e.icon}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),m.jsx(ne,{variant:"outline",asChild:!0,children:m.jsx(j,{to:"/faq#cat-"+e.name.toLowerCase().replace(/\s+/g,"-"),children:"Explorer"})})]},s)))})]}),m.jsxs(Bt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"text-center bg-card p-8 md:p-12 rounded-xl shadow-xl glassmorphic-card border border-border",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Vous ne trouvez pas ce que vous cherchez ?"}),m.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Notre √©quipe d'assistance est l√† pour vous aider. Contactez-nous directement ou consultez notre FAQ compl√®te."}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[m.jsx(ne,{size:"lg",asChild:!0,className:"bg-primary hover:bg-primary/90",children:m.jsxs(j,{to:"/contactez-nous",children:[m.jsx(be,{className:"mr-2 h-5 w-5"})," Contacter le Support"]})}),m.jsx(ne,{size:"lg",variant:"outline",asChild:!0,children:m.jsxs(j,{to:"/faq",children:[m.jsx(It,{className:"mr-2 h-5 w-5"})," Consulter la FAQ"]})})]})]})]})},ui=()=>{const e=he.siteName,s=[{id:"general-1",category:"G√©n√©ral",question:`Qu'est-ce que ${e} ?`,answer:e+" est une plateforme marketplace innovante con√ßue pour l'Afrique de l'Ouest, facilitant l'achat et la vente de biens immobiliers, v√©hicules, services professionnels et divers autres produits. Notre objectif est de simplifier le commerce en ligne et de le rendre plus s√ªr et accessible."},{id:"compte-1",category:"Compte Utilisateur",question:`Comment cr√©er un compte sur ${e} ?`,answer:"Pour cr√©er un compte, cliquez sur le bouton 'Connexion / Inscription' en haut √† droite de la page. Vous pourrez alors vous inscrire en utilisant votre adresse e-mail ou via des services tiers comme Google ou Facebook (si activ√©). Suivez simplement les instructions √† l'√©cran."},{id:"compte-2",category:"Compte Utilisateur",question:"J'ai oubli√© mon mot de passe, que faire ?",answer:"Si vous avez oubli√© votre mot de passe, cliquez sur le lien 'Mot de passe oubli√© ?' sur la page de connexion. Entrez votre adresse e-mail et nous vous enverrons un lien pour r√©initialiser votre mot de passe."},{id:"publier-annonce",category:"Vendre sur "+e,question:"Comment publier une annonce ?",answer:"Une fois connect√©, acc√©dez √† votre tableau de bord et cherchez le bouton 'Publier une annonce' ou 'Nouvelle annonce'. Choisissez la cat√©gorie appropri√©e, remplissez tous les champs requis (titre, description, prix, photos, etc.) et soumettez votre annonce. Elle sera examin√©e par notre √©quipe avant d'√™tre publi√©e."},{id:"paiement",category:"Paiements et Transactions",question:"Quels sont les moyens de paiement accept√©s ?",answer:"Nous acceptons plusieurs moyens de paiement, y compris les cartes bancaires (Visa, Mastercard), les paiements mobiles (Orange Money, Wave, etc. selon disponibilit√© r√©gionale), PayPal et PayDunya. Les options exactes peuvent varier en fonction de votre pays."},{id:"securite-compte",category:"S√©curit√©",question:"Comment puis-je s√©curiser mon compte ?",answer:"Pour s√©curiser votre compte, utilisez un mot de passe fort et unique. Activez l'authentification √† deux facteurs (2FA) si disponible dans vos param√®tres de compte. M√©fiez-vous des e-mails de phishing et ne partagez jamais vos identifiants."},{id:"contacter-utilisateur",category:"Interaction",question:"Comment contacter un vendeur ou un acheteur ?",answer:"Sur la page d'une annonce, vous trouverez g√©n√©ralement un bouton ou un lien pour contacter le vendeur (par exemple, 'Contacter le vendeur', 'Envoyer un message'). Utilisez notre syst√®me de messagerie int√©gr√© pour communiquer en toute s√©curit√©. Les coordonn√©es directes ne sont partag√©es qu'avec le consentement des deux parties."},{id:"signaler-probleme",category:"Support et Litiges",question:"Comment signaler un probl√®me ou une annonce suspecte ?",answer:"Si vous rencontrez un probl√®me ou si une annonce vous semble suspecte, vous pouvez la signaler en utilisant le lien 'Signaler cette annonce' pr√©sent sur la page de l'annonce. Pour d'autres probl√®mes, contactez notre support client via le Centre d'Aide."}],t=[...new Set(s.map((e=>e.category)))];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(ms,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6 text-foreground",children:["Questions Fr√©quemment Pos√©es ",m.jsx("span",{className:"gradient-text",children:"(FAQ)"})]}),m.jsxs("p",{className:"text-xl text-muted-foreground",children:["Trouvez des r√©ponses rapides √† vos questions sur ",e,"."]})]}),t.map(((e,t)=>m.jsxs(Bt.section,{id:"cat-"+e.toLowerCase().replace(/\s+/g,"-"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},className:"mb-12 max-w-3xl mx-auto",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 border-l-4 border-primary pl-4 text-foreground",children:e}),m.jsx(Z,{type:"single",collapsible:!0,className:"w-full space-y-3",children:s.filter((s=>s.category===e)).map((e=>m.jsxs(ee,{value:e.id,className:"bg-card border border-border rounded-lg shadow-sm hover:border-primary/50 transition-colors",children:[m.jsx(se,{className:"p-6 text-left font-semibold hover:no-underline text-foreground",children:e.question}),m.jsx(te,{className:"p-6 pt-0 text-muted-foreground",children:e.answer})]},e.id)))})]},e))),m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2+.1*t.length},className:"text-center mt-16",children:[m.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Vous n'avez pas trouv√© de r√©ponse ?"}),m.jsx(ne,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:opacity-90 transition-opacity",children:m.jsx(j,{to:"/contactez-nous",children:"Contactez notre support"})})]})]})},xi=()=>m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(qt,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Politique de ",m.jsx("span",{className:"gradient-text",children:"Confidentialit√©"})]}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Derni√®re mise √† jour : 02 Juin 2025"})]}),m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-3xl mx-auto space-y-8",children:[m.jsx("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:m.jsxs("p",{className:"text-lg mb-6",children:["Bienvenue sur ",he.siteName,". Nous nous engageons √† prot√©ger la confidentialit√© de vos informations personnelles. Cette politique de confidentialit√© explique comment nous collectons, utilisons, divulguons et prot√©geons vos informations lorsque vous visitez notre site web et utilisez nos services."]})}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"1. Informations que nous collectons"]}),m.jsx("p",{className:"mb-4",children:"Nous pouvons collecter des informations personnelles vous concernant de diff√©rentes mani√®res, notamment :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Informations fournies directement par vous :"})," Lorsque vous cr√©ez un compte, publiez une annonce, effectuez une transaction, communiquez avec nous ou d'autres utilisateurs (nom, adresse e-mail, num√©ro de t√©l√©phone, informations de paiement, etc.)."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Informations collect√©es automatiquement :"})," Lorsque vous utilisez notre site, nous pouvons collecter des informations sur votre appareil, votre activit√© de navigation, votre adresse IP, votre localisation (si autoris√©e), les cookies et autres technologies de suivi."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Informations provenant de tiers :"})," Nous pouvons recevoir des informations vous concernant de la part de services tiers, tels que les fournisseurs de services de paiement ou les plateformes de m√©dias sociaux si vous choisissez de lier votre compte."]})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"2. Utilisation de vos informations"]}),m.jsx("p",{className:"mb-4",children:"Nous utilisons les informations que nous collectons pour :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsx("li",{children:"Fournir, exploiter et am√©liorer nos services."}),m.jsx("li",{children:"Traiter vos transactions et g√©rer votre compte."}),m.jsx("li",{children:"Personnaliser votre exp√©rience sur notre plateforme."}),m.jsx("li",{children:"Communiquer avec vous, y compris pour le service client et les mises √† jour."}),m.jsx("li",{children:"Assurer la s√©curit√© de notre plateforme et pr√©venir la fraude."}),m.jsx("li",{children:"Analyser l'utilisation de notre site et am√©liorer nos offres."}),m.jsx("li",{children:"Respecter nos obligations l√©gales."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"3. Partage de vos informations"]}),m.jsx("p",{className:"mb-4",children:"Nous pouvons partager vos informations personnelles dans les circonstances suivantes :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Avec d'autres utilisateurs :"})," Pour faciliter les transactions et les communications (par exemple, partager votre nom d'utilisateur ou les informations de contact n√©cessaires pour une transaction)."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Avec des fournisseurs de services tiers :"})," Qui nous aident √† exploiter notre plateforme (h√©bergement, traitement des paiements, analyse de donn√©es, marketing, etc.). Ces fournisseurs sont contractuellement tenus de prot√©ger vos informations."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pour des raisons l√©gales :"})," Si la loi l'exige, ou pour r√©pondre √† une proc√©dure l√©gale valide, prot√©ger nos droits, notre propri√©t√© ou notre s√©curit√©, ou ceux de nos utilisateurs ou du public."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"En cas de transfert d'entreprise :"})," En cas de fusion, acquisition, r√©organisation ou vente d'actifs, vos informations peuvent √™tre transf√©r√©es."]})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"4. Vos droits et choix"]}),m.jsx("p",{className:"mb-4",children:"Selon votre juridiction, vous pouvez avoir certains droits concernant vos informations personnelles, tels que :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsx("li",{children:"Le droit d'acc√©der √† vos informations."}),m.jsx("li",{children:"Le droit de corriger ou de mettre √† jour vos informations."}),m.jsx("li",{children:"Le droit de supprimer vos informations."}),m.jsx("li",{children:"Le droit de vous opposer ou de restreindre certains traitements."}),m.jsx("li",{children:"Le droit √† la portabilit√© des donn√©es."})]}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Vous pouvez g√©n√©ralement g√©rer les informations de votre compte et vos pr√©f√©rences de communication via les param√®tres de votre compte. Pour exercer d'autres droits, veuillez nous contacter."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"5. S√©curit√© des donn√©es"]}),m.jsx("p",{className:"text-muted-foreground",children:"Nous mettons en ≈ìuvre des mesures de s√©curit√© techniques et organisationnelles raisonnables pour prot√©ger vos informations personnelles contre l'acc√®s non autoris√©, la divulgation, l'alt√©ration ou la destruction. Cependant, aucune m√©thode de transmission sur Internet ou de stockage √©lectronique n'est totalement s√©curis√©e."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"6. Conservation des donn√©es"]}),m.jsx("p",{className:"text-muted-foreground",children:"Nous conservons vos informations personnelles aussi longtemps que n√©cessaire pour atteindre les objectifs d√©crits dans cette politique de confidentialit√©, sauf si une p√©riode de conservation plus longue est requise ou autoris√©e par la loi."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"7. Transferts internationaux"]}),m.jsx("p",{className:"text-muted-foreground",children:"Vos informations peuvent √™tre transf√©r√©es et trait√©es dans des pays autres que votre pays de r√©sidence, o√π les lois sur la protection des donn√©es peuvent diff√©rer. Nous prendrons des mesures appropri√©es pour garantir que vos informations personnelles restent prot√©g√©es conform√©ment √† cette politique."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"8. Modifications de cette politique"]}),m.jsx("p",{className:"text-muted-foreground",children:'Nous pouvons mettre √† jour cette politique de confidentialit√© de temps √† autre. Nous vous informerons de tout changement important en publiant la nouvelle politique sur notre site et en mettant √† jour la date de "Derni√®re mise √† jour".'})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"9. Nous contacter"]}),m.jsxs("p",{className:"text-muted-foreground",children:["Si vous avez des questions ou des pr√©occupations concernant cette politique de confidentialit√© ou nos pratiques en mati√®re de donn√©es, veuillez nous contacter √† ",m.jsx("a",{href:"mailto:"+he.infoEmail,className:"text-primary hover:underline",children:he.infoEmail}),"."]})]})]})]}),hi=()=>m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(Hs,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Termes et ",m.jsx("span",{className:"gradient-text",children:"Conditions"})," d'Utilisation"]}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Derni√®re mise √† jour : 02 Juin 2025"})]}),m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-3xl mx-auto space-y-8",children:[m.jsx("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:m.jsxs("p",{className:"text-lg",children:['Veuillez lire attentivement ces Termes et Conditions ("Termes") avant d\'utiliser le site web ',he.siteName,' (le "Service") exploit√© par ',he.siteName,' ("nous", "notre", ou "nos"). Votre acc√®s et votre utilisation du Service sont conditionn√©s par votre acceptation et votre respect de ces Termes. Ces Termes s\'appliquent √† tous les visiteurs, utilisateurs et autres personnes qui acc√®dent ou utilisent le Service.']})}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(oe,{className:"mr-2 h-6 w-6 text-primary"}),"1. Acceptation des Termes"]}),m.jsx("p",{className:"text-muted-foreground",children:"En acc√©dant ou en utilisant le Service, vous acceptez d'√™tre li√© par ces Termes. Si vous n'√™tes pas d'accord avec une partie des termes, vous ne pouvez pas acc√©der au Service."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"2. Comptes"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Lorsque vous cr√©ez un compte chez nous, vous devez nous fournir des informations exactes, compl√®tes et √† jour √† tout moment. Le non-respect de cette obligation constitue une violation des Termes, ce qui peut entra√Æner la r√©siliation imm√©diate de votre compte sur notre Service."}),m.jsx("p",{children:"Vous √™tes responsable de la protection du mot de passe que vous utilisez pour acc√©der au Service et de toutes les activit√©s ou actions effectu√©es sous votre mot de passe, que votre mot de passe soit avec notre Service ou un service tiers."}),m.jsx("p",{children:"Vous acceptez de ne pas divulguer votre mot de passe √† un tiers. Vous devez nous informer imm√©diatement d√®s que vous prenez connaissance d'une violation de la s√©curit√© ou d'une utilisation non autoris√©e de votre compte."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"3. Contenu Utilisateur"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:'Notre Service vous permet de publier, lier, stocker, partager et autrement rendre disponible certaines informations, textes, graphiques, vid√©os ou autres supports ("Contenu Utilisateur"). Vous √™tes responsable du Contenu Utilisateur que vous publiez sur ou via le Service, y compris sa l√©galit√©, sa fiabilit√© et sa pertinence.'}),m.jsx("p",{children:"En publiant du Contenu Utilisateur sur ou via le Service, vous d√©clarez et garantissez que : (i) le Contenu Utilisateur vous appartient (vous en √™tes propri√©taire) et/ou vous avez le droit de l'utiliser et le droit de nous accorder les droits et la licence pr√©vus dans ces Termes, et (ii) la publication de votre Contenu Utilisateur sur ou via le Service ne viole pas les droits √† la vie priv√©e, les droits de publicit√©, les droits d'auteur, les droits contractuels ou tout autre droit de toute personne ou entit√©."}),m.jsx("p",{children:"Vous conservez tous vos droits sur tout Contenu Utilisateur que vous soumettez, publiez ou affichez sur ou via le Service et vous √™tes responsable de la protection de ces droits. Nous n'assumons aucune responsabilit√© et n'engageons aucune responsabilit√© pour le Contenu Utilisateur que vous ou un tiers publiez sur ou via le Service."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"4. Utilisation Acceptable"]}),m.jsx("p",{className:"mb-4",children:"Vous acceptez de ne pas utiliser le Service pour :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsx("li",{children:"Publier du contenu ill√©gal, nuisible, mena√ßant, abusif, harcelant, diffamatoire, vulgaire, obsc√®ne, haineux ou autrement r√©pr√©hensible."}),m.jsx("li",{children:"Usurper l'identit√© d'une personne ou d'une entit√©, ou d√©clarer faussement ou d√©former autrement votre affiliation avec une personne ou une entit√©."}),m.jsx("li",{children:"T√©l√©charger, publier ou transmettre de quelque mani√®re que ce soit tout contenu que vous n'avez pas le droit de transmettre en vertu d'une loi ou de relations contractuelles ou fiduciaires."}),m.jsx("li",{children:"Violer toute loi locale, √©tatique, nationale ou internationale applicable."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"5. Propri√©t√© Intellectuelle"]}),m.jsxs("p",{className:"text-muted-foreground",children:["Le Service et son contenu original (√† l'exclusion du Contenu Utilisateur), ses caract√©ristiques et fonctionnalit√©s sont et resteront la propri√©t√© exclusive de ",he.siteName," et de ses conc√©dants de licence. Le Service est prot√©g√© par le droit d'auteur, les marques commerciales et d'autres lois. Nos marques et habillages commerciaux ne peuvent √™tre utilis√©s en relation avec un produit ou service sans le consentement √©crit pr√©alable de ",he.siteName,"."]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"6. Liens Vers D'autres Sites Web"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsxs("p",{children:["Notre Service peut contenir des liens vers des sites web ou des services tiers qui ne sont pas d√©tenus ou contr√¥l√©s par ",he.siteName,"."]}),m.jsxs("p",{children:[he.siteName," n'a aucun contr√¥le sur, et n'assume aucune responsabilit√© pour, le contenu, les politiques de confidentialit√© ou les pratiques de tout site web ou service tiers. Vous reconnaissez et acceptez en outre que ",he.siteName," ne sera pas responsable, directement ou indirectement, de tout dommage ou perte caus√© ou pr√©sum√© avoir √©t√© caus√© par ou en relation avec l'utilisation ou la confiance accord√©e √† un tel contenu, biens ou services disponibles sur ou via de tels sites web ou services."]}),m.jsx("p",{children:"Nous vous conseillons vivement de lire les termes et conditions et les politiques de confidentialit√© de tout site web ou service tiers que vous visitez."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"7. R√©siliation"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Nous pouvons r√©silier ou suspendre votre compte et interdire l'acc√®s au Service imm√©diatement, sans pr√©avis ni responsabilit√©, √† notre seule discr√©tion, pour quelque raison que ce soit et sans limitation, y compris mais sans s'y limiter, une violation des Termes."}),m.jsx("p",{children:"Si vous souhaitez r√©silier votre compte, vous pouvez simplement cesser d'utiliser le Service."}),m.jsx("p",{children:"Toutes les dispositions des Termes qui, de par leur nature, devraient survivre √† la r√©siliation survivront √† la r√©siliation, y compris, sans limitation, les dispositions relatives √† la propri√©t√©, les exclusions de garantie, l'indemnisation et les limitations de responsabilit√©."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"8. Limitation de Responsabilit√©"]}),m.jsxs("p",{className:"text-muted-foreground",children:["En aucun cas ",he.siteName,", ni ses administrateurs, employ√©s, partenaires, agents, fournisseurs ou affili√©s, ne pourront √™tre tenus responsables de tout dommage indirect, accessoire, sp√©cial, cons√©cutif ou punitif, y compris, sans limitation, la perte de profits, de donn√©es, d'utilisation, de client√®le ou d'autres pertes immat√©rielles, r√©sultant de votre acc√®s ou votre utilisation ou votre incapacit√© √† acc√©der ou √† utiliser le Service."]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"9. Droit Applicable"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Ces Termes seront r√©gis et interpr√©t√©s conform√©ment aux lois du S√©n√©gal, sans √©gard √† ses dispositions relatives aux conflits de lois."}),m.jsx("p",{children:"Notre manquement √† faire respecter un droit ou une disposition de ces Termes ne sera pas consid√©r√© comme une renonciation √† ces droits. Si une disposition de ces Termes est jug√©e invalide ou inapplicable par un tribunal, les autres dispositions de ces Termes resteront en vigueur. Ces Termes constituent l'int√©gralit√© de l'accord entre nous concernant notre Service, et remplacent et annulent tous les accords ant√©rieurs que nous pourrions avoir entre nous concernant le Service."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"10. Modifications"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Nous nous r√©servons le droit, √† notre seule discr√©tion, de modifier ou de remplacer ces Termes √† tout moment. Si une r√©vision est importante, nous nous efforcerons de fournir un pr√©avis d'au moins 30 jours avant l'entr√©e en vigueur des nouveaux termes. Ce qui constitue un changement important sera d√©termin√© √† notre seule discr√©tion."}),m.jsx("p",{children:"En continuant √† acc√©der ou √† utiliser notre Service apr√®s l'entr√©e en vigueur de ces r√©visions, vous acceptez d'√™tre li√© par les termes r√©vis√©s. Si vous n'acceptez pas les nouveaux termes, veuillez cesser d'utiliser le Service."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Hs,{className:"mr-2 h-6 w-6 text-primary"}),"11. Nous Contacter"]}),m.jsxs("p",{className:"text-muted-foreground",children:["Si vous avez des questions concernant ces Termes, veuillez nous contacter √† ",m.jsx("a",{href:"mailto:"+he.infoEmail,className:"text-primary hover:underline",children:he.infoEmail}),"."]})]})]})]}),pi=({post:e,index:s,featured:t=!1})=>{const a=new Date(e.publishedAt),r=Jt(a,{addSuffix:!0,locale:Vt});return m.jsx(Bt.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},className:qe("group overflow-hidden rounded-lg border border-border bg-card transition-all duration-300 card-hover",t?"col-span-full md:col-span-2 md:row-span-2":"md:col-span-1"),children:m.jsxs(j,{to:"/blog/"+(e.slug||e.id),className:"block h-full",children:[m.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Image de couverture pour l'article "+e.title,src:"https://images.unsplash.com/photo-1578811344633-3376eab0f8ce"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-70"}),t&&m.jsx("div",{className:"absolute top-4 left-4",children:m.jsx(Xe,{variant:"default",className:"bg-primary/90 backdrop-blur-sm",children:"√Ä la une"})}),m.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.tags&&e.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.tags.slice(0,t?3:2).map(((e,s)=>m.jsx(Xe,{variant:"secondary",className:"bg-secondary/50 backdrop-blur-sm",children:e},s)))}),t&&m.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-2 line-clamp-2",children:e.title})]})]}),m.jsxs("div",{className:"p-5",children:[!t&&m.jsx("h2",{className:"text-lg font-bold mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),m.jsx("p",{className:"text-muted-foreground line-clamp-2 mb-4",children:e.excerpt}),m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx(Je,{className:"h-3 w-3 mr-1"}),r]}),m.jsxs("span",{className:"flex items-center",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),e.readingTime]})]}),e.category&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(Us,{className:"h-3 w-3 mr-1"}),e.category]})]})]})]})})},gi=e=>{const s=e.split(/\s+/).length;return Math.ceil(s/200)};let ji=localStorage.getItem("blogPosts")?JSON.parse(localStorage.getItem("blogPosts")):[{id:"maximarket-welcome-post",title:"Bienvenue sur MaxiMarket : Votre Nouvelle Marketplace Futuriste !",slug:"bienvenue-sur-maximarket-marketplace-futuriste",excerpt:"D√©couvrez MaxiMarket, la plateforme innovante qui r√©volutionne le commerce en Afrique de l'Ouest. Immobilier, automobile, services et plus encore !",content:"\n# Bienvenue sur MaxiMarket : Votre Nouvelle Marketplace Futuriste !\n\nNous sommes ravis de vous accueillir sur **MaxiMarket**, la destination incontournable pour toutes vos transactions en Afrique de l'Ouest. Que vous cherchiez √† acheter, vendre ou louer, MaxiMarket vous offre une exp√©rience utilisateur unique, moderne et s√©curis√©e.\n\n## Ce que MaxiMarket vous propose :\n\n### 1. Immobilier de Pointe\nTrouvez l'appartement de vos r√™ves, la maison id√©ale pour votre famille, un terrain pour construire votre avenir ou le local commercial parfait pour votre entreprise. Avec nos filtres avanc√©s, nos visites virtuelles √† 360¬∞ et nos outils d'estimation IA, la recherche immobili√®re n'a jamais √©t√© aussi simple et efficace.\n\n### 2. Automobile Simplifi√©\nParcourez notre vaste s√©lection de voitures, motos et v√©hicules utilitaires, neufs ou d'occasion. B√©n√©ficiez d'historiques de v√©hicules transparents, d'inspections virtuelles et de calculateurs de financement int√©gr√©s pour prendre des d√©cisions √©clair√©es.\n\n### 3. Services Professionnels √† port√©e de clic\nBesoin d'un expert en BTP, d'un technicien qualifi√©, d'une aide domestique ou d'un professionnel de la sant√© ? MaxiMarket vous met en relation avec des prestataires v√©rifi√©s. Prenez rendez-vous en ligne, consultez les portfolios et suivez l'avancement de vos projets en toute s√©r√©nit√©.\n\n### 4. Une Marketplace G√©n√©rale Riche et Vari√©e\nExplorez un univers de produits allant de l'√©lectronique dernier cri √† la mode tendance, en passant par les articles pour la maison, les √©quipements sportifs et l'artisanat local authentique. MaxiMarket est votre guichet unique pour tous vos besoins.\n\n## Une Exp√©rience Utilisateur In√©gal√©e\n\nChez MaxiMarket, nous avons mis l'accent sur un design futuriste et des fonctionnalit√©s innovantes :\n- **Th√®me adaptatif sombre/clair** et effets visuels saisissants comme le glassmorphism.\n- **Recherche vocale** et **contr√¥les gestuels** sur mobile pour une navigation intuitive.\n- **Tableaux de bord personnalis√©s** avec analyses d√©taill√©es pour les vendeurs.\n- **Intelligence Artificielle** int√©gr√©e pour des recommandations personnalis√©es, des estimations de prix et une mod√©ration intelligente.\n\n## Rejoignez la R√©volution MaxiMarket !\n\nNous sommes plus qu'une simple marketplace. Nous sommes une communaut√© qui construit l'avenir du commerce en Afrique de l'Ouest. Cr√©ez votre compte d√®s aujourd'hui, publiez vos annonces ou trouvez exactement ce que vous cherchez.\n\nL'√©quipe MaxiMarket.\n    ",coverImage:"maximarket-marketplace-skyline-futuristic",author:{name:"L'√©quipe MaxiMarket",avatar:"maximarket-logo-avatar"},category:"Annonces MaxiMarket",tags:["MaxiMarket","Marketplace","Afrique de l'Ouest","Innovation","Immobilier","Automobile","Services"],publishedAt:"2025-06-02T10:00:00Z",readingTime:"4 min"},{id:"1",title:"Comment j'ai cr√©√© une application React performante",slug:"comment-jai-cree-une-application-react-performante",excerpt:"D√©couvrez les techniques que j'ai utilis√©es pour optimiser les performances de mon application React.",content:"\n# Comment j'ai cr√©√© une application React performante\n\nReact est une biblioth√®que JavaScript populaire pour cr√©er des interfaces utilisateur interactives. Cependant, √† mesure que les applications grandissent, les performances peuvent devenir un probl√®me. Dans cet article, je vais partager les techniques que j'ai utilis√©es pour optimiser les performances de mon application React.\n\n## 1. Utilisation de React.memo et useMemo\n\nL'un des premiers probl√®mes que j'ai rencontr√©s √©tait des rendus inutiles de composants. Pour r√©soudre ce probl√®me, j'ai utilis√© React.memo pour m√©moriser les composants et useMemo pour m√©moriser les valeurs calcul√©es.\n\n```jsx\nconst ExpensiveComponent = React.memo(({ data }) => {\n  // Rendu du composant\n});\n\nfunction App() {\n  const expensiveCalculation = useMemo(() => {\n    return performExpensiveCalculation(data);\n  }, [data]);\n  \n  return <div>{expensiveCalculation}</div>;\n}\n```\n\n## 2. Optimisation des listes avec useCallback\n\nPour les listes, j'ai utilis√© useCallback pour √©viter de recr√©er des fonctions √† chaque rendu.\n\n```jsx\nfunction TodoList({ todos }) {\n  const handleDelete = useCallback((id) => {\n    // Logique de suppression\n  }, []);\n  \n  return (\n    <ul>\n      {todos.map(todo => (\n        <TodoItem \n          key={todo.id} \n          todo={todo} \n          onDelete={handleDelete} \n        />\n      ))}\n    </ul>\n  );\n}\n```\n\n## 3. Lazy Loading des composants\n\nJ'ai utilis√© le lazy loading pour charger les composants uniquement lorsqu'ils sont n√©cessaires.\n\n```jsx\nconst LazyComponent = React.lazy(() => import('./LazyComponent'));\n\nfunction App() {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <LazyComponent />\n    </React.Suspense>\n  );\n}\n```\n\n## 4. Utilisation de la virtualisation pour les grandes listes\n\nPour les listes contenant de nombreux √©l√©ments, j'ai utilis√© la virtualisation pour ne rendre que les √©l√©ments visibles √† l'√©cran.\n\n## Conclusion\n\nL'optimisation des performances est un aspect crucial du d√©veloppement d'applications React. En utilisant ces techniques, j'ai pu am√©liorer consid√©rablement les performances de mon application.\n    ",coverImage:"react-performance",author:{name:"D√©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"React",tags:["React","Performance","JavaScript","Optimisation"],publishedAt:"2023-09-15T10:00:00Z",readingTime:"8 min"},{id:"2",title:"Les meilleures pratiques pour l'architecture de vos projets React",slug:"meilleures-pratiques-architecture-projets-react",excerpt:"Une architecture bien pens√©e est essentielle pour maintenir des projets React √† long terme. Voici mes conseils.",content:"\n# Les meilleures pratiques pour l'architecture de vos projets React\n\nUne bonne architecture est la cl√© pour maintenir des projets React √† long terme. Dans cet article, je partage mes meilleures pratiques pour structurer vos projets React.\n\n## 1. Organisation des dossiers\n\nJ'ai trouv√© qu'une structure de dossiers claire aide √©norm√©ment √† naviguer dans le code. Voici comment j'organise g√©n√©ralement mes projets:\n\n```\nsrc/\n  ‚îú‚îÄ‚îÄ components/\n  ‚îÇ   ‚îú‚îÄ‚îÄ common/\n  ‚îÇ   ‚îú‚îÄ‚îÄ layout/\n  ‚îÇ   ‚îî‚îÄ‚îÄ features/\n  ‚îú‚îÄ‚îÄ hooks/\n  ‚îú‚îÄ‚îÄ context/\n  ‚îú‚îÄ‚îÄ utils/\n  ‚îú‚îÄ‚îÄ services/\n  ‚îú‚îÄ‚îÄ pages/\n  ‚îî‚îÄ‚îÄ assets/\n```\n\n## 2. S√©paration des pr√©occupations\n\nIl est important de s√©parer la logique m√©tier de la pr√©sentation. J'utilise des hooks personnalis√©s pour encapsuler la logique et des composants pour la pr√©sentation.\n\n## 3. Utilisation des patterns React modernes\n\nJ'ai adopt√© des patterns comme le Compound Component et le Render Props pour cr√©er des composants flexibles et r√©utilisables.\n\n## 4. Tests unitaires et d'int√©gration\n\nLes tests sont essentiels pour maintenir la qualit√© du code. J'utilise Jest et React Testing Library pour tester mes composants.\n\n## Conclusion\n\nUne bonne architecture est un investissement qui paie sur le long terme. En suivant ces pratiques, vous pourrez maintenir et faire √©voluer vos projets React plus facilement.\n    ",coverImage:"react-architecture",author:{name:"D√©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"Architecture",tags:["React","Architecture","Bonnes pratiques","Structure de projet"],publishedAt:"2023-08-22T14:30:00Z",readingTime:"6 min"},{id:"3",title:"Comment j'ai int√©gr√© TailwindCSS dans mon workflow",slug:"comment-jai-integre-tailwindcss-dans-mon-workflow",excerpt:"TailwindCSS a r√©volutionn√© ma fa√ßon de styliser mes applications. Voici comment je l'ai int√©gr√© dans mon workflow.",content:"\n# Comment j'ai int√©gr√© TailwindCSS dans mon workflow\n\nTailwindCSS est un framework CSS utilitaire qui a chang√© ma fa√ßon de styliser mes applications. Dans cet article, je vais vous montrer comment je l'ai int√©gr√© dans mon workflow et les avantages que j'en ai tir√©s.\n\n## 1. Installation et configuration\n\nL'installation de TailwindCSS est simple avec npm ou yarn:\n\n```bash\nnpm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n```\n\n## 2. Personnalisation du th√®me\n\nJ'ai personnalis√© le th√®me pour correspondre √† l'identit√© visuelle de mon projet:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  theme: {\n    extend: {\n      colors: {\n        primary: '#3490dc',\n        secondary: '#ffed4a',\n        danger: '#e3342f',\n      },\n    },\n  },\n  // ...\n}\n```\n\n## 3. Cr√©ation de composants r√©utilisables\n\nJ'ai cr√©√© des composants r√©utilisables avec TailwindCSS:\n\n```jsx\nfunction Button({ children, variant = 'primary' }) {\n  const baseClasses = 'px-4 py-2 rounded font-bold';\n  const variantClasses = {\n    primary: 'bg-primary text-white',\n    secondary: 'bg-secondary text-gray-800',\n    danger: 'bg-danger text-white',\n  };\n  \n  return (\n    <button className={`${baseClasses} ${variantClasses[variant]}`}>\n      {children}\n    </button>\n  );\n}\n```\n\n## 4. Optimisation pour la production\n\nPour la production, j'ai utilis√© PurgeCSS pour √©liminer les classes non utilis√©es:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  purge: ['./src/**/*.{js,jsx,ts,tsx}', './public/index.html'],\n  // ...\n}\n```\n\n## Conclusion\n\nTailwindCSS a consid√©rablement am√©lior√© ma productivit√© en me permettant de styliser rapidement mes applications sans quitter mon HTML/JSX. Si vous n'avez pas encore essay√©, je vous encourage vivement √† le faire!\n    ",coverImage:"tailwindcss-workflow",author:{name:"D√©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"CSS",tags:["TailwindCSS","CSS","Workflow","Design"],publishedAt:"2023-07-10T09:15:00Z",readingTime:"5 min"}].map((e=>{return o(l({},e),{readingTime:gi(e.content)+" min",author:e.author||{name:"MaxiMarket Admin",avatar:"maximarket-admin-avatar"},slug:e.slug||(s=e.title,s.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),id:e.id||Ot(),publishedAt:e.publishedAt||(new Date).toISOString()});var s}));const vi=()=>{const[e,s]=h.useState(""),[t,a]=h.useState(""),[r,i]=h.useState(""),[n,l]=h.useState([]),[o,c]=h.useState([]),[d,u]=h.useState([]),[x,p]=h.useState([]);return h.useEffect((()=>{const e=[...ji].sort(((e,s)=>new Date(s.publishedAt)-new Date(e.publishedAt)));l(e),c(e),u([...new Set(ji.map((e=>e.category)).filter(Boolean))]),p((()=>{const e=ji.flatMap((e=>e.tags||[]));return[...new Set(e.filter(Boolean))]})())}),[]),h.useEffect((()=>{let s=[...n];if(e){const t=e.toLowerCase();s=s.filter((e=>e.title.toLowerCase().includes(t)||e.excerpt.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)))}t&&(s=s.filter((e=>e.category===t))),r&&(s=s.filter((e=>e.tags.includes(r)))),c(s)}),[e,t,r,n]),m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsxs(Bt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Mon ",m.jsx("span",{className:"gradient-text",children:"Blog"})]}),m.jsx("p",{className:"text-muted-foreground",children:"D√©couvrez mes articles sur le d√©veloppement web, les technologies et les bonnes pratiques."})]}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[m.jsxs("div",{className:"relative flex-grow",children:[m.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),m.jsx(Se,{type:"text",placeholder:"Rechercher un article...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(t||r||e)&&m.jsx(ne,{variant:"outline",onClick:()=>{s(""),a(""),i("")},children:"Effacer les filtres"})]}),m.jsxs("div",{className:"space-y-4",children:[d.length>0&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"text-sm font-medium",children:"Cat√©gories"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(((e,s)=>m.jsx(Xe,{variant:t===e?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{a((s=>s===e?"":e))})(e),children:e},s)))})]}),x.length>0&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"text-sm font-medium",children:"Tags"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(((e,s)=>m.jsx(Xe,{variant:r===e?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{i((s=>s===e?"":e))})(e),children:e},s)))})]})]})]}),o.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(((s,a)=>m.jsx(pi,{post:s,index:a,featured:0===a&&!e&&!t&&!r},s.id)))}):m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-muted-foreground",children:"Aucun article ne correspond √† votre recherche."})})]})},fi=()=>{const{id:e}=y(),[s,t]=h.useState(null),[a,r]=h.useState([]),[i,n]=h.useState(!0),{toast:l}=Le();if(h.useEffect((()=>{n(!0),setTimeout((()=>{const s=(a=e,ji.find((e=>e.id===a||e.slug===a)));var a,i;if(s){t(s);const e=(i=s)?ji.filter((e=>e.id!==i.id&&(e.category===i.category||e.tags&&i.tags&&e.tags.some((e=>i.tags.includes(e)))))).sort(((e,s)=>new Date(s.publishedAt)-new Date(e.publishedAt))).slice(0,3):[];r(e)}else l({title:"Article non trouv√©",description:"L'article que vous recherchez n'existe pas.",variant:"destructive"});n(!1)}),500)}),[e,l]),i)return m.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de l'article..."})]})});if(!s)return m.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Article non trouv√©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"L'article que vous recherchez n'existe pas ou a √©t√© supprim√©."}),m.jsx(ne,{asChild:!0,children:m.jsxs(j,{to:"/blog",children:[m.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Retour aux articles"]})})]})});const o=new Date(s.publishedAt),c=Kt(o,"d MMMM yyyy",{locale:Vt});return m.jsx(Bt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"container mx-auto px-4 py-12",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx(ne,{asChild:!0,variant:"outline",className:"mb-8",children:m.jsxs(j,{to:"/blog",children:[m.jsx(Ds,{className:"mr-2 h-4 w-4"}),"Retour aux articles"]})}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:s.title}),m.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-6",children:[s.author&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(_e,{className:"h-4 w-4 mr-1"}),s.author.name]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Je,{className:"h-4 w-4 mr-1"}),c]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(ss,{className:"h-4 w-4 mr-1"}),s.readingTime]}),s.category&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(Us,{className:"h-4 w-4 mr-1"}),s.category]})]}),s.coverImage&&m.jsx("div",{className:"relative aspect-[21/9] rounded-lg overflow-hidden mb-8",children:m.jsx("img",{className:"w-full h-full object-cover",alt:"Image de couverture pour l'article "+s.title,src:"https://images.unsplash.com/photo-1578470155518-c5697b07e280"})}),s.tags&&s.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:s.tags.map(((e,s)=>m.jsx(Xe,{variant:"secondary",children:e},s)))}),m.jsx("div",{className:"prose prose-invert max-w-none",children:m.jsx("div",{className:"whitespace-pre-line",children:s.content})})]}),a.length>0&&m.jsxs(m.Fragment,{children:[m.jsx(dt,{className:"my-12"}),m.jsxs("div",{className:"mt-12",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Articles similaires"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((e=>m.jsx(j,{to:"/blog/"+(e.slug||e.id),className:"group block",children:m.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary",children:[e.coverImage&&m.jsx("div",{className:"aspect-video relative overflow-hidden",children:m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Image de couverture pour l'article "+e.title,src:"https://images.unsplash.com/photo-1578470155518-c5697b07e280"})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.excerpt})]})]})},e.id)))})]})]})]})})},bi=h.lazy((()=>A((()=>import("./chatbot-DuPz_slO.js").then((e=>e.C))),__vite__mapDeps([15,1,2,3,6,7,4,8,9,10,11,12,5,13,14])))),yi=h.lazy((()=>A((()=>import("./AdminLayout-gE3WK5Lm.js")),__vite__mapDeps([18,1,2,3,6,7,4,8,9,10,11,12])))),Ni=h.lazy((()=>A((()=>import("./messaging-BRf0cVfO.js").then((e=>e.M))),__vite__mapDeps([5,1,2,3,6,7,4,8,9,10,11,12,13,14])))),wi=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.bV))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),ki=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.bW))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Ci=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.bX))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Si=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.bY))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Pi=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.bZ))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Ai=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.b_))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),zi=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.b$))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Ei=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.c0))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Li=h.lazy((()=>A((()=>import("./admin-DsSJuCG-.js").then((e=>e.c1))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Mi=()=>m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:m.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),_i=()=>m.jsxs("div",{className:"flex items-center justify-center min-h-[400px] bg-background",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),m.jsx("span",{className:"ml-3 text-muted-foreground",children:"Chargement de l'interface admin..."})]}),qi=()=>m.jsxs("div",{className:"flex items-center justify-center p-4",children:[m.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),m.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Chargement d'AIDA..."})]});function Fi(){return p.useEffect((()=>{Ca.register()}),[]),h.useEffect((()=>{d(null,null,(function*(){try{if("web"!==(yield ha.getInfo()).platform){document.body.classList.add("mobile-app");try{yield ka.setAccessoryBarVisible({isVisible:!1})}catch(e){}try{yield fa.setStyle({style:"dark"}),yield fa.setBackgroundColor({color:"#ffffff"})}catch(e){}const s=document.querySelector("meta[name=viewport]");s&&s.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),document.body.classList.add("mobile-scroll"),document.addEventListener("touchmove",(e=>{e.touches.length>1&&e.preventDefault()}),{passive:!1})}}catch(e){}}))}),[]),p.useEffect((()=>{Pa()}),[]),m.jsxs(q,{client:ta,children:[m.jsx(Ea,{children:m.jsxs(Fa,{children:[m.jsxs(Ut,{children:[m.jsx(Ma,{}),m.jsx(qa,{}),m.jsx($t,{mode:"wait",children:m.jsxs(N,{children:[m.jsx(w,{path:"messages",element:m.jsx(ea,{children:m.jsx(h.Suspense,{fallback:m.jsx(Mi,{}),children:m.jsx(Ni,{})})})}),m.jsxs(w,{path:"/",element:m.jsx(Va,{}),children:[m.jsx(w,{index:!0,element:m.jsx(pr,{})}),m.jsx(w,{path:"connexion",element:m.jsx(Ua,{})}),m.jsx(w,{path:"inscription",element:m.jsx($a,{})}),m.jsx(w,{path:"auth/callback",element:m.jsx(sr,{})}),m.jsx(w,{path:"mot-de-passe-oublie",element:m.jsx(Xa,{})}),m.jsx(w,{path:"reinitialiser-mot-de-passe",element:m.jsx(Ha,{})}),m.jsx(w,{path:"profile",element:m.jsx(er,{})}),m.jsx(w,{path:"immobilier",element:m.jsx(gr,{})}),m.jsx(w,{path:"automobile",element:m.jsx(jr,{})}),m.jsx(w,{path:"services",element:m.jsx(vr,{})}),m.jsx(w,{path:"marketplace",element:m.jsx(fr,{})}),m.jsx(w,{path:"premium",element:m.jsx(br,{})}),m.jsx(w,{path:"creer-annonce",element:m.jsx(ea,{children:m.jsx(qr,{})})}),m.jsx(w,{path:"creer-annonce/:category",element:m.jsx(ea,{children:m.jsx(qr,{})})}),m.jsx(w,{path:"create-listing",element:m.jsx(ea,{children:m.jsx(qr,{})})}),m.jsx(w,{path:"annonce/:id",element:m.jsx($r,{})}),m.jsx(w,{path:"booster-annonce/:id",element:m.jsx(ea,{children:m.jsx(Gr,{})})}),m.jsx(w,{path:"paiement/:boostId",element:m.jsx(ea,{children:m.jsx(Kr,{})})}),m.jsx(w,{path:"payment-callback",element:m.jsx(Qr,{})}),m.jsx(w,{path:"fedapay-test",element:m.jsx(ei,{})}),m.jsx(w,{path:"mobile-tests",element:m.jsx(ri,{})}),m.jsx(w,{path:"annonce/:id/modifier",element:m.jsx(ea,{children:m.jsx(qr,{})})}),m.jsx(w,{path:"favorites",element:m.jsx(ea,{children:m.jsx(Hr,{})})}),m.jsxs(w,{path:"admin",element:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(yi,{})}),children:[m.jsx(w,{index:!0,element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(wi,{})})})}),m.jsx(w,{path:"users",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(ki,{})})})}),m.jsx(w,{path:"listings",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(Ci,{})})})}),m.jsx(w,{path:"transactions",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(Si,{})})})}),m.jsx(w,{path:"analytics",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(Pi,{})})})}),m.jsx(w,{path:"newsletter",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(Li,{})})})}),m.jsx(w,{path:"moderation",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(Ai,{})})})}),m.jsx(w,{path:"categories",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(zi,{})})})}),m.jsx(w,{path:"settings",element:m.jsx(sa,{children:m.jsx(h.Suspense,{fallback:m.jsx(_i,{}),children:m.jsx(Ei,{})})})})]}),m.jsx(w,{path:"a-propos",element:m.jsx(ni,{})}),m.jsx(w,{path:"contact",element:m.jsx(oi,{})}),m.jsx(w,{path:"carrieres",element:m.jsx(ci,{})}),m.jsx(w,{path:"presse",element:m.jsx(di,{})}),m.jsx(w,{path:"aide",element:m.jsx(mi,{})}),m.jsx(w,{path:"faq",element:m.jsx(ui,{})}),m.jsx(w,{path:"politique-confidentialite",element:m.jsx(xi,{})}),m.jsx(w,{path:"conditions-utilisation",element:m.jsx(hi,{})}),m.jsx(w,{path:"blog",element:m.jsx(vi,{})}),m.jsx(w,{path:"blog/:id",element:m.jsx(fi,{})}),m.jsx(w,{path:"*",element:m.jsx(ii,{})})]})]})})]}),m.jsx(W,{}),m.jsx(h.Suspense,{fallback:m.jsx(qi,{}),children:m.jsx(bi,{})})]})}),!1]})}class Ti extends p.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){return this.state.hasError?m.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f172a",color:"#e2e8f0",padding:24,textAlign:"center"},children:m.jsxs("div",{style:{maxWidth:720},children:[m.jsx("h1",{style:{marginBottom:12},children:"Une erreur est survenue"}),m.jsx("p",{style:{opacity:.9},children:"Variables d'environnement Supabase manquantes en production."}),m.jsx("pre",{style:{textAlign:"left",background:"#111827",padding:12,borderRadius:8,overflow:"auto",marginTop:16},children:this.state.error+""}),m.jsxs("div",{style:{marginTop:16,textAlign:"left"},children:[m.jsx("p",{children:"Configurer dans Vercel ‚Üí Settings ‚Üí Environment Variables:"}),m.jsx("code",{style:{display:"block",marginTop:8},children:"VITE_SUPABASE_URL"}),m.jsx("code",{style:{display:"block"},children:"VITE_SUPABASE_ANON_KEY"})]})]})}):this.props.children}}Zt.createRoot(document.getElementById("root")).render(m.jsx(p.StrictMode,{children:m.jsx(Ti,{children:m.jsx(k,{children:m.jsx(Fi,{})})})}));export{ca as W};
