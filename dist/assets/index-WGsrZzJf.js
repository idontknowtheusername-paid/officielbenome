const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-BL9gBLNg.js","assets/ui-bmbdwy1o.js","assets/router-Bph3fafD.js","assets/vendor-ColW0ZSm.js","assets/query-Bi6RA_hy.js","assets/messaging-DrPLMxma.js","assets/admin-De95lozH.js","assets/animations-DSMsGdv3.js","assets/utils-iFD8Ag1C.js","assets/charts-HAerfkS9.js","assets/forms-C0k40EqE.js","assets/supabase-Dq2SgcTS.js","assets/services-BPp_p-AO.js","assets/maps-DRfFuCRj.js","assets/messaging-DUfRhC-v.css","assets/chatbot-dlvekz3I.js","assets/web-eRQMEV6V.js","assets/web-CK9Ugmfu.js","assets/AdminLayout-jVOytkPB.js","assets/DiagnosticPage-DaMErl4Q.js"])))=>i.map(i=>d[i]);
var e,s,t=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n={}.hasOwnProperty,l={}.propertyIsEnumerable,o=(e,s,a)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,c=(e,s)=>{for(var t in s||(s={}))n.call(s,t)&&o(e,t,s[t]);if(i)for(var t of i(s))l.call(s,t)&&o(e,t,s[t]);return e},d=(e,s)=>a(e,r(s)),m=(e,s)=>{var t={};for(var a in e)n.call(e,a)&&0>s.indexOf(a)&&(t[a]=e[a]);if(null!=e&&i)for(var a of i(e))0>s.indexOf(a)&&l.call(e,a)&&(t[a]=e[a]);return t},u=(e,s,t)=>o(e,"symbol"!=typeof s?s+"":s,t),x=(e,s,t)=>new Promise(((a,r)=>{var i=e=>{try{l(t.next(e))}catch(s){r(s)}},n=e=>{try{l(t.throw(e))}catch(s){r(s)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((t=t.apply(e,s)).next())}));import{j as h}from"./ui-bmbdwy1o.js";import{r as p,R as g,d as j,N as v,u as f,L as b,f as y,O as N,c as w,g as k,h as C,i as S,B as A}from"./router-Bph3fafD.js";import{a as P,g as E}from"./vendor-ColW0ZSm.js";import{c as L,_ as z,d as M,u as T,e as _,b as q,a as F,Q as D}from"./query-Bi6RA_hy.js";import{a as I,b as R,c as O,C as V,S as U,L as $,P as B,D as H,E as W,R as X,B as G,T as K,t as J,d as Q,e as Y,f as Z,g as ee,h as se,i as te,j as ae,k as re}from"./messaging-DrPLMxma.js";import{u as ie,J as ne,s as le,B as oe,R as ce,f as de,ao as me,H as ue,ad as xe,ae as he,af as pe,p as ge,M as je,ap as ve,ag as fe,v as be,X as ye,r as Ne,aq as we,ar as ke,as as Ce,at as Se,I as Ae,ac as Pe,au as Ee,av as Le,P as ze,z as Me,aw as Te,U as _e,c as qe,ax as Fe,ay as De,az as Ie,aA as Re,aB as Oe,L as Ve,aC as Ue,aD as $e,aE as Be,aF as He,y as We,k as Xe,l as Ge,_ as Ke,a0 as Je,am as Qe,aG as Ye,aH as Ze,S as es,T as ss,a9 as ts,aI as as,aJ as rs,aK as is,aL as ns,aM as ls,aN as os,aO as cs,aP as ds,aQ as ms,aR as us,q as xs,an as hs,aS as ps,n as gs,aT as js,aU as vs,aV as fs,aW as bs,aX as ys,aY as Ns,aZ as ws,a_ as ks,w as Cs,N as Ss,t as As,a$ as Ps,b0 as Es,b1 as Ls,F as zs,D as Ms,b2 as Ts,b3 as _s,b as qs,G as Fs,a1 as Ds,b4 as Is,b5 as Rs,b6 as Os,b7 as Vs,O as Us,Z as $s,Y as Bs,b8 as Hs,b9 as Ws,ah as Xs,ai as Gs,aj as Ks,ak as Js,ba as Qs,bb as Ys,bc as Zs,E as et,bd as st,be as tt,bf as at,bg as rt,bh as it,bi as nt,bj as lt,bk as ot,bl as ct,bm as dt,bn as mt,bo as ut,bp as xt,C as ht,bq as pt,br as gt,bs as jt,bt as vt,bu as ft,bv as bt,bw as yt,bx as Nt,by as wt,Q as kt,bz as Ct,bA as St,bB as At,bC as Pt,bD as Et,bE as Lt,bF as zt,bG as Mt,bH as Tt,bI as _t,bJ as qt,bK as Ft,bL as Dt,bM as It,bN as Rt,bO as Ot,bP as Vt,bQ as Ut,bR as $t,bS as Bt}from"./admin-De95lozH.js";import{m as Ht,A as Wt}from"./animations-DSMsGdv3.js";import{i as Xt,o as Gt,s as Kt}from"./forms-C0k40EqE.js";import{r as Jt}from"./chatbot-dlvekz3I.js";import{f as Qt,j as Yt}from"./utils-iFD8Ag1C.js";import"./services-BPp_p-AO.js";import"./maps-DRfFuCRj.js";import"./charts-HAerfkS9.js";import"./supabase-Dq2SgcTS.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var Zt,ea={};const sa=E(function(){if(Zt)return ea;Zt=1;var e=P();return ea.createRoot=e.createRoot,ea.hydrateRoot=e.hydrateRoot,ea}());var ta,aa;const ra=E(function(){if(aa)return ta;aa=1;var e="undefined"!=typeof Element,s="function"==typeof Map,t="function"==typeof Set,a="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(i,n){if(i===n)return!0;if(i&&n&&"object"==typeof i&&"object"==typeof n){if(i.constructor!==n.constructor)return!1;var l,o,c,d;if(Array.isArray(i)){if((l=i.length)!=n.length)return!1;for(o=l;0!==o--;)if(!r(i[o],n[o]))return!1;return!0}if(s&&i instanceof Map&&n instanceof Map){if(i.size!==n.size)return!1;for(d=i.entries();!(o=d.next()).done;)if(!n.has(o.value[0]))return!1;for(d=i.entries();!(o=d.next()).done;)if(!r(o.value[1],n.get(o.value[0])))return!1;return!0}if(t&&i instanceof Set&&n instanceof Set){if(i.size!==n.size)return!1;for(d=i.entries();!(o=d.next()).done;)if(!n.has(o.value[0]))return!1;return!0}if(a&&ArrayBuffer.isView(i)&&ArrayBuffer.isView(n)){if((l=i.length)!=n.length)return!1;for(o=l;0!==o--;)if(i[o]!==n[o])return!1;return!0}if(i.constructor===RegExp)return i.source===n.source&&i.flags===n.flags;if(i.valueOf!=={}.valueOf&&"function"==typeof i.valueOf&&"function"==typeof n.valueOf)return i.valueOf()===n.valueOf();if(i.toString!=={}.toString&&"function"==typeof i.toString&&"function"==typeof n.toString)return i.toString()===n.toString();if((l=(c=Object.keys(i)).length)!==Object.keys(n).length)return!1;for(o=l;0!==o--;)if(!{}.hasOwnProperty.call(n,c[o]))return!1;if(e&&i instanceof Element)return!1;for(o=l;0!==o--;)if(("_owner"!==c[o]&&"__v"!==c[o]&&"__o"!==c[o]||!i.$$typeof)&&!r(i[c[o]],n[c[o]]))return!1;return!0}return i!=i&&n!=n}return ta=function(e,s){try{return r(e,s)}catch(t){if((t.message||"").match(/stack|recursion/i))return!1;throw t}}}());var ia,na;const la=E(na?ia:(na=1,ia=function(e,s,t,a,r,i,n,l){if(!e){var o;if(void 0===s)o=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[t,a,r,i,n,l],d=0;(o=Error(s.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw o.framesToPop=1,o}}));var oa,ca;const da=E(ca?oa:(ca=1,oa=function(e,s,t,a){var r=t?t.call(a,e,s):void 0;if(void 0!==r)return!!r;if(e===s)return!0;if("object"!=typeof e||!e||"object"!=typeof s||!s)return!1;var i=Object.keys(e),n=Object.keys(s);if(i.length!==n.length)return!1;for(var l={}.hasOwnProperty.bind(s),o=0;o<i.length;o++){var c=i[o];if(!l(c))return!1;var d=e[c],m=s[c];if(!1===(r=t?t.call(a,d,m,c):void 0)||void 0===r&&d!==m)return!1}return!0}));var ma=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(ma||{}),ua={rel:["amphtml","canonical","alternate"]},xa={type:["application/ld+json"]},ha={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},pa=Object.values(ma),ga={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ja=Object.entries(ga).reduce(((e,[s,t])=>(e[t]=s,e)),{}),va="data-rh",fa=(e,s)=>{for(let t=e.length-1;t>=0;t-=1){const a=e[t];if({}.hasOwnProperty.call(a,s))return a[s]}return null},ba=e=>{let s=fa(e,"title");const t=fa(e,"titleTemplate");if(Array.isArray(s)&&(s=s.join("")),t&&s)return t.replace(/%s/g,(()=>s));const a=fa(e,"defaultTitle");return s||a||void 0},ya=e=>fa(e,"onChangeClientState")||(()=>{}),Na=(e,s)=>s.filter((s=>void 0!==s[e])).map((s=>s[e])).reduce(((e,s)=>c(c({},e),s)),{}),wa=(e,s)=>s.filter((e=>void 0!==e.base)).map((e=>e.base)).reverse().reduce(((s,t)=>{if(!s.length){const a=Object.keys(t);for(let r=0;r<a.length;r+=1){const i=a[r].toLowerCase();if(-1!==e.indexOf(i)&&t[i])return s.concat(t)}}return s}),[]),ka=(e,s,t)=>{const a={};return t.filter((s=>!!Array.isArray(s[e])||(void 0!==s[e]&&s[e],!1))).map((s=>s[e])).reverse().reduce(((e,t)=>{const r={};t.filter((e=>{let t;const i=Object.keys(e);for(let a=0;a<i.length;a+=1){const r=i[a],n=r.toLowerCase();-1===s.indexOf(n)||"rel"===t&&"canonical"===e[t].toLowerCase()||"rel"===n&&"stylesheet"===e[n].toLowerCase()||(t=n),-1===s.indexOf(r)||"innerHTML"!==r&&"cssText"!==r&&"itemprop"!==r||(t=r)}if(!t||!e[t])return!1;const n=e[t].toLowerCase();return a[t]||(a[t]={}),r[t]||(r[t]={}),!a[t][n]&&(r[t][n]=!0,!0)})).reverse().forEach((s=>e.push(s)));const i=Object.keys(r);for(let s=0;s<i.length;s+=1){const e=i[s],t=c(c({},a[e]),r[e]);a[e]=t}return e}),[]).reverse()},Ca=(e,s)=>{if(Array.isArray(e)&&e.length)for(let t=0;t<e.length;t+=1)if(e[t][s])return!0;return!1},Sa=e=>Array.isArray(e)?e.join(""):e,Aa=(e,s)=>Array.isArray(e)?e.reduce(((e,t)=>(((e,s)=>{const t=Object.keys(e);for(let a=0;a<t.length;a+=1)if(s[t[a]]&&s[t[a]].includes(e[t[a]]))return!0;return!1})(t,s)?e.priority.push(t):e.default.push(t),e)),{priority:[],default:[]}):{default:e,priority:[]},Pa=(e,s)=>d(c({},e),{[s]:void 0}),Ea=["noscript","script","style"],La=(e,s=!0)=>!1===s?e+"":(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),za=e=>Object.keys(e).reduce(((s,t)=>{const a=void 0!==e[t]?`${t}="${e[t]}"`:""+t;return s?`${s} ${a}`:a}),""),Ma=(e,s={})=>Object.keys(e).reduce(((s,t)=>(s[ga[t]||t]=e[t],s)),s),Ta=(e,s)=>s.map(((s,t)=>{const a={key:t,[va]:!0};return Object.keys(s).forEach((e=>{const t=ga[e]||e;if("innerHTML"===t||"cssText"===t){const e=s.innerHTML||s.cssText;a.dangerouslySetInnerHTML={__html:e}}else a[t]=s[e]})),g.createElement(e,a)})),_a=(e,s,t=!0)=>{switch(e){case"title":return{toComponent:()=>((e,s,t)=>{const a=Ma(t,{key:s,[va]:!0});return[g.createElement("title",a,s)]})(0,s.title,s.titleAttributes),toString:()=>((e,s,t,a)=>{const r=za(t),i=Sa(s);return r?`<${e} ${va}="true" ${r}>${La(i,a)}</${e}>`:`<${e} ${va}="true">${La(i,a)}</${e}>`})(e,s.title,s.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Ma(s),toString:()=>za(s)};default:return{toComponent:()=>Ta(e,s),toString:()=>((e,s,t=!0)=>s.reduce(((s,a)=>{const r=a,i=Object.keys(r).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,s)=>{const a=void 0===r[s]?s:`${s}="${La(r[s],t)}"`;return e?`${e} ${a}`:a}),""),n=r.innerHTML||r.cssText||"",l=-1===Ea.indexOf(e);return`${s}<${e} ${va}="true" ${i}${l?"/>":`>${n}</${e}>`}`}),""))(e,s,t)}}},qa=e=>{const{baseTag:s,bodyAttributes:t,encode:a=!0,htmlAttributes:r,noscriptTags:i,styleTags:n,title:l="",titleAttributes:o,prioritizeSeoTags:c}=e;let{linkTags:d,metaTags:m,scriptTags:u}=e,x={toComponent:()=>{},toString:()=>""};return c&&({priorityMethods:x,linkTags:d,metaTags:m,scriptTags:u}=(({metaTags:e,linkTags:s,scriptTags:t,encode:a})=>{const r=Aa(e,ha),i=Aa(s,ua),n=Aa(t,xa);return{priorityMethods:{toComponent:()=>[...Ta("meta",r.priority),...Ta("link",i.priority),...Ta("script",n.priority)],toString:()=>`${_a("meta",r.priority,a)} ${_a("link",i.priority,a)} ${_a("script",n.priority,a)}`},metaTags:r.default,linkTags:i.default,scriptTags:n.default}})(e)),{priority:x,base:_a("base",s,a),bodyAttributes:_a("bodyAttributes",t,a),htmlAttributes:_a("htmlAttributes",r,a),link:_a("link",d,a),meta:_a("meta",m,a),noscript:_a("noscript",i,a),script:_a("script",u,a),style:_a("style",n,a),title:_a("title",{title:l,titleAttributes:o},a)}},Fa=[],Da=!("undefined"==typeof window||!window.document||!window.document.createElement),Ia=class{constructor(e,s){u(this,"instances",[]),u(this,"canUseDOM",Da),u(this,"context"),u(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Fa:this.instances,add:e=>{(this.canUseDOM?Fa:this.instances).push(e)},remove:e=>{const s=(this.canUseDOM?Fa:this.instances).indexOf(e);(this.canUseDOM?Fa:this.instances).splice(s,1)}}}),this.context=e,this.canUseDOM=s||!1,s||(e.helmet=qa({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Ra=g.createContext({}),Oa=(e=class extends p.Component{constructor(s){super(s),u(this,"helmetData"),this.helmetData=new Ia(this.props.context||{},e.canUseDOM)}render(){return g.createElement(Ra.Provider,{value:this.helmetData.value},this.props.children)}},u(e,"canUseDOM",Da),e),Va=(e,s)=>{const t=document.head||document.querySelector("head"),a=t.querySelectorAll(`${e}[${va}]`),r=[].slice.call(a),i=[];let n;return s&&s.length&&s.forEach((s=>{const t=document.createElement(e);for(const e in s)if({}.hasOwnProperty.call(s,e))if("innerHTML"===e)t.innerHTML=s.innerHTML;else if("cssText"===e)t.styleSheet?t.styleSheet.cssText=s.cssText:t.appendChild(document.createTextNode(s.cssText));else{const a=e,r=void 0===s[a]?"":s[a];t.setAttribute(e,r)}t.setAttribute(va,"true"),r.some(((e,s)=>(n=s,t.isEqualNode(e))))?r.splice(n,1):i.push(t)})),r.forEach((e=>{var s;return null==(s=e.parentNode)?void 0:s.removeChild(e)})),i.forEach((e=>t.appendChild(e))),{oldTags:r,newTags:i}},Ua=(e,s)=>{const t=document.getElementsByTagName(e)[0];if(!t)return;const a=t.getAttribute(va),r=a?a.split(","):[],i=[...r],n=Object.keys(s);for(const l of n){const e=s[l]||"";t.getAttribute(l)!==e&&t.setAttribute(l,e),-1===r.indexOf(l)&&r.push(l);const a=i.indexOf(l);-1!==a&&i.splice(a,1)}for(let l=i.length-1;l>=0;l-=1)t.removeAttribute(i[l]);r.length===i.length?t.removeAttribute(va):t.getAttribute(va)!==n.join(",")&&t.setAttribute(va,n.join(","))},$a=(e,s)=>{const{baseTag:t,bodyAttributes:a,htmlAttributes:r,linkTags:i,metaTags:n,noscriptTags:l,onChangeClientState:o,scriptTags:c,styleTags:d,title:m,titleAttributes:u}=e;Ua("body",a),Ua("html",r),((e,s)=>{void 0!==e&&document.title!==e&&(document.title=Sa(e)),Ua("title",s)})(m,u);const x={baseTag:Va("base",t),linkTags:Va("link",i),metaTags:Va("meta",n),noscriptTags:Va("noscript",l),scriptTags:Va("script",c),styleTags:Va("style",d)},h={},p={};Object.keys(x).forEach((e=>{const{newTags:s,oldTags:t}=x[e];s.length&&(h[e]=s),t.length&&(p[e]=x[e].oldTags)})),s&&s(),o(e,h,p)},Ba=null,Ha=class extends p.Component{constructor(){super(...arguments),u(this,"rendered",!1)}shouldComponentUpdate(e){return!da(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:s}=this.props.context;let t=null;const a=(r=e.get().map((e=>{const s=c({},e.props);return delete s.context,s})),{baseTag:wa(["href"],r),bodyAttributes:Na("bodyAttributes",r),defer:fa(r,"defer"),encode:fa(r,"encodeSpecialCharacters"),htmlAttributes:Na("htmlAttributes",r),linkTags:ka("link",["rel","href"],r),metaTags:ka("meta",["name","charset","http-equiv","property","itemprop"],r),noscriptTags:ka("noscript",["innerHTML"],r),onChangeClientState:ya(r),scriptTags:ka("script",["src","innerHTML"],r),styleTags:ka("style",["cssText"],r),title:ba(r),titleAttributes:Na("titleAttributes",r),prioritizeSeoTags:Ca(r,"prioritizeSeoTags")});var r,i;Oa.canUseDOM?(i=a,Ba&&cancelAnimationFrame(Ba),i.defer?Ba=requestAnimationFrame((()=>{$a(i,(()=>{Ba=null}))})):($a(i),Ba=null)):qa&&(t=qa(a)),s(t)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Wa=(s=class extends p.Component{shouldComponentUpdate(e){return!ra(Pa(this.props,"helmetData"),Pa(e,"helmetData"))}mapNestedChildrenToProps(e,s){if(!s)return null;switch(e.type){case"script":case"noscript":return{innerHTML:s};case"style":return{cssText:s};default:throw Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,s,t,a){return d(c({},s),{[e.type]:[...s[e.type]||[],c(c({},t),this.mapNestedChildrenToProps(e,a))]})}mapObjectTypeChildren(e,s,t,a){switch(e.type){case"title":return d(c({},s),{[e.type]:a,titleAttributes:c({},t)});case"body":return d(c({},s),{bodyAttributes:c({},t)});case"html":return d(c({},s),{htmlAttributes:c({},t)});default:return d(c({},s),{[e.type]:c({},t)})}}mapArrayTypeChildrenToProps(e,s){let t=c({},s);return Object.keys(e).forEach((s=>{t=d(c({},t),{[s]:e[s]})})),t}warnOnInvalidChildren(e,s){return la(pa.some((s=>e.type===s)),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${pa.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),la(!s||"string"==typeof s||Array.isArray(s)&&!s.some((e=>"string"!=typeof e)),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,s){let t={};return g.Children.forEach(e,(e=>{if(!e||!e.props)return;const a=e.props,{children:r}=a,i=m(a,["children"]),n=Object.keys(i).reduce(((e,s)=>(e[ja[s]||s]=i[s],e)),{});let{type:l}=e;switch("symbol"==typeof l?l=l.toString():this.warnOnInvalidChildren(e,r),l){case"Symbol(react.fragment)":s=this.mapChildrenToProps(r,s);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(e,t,n,r);break;default:s=this.mapObjectTypeChildren(e,s,n,r)}})),this.mapArrayTypeChildrenToProps(t,s)}render(){const e=this.props,{children:s}=e,t=m(e,["children"]);let a=c({},t),{helmetData:r}=t;return s&&(a=this.mapChildrenToProps(s,a)),!r||r instanceof Ia||(r=new Ia(r.context,!0),delete a.helmetData),r?g.createElement(Ha,d(c({},a),{context:r.value})):g.createElement(Ra.Consumer,null,(e=>g.createElement(Ha,d(c({},a),{context:e}))))}},u(s,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),s);const Xa=({children:e,requiredRole:s="user"})=>{const{user:t,loading:a}=ie(),r=j();if(a)return h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:h.jsx(ne,{className:"h-12 w-12 animate-spin text-blue-500"})});if(!t)return h.jsx(v,{to:"/connexion",state:{from:r},replace:!0});const i=Array.isArray(t.roles)&&t.roles.includes(s)||t.role===s||t.roles===s;return s&&!i?h.jsx(v,{to:"/",replace:!0}):e},Ga=({children:e})=>h.jsx(Xa,{requiredRole:"admin",children:e}),Ka=new L({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,s)=>(null==s?void 0:s.status)>=500&&2>e,refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:!1}}}),Ja={staleTime:12e4,gcTime:3e5};
/*! Capacitor: https://capacitorjs.com/ - MIT License */
var Qa,Ya;(Ya=Qa||(Qa={})).Unimplemented="UNIMPLEMENTED",Ya.Unavailable="UNAVAILABLE";class Za extends Error{constructor(e,s,t){super(e),this.message=e,this.code=s,this.data=t}}const er=(e=>e.Capacitor=(e=>{const s=e.CapacitorCustomPlatform||null,t=e.Capacitor||{},a=t.Plugins=t.Plugins||{},r=()=>null!==s?s.name:(e=>{var s,t;return(null==e?void 0:e.androidBridge)?"android":(null===(t=null===(s=null==e?void 0:e.webkit)||void 0===s?void 0:s.messageHandlers)||void 0===t?void 0:t.bridge)?"ios":"web"})(e),i=e=>{var s;return null===(s=t.PluginHeaders)||void 0===s?void 0:s.find((s=>s.name===e))},n=new Map;return t.convertFileSrc||(t.convertFileSrc=e=>e),t.getPlatform=r,t.handleError=s=>e.console.error(s),t.isNativePlatform=()=>"web"!==r(),t.isPluginAvailable=e=>{const s=n.get(e);return!!(null==s?void 0:s.platforms.has(r()))||!!i(e)},t.registerPlugin=(e,l={})=>{const o=n.get(e);if(o)return o.proxy;const c=r(),d=i(e);let m;const u=a=>{let r;const i=(...i)=>{const n=x(null,null,(function*(){return!m&&c in l?m=m="function"==typeof l[c]?yield l[c]():l[c]:null!==s&&!m&&"web"in l&&(m=m="function"==typeof l.web?yield l.web():l.web),m})).then((s=>{const n=((s,a)=>{var r,i;if(!d){if(s)return null===(i=s[a])||void 0===i?void 0:i.bind(s);throw new Za(`"${e}" plugin is not implemented on ${c}`,Qa.Unimplemented)}{const i=null==d?void 0:d.methods.find((e=>a===e.name));if(i)return"promise"===i.rtype?s=>t.nativePromise(e,a.toString(),s):(s,r)=>t.nativeCallback(e,a.toString(),s,r);if(s)return null===(r=s[a])||void 0===r?void 0:r.bind(s)}})(s,a);if(n){const e=n(...i);return r=null==e?void 0:e.remove,e}throw new Za(`"${e}.${a}()" is not implemented on ${c}`,Qa.Unimplemented)}));return"addListener"===a&&(n.remove=()=>x(null,null,(function*(){return r()}))),n};return i.toString=()=>a.toString()+"() { [capacitor code] }",Object.defineProperty(i,"name",{value:a,writable:!1,configurable:!1}),i},h=u("addListener"),p=u("removeListener"),g=(e,s)=>{const t=h({eventName:e},s),a=()=>x(null,null,(function*(){const a=yield t;p({eventName:e,callbackId:a},s)})),r=new Promise((e=>t.then((()=>e({remove:a})))));return r.remove=()=>x(null,null,(function*(){yield a()})),r},j=new Proxy({},{get(e,s){switch(s){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?g:h;case"removeListener":return p;default:return u(s)}}});return a[e]=j,n.set(e,{name:e,proxy:j,platforms:new Set([...Object.keys(l),...d?[c]:[]])}),j},t.Exception=Za,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}),sr=er.registerPlugin;class tr{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,s){let t=!1;this.listeners[e]||(this.listeners[e]=[],t=!0),this.listeners[e].push(s);const a=this.windowListeners[e];return a&&!a.registered&&this.addWindowListener(a),t&&this.sendRetainedArgumentsForEvent(e),Promise.resolve({remove:()=>x(this,null,(function*(){return this.removeListener(e,s)}))})}removeAllListeners(){return x(this,null,(function*(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}))}notifyListeners(e,s,t){const a=this.listeners[e];if(a)a.forEach((e=>e(s)));else if(t){let t=this.retainedEventArguments[e];t||(t=[]),t.push(s),this.retainedEventArguments[e]=t}}hasListeners(e){var s;return!!(null===(s=this.listeners[e])||void 0===s?void 0:s.length)}registerWindowListener(e,s){this.windowListeners[s]={registered:!1,windowEventName:e,pluginEventName:s,handler:e=>{this.notifyListeners(s,e)}}}unimplemented(e="not implemented"){return new er.Exception(e,Qa.Unimplemented)}unavailable(e="not available"){return new er.Exception(e,Qa.Unavailable)}removeListener(e,s){return x(this,null,(function*(){const t=this.listeners[e];if(!t)return;const a=t.indexOf(s);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}))}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const s=this.retainedEventArguments[e];s&&(delete this.retainedEventArguments[e],s.forEach((s=>{this.notifyListeners(e,s)})))}}const ar=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),rr=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ir extends tr{getCookies(){return x(this,null,(function*(){const e=document.cookie,s={};return e.split(";").forEach((e=>{if(0>=e.length)return;let[t,a]=e.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");t=rr(t).trim(),a=rr(a).trim(),s[t]=a})),s}))}setCookie(e){return x(this,null,(function*(){try{const s=ar(e.key),t=ar(e.value),a="; expires="+(e.expires||"").replace("expires=",""),r=(e.path||"/").replace("path=",""),i=null!=e.url&&e.url.length>0?"domain="+e.url:"";document.cookie=`${s}=${t||""}${a}; path=${r}; ${i};`}catch(s){return Promise.reject(s)}}))}deleteCookie(e){return x(this,null,(function*(){try{document.cookie=e.key+"=; Max-Age=0"}catch(s){return Promise.reject(s)}}))}clearCookies(){return x(this,null,(function*(){try{const e=document.cookie.split(";")||[];for(const s of e)document.cookie=s.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}))}clearAllCookies(){return x(this,null,(function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}}))}}sr("CapacitorCookies",{web:()=>new ir});class nr extends tr{request(e){return x(this,null,(function*(){const s=((e,s={})=>{const t=Object.assign({method:e.method||"GET",headers:e.headers},s),a=((e={})=>{const s=Object.keys(e);return Object.keys(e).map((e=>e.toLocaleLowerCase())).reduce(((t,a,r)=>(t[a]=e[s[r]],t)),{})})(e.headers)["content-type"]||"";if("string"==typeof e.data)t.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[t,a]of Object.entries(e.data||{}))s.set(t,a);t.body=s.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach(((e,t)=>{s.append(t,e)}));else for(const t of Object.keys(e.data))s.append(t,e.data[t]);t.body=s;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(a.includes("application/json")||"object"==typeof e.data)&&(t.body=JSON.stringify(e.data));return t})(e,e.webFetchExtra),t=((e,s=!0)=>e?Object.entries(e).reduce(((e,t)=>{const[a,r]=t;let i,n;return Array.isArray(r)?(n="",r.forEach((e=>{i=s?encodeURIComponent(e):e,n+=`${a}=${i}&`})),n.slice(0,-1)):(i=s?encodeURIComponent(r):r,n=`${a}=${i}`),`${e}&${n}`}),"").substr(1):null)(e.params,e.shouldEncodeUrlParams),a=t?`${e.url}?${t}`:e.url,r=yield fetch(a,s),i=r.headers.get("content-type")||"";let n,l,{responseType:o="text"}=r.ok?e:{};switch(i.includes("application/json")&&(o="json"),o){case"arraybuffer":case"blob":l=yield r.blob(),n=yield(e=>x(null,null,(function*(){return new Promise(((s,t)=>{const a=new FileReader;a.onload=()=>{const e=a.result;s(0>e.indexOf(",")?e:e.split(",")[1])},a.onerror=e=>t(e),a.readAsDataURL(e)}))})))(l);break;case"json":n=yield r.json();break;default:n=yield r.text()}const c={};return r.headers.forEach(((e,s)=>{c[s]=e})),{data:n,headers:c,status:r.status,url:r.url}}))}get(e){return x(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}))}post(e){return x(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}))}put(e){return x(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}))}patch(e){return x(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}))}delete(e){return x(this,null,(function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}))}}sr("CapacitorHttp",{web:()=>new nr});const lr=sr("Device",{web:()=>z((()=>import("./web-BL9gBLNg.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then((e=>new e.DeviceWeb))});var or,cr,dr,mr;(cr=or||(or={})).Dark="DARK",cr.Light="LIGHT",cr.Default="DEFAULT",(mr=dr||(dr={})).None="NONE",mr.Slide="SLIDE",mr.Fade="FADE";const ur=sr("StatusBar");var xr,hr,pr,gr;(hr=xr||(xr={})).Dark="DARK",hr.Light="LIGHT",hr.Default="DEFAULT",(gr=pr||(pr={})).Body="body",gr.Ionic="ionic",gr.Native="native",gr.None="none";const jr=sr("Keyboard"),vr=new class{constructor(){this.isSupported="serviceWorker"in navigator,this.registration=null,this.updateAvailable=!1}register(){return x(this,null,(function*(){if(!this.isSupported)return!1;try{return this.registration=yield navigator.serviceWorker.register("/sw.js",{scope:"/"}),this.registration.addEventListener("updatefound",(()=>{this.updateAvailable=!0})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.updateAvailable=!1,window.location.reload()})),navigator.serviceWorker.addEventListener("message",(e=>{})),!0}catch(e){return!1}}))}unregister(){return x(this,null,(function*(){if(this.registration)try{return yield this.registration.unregister(),!0}catch(e){return!1}return!1}))}update(){return x(this,null,(function*(){if(this.registration&&this.updateAvailable)try{return this.registration.active.postMessage({type:"SKIP_WAITING"}),!0}catch(e){return!1}return!1}))}clearCache(){return x(this,null,(function*(){if(this.registration)try{return this.registration.active.postMessage({type:"CLEAR_CACHE"}),!0}catch(e){return!1}return!1}))}getStatus(){var e;return{isSupported:this.isSupported,isRegistered:!!this.registration,updateAvailable:this.updateAvailable,scope:(null==(e=this.registration)?void 0:e.scope)||null}}},fr=sr("PushNotifications",{}),br=()=>x(null,null,(function*(){try{"granted"===(yield fr.requestPermissions()).receive&&(yield fr.register(),fr.addListener("registration",(e=>x(null,null,(function*(){try{const{data:{user:s}}=yield le.auth.getUser();s&&(yield le.from("user_push_tokens").upsert({user_id:s.id,token:e.value,platform:"mobile",created_at:(new Date).toISOString()}))}catch(s){}})))),fr.addListener("pushNotificationReceived",(e=>{e.data})),fr.addListener("pushNotificationActionPerformed",(e=>{var s;(null==(s=e.notification.data)?void 0:s.action)&&yr(e.notification.data.action)})))}catch(e){}})),yr=e=>{switch(e){case"new_message":window.location.href="/messages";break;case"new_listing":window.location.href="/marketplace";break;case"boost_expired":window.location.href="/boosts"}};let Nr=class extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){var e;return this.state.hasError?this.props.fallbackRender?this.props.fallbackRender({error:this.state.error,resetErrorBoundary:()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()}}):h.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Une erreur est survenue"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"Erreur inconnue"}),h.jsxs(oe,{onClick:()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()},variant:"outline",children:[h.jsx(ce,{className:"w-4 h-4 mr-2"}),"RÃ©essayer"]})]})}):this.props.children}};const wr=({children:e})=>{const{reset:s}=M();return h.jsx(Nr,{onReset:s,fallbackRender:({error:e,resetErrorBoundary:s})=>h.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:h.jsxs(I,{className:"max-w-md",children:[h.jsx(de,{className:"h-4 w-4"}),h.jsx(R,{children:"Erreur de chargement"}),h.jsxs(O,{className:"mt-2",children:["Une erreur est survenue lors du chargement des donnÃ©es.",h.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:e.message})]}),h.jsxs(oe,{onClick:s,className:"mt-4",variant:"outline",children:[h.jsx(ce,{className:"w-4 h-4 mr-2"}),"RÃ©essayer"]})]})}),children:e})},kr={theme:"light",notifications:{email:!0,push:!0,sms:!1},privacy:{profile_visibility:"public",show_online_status:!0,allow_messages:!0},security_settings:{two_factor_auth:!1,login_notifications:!0,session_timeout:30,require_password_change:!1,remember_me_enabled:!0,auto_logout:!0,max_session_age:7},customization:{primary_color:"#3B82F6",accent_color:"#10B981",font_size:"medium",animations_enabled:!0}},Cr=()=>((()=>{const{session:e,logout:s,isRememberMe:t}=ie(),{preferences:a}=(()=>{const{user:e}=ie(),[s,t]=p.useState(kr),[a,r]=p.useState(!1),[i,n]=p.useState(null),l=()=>x(null,null,(function*(){if(!e)return t(kr),void r(!1);try{r(!0),n(null);const s=localStorage.getItem("maximarket-preferences-"+e.id);if(s){const e=JSON.parse(s);t(c(c({},kr),e))}else t(kr)}catch(s){n(s.message),t(kr)}finally{r(!1)}}));return p.useEffect((()=>{l()}),[e]),{preferences:s,loading:a,error:i,updatePreference:(a,r)=>x(null,null,(function*(){if(e)try{const i=c({},s),n=a.split(".");let l=i;for(let e=0;e<n.length-1;e++)l[n[e]]||(l[n[e]]={}),l=l[n[e]];l[n[n.length-1]]=r,t(i),localStorage.setItem("maximarket-preferences-"+e.id,JSON.stringify(i))}catch(i){n(i.message)}})),updateMultiplePreferences:a=>x(null,null,(function*(){if(e)try{const r=c({},s);Object.entries(a).forEach((([e,s])=>{const t=e.split(".");let a=r;for(let r=0;r<t.length-1;r++)a[t[r]]||(a[t[r]]={}),a=a[t[r]];a[t[t.length-1]]=s})),t(r),localStorage.setItem("maximarket-preferences-"+e.id,JSON.stringify(r))}catch(r){n(r.message)}})),resetPreferences:()=>x(null,null,(function*(){if(e)try{t(kr),localStorage.removeItem("maximarket-preferences-"+e.id)}catch(s){n(s.message)}})),reloadPreferences:l}})(),r=p.useRef(null),i=p.useRef(Date.now()),n=p.useCallback((()=>{var n,l,o,c;if(i.current=Date.now(),r.current&&clearTimeout(r.current),!e)return;if(t)return;if(null!=(l=null==(n=null==a?void 0:a.security_settings)?void 0:n.auto_logout)&&!l)return;const d=6e4*(null!=(c=null==(o=null==a?void 0:a.security_settings)?void 0:o.session_timeout)?c:30);r.current=setTimeout((()=>{s()}),d)}),[e,t,a,s]),l=p.useCallback((()=>{n()}),[n]);p.useEffect((()=>{if(!e)return;const s=["mousedown","mousemove","keypress","keydown","scroll","touchstart","click","focus","input","change"];return s.forEach((e=>{document.addEventListener(e,l,{passive:!0})})),n(),()=>{s.forEach((e=>{document.removeEventListener(e,l)})),r.current&&clearTimeout(r.current)}}),[e,l,n]),p.useEffect((()=>{!e&&r.current&&clearTimeout(r.current)}),[e]),i.current})(),null),Sr=sr("App",{web:()=>z((()=>import("./web-eRQMEV6V.js")),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then((e=>new e.AppWeb))}),Ar=()=>{const e=f();return p.useEffect((()=>{x(null,null,(function*(){try{Sr.addListener("backButton",(({canGoBack:s})=>{s?e(-1):Sr.exitApp()})),yield ur.setStyle({style:"dark"}),yield ur.setBackgroundColor({color:"#ffffff"})}catch(s){}}))}),[e]),null},Pr=({children:e})=>me?e:h.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#1a1a1a",color:"#fff",fontFamily:"Arial, sans-serif",padding:"20px",textAlign:"center"},children:h.jsxs("div",{children:[h.jsx("h1",{style:{color:"#e74c3c",marginBottom:"20px"},children:"âš ï¸ Configuration Supabase requise"}),h.jsx("p",{style:{marginBottom:"15px"},children:"L'application nÃ©cessite la configuration des variables Supabase."}),h.jsxs("div",{style:{backgroundColor:"#2c3e50",padding:"15px",borderRadius:"5px",textAlign:"left",marginBottom:"20px"},children:[h.jsx("strong",{children:"Variables requises dans Vercel :"}),h.jsxs("div",{style:{marginTop:"10px",fontFamily:"monospace"},children:["VITE_SUPABASE_URL",h.jsx("br",{}),"VITE_SUPABASE_ANON_KEY"]})]}),h.jsx("button",{onClick:()=>window.location.reload(),style:{backgroundColor:"#3498db",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer"},children:"ðŸ”„ Recharger"})]})}),Er=()=>{const[e,s]=p.useState(!1),[t,a]=p.useState(!1),[r,i]=p.useState(!0),{user:n,logout:l}=ie(),o=p.useMemo((()=>[{name:"Immobilier",path:"/immobilier",icon:h.jsx(ue,{className:"mr-2 h-4 w-4"})},{name:"Automobile",path:"/automobile",icon:h.jsx(xe,{className:"mr-2 h-4 w-4"})},{name:"Services",path:"/services",icon:h.jsx(he,{className:"mr-2 h-4 w-4"})},{name:"Marketplace",path:"/marketplace",icon:h.jsx(pe,{className:"mr-2 h-4 w-4"})}]),[]),c=p.useMemo((()=>({closed:{opacity:0,x:"-100%"},open:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}}})),[]),d=p.useMemo((()=>"text-muted-foreground hover:text-primary transition-colors px-2 lg:px-3 py-2 rounded-md text-sm lg:text-base font-medium flex items-center"),[]),m=p.useMemo((()=>"text-primary bg-primary/10"),[]);p.useEffect((()=>{const e=()=>{a(window.scrollY>20)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}),[]),p.useEffect((()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[r]);const u=p.useMemo((()=>h.jsx(b,{to:"/",className:"flex items-center","aria-label":"Accueil MaxiMarket",children:h.jsx("img",{src:"/logo.png?v="+Date.now(),alt:"MaxiMarket Logo",className:"h-16 md:h-20 w-auto object-contain transition-all duration-300"})})),[]);return h.jsxs("header",{role:"banner","aria-label":"Navigation principale",children:[h.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 transition-all duration-300 "+(t||e?"bg-gray-900/80 dark:bg-gray-800/80 shadow-lg backdrop-blur-lg border-b border-gray-700/50":"bg-gray-900/60 dark:bg-gray-800/60 backdrop-blur-md"),role:"navigation","aria-label":"Menu principal",children:h.jsx("div",{className:"container mx-auto px-4 md:px-6",children:h.jsxs("div",{className:"flex items-center justify-between h-20 md:h-24",children:[h.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:u}),h.jsx("nav",{role:"navigation","aria-label":"Navigation desktop",className:"hidden md:flex items-center space-x-1 lg:space-x-3",children:o.map((e=>h.jsxs(y,{to:e.path,className:({isActive:e})=>`${d} ${e?m:""}`,"aria-current":({isActive:e})=>e?"page":void 0,children:[e.icon,e.name]},e.name)))}),h.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[h.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>{i(!r)},"aria-label":"Changer de thÃ¨me",type:"button",children:r?h.jsx(ge,{className:"h-5 w-5"}):h.jsx(je,{className:"h-5 w-5"})}),!n&&h.jsxs(h.Fragment,{children:[h.jsx(oe,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:h.jsxs(b,{to:"/connexion","aria-label":"Se connecter",children:[h.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Connexion"]})}),h.jsx(oe,{asChild:!0,className:"hidden md:inline-flex btn-gradient-secondary",children:h.jsxs(b,{to:"/inscription","aria-label":"S'inscrire",children:[h.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Inscription"]})})]}),n&&"admin"===n.role?h.jsx(oe,{asChild:!0,className:"hidden md:inline-flex btn-secondary",children:h.jsxs(b,{to:"/admin","aria-label":"AccÃ©der Ã  l'administration",children:[h.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Admin"]})}):n&&h.jsxs(h.Fragment,{children:[h.jsx(oe,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:h.jsxs(b,{to:"/messages","aria-label":"AccÃ©der aux messages",children:[h.jsx(be,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Messages"]})}),h.jsx(oe,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:h.jsxs(b,{to:"/profile","aria-label":"AccÃ©der Ã  mon compte",children:[h.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Mon Compte"]})})]}),h.jsx("div",{className:"md:hidden",children:h.jsx(oe,{variant:"ghost",size:"icon",onClick:()=>s(!e),"aria-label":e?"Fermer le menu":"Ouvrir le menu","aria-expanded":e,type:"button",children:e?h.jsx(ye,{className:"h-6 w-6"}):h.jsx(Ne,{className:"h-6 w-6"})})})]})]})})}),h.jsx(Wt,{children:e&&h.jsxs(Ht.nav,{variants:c,initial:"closed",animate:"open",exit:"closed",className:"md:hidden fixed inset-0 top-20 md:top-24 bg-gray-900/95 dark:bg-gray-800/95 backdrop-blur-lg z-40 p-4 space-y-3 border-t border-gray-700/50",role:"navigation","aria-label":"Menu mobile",children:[o.map((e=>h.jsxs(y,{to:e.path,onClick:()=>s(!1),className:({isActive:e})=>`${d} text-base w-full justify-start ${e?m:""}`,"aria-current":({isActive:e})=>e?"page":void 0,children:[e.icon,e.name]},e.name))),!n&&h.jsxs(h.Fragment,{children:[h.jsxs(y,{to:"/connexion",onClick:()=>s(!1),className:d+" text-base w-full justify-start","aria-label":"Se connecter",children:[h.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Connexion"]}),h.jsxs(y,{to:"/inscription",onClick:()=>s(!1),className:d+" text-base w-full justify-start","aria-label":"S'inscrire",children:[h.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Inscription"]})]}),n&&"admin"===n.role?h.jsxs(y,{to:"/admin",onClick:()=>s(!1),className:({isActive:e})=>`${d} text-base w-full justify-start ${e?m:""}`,"aria-label":"AccÃ©der Ã  l'administration",children:[h.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Admin"]}):n&&h.jsxs(h.Fragment,{children:[h.jsxs(y,{to:"/messages",onClick:()=>s(!1),className:({isActive:e})=>`${d} text-base w-full justify-start ${e?m:""}`,"aria-label":"AccÃ©der aux messages",children:[h.jsx(be,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Messages"]}),h.jsxs(y,{to:"/profile",onClick:()=>s(!1),className:({isActive:e})=>`${d} text-base w-full justify-start ${e?m:""}`,"aria-label":"AccÃ©der Ã  mon compte",children:[h.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Mon Compte"]}),h.jsxs("button",{onClick:()=>x(null,null,(function*(){try{yield l(),s(!1)}catch(e){}})),className:d+" text-base w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50","aria-label":"Se dÃ©connecter",children:[h.jsx(we,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," DÃ©connexion"]})]})]})})]})},Lr=()=>{const e=(new Date).getFullYear(),{toast:s}=Me(),[t,a]=p.useState(""),[r,i]=p.useState(!1),n=[{title:"Explorer",links:[{name:"Immobilier",path:"/immobilier"},{name:"Automobile",path:"/automobile"},{name:"Services Pro",path:"/services"},{name:"Marketplace",path:"/marketplace"}]},{title:"Entreprise",links:[{name:"Ã€ Propos",path:"/a-propos"},{name:"CarriÃ¨res",path:"/carrieres"},{name:"Presse",path:"/presse"},{name:"Blog",path:"/blog"}]},{title:"Support",links:[{name:"Centre d'Aide",path:"/aide"},{name:"Contactez-nous",path:"/contact"},{name:"FAQ",path:"/faq"},{name:"Politique de ConfidentialitÃ©",path:"/politique-confidentialite"},{name:"Termes & Conditions",path:"/conditions-utilisation"}]}],l=[{name:"Facebook",icon:h.jsx(Ce,{className:"h-5 w-5"}),path:ke.socials.facebook},{name:"Instagram",icon:h.jsx(Se,{className:"h-5 w-5"}),path:ke.socials.instagram},{name:"TikTok",icon:h.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),path:ke.socials.tiktok}].filter((e=>e.path&&""!==e.path)),o=e=>x(null,null,(function*(){if(e.preventDefault(),t.trim()){i(!0);try{const e=yield Te.subscribe(t.trim());s({title:"Inscription rÃ©ussie !",description:e.message}),a("")}catch(r){s({title:"Erreur d'inscription",description:r.message||"Une erreur s'est produite",variant:"destructive"})}finally{i(!1)}}else s({title:"Email requis",description:"Veuillez saisir votre adresse email",variant:"destructive"})}));return h.jsx("footer",{className:"bg-card text-card-foreground border-t border-border",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 pt-8 pb-6",children:[h.jsxs("div",{className:"md:col-span-2 lg:col-span-1 xl:col-span-2 pr-4",children:[h.jsx(b,{to:"/",className:"flex items-center mb-4",children:h.jsx("img",{src:"/logo.png",alt:"MaxiMarket Logo",className:"h-16 md:h-20 w-auto object-contain transition-all duration-300"})}),h.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"La plateforme NÂ°1 en Afrique de l'Ouest pour l'immobilier, l'automobile, les services et bien plus."}),h.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Restez informÃ© de nos nouveautÃ©s :"}),h.jsxs("form",{onSubmit:o,className:"flex items-center gap-2",children:[h.jsx(Ae,{type:"email",placeholder:"Votre adresse e-mail",className:"flex-grow",value:t,onChange:e=>a(e.target.value),disabled:r}),h.jsx(oe,{type:"submit",size:"icon",className:"bg-primary hover:bg-primary/90",disabled:r,children:r?h.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):h.jsx(Pe,{className:"h-4 w-4"})})]})]}),n.map((e=>h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold mb-3",children:e.title}),h.jsx("ul",{className:"space-y-1",children:e.links.map((e=>h.jsx("li",{children:h.jsxs(b,{to:e.path,className:"text-sm text-muted-foreground hover:text-primary transition-colors flex items-center group",children:[e.name,h.jsx(Ee,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})},e.name)))})]},e.title)))]}),h.jsxs("div",{className:"md:hidden",children:[h.jsxs("div",{className:"pt-6 pb-4 text-center",children:[h.jsx(b,{to:"/",className:"flex items-center justify-center mb-3",children:h.jsx("img",{src:"/logo.png",alt:"MaxiMarket Logo",className:"h-14 w-auto object-contain transition-all duration-300"})}),h.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:"La plateforme NÂ°1 en Afrique de l'Ouest"}),h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Newsletter :"}),h.jsxs("form",{onSubmit:o,className:"flex items-center gap-2 max-w-xs mx-auto",children:[h.jsx(Ae,{type:"email",placeholder:"Email",className:"flex-grow text-sm",value:t,onChange:e=>a(e.target.value),disabled:r}),h.jsx(oe,{type:"submit",size:"sm",className:"bg-primary hover:bg-primary/90",disabled:r,children:r?h.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-white border-t-transparent"}):h.jsx(Pe,{className:"h-3 w-3"})})]})]})]}),h.jsx("div",{className:"pb-4",children:h.jsx("div",{className:"grid grid-cols-3 gap-4",children:n.map((e=>h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"font-semibold mb-2 text-sm text-primary",children:e.title}),h.jsx("div",{className:"space-y-1",children:e.links.slice(0,3).map((e=>h.jsx(b,{to:e.path,className:"block text-xs text-muted-foreground hover:text-primary transition-colors",children:e.name},e.name)))})]},e.title)))})}),h.jsxs("div",{className:"pb-4",children:[h.jsx("p",{className:"text-center font-semibold mb-3 text-sm text-primary",children:"Suivez-nous"}),h.jsx("div",{className:"flex justify-center space-x-6",children:l.length>0?l.map((e=>h.jsx(b,{to:e.path,target:"_blank",rel:"noopener noreferrer","aria-label":e.name,className:"text-muted-foreground hover:text-primary transition-colors p-2 rounded-full hover:bg-accent",children:e.icon},e.name))):h.jsx("p",{className:"text-xs text-muted-foreground",children:"RÃ©seaux sociaux en cours de configuration"})})]}),h.jsxs("div",{className:"pb-4",children:[h.jsx("p",{className:"text-center font-semibold mb-3 text-sm text-primary",children:"Contact"}),h.jsxs("div",{className:"flex justify-center space-x-6 text-xs text-muted-foreground",children:[h.jsxs(b,{to:"/contact",className:"flex items-center space-x-1 hover:text-primary",children:[h.jsx(Le,{className:"h-3 w-3"}),h.jsx("span",{children:"Contact"})]}),h.jsxs(b,{to:"/aide",className:"flex items-center space-x-1 hover:text-primary",children:[h.jsx(ze,{className:"h-3 w-3"}),h.jsx("span",{children:"Aide"})]})]})]})]}),h.jsx("div",{className:"hidden md:block border-t border-border pt-6 pb-6",children:h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[h.jsxs("p",{className:"text-xs text-muted-foreground mb-4 md:mb-0",children:["Â© ",e," ",ke.siteName,". Tous droits rÃ©servÃ©s."]}),h.jsx("div",{className:"flex space-x-4",children:l.length>0?l.map((e=>h.jsx(b,{to:e.path,target:"_blank",rel:"noopener noreferrer","aria-label":e.name,className:"text-muted-foreground hover:text-primary transition-colors",children:e.icon},e.name))):h.jsx("p",{className:"text-xs text-muted-foreground",children:"RÃ©seaux sociaux en cours de configuration"})})]})}),h.jsx("div",{className:"md:hidden border-t border-border pt-4 pb-6 text-center",children:h.jsxs("p",{className:"text-xs text-muted-foreground",children:["Â© ",e," ",ke.siteName,". Tous droits rÃ©servÃ©s."]})})]})})},zr=()=>{const{user:e}=ie(),[s,t]=p.useState(!1);p.useEffect((()=>{x(null,null,(function*(){try{const e=yield lr.getInfo();t("web"!==e.platform)}catch(e){t(!1)}}))}),[]);const a=[{name:"Accueil",path:"/",icon:ue},{name:"Immobilier",path:"/immobilier",icon:ue},{name:"Auto",path:"/automobile",icon:xe},{name:"Services",path:"/services",icon:he},{name:"Marketplace",path:"/marketplace",icon:pe}];return s?h.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur-md border-t border-border z-50",children:h.jsxs("div",{className:"flex items-center justify-around px-2 py-2",children:[a.map((e=>{const s=e.icon;return h.jsxs(y,{to:e.path,className:({isActive:e})=>"flex flex-col items-center justify-center w-full py-2 px-1 touch-target transition-colors "+(e?"text-primary":"text-muted-foreground hover:text-primary"),"aria-label":e.name,children:[h.jsx(s,{className:"h-6 w-6 mb-1"}),h.jsx("span",{className:"text-xs font-medium",children:e.name})]},e.name)})),e?h.jsxs(y,{to:"/messages",className:({isActive:e})=>"flex flex-col items-center justify-center w-full py-2 px-1 touch-target transition-colors "+(e?"text-primary":"text-muted-foreground hover:text-primary"),"aria-label":"Messages",children:[h.jsx(be,{className:"h-6 w-6 mb-1"}),h.jsx("span",{className:"text-xs font-medium",children:"Messages"})]}):h.jsxs(y,{to:"/connexion",className:({isActive:e})=>"flex flex-col items-center justify-center w-full py-2 px-1 touch-target transition-colors "+(e?"text-primary":"text-muted-foreground hover:text-primary"),"aria-label":"Connexion",children:[h.jsx(_e,{className:"h-6 w-6 mb-1"}),h.jsx("span",{className:"text-xs font-medium",children:"Connexion"})]})]})}):null},Mr=({children:e})=>{const[s,t]=p.useState(!1);return p.useEffect((()=>{x(null,null,(function*(){try{const e=yield lr.getInfo();t("web"!==e.platform)}catch(e){t(!1)}}))}),[]),h.jsx("div",{className:s?"pb-20":"",children:e})},Tr=()=>{const e=j(),[s,t]=p.useState(!1),a=e.pathname.startsWith("/profile"),r=p.useCallback((()=>{t(window.scrollY>20)}),[]);p.useEffect((()=>(window.addEventListener("scroll",r,{passive:!0}),()=>window.removeEventListener("scroll",r))),[r]),p.useEffect((()=>{window.scrollTo(0,0)}),[e.pathname]);const i=p.useMemo((()=>qe("fixed top-0 left-0 right-0 z-50 transition-all duration-300",s?"py-3 glass-effect":"py-5 bg-transparent")),[s]),n=p.useMemo((()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}})),[]);return h.jsxs("div",{className:"min-h-screen flex flex-col bg-background grid-pattern",children:[h.jsx("header",{className:i,role:"banner","aria-label":"En-tÃªte principal",children:h.jsx(Er,{})}),h.jsx("main",{className:qe("flex-grow","/"===e.pathname?"":"pt-24"),role:"main","aria-label":"Contenu principal",id:"main-content",children:h.jsx(Mr,{children:h.jsx(Ht.div,d(c({},n),{children:h.jsx(N,{})}),e.pathname)})}),!a&&h.jsx(Lr,{}),h.jsx(zr,{})]})},_r=()=>{const{login:e}=ie(),{register:s,handleSubmit:t,formState:{errors:a,isSubmitting:r}}=Xt(),[i,n]=p.useState(!1);return h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Connexion"}),h.jsx(Re,{children:"Connectez-vous Ã  votre compte"})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:t((s=>x(null,null,(function*(){yield e(s,i)})))),className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"email",children:"Adresse e-mail"}),h.jsxs("div",{className:"relative",children:[h.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'adresse e-mail est requise",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse e-mail invalide"}})))]}),a.email&&h.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"password",children:"Mot de passe"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"pl-10"},s("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"}})))]}),a.password&&h.jsx("p",{className:"text-sm text-destructive",children:a.password.message})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(V,{id:"rememberMe",checked:i,onCheckedChange:n}),h.jsx(Ve,{htmlFor:"rememberMe",className:"text-sm font-normal cursor-pointer",children:"Se souvenir de moi"})]}),h.jsx(oe,{type:"submit",className:"w-full",disabled:r,children:r?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion en cours..."]}):"Se connecter"})]})}),h.jsxs($e,{className:"flex flex-col space-y-2",children:[h.jsx(b,{to:"/mot-de-passe-oublie",className:"text-sm text-primary hover:underline",children:"Mot de passe oubliÃ© ?"}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",h.jsx(b,{to:"/inscription",className:"text-primary hover:underline",children:"S'inscrire"})]})]})]})})},qr=()=>{const{user:e,loading:s}=ie(),t=f(),a=j();return p.useEffect((()=>{var r;if(!s&&e){const s=(null==(r=a.state)?void 0:r.from)||("admin"===e.role?"/admin":"/");t(s,{replace:!0})}}),[e,s,t,a]),s||e?null:h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsx(_r,{})})},Fr=()=>{const{register:e}=ie(),{register:s,handleSubmit:t,watch:a,formState:{errors:r,isSubmitting:i}}=Xt(),[n,l]=p.useState({shown:!1,email:""}),[o,d]=p.useState(!1),[m,u]=p.useState(null),g=a("password");return n.shown?h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Be,{className:"h-5 w-5 text-green-600"}),h.jsx(Ie,{children:"Inscription rÃ©ussie"})]}),h.jsx(Re,{children:"VÃ©rifiez votre email pour confirmer votre compte."})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"text-sm text-muted-foreground",children:["Nous avons envoyÃ© un lien de confirmation Ã :",h.jsx("div",{className:"mt-1 font-medium text-foreground",children:n.email})]}),m&&h.jsx("div",{className:"text-sm",children:m}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(oe,{type:"button",onClick:()=>x(null,null,(function*(){try{d(!0),u(null);const{error:e}=yield le.auth.resend({type:"signup",email:n.email,options:{emailRedirectTo:window.location.origin+"/auth/callback"}});if(e)throw e;u("Un nouvel email de confirmation a Ã©tÃ© envoyÃ©.")}catch(e){u(e.message||"Impossible d'envoyer l'email de confirmation.")}finally{d(!1)}})),disabled:o,className:"inline-flex items-center",children:o?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):h.jsxs(h.Fragment,{children:[h.jsx(He,{className:"mr-2 h-4 w-4"}),"Renvoyer l'email"]})}),h.jsx(oe,{type:"button",variant:"outline",onClick:()=>l({shown:!1,email:""}),children:"Utiliser une autre adresse"})]})]}),h.jsxs($e,{className:"flex flex-col items-start gap-2",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"DÃ©jÃ  confirmÃ© ?"}),h.jsx(b,{to:"/connexion",className:"text-primary hover:underline text-sm",children:"Se connecter"})]})]})}):h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Inscription"}),h.jsx(Re,{children:"CrÃ©ez votre compte MaxiMarket"})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:t((s=>x(null,null,(function*(){const t=yield e(s);t&&t.needsConfirmation&&l({shown:!0,email:s.email})})))),className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"firstName",children:"PrÃ©nom"}),h.jsxs("div",{className:"relative",children:[h.jsx(_e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"firstName",type:"text",placeholder:"John",className:"pl-10"},s("firstName",{required:"Le prÃ©nom est requis",minLength:{value:2,message:"Le prÃ©nom doit contenir au moins 2 caractÃ¨res"}})))]}),r.firstName&&h.jsx("p",{className:"text-sm text-destructive",children:r.firstName.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"lastName",children:"Nom"}),h.jsxs("div",{className:"relative",children:[h.jsx(_e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"lastName",type:"text",placeholder:"Doe",className:"pl-10"},s("lastName",{required:"Le nom est requis",minLength:{value:2,message:"Le nom doit contenir au moins 2 caractÃ¨res"}})))]}),r.lastName&&h.jsx("p",{className:"text-sm text-destructive",children:r.lastName.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"email",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),r.email&&h.jsx("p",{className:"text-sm text-destructive",children:r.email.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"phoneNumber",children:"TÃ©lÃ©phone"}),h.jsxs("div",{className:"relative",children:[h.jsx(ze,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"phoneNumber",type:"tel",placeholder:"+221 77 123 45 67",className:"pl-10"},s("phoneNumber",{required:"Le numÃ©ro de tÃ©lÃ©phone est requis",pattern:{value:/^\+?[1-9]\d{1,14}$/,message:"NumÃ©ro de tÃ©lÃ©phone invalide"}})))]}),r.phoneNumber&&h.jsx("p",{className:"text-sm text-destructive",children:r.phoneNumber.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"password",children:"Mot de passe"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"pl-10"},s("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractÃ¨re spÃ©cial"}})))]}),r.password&&h.jsx("p",{className:"text-sm text-destructive",children:r.password.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"confirmPassword",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"pl-10"},s("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:e=>e===g||"Les mots de passe ne correspondent pas"})))]}),r.confirmPassword&&h.jsx("p",{className:"text-sm text-destructive",children:r.confirmPassword.message})]}),h.jsx(oe,{type:"submit",className:"w-full",disabled:i,children:i?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Inscription en cours..."]}):"S'inscrire"})]})}),h.jsx($e,{children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["DÃ©jÃ  un compte ?"," ",h.jsx(b,{to:"/connexion",className:"text-primary hover:underline",children:"Se connecter"})]})})]})})},Dr=()=>h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsx(Fr,{})}),Ir=()=>{const{toast:e}=Me(),{register:s,handleSubmit:t,formState:{errors:a,isSubmitting:r}}=Xt();return h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"w-full max-w-md",children:h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Mot de passe oubliÃ©"}),h.jsx(Re,{children:"Entrez votre adresse email pour recevoir les instructions de rÃ©initialisation"})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:t((s=>x(null,null,(function*(){try{e({title:"Email envoyÃ©",description:"Si un compte existe avec cet email, vous recevrez les instructions de rÃ©initialisation."})}catch(s){e({title:"Erreur",description:s.message,variant:"destructive"})}})))),className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"email",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(Le,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),a.email&&h.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),h.jsx(oe,{type:"submit",className:"w-full",disabled:r,children:r?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer les instructions"})]})}),h.jsx($e,{children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Retour Ã  la"," ",h.jsx(b,{to:"/connexion",className:"text-primary hover:underline",children:"page de connexion"})]})})]})})})},Rr=()=>{const{toast:e}=Me(),s=f(),[t]=w(),a=t.get("token"),{register:r,handleSubmit:i,watch:n,formState:{errors:l,isSubmitting:o}}=Xt(),d=n("password");return a?h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"w-full max-w-md",children:h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"RÃ©initialisation du mot de passe"}),h.jsx(Re,{children:"Choisissez votre nouveau mot de passe"})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:i((t=>x(null,null,(function*(){try{if(!a)throw Error("Token de rÃ©initialisation manquant");e({title:"Mot de passe rÃ©initialisÃ©",description:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe."}),s("/connexion")}catch(t){e({title:"Erreur",description:t.message,variant:"destructive"})}})))),className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"password",children:"Nouveau mot de passe"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"password",type:"password",className:"pl-10"},r("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractÃ¨re spÃ©cial"}})))]}),l.password&&h.jsx("p",{className:"text-sm text-destructive",children:l.password.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"confirmPassword",type:"password",className:"pl-10"},r("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:e=>e===d||"Les mots de passe ne correspondent pas"})))]}),l.confirmPassword&&h.jsx("p",{className:"text-sm text-destructive",children:l.confirmPassword.message})]}),h.jsx(oe,{type:"submit",className:"w-full",disabled:o,children:o?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-4 w-4 animate-spin"}),"RÃ©initialisation en cours..."]}):"RÃ©initialiser le mot de passe"})]})})]})})}):h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx(Fe,{children:h.jsxs(De,{children:[h.jsx(Ie,{className:"text-destructive",children:"Lien invalide"}),h.jsx(Re,{children:"Le lien de rÃ©initialisation est invalide ou a expirÃ©. Veuillez faire une nouvelle demande de rÃ©initialisation."})]})})})},Or=({title:e,value:s,icon:t,trend:a,trendValue:r,color:i="blue",className:n})=>h.jsx(Fe,{className:qe(`bg-gradient-to-br ${{blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600",teal:"from-teal-500 to-teal-600",indigo:"from-indigo-500 to-indigo-600",pink:"from-pink-500 to-pink-600"}[i]} text-white overflow-hidden`,n),children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm opacity-90 mb-1",children:e}),h.jsx("p",{className:"text-2xl font-bold",children:s}),a&&h.jsx("div",{className:"flex items-center mt-2",children:h.jsxs(We,{variant:"secondary",className:qe("text-xs bg-white/20 text-white border-0","up"===a?"text-green-200":"text-red-200"),children:["up"===a?"â†—":"â†˜"," ",r]})})]}),t&&h.jsx("div",{className:qe("p-3 rounded-full bg-white/10",{blue:"text-blue-200",green:"text-green-200",purple:"text-purple-200",orange:"text-orange-200",red:"text-red-200",teal:"text-teal-200",indigo:"text-indigo-200",pink:"text-pink-200"}[i]),children:h.jsx(t,{className:"h-6 w-6"})})]})})}),Vr=e=>{var s=e,{src:t,alt:a="",className:r="",placeholder:i=null,errorPlaceholder:n=null,onLoad:l=null,onError:o=null,priority:d="medium",showSkeleton:u=!0,enableAnimations:x=!0}=s,g=m(s,["src","alt","className","placeholder","errorPlaceholder","onLoad","onError","priority","showSkeleton","enableAnimations"]);const[j,v]=p.useState(!1),f={rootMargin:"high"===d?"50px":"medium"===d?"100px":"150px",threshold:.1},{imgRef:b,isLoaded:y,isInView:N,error:w}=((e,s={})=>{const[t,a]=p.useState(!1),[r,i]=p.useState(!1),[n,l]=p.useState(null),o=p.useRef(null),d=p.useRef(null),m=c({root:null,rootMargin:"50px",threshold:.1},s),u=p.useCallback((()=>{if(!e||t)return;const s=new Image;s.onload=()=>{a(!0),l(null)},s.onerror=()=>{l("Erreur lors du chargement de l'image"),a(!1)},s.src=e}),[e,t]);return p.useEffect((()=>{if(!o.current||!e)return;const s=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(i(!0),u(),s.unobserve(e.target))}))}),m);return d.current=s,s.observe(o.current),()=>{d.current&&d.current.disconnect()}}),[e,u,m]),p.useEffect((()=>()=>{d.current&&d.current.disconnect()}),[]),{imgRef:o,isLoaded:t,isInView:r,error:n}})(t,f),k=p.useCallback((()=>{v(!0),o&&o()}),[o]),C=p.useCallback((()=>{l&&l()}),[l]),S=h.jsx("div",{className:qe("bg-gradient-to-br from-muted to-muted/50 animate-pulse flex items-center justify-center",r),children:h.jsx("div",{className:"w-8 h-8 text-muted-foreground/50",children:h.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),A=h.jsx("div",{className:qe("bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center text-muted-foreground/50",r),children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-6 h-6 mx-auto mb-1",children:h.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),h.jsx("span",{className:"text-xs",children:"Image non disponible"})]})});return w||j?n||A:N?y?h.jsx(Wt,{children:h.jsx(Ht.img,c({ref:b,src:t,alt:a,className:qe("w-full h-full object-cover transition-all duration-300",x&&"hover:scale-105",r),onLoad:C,onError:k,initial:x?{opacity:0,scale:1.05}:{opacity:0},animate:x?{opacity:1,scale:1}:{opacity:1},transition:x?{duration:.4,ease:"easeOut"}:{duration:.2},loading:"high"===d?"eager":"lazy",decoding:"async"},g))}):h.jsx("div",{ref:b,className:r,children:h.jsx(Wt,{children:h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:i||S})})}):h.jsx("div",{ref:b,className:r,children:i||S})},Ur=g.memo((({images:e=[],title:s="Galerie d'images",className:t=""})=>{const[a,r]=p.useState(0),[i,n]=p.useState(!1),l=e.filter((e=>{return null!==((s=e)?"string"==typeof s?s:(null==s?void 0:s.url)?s.url:(null==s?void 0:s.file)?URL.createObjectURL(s.file):(null==s?void 0:s.src)?s.src:(null==s?void 0:s.displayUrl)?s.displayUrl:null:null);var s}));if(p.useEffect((()=>{if(!i||1>=l.length)return;const e=setInterval((()=>{r((e=>(e+1)%l.length))}),3e3);return()=>clearInterval(e)}),[i,l.length]),!l||0===l.length)return h.jsx("div",{className:"relative bg-muted flex items-center justify-center "+t,children:h.jsx("div",{className:"text-center text-muted-foreground",children:h.jsx("p",{className:"text-xs sm:text-sm",children:"Aucune image"})})});const o=l[a];return h.jsxs("div",{className:"relative bg-muted overflow-hidden group "+t,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[h.jsx(Wt,{mode:"wait",children:h.jsx(Ht.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"w-full h-full",children:h.jsx(Vr,{src:o,alt:`${s} - Image ${a+1}`,className:"w-full h-full object-cover",priority:"medium",showSkeleton:!0,enableAnimations:!0})},a)}),l.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:e=>{e.stopPropagation(),l.length>0&&r((e=>(e-1+l.length)%l.length))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 z-10","aria-label":"Image prÃ©cÃ©dente",children:h.jsx(Xe,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),h.jsx("button",{onClick:e=>{e.stopPropagation(),l.length>0&&r((e=>(e+1)%l.length))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 z-10","aria-label":"Image suivante",children:h.jsx(Ge,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),l.length>1&&h.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 sm:gap-1.5",children:l.map(((e,s)=>h.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{e>=0&&e<l.length&&r(e)})(s)},className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all duration-200 "+(s===a?"bg-white":"bg-white/50 hover:bg-white/75"),"aria-label":"Aller Ã  l'image "+(s+1)},s)))})]})})),$r=({listing:e,onEdit:s,onDelete:t,onRefresh:a,onBoost:r,showActions:i=!0})=>{var n,l;return h.jsxs(Fe,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 group",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Ur,{images:e.images||[e.image],title:e.title,className:"h-48"}),h.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[h.jsx(We,{variant:"secondary",className:qe("text-xs font-medium",(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"expired":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.status)),children:(e=>{switch(e){case"active":return"Active";case"pending":return"En attente";case"expired":return"ExpirÃ©e";case"draft":return"Brouillon";default:return e}})(e.status)}),e.featured&&h.jsx(We,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 text-xs",children:"â­ Premium"})]}),h.jsx("div",{className:"absolute top-2 left-2",children:h.jsx("span",{className:"text-2xl",children:(e=>{let s="";if("string"==typeof e)s=e;else{if(!e||"object"!=typeof e||!e.name)return"ðŸ“¦";s=e.name}switch(s.toLowerCase()){case"immobilier":return"ðŸ ";case"automobile":return"ðŸš—";case"services":return"ðŸ”§";case"marketplace":return"ðŸ›ï¸";default:return"ðŸ“¦"}})(e.category)})})]}),h.jsx(Oe,{className:"p-4",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-1 line-clamp-2",children:e.title}),h.jsx("p",{className:"text-primary font-bold text-lg",children:e.price})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(Ke,{className:"h-3 w-3 mr-1"}),e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:(null==(n=e.location)?void 0:n.city)||(null==(l=e.location)?void 0:l.country)||"Localisation non spÃ©cifiÃ©e"]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(Je,{className:"h-3 w-3 mr-1"}),e.createdAt||e.created_at?new Date(e.createdAt||e.created_at).toLocaleDateString("fr-FR"):"Date inconnue"]})]}),h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(Qe,{className:"h-4 w-4 mr-1"}),e.views||e.views_count||0," vues"]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(Ye,{className:"h-4 w-4 mr-1"}),e.contacts||e.contacts_count||0," contacts"]})]}),e.boosted&&h.jsxs(We,{variant:"outline",className:"text-xs",children:[h.jsx(Ze,{className:"h-3 w-3 mr-1"}),"BoostÃ©"]})]}),i&&h.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[h.jsxs(oe,{variant:"outline",className:"flex-1 min-w-[120px] min-h-[44px]",onClick:()=>null==s?void 0:s(e),children:[h.jsx(es,{className:"h-5 w-5 sm:h-4 sm:w-4 mr-1"}),h.jsx("span",{className:"text-sm",children:"Modifier"})]}),"active"===e.status&&h.jsxs(oe,{variant:"outline",onClick:()=>null==r?void 0:r(e),className:"flex-1 min-w-[120px] min-h-[44px]",children:[h.jsx(Ze,{className:"h-5 w-5 sm:h-4 sm:w-4 mr-1"}),h.jsx("span",{className:"text-sm",children:"Booster"})]}),h.jsx(oe,{variant:"outline",onClick:()=>null==a?void 0:a(e),className:"min-h-[44px] min-w-[44px]","aria-label":"Actualiser",children:h.jsx(ce,{className:"h-5 w-5 sm:h-4 sm:w-4"})}),h.jsx(oe,{variant:"outline",onClick:()=>null==t?void 0:t(e),className:"text-red-600 hover:text-red-700 min-h-[44px] min-w-[44px]","aria-label":"Supprimer",children:h.jsx(ss,{className:"h-5 w-5 sm:h-4 sm:w-4"})})]})]})})]})},Br=({stats:e={}})=>{const s=[{id:"new-listing",title:"Nouvelle Annonce",description:"Publier une nouvelle annonce",icon:ts,color:"from-primary to-blue-600",href:"/creer-annonce",badge:null},{id:"messages",title:"Messages",description:"Voir vos conversations",icon:be,color:"from-green-500 to-green-600",href:"/messages",badge:e.unreadMessages||0},{id:"favorites",title:"Mes Favoris",description:"Annonces sauvegardÃ©es",icon:as,color:"from-pink-500 to-pink-600",href:"/favorites",badge:e.totalFavorites||0},{id:"boost",title:"Booster",description:"Booster vos annonces",icon:rs,color:"from-yellow-500 to-orange-600",href:"/boost",badge:null},{id:"transactions",title:"Transactions",description:"Historique des paiements",icon:is,color:"from-purple-500 to-purple-600",href:"/transactions",badge:null},{id:"support",title:"Support",description:"Besoin d'aide ?",icon:ns,color:"from-orange-500 to-orange-600",href:"/aide",badge:null}];return h.jsxs(Fe,{children:[h.jsx(De,{children:h.jsxs(Ie,{className:"flex items-center space-x-2",children:[h.jsx(ts,{className:"h-5 w-5"}),h.jsx("span",{children:"Actions Rapides"})]})}),h.jsx(Oe,{children:h.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map((e=>h.jsx(oe,{variant:"outline",className:`h-12 bg-gradient-to-r ${e.color} hover:from-primary/90 hover:to-blue-600/90 text-white border-0 transition-all duration-200 hover:scale-105`,asChild:!0,children:h.jsxs(b,{to:e.href,className:"flex items-center space-x-2",children:[h.jsx(e.icon,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm font-medium",children:e.title}),e.badge&&e.badge>0&&h.jsx(We,{variant:"secondary",className:"ml-auto bg-white/20 text-white border-0",children:e.badge})]})},e.id)))})})]})},Hr=()=>{var e,s,t,a;const{user:r,loading:i,logout:n}=ie(),{toast:l}=Me(),o=f(),[m,u]=p.useState(!1),{activeTab:g,handleTabChange:j}=((e="dashboard")=>{const[s,t]=w(),[a,r]=p.useState(e);return p.useEffect((()=>{const e=s.get("tab");e&&r(e)}),[s]),{activeTab:a,handleTabChange:e=>{r(e),t({tab:e})},setActiveTab:r}})("dashboard"),[v,y]=p.useState([]),[N,k]=p.useState([]),[C,S]=p.useState([]),[A,P]=p.useState({totalListings:0,activeListings:0,totalViews:0,totalContacts:0,unreadMessages:0,totalFavorites:0}),[E,L]=p.useState({isOpen:!1,item:null}),[z,M]=p.useState({isOpen:!1,item:null}),[T,_]=p.useState({isOpen:!1,item:null}),[q,F]=p.useState({isOpen:!1,item:null}),[D,I]=p.useState(1),[R,O]=p.useState(1),[V]=p.useState(6),{register:K,handleSubmit:J,formState:{errors:Q}}=Xt({defaultValues:{firstName:(null==r?void 0:r.firstName)||"",lastName:(null==r?void 0:r.lastName)||"",email:(null==r?void 0:r.email)||"",phoneNumber:(null==r?void 0:r.phoneNumber)||""}});p.useEffect((()=>{x(null,null,(function*(){if(r)try{const t=yield hs.getUserListings();y(t);let a=[];try{a=yield ps.getUserFavorites()}catch(e){}S(a);let r=[];try{r=yield gs.getUserConversations()}catch(s){}k(r);const i=t.filter((e=>"approved"===e.status)).length,n=t.reduce(((e,s)=>e+(s.views_count||0)),0),l=r.filter((e=>!e.read)).length;P({totalListings:t.length,activeListings:i,totalViews:n,totalContacts:r.length,unreadMessages:l,totalFavorites:a.length}),O(Math.ceil(t.length/V))}catch(t){l({title:"Erreur",description:"Impossible de charger vos donnÃ©es",variant:"destructive"})}}))}),[r,l]);const Y=e=>{M({isOpen:!0,item:e})},Z=e=>{L({isOpen:!0,item:e})},ee=e=>{F({isOpen:!0,item:e})},se=e=>{_({isOpen:!0,item:e})};return i?h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx(ne,{className:"h-8 w-8 animate-spin"})}):h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-background",children:[h.jsxs("div",{className:"container mx-auto py-6 sm:py-8 px-4",children:[h.jsx("div",{className:"mb-6 sm:mb-8",children:h.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[h.jsx("div",{className:"relative flex-shrink-0",children:h.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center overflow-hidden shadow-lg",children:(null==r?void 0:r.profileImage)?h.jsx("img",{src:r.profileImage,alt:`${(null==r?void 0:r.firstName)||""} ${(null==r?void 0:r.lastName)||""}`,className:"w-full h-full object-cover"}):h.jsx(_e,{className:"h-8 w-8 sm:h-10 sm:w-10 text-white"})})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground",children:[null==r?void 0:r.firstName," ",null==r?void 0:r.lastName]}),h.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground flex items-center mt-1",children:[h.jsx(Le,{className:"h-4 w-4 mr-2"}),null==r?void 0:r.email]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2 sm:mt-3",children:[h.jsxs(We,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs sm:text-sm",children:[h.jsx(ls,{className:"h-3 w-3 mr-1"}),"Compte vÃ©rifiÃ©"]}),(null==r?void 0:r.createdAt)&&h.jsxs(We,{variant:"outline",className:"text-xs sm:text-sm",children:["Membre depuis ",new Date(r.createdAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"})]})]})]})]})}),h.jsxs(os,{value:g,onValueChange:j,className:"w-full",children:[h.jsx("div",{className:"relative",children:h.jsxs(cs,{className:"flex overflow-x-auto gap-1 sm:gap-2 pb-2 sm:grid sm:w-full sm:grid-cols-5 sm:gap-1 sm:pb-0 bg-card backdrop-blur-sm border border-border rounded-lg p-1.5 shadow-sm scrollbar-hide",children:[h.jsxs(ds,{value:"dashboard",className:"flex-shrink-0 min-w-[110px] sm:min-w-0 min-h-[48px] flex items-center justify-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium transition-all",children:[h.jsx(ms,{className:"h-5 w-5 sm:h-4 sm:w-4"}),h.jsx("span",{className:"text-sm",children:"Dashboard"})]}),h.jsxs(ds,{value:"listings",className:"flex-shrink-0 min-w-[130px] sm:min-w-0 min-h-[48px] flex items-center justify-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium transition-all",children:[h.jsx(ue,{className:"h-5 w-5 sm:h-4 sm:w-4"}),h.jsx("span",{className:"text-sm",children:"Annonces"})]}),h.jsxs(ds,{value:"favorites",className:"flex-shrink-0 min-w-[100px] sm:min-w-0 min-h-[48px] flex items-center justify-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium transition-all",children:[h.jsx(as,{className:"h-5 w-5 sm:h-4 sm:w-4"}),h.jsx("span",{className:"text-sm",children:"Favoris"})]}),h.jsxs(ds,{value:"profile",className:"flex-shrink-0 min-w-[90px] sm:min-w-0 min-h-[48px] flex items-center justify-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium transition-all",children:[h.jsx(_e,{className:"h-5 w-5 sm:h-4 sm:w-4"}),h.jsx("span",{className:"text-sm",children:"Profil"})]}),h.jsxs(ds,{value:"security",className:"flex-shrink-0 min-w-[110px] sm:min-w-0 min-h-[48px] flex items-center justify-center gap-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground font-medium transition-all",children:[h.jsx(ls,{className:"h-5 w-5 sm:h-4 sm:w-4"}),h.jsx("span",{className:"text-sm",children:"SÃ©curitÃ©"})]})]})}),h.jsxs(us,{value:"dashboard",className:"space-y-6",children:[i?h.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[...[,,,,]].map(((e,s)=>h.jsx(U,{},s)))}):h.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[h.jsx(Or,{title:"Annonces Actives",value:A.activeListings,icon:ue,color:"blue"}),h.jsx(Or,{title:"Total des Vues",value:A.totalViews.toLocaleString(),icon:Qe,color:"green"}),h.jsx(Or,{title:"Contacts ReÃ§us",value:A.totalContacts,icon:Ye,color:"purple"}),h.jsx(Or,{title:"Messages Non Lus",value:A.unreadMessages,icon:xs,color:"orange"})]}),h.jsx("div",{className:"grid grid-cols-1 gap-6",children:h.jsx(Br,{stats:A})})]}),h.jsxs(us,{value:"listings",className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Mes Annonces"}),h.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez vos annonces publiÃ©es"})]}),h.jsx(oe,{asChild:!0,className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-white min-h-[44px] w-full sm:w-auto",children:h.jsxs(b,{to:"/creer-annonce",className:"flex items-center justify-center",children:[h.jsx(ts,{className:"h-5 w-5 sm:h-4 sm:w-4 mr-2"}),"Nouvelle Annonce"]})})]}),i?h.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:[...[,,,,,,]].map(((e,s)=>h.jsx($,{},s)))}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:(()=>{const e=(D-1)*V,s=e+V;return v.slice(e,s)})().map((e=>h.jsx($r,{listing:e,onEdit:Y,onDelete:Z,onRefresh:se,onBoost:ee,showActions:!0},e.id)))}),h.jsx(B,{currentPage:D,totalPages:R,onPageChange:e=>{I(e)},hasNextPage:R>D,hasPrevPage:D>1,isLoading:i})]})]}),h.jsxs(us,{value:"favorites",className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Mes Favoris"}),h.jsx("p",{className:"text-muted-foreground",children:"Annonces que vous avez sauvegardÃ©es"})]})}),h.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4 md:gap-6",children:C.map((e=>h.jsx($r,{listing:e,showActions:!1},e.id)))})]}),h.jsxs(us,{value:"profile",className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Informations du profil"}),h.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez vos informations personnelles"})]})}),h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"ParamÃ¨tres du profil"}),h.jsx(Re,{children:"GÃ©rez vos informations personnelles et vos prÃ©fÃ©rences"})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:J((e=>x(null,null,(function*(){try{u(!0),yield js.updateProfile(e),l({title:"Profil mis Ã  jour",description:"Vos informations ont Ã©tÃ© mises Ã  jour avec succÃ¨s."})}catch(s){l({title:"Erreur",description:s.message,variant:"destructive"})}finally{u(!1)}})))),className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"firstName",children:"PrÃ©nom"}),h.jsxs("div",{className:"relative",children:[h.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"firstName",inputMode:"text",autoComplete:"given-name",className:"pl-10 h-12"},K("firstName",{required:"Le prÃ©nom est requis"})))]}),Q.firstName&&h.jsx("p",{className:"text-sm text-destructive",children:Q.firstName.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"lastName",children:"Nom"}),h.jsxs("div",{className:"relative",children:[h.jsx(_e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"lastName",inputMode:"text",autoComplete:"family-name",className:"pl-10 h-12"},K("lastName",{required:"Le nom est requis"})))]}),Q.lastName&&h.jsx("p",{className:"text-sm text-destructive",children:Q.lastName.message})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"email",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"email",type:"email",inputMode:"email",autoComplete:"email",className:"pl-10 h-12"},K("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),Q.email&&h.jsx("p",{className:"text-sm text-destructive",children:Q.email.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"phoneNumber",children:"TÃ©lÃ©phone"}),h.jsxs("div",{className:"relative",children:[h.jsx(ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"phoneNumber",type:"tel",inputMode:"tel",autoComplete:"tel",className:"pl-10 h-12"},K("phoneNumber",{pattern:{value:/^\+?[1-9]\d{1,14}$/,message:"NumÃ©ro de tÃ©lÃ©phone invalide"}})))]}),Q.phoneNumber&&h.jsx("p",{className:"text-sm text-destructive",children:Q.phoneNumber.message})]}),h.jsx(oe,{type:"submit",className:"w-full min-h-[48px]",disabled:m,children:m?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Mise Ã  jour en cours..."]}):"Mettre Ã  jour le profil"})]})})]})]}),h.jsxs(us,{value:"security",className:"space-y-6",children:[h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold",children:"SÃ©curitÃ©"}),h.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez la sÃ©curitÃ© de votre compte"})]})}),h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Changer le mot de passe"}),h.jsx(Re,{children:"Assurez-vous d'utiliser un mot de passe fort et unique"})]}),h.jsx(Oe,{children:h.jsxs("form",{onSubmit:J((e=>x(null,null,(function*(){try{u(!0),yield js.updatePassword(e.newPassword),l({title:"Mot de passe mis Ã  jour",description:"Votre mot de passe a Ã©tÃ© changÃ© avec succÃ¨s."})}catch(s){l({title:"Erreur",description:s.message,variant:"destructive"})}finally{u(!1)}})))),className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"currentPassword",type:"password",autoComplete:"current-password",className:"pl-10 h-12"},K("currentPassword",{required:"Le mot de passe actuel est requis"})))]}),Q.currentPassword&&h.jsx("p",{className:"text-sm text-destructive",children:Q.currentPassword.message})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ue,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,c({id:"newPassword",type:"password",autoComplete:"new-password",className:"pl-10 h-12"},K("newPassword",{required:"Le nouveau mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"}})))]}),Q.newPassword&&h.jsx("p",{className:"text-sm text-destructive",children:Q.newPassword.message})]}),h.jsx(oe,{type:"submit",className:"w-full min-h-[48px]",disabled:m,children:m?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Mise Ã  jour en cours..."]}):"Changer le mot de passe"})]})})]}),h.jsx("div",{className:"mt-6",children:h.jsxs(oe,{onClick:()=>x(null,null,(function*(){try{if(!(yield n()))throw Error("Ã‰chec de la dÃ©connexion");l({title:"DÃ©connexion rÃ©ussie",description:"Vous avez Ã©tÃ© dÃ©connectÃ© avec succÃ¨s."}),o("/")}catch(e){l({title:"Erreur de dÃ©connexion",description:e.message||"Une erreur est survenue lors de la dÃ©connexion",variant:"destructive"})}})),variant:"destructive",className:"w-full min-h-[48px]",children:[h.jsx(we,{className:"mr-2 h-5 w-5"}),"Se dÃ©connecter"]})})]})]})]}),h.jsx(H,{isOpen:E.isOpen,onClose:()=>L({isOpen:!1,item:null}),onConfirm:()=>x(null,null,(function*(){try{const e=E.item;yield hs.deleteListing(e.id);const s=v.filter((s=>s.id!==e.id));y(s),l({title:"Annonce supprimÃ©e",description:`"${e.title}" a Ã©tÃ© supprimÃ©e`}),L({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible de supprimer l'annonce",variant:"destructive"})}})),itemName:null==(e=E.item)?void 0:e.title,isLoading:m}),h.jsx(W,{isOpen:z.isOpen,onClose:()=>M({isOpen:!1,item:null}),onConfirm:()=>x(null,null,(function*(){try{const e=z.item;o("/editer-annonce/"+e.id),M({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible de modifier l'annonce",variant:"destructive"})}})),itemName:null==(s=z.item)?void 0:s.title,isLoading:m}),h.jsx(X,{isOpen:T.isOpen,onClose:()=>_({isOpen:!1,item:null}),onConfirm:()=>x(null,null,(function*(){try{const e=T.item;yield hs.updateListing(e.id,{updated_at:(new Date).toISOString()}),l({title:"Annonce actualisÃ©e",description:`"${e.title}" a Ã©tÃ© actualisÃ©e`}),_({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible d'actualiser l'annonce",variant:"destructive"})}})),itemName:null==(t=T.item)?void 0:t.title,isLoading:m}),h.jsx(G,{isOpen:q.isOpen,onClose:()=>F({isOpen:!1,item:null}),onConfirm:()=>x(null,null,(function*(){try{const e=q.item;yield hs.updateListing(e.id,{boosted:!e.boosted});const s=v.map((s=>s.id===e.id?d(c({},s),{boosted:!s.boosted}):s));y(s),l({title:"Annonce boostÃ©e",description:`"${e.title}" a Ã©tÃ© boostÃ©e`}),F({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible de booster l'annonce",variant:"destructive"})}})),itemName:null==(a=q.item)?void 0:a.title,isLoading:m})]})},Wr=()=>{const e=f();return p.useEffect((()=>{x(null,null,(function*(){try{const{data:{session:s}}=yield le.auth.getSession();(null==s?void 0:s.user)?e("/",{replace:!0}):e("/connexion",{replace:!0})}catch(s){e("/connexion",{replace:!0})}}))}),[e]),h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"flex items-center text-muted-foreground",children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Traitement de la confirmation..."]})})},Xr=(e=null,s={})=>{const t=T(),{user:a}=ie(),[r,i]=p.useState(new Set);p.useEffect((()=>{a&&n()}),[a]);const n=()=>x(null,null,(function*(){try{const e=yield ps.getUserFavoritesWithStatus();i(e)}catch(e){}})),{data:l,fetchNextPage:o,hasNextPage:m,isFetchingNextPage:u,isLoading:h,error:g,refetch:j}=_({queryKey:["listings",e,s],queryFn:({pageParam:t=0})=>{const a=c({status:"approved",category:e,search:s.search,minPrice:s.minPrice,maxPrice:s.maxPrice,location:s.location,page:t,limit:12},s);return hs.getAllListings(a)},getNextPageParam:(e,s)=>e.hasMore?s.length:void 0,staleTime:Ja.staleTime,gcTime:Ja.gcTime,keepPreviousData:!0}),v=q({mutationFn:e=>{if(!a)throw Error("Vous devez Ãªtre connectÃ© pour crÃ©er une annonce");return hs.createListing(d(c({},e),{user_id:a.id,status:"pending"}))},onSuccess:()=>{t.invalidateQueries(["listings"])}}),f=q({mutationFn:({id:e,updates:s})=>hs.updateListing(e,s),onSuccess:(e,s)=>{t.setQueryData(["listings"],(e=>e?d(c({},e),{pages:e.pages.map((e=>d(c({},e),{data:e.data.map((e=>e.id===s.id?c(c({},e),s.updates):e))})))}):e))}}),b=q({mutationFn:e=>hs.deleteListing(e),onSuccess:(e,s)=>{t.setQueryData(["listings"],(e=>e?d(c({},e),{pages:e.pages.map((e=>d(c({},e),{data:e.data.filter((e=>e.id!==s))})))}):e))}}),y=q({mutationFn:e=>x(null,null,(function*(){if(!a)throw Error("Vous devez Ãªtre connectÃ© pour ajouter aux favoris");const s=yield ps.toggleFavorite(e);return i((t=>{const a=new Set(t);return s.is_favorite?a.add(e):a.delete(e),a})),s})),onSuccess:(e,s)=>{t.setQueryData(["listings"],(t=>t?d(c({},t),{pages:t.pages.map((t=>d(c({},t),{data:t.data.map((t=>t.id===s?d(c({},t),{is_favorite:e.is_favorite}):t))})))}):t)),t.invalidateQueries(["favorites"]),t.invalidateQueries(["userStats"])},onError:(e,s)=>{i((e=>{const t=new Set(e);return r.has(s)?t.delete(s):t.add(s),t}))}});return{listings:((null==l?void 0:l.pages.flatMap((e=>e.data)))||[]).map((e=>d(c({},e),{is_favorite:r.has(e.id)}))),loading:h,error:g,hasMore:m,isFetchingMore:u,loadMore:o,refresh:j,createListing:v.mutate,updateListing:f.mutate,deleteListing:b.mutate,toggleFavorite:y.mutate,isCreating:v.isLoading,isUpdating:f.isLoading,isDeleting:b.isLoading,isTogglingFavorite:y.isLoading,isFavorite:e=>r.has(e),favoriteIds:r,loadUserFavorites:n}},Gr=(e=[],s={})=>{const{batchSize:t=3,delay:a=100,priority:r="medium",onProgress:i=null,onComplete:n=null,onError:l=null}=s,[o,m]=p.useState({loaded:new Set,loading:new Set,errors:new Set,progress:0,isComplete:!1}),u=p.useRef(0),h=p.useRef(null),g=p.useCallback((e=>new Promise(((s,t)=>{const a=new Image;a.onload=()=>{m((s=>d(c({},s),{loaded:new Set([...s.loaded,e]),loading:new Set([...s.loading].filter((s=>s!==e)))}))),s(e)},a.onerror=()=>{m((s=>d(c({},s),{errors:new Set([...s.errors,e]),loading:new Set([...s.loading].filter((s=>s!==e)))}))),t(Error("Failed to load image: "+e))},a.src=e}))),[]),j=p.useCallback((e=>x(null,null,(function*(){m((s=>d(c({},s),{loading:new Set([...s.loading,...e])})));try{yield Promise.allSettled(e.map(g))}catch(s){}}))),[g]),v=p.useCallback((()=>{0!==e.length&&(m({loaded:new Set,loading:new Set,errors:new Set,progress:0,isComplete:!1}),u.current=0,x(null,null,(function*(){const s=[];for(let a=0;a<e.length;a+=t)s.push(e.slice(a,a+t));for(const t of s){yield j(t);const r=o.loaded.size+t.length,n=Math.min(r/e.length*100,100);m((e=>d(c({},e),{progress:n}))),i&&i(n,r,e.length),t!==s[s.length-1]&&(yield new Promise((e=>{h.current=setTimeout(e,a)})))}m((e=>d(c({},e),{isComplete:!0}))),n&&n(o.loaded.size,o.errors.size)})))}),[e,t,a,j,i,n,o.loaded.size,o.errors.size]);p.useEffect((()=>(e.length>0&&v(),()=>{h.current&&clearTimeout(h.current)})),[e,v]);const f=p.useCallback((e=>o.loaded.has(e)),[o.loaded]),b=p.useCallback((e=>o.loading.has(e)),[o.loading]),y=p.useCallback((e=>o.errors.has(e)),[o.errors]),N=p.useCallback((()=>{const e=Array.from(o.errors);e.length>0&&j(e)}),[o.errors,j]);return d(c({},o),{isImageLoaded:f,isImageLoading:b,isImageError:y,retryFailedImages:N,startPreloading:v})},Kr=(e,s="gallery",t="medium")=>{if(!e)return e;if(e.includes("unsplash.com")||e.includes("cloudinary.com"))return e;const a={hero:{width:1920,height:1080,quality:85,format:"webp"},gallery:{width:800,height:600,quality:80,format:"webp"},thumbnail:{width:400,height:300,quality:75,format:"webp"},avatar:{width:150,height:150,quality:80,format:"webp"}},r=a[s]||a.gallery;if(e.startsWith("/")||e.startsWith("./")||e.startsWith("../"))return e;try{const s=new URL(e);if(s.hostname.includes("unsplash.com"))return s.searchParams.set("w",r.width),s.searchParams.set("h",r.height),s.searchParams.set("q",r.quality),s.searchParams.set("auto","format"),s.searchParams.set("fit","crop"),s.toString();if(s.hostname.includes("cloudinary.com")){const e=s.pathname.split("/"),t=e.findIndex((e=>"upload"===e));if(-1!==t)return e.splice(t+1,0,`f_${r.format},q_${r.quality},w_${r.width},h_${r.height},c_fill`),s.pathname=e.join("/"),s.toString()}return e}catch(i){return e}},Jr=e=>{const s=p.useMemo((()=>{if((null==e?void 0:e.images)&&e.images.length>0){const s=e.images.map((e=>"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.file)?URL.createObjectURL(e.file):(null==e?void 0:e.src)?e.src:(null==e?void 0:e.displayUrl)?e.displayUrl:null)).filter(Boolean);if(s.length>0)return s}const s={real_estate:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop"],automobile:["https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=600&fit=crop"],services:["https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop"],marketplace:["https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop"]};let t=null==e?void 0:e.category;return t&&(t={immobilier:"real_estate",automobile:"automobile",services:"services",marketplace:"marketplace"}[t.toLowerCase()]||t),((e,s="gallery",t="medium")=>Array.isArray(e)?e.map((e=>Kr(e,s,t))):[])(s[t]||s.marketplace,"gallery","medium")}),[null==e?void 0:e.images,null==e?void 0:e.category]),t=p.useMemo((()=>s[0]),[s]),a=p.useMemo((()=>s.length>1),[s]);return{images:s,mainImage:t,hasMultipleImages:a,imageCount:s.length}},Qr=({listingId:e,listing:s,size:t="default",showActions:a=!0,className:r=""})=>{var i;const{user:n}=ie(),l=f(),{toast:o}=Me(),[c,d]=p.useState(null),[m,u]=p.useState(!1),[g,j]=p.useState(!1);p.useEffect((()=>{e&&n&&v()}),[e,n]);const v=()=>x(null,null,(function*(){try{u(!0);const s=yield fs.getBoostStatus(e);d(s)}catch(s){}finally{u(!1)}})),b=(()=>{if(!(null==c?void 0:c.hasActiveBoost))return{icon:h.jsx(rs,{className:"h-4 w-4"}),label:"Non boostÃ©",color:"secondary",description:"Aucun boost actif"};const e=c.currentBoost,s=new Date,t=new Date(e.end_date),a=Math.ceil((t-s)/864e5);return a>0?a>3?a>7?{icon:h.jsx(Ss,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"default",description:"Boost actif"}:{icon:h.jsx(Ze,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"default",description:"Boost actif"}:{icon:h.jsx(Cs,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"destructive",description:"Boost expire bientÃ´t"}:{icon:h.jsx(Cs,{className:"h-4 w-4"}),label:"ExpirÃ©",color:"secondary",description:"Boost expirÃ©"}})(),y=(e=>{switch(e){case"small":return"text-xs px-2 py-1";case"large":return"text-sm px-3 py-1.5";default:return"text-xs px-2.5 py-1"}})(t),N=(e=>{switch(e){case"small":return"h-3 w-3";case"large":return"h-5 w-5";default:return"h-4 w-4"}})(t);return n&&s?n.id!==s.user_id?null:h.jsx(bs,{children:h.jsxs("div",{className:"flex items-center gap-2 "+r,children:[h.jsxs(ys,{children:[h.jsx(Ns,{asChild:!0,children:h.jsx(We,{variant:b.color,className:y+" cursor-help transition-all duration-200 hover:scale-105",children:h.jsxs("div",{className:"flex items-center gap-1",children:[b.icon,h.jsx("span",{className:"hidden sm:inline",children:b.label})]})})}),h.jsxs(ws,{children:[h.jsx("p",{children:b.description}),(null==c?void 0:c.hasActiveBoost)&&c.currentBoost&&h.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Package: ",null==(i=c.currentBoost.boost_packages)?void 0:i.name]})]})]}),a&&(null==c?void 0:c.hasActiveBoost)&&c.currentBoost&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs(ys,{children:[h.jsx(Ns,{asChild:!0,children:h.jsx(oe,{onClick:()=>x(null,null,(function*(){if(null==c?void 0:c.currentBoost)try{j(!0),(yield fs.renewBoost(c.currentBoost.id,n.id)).success&&(o({title:"Boost renouvelÃ© !",description:"Votre boost a Ã©tÃ© prolongÃ© avec succÃ¨s."}),v())}catch(e){o({title:"Erreur",description:e.message||"Erreur lors du renouvellement",variant:"destructive"})}finally{j(!1)}})),disabled:g,variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-primary/10",children:h.jsx(ce,{className:N+" text-primary"})})}),h.jsx(ws,{children:h.jsx("p",{children:"Renouveler le boost"})})]}),h.jsxs(ys,{children:[h.jsx(Ns,{asChild:!0,children:h.jsx(oe,{onClick:()=>x(null,null,(function*(){if((null==c?void 0:c.currentBoost)&&confirm("ÃŠtes-vous sÃ»r de vouloir annuler ce boost ?"))try{j(!0),(yield fs.cancelBoost(c.currentBoost.id,n.id)).success&&(o({title:"Boost annulÃ©",description:"Votre boost a Ã©tÃ© annulÃ© avec succÃ¨s."}),v())}catch(e){o({title:"Erreur",description:e.message||"Erreur lors de l'annulation",variant:"destructive"})}finally{j(!1)}})),disabled:g,variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-destructive/10",children:h.jsx(ks,{className:N+" text-destructive"})})}),h.jsx(ws,{children:h.jsx("p",{children:"Annuler le boost"})})]}),h.jsxs(ys,{children:[h.jsx(Ns,{asChild:!0,children:h.jsx(oe,{onClick:()=>l("/booster-annonce/"+e),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-500/10",children:h.jsx(ms,{className:N+" text-blue-500"})})}),h.jsx(ws,{children:h.jsx("p",{children:"Voir les dÃ©tails et analytics"})})]})]}),a&&!(null==c?void 0:c.hasActiveBoost)&&h.jsxs(ys,{children:[h.jsx(Ns,{asChild:!0,children:h.jsx(oe,{onClick:()=>l("/booster-annonce/"+e),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-primary/10",children:h.jsx(Ze,{className:N+" text-primary"})})}),h.jsx(ws,{children:h.jsx("p",{children:"Booster cette annonce"})})]}),m&&h.jsx(Ht.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),g&&h.jsx(Ht.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-green-500 border-t-transparent rounded-full"})]})}):null},Yr=({listing:e,onToggleFavorite:s,showActions:t=!0})=>{var a,r;const{user:i}=ie(),n=f(),{images:l}=Jr(e),[o,c]=p.useState(e.is_favorite||!1),[d,m]=p.useState(!1),u=e=>{const s="text-xs px-1 py-0.5 sm:px-2 sm:py-1 md:px-3 md:py-1.5 inline-flex items-center whitespace-nowrap";switch(e){case"approved":return h.jsx(We,{variant:"default",className:"badge-approved "+s,children:"ApprouvÃ©"});case"pending":return h.jsx(We,{variant:"secondary",className:s,children:"En attente"});case"rejected":return h.jsx(We,{variant:"destructive",className:s,children:"RejetÃ©"});default:return h.jsx(We,{variant:"outline",className:s,children:e})}};g.useEffect((()=>{c(e.is_favorite||!1)}),[e.is_favorite]);const j=e.featured||e.boosted||e.is_premium||e.premium;return h.jsxs(Ht.div,{whileHover:{y:-4},className:qe("group rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden",j?"bg-gradient-to-br from-amber-50/50 to-yellow-100/50 border-2 border-amber-300/50 shadow-amber-200/50":"bg-card border border-border/50"),onClick:()=>{e.id&&n("/annonce/"+e.id)},children:[h.jsxs("div",{className:"relative h-40 sm:h-48 md:h-56 bg-muted overflow-hidden",children:[h.jsx(Ur,{images:l,title:e.title,className:"h-full"}),h.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 sm:flex-row sm:gap-2 items-start",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(We,{variant:"secondary",className:"bg-black/70 text-white text-xs px-1 py-0.5 sm:px-2 sm:py-1 md:px-3 md:py-1.5 inline-flex items-center whitespace-nowrap",children:h.jsxs("span",{className:"inline-flex items-center",children:[(e=>{switch(e){case"real_estate":return"ðŸ ";case"automobile":return"ðŸš—";case"services":return"ðŸ”§";case"marketplace":return"ðŸ›ï¸";default:return"ðŸ“‹"}})(e.category)," ","real_estate"===e.category?"Immobilier":"automobile"===e.category?"Automobile":"services"===e.category?"Services":"Marketplace"]})}),"approved"===e.status&&j?h.jsx("span",{className:"hidden sm:inline-flex",children:u(e.status)}):u(e.status)]})}),t&&h.jsx(Ht.button,{onClick:t=>x(null,null,(function*(){if(t.stopPropagation(),i){if(!d)try{m(!0),c(!o),s&&(yield s(e.id))}catch(a){c(!o)}finally{m(!1)}}else n("/connexion")})),disabled:d,className:`absolute top-2 right-2 p-1.5 sm:p-2 rounded-full transition-all duration-200 ${o?"bg-red-500 hover:bg-red-600 text-white":"bg-black/20 hover:bg-black/40 text-white"} ${d?"opacity-50 cursor-not-allowed":""}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:h.jsx(as,{className:"h-4 w-4 sm:h-5 sm:w-5 "+(o?"fill-current":"")})})]}),h.jsxs("div",{className:"p-2 sm:p-2.5 md:p-3",children:[h.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-0.5 truncate group-hover:text-primary transition-colors",children:e.title}),h.jsxs("div",{className:"flex items-center text-muted-foreground mb-0.5 sm:mb-1",children:[h.jsx(Ke,{className:"h-3 w-3 mr-1 flex-shrink-0"}),h.jsx("span",{className:"truncate text-xs sm:text-sm",children:e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:(null==(a=e.location)?void 0:a.city)||(null==(r=e.location)?void 0:r.country)||"Localisation non spÃ©cifiÃ©e"})]}),h.jsx("div",{className:qe("text-lg sm:text-xl font-bold mb-1 sm:mb-1.5",j?"text-slate-800":"text-primary"),children:e.price?(b=e.price,((e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e))(b,e.currency||"XOF")):"Prix sur demande"}),j&&h.jsx("div",{className:"mb-1",children:h.jsx(We,{variant:"secondary",className:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-300 text-xs font-medium py-0.5 px-2",children:"â­ Premium"})}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mt-1",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Je,{className:"h-3 w-3 mr-1 flex-shrink-0"}),h.jsx("span",{className:"text-xs",children:e.created_at?(v=e.created_at,(e=>new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)))(new Date(v))):"Date inconnue"})]}),h.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.views_count>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx(Qe,{className:"h-3 w-3 mr-0.5 flex-shrink-0"}),h.jsx("span",{className:"text-xs",children:e.views_count})]}),e.favorites_count>0&&h.jsxs("div",{className:"flex items-center",children:[h.jsx(as,{className:"h-3 w-3 mr-0.5 flex-shrink-0"}),h.jsx("span",{className:"text-xs",children:e.favorites_count})]})]})]}),h.jsx(Qr,{listingId:e.id,listing:e,size:"small",showActions:t,className:"mt-1 pt-1 border-t border-border/20"})]})]});var v,b},Zr=({gradient:e,pattern:s="dots",className:t})=>h.jsxs("div",{className:qe("relative w-full h-full overflow-hidden",t),children:[h.jsx("div",{className:qe("absolute inset-0 bg-gradient-to-br",e)}),h.jsx("div",{className:"absolute inset-0 text-white",children:(()=>{switch(s){case"dots":return h.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",children:[h.jsx("defs",{children:h.jsx("pattern",{id:"dots",x:"0",y:"0",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:h.jsx("circle",{cx:"20",cy:"20",r:"2",fill:"currentColor"})})}),h.jsx("rect",{width:"100%",height:"100%",fill:"url(#dots)"})]});case"grid":return h.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-10",children:[h.jsx("defs",{children:h.jsx("pattern",{id:"grid",x:"0",y:"0",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:h.jsx("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"currentColor",strokeWidth:"1"})})}),h.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]});case"diagonal":return h.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-15",children:[h.jsx("defs",{children:h.jsx("pattern",{id:"diagonal",x:"0",y:"0",width:"30",height:"30",patternUnits:"userSpaceOnUse",patternTransform:"rotate(45)",children:h.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"30",stroke:"currentColor",strokeWidth:"2"})})}),h.jsx("rect",{width:"100%",height:"100%",fill:"url(#diagonal)"})]});case"waves":return h.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-20",children:[h.jsx("defs",{children:h.jsx("pattern",{id:"waves",x:"0",y:"0",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:h.jsx("path",{d:"M0 50 Q 25 25, 50 50 T 100 50",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),h.jsx("rect",{width:"100%",height:"100%",fill:"url(#waves)"})]});case"circles":return h.jsxs("svg",{className:"absolute inset-0 w-full h-full opacity-10",children:[h.jsx("defs",{children:h.jsx("pattern",{id:"circles",x:"0",y:"0",width:"80",height:"80",patternUnits:"userSpaceOnUse",children:h.jsx("circle",{cx:"40",cy:"40",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"2"})})}),h.jsx("rect",{width:"100%",height:"100%",fill:"url(#circles)"})]});case"mesh":return h.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[h.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-white/5 rounded-full blur-2xl"})]});default:return null}})()}),h.jsxs("div",{className:"absolute inset-0 opacity-30",children:[h.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-white/20 rounded-full blur-3xl animate-pulse"}),h.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-white/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),h.jsx("div",{className:"absolute top-1/2 left-1/3 w-48 h-48 bg-white/15 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}})]}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"})]}),ei=[{id:"slide-1",title:"Trouvez votre bien idÃ©al",subtitle:"Des milliers d'annonces immobiliÃ¨res Ã  dÃ©couvrir",category:"real_estate",categoryLabel:"Immobilier",categoryIcon:"ðŸ ",mockupType:"gradient-pattern",gradient:"from-blue-600 via-blue-500 to-cyan-500",pattern:"dots",ctaText:"Voir les annonces",ctaLink:"/marketplace/real-estate"},{id:"slide-2",title:"Votre voiture vous attend",subtitle:"Large sÃ©lection de vÃ©hicules d'occasion et neufs",category:"automobile",categoryLabel:"Automobile",categoryIcon:"ðŸš—",mockupType:"gradient-pattern",gradient:"from-green-600 via-green-500 to-emerald-500",pattern:"grid",ctaText:"DÃ©couvrir",ctaLink:"/marketplace/automobile"},{id:"slide-3",title:"Services professionnels",subtitle:"Trouvez le prestataire qu'il vous faut",category:"services",categoryLabel:"Services",categoryIcon:"ðŸ”§",mockupType:"gradient-pattern",gradient:"from-purple-600 via-purple-500 to-pink-500",pattern:"diagonal",ctaText:"Explorer",ctaLink:"/marketplace/services"},{id:"slide-4",title:"Marketplace gÃ©nÃ©rale",subtitle:"Des milliers d'articles Ã  petits prix",category:"marketplace",categoryLabel:"Marketplace",categoryIcon:"ðŸ›ï¸",mockupType:"gradient-pattern",gradient:"from-orange-600 via-orange-500 to-yellow-500",pattern:"waves",ctaText:"Parcourir",ctaLink:"/marketplace"},{id:"slide-5",title:"Vendre facilement",subtitle:"Publiez votre annonce en quelques clics",category:"general",categoryLabel:"Vendre",categoryIcon:"ðŸ’¼",mockupType:"gradient-pattern",gradient:"from-indigo-600 via-indigo-500 to-blue-500",pattern:"circles",ctaText:"CrÃ©er une annonce",ctaLink:"/creer-annonce"},{id:"slide-6",title:"DÃ©couvrez MaxiMarket",subtitle:"La plateforme de confiance pour acheter et vendre",category:"general",categoryLabel:"Ã€ propos",categoryIcon:"â­",mockupType:"gradient-pattern",gradient:"from-pink-600 via-rose-500 to-red-500",pattern:"mesh",ctaText:"En savoir plus",ctaLink:"/a-propos"}],si=e=>{switch(e){case"real_estate":return"bg-blue-500";case"automobile":return"bg-green-500";case"services":return"bg-purple-500";case"marketplace":return"bg-orange-500";default:return"bg-gray-500"}},ti=()=>{const e=f(),[s,t]=p.useState(0),[a,r]=p.useState(true),[i,n]=p.useState({hour:(new Date).getHours(),timeSlot:""});p.useEffect((()=>{const e=()=>{const e=(new Date).getHours();var s;n({hour:e,timeSlot:(s=e,s>=6&&12>s?"matin":s>=12&&18>s?"aprÃ¨s-midi":s>=18&&22>s?"soirÃ©e":"nuit")})};e();const s=setInterval(e,6e4);return()=>clearInterval(s)}),[]),p.useEffect((()=>{if(!a)return;const e=setInterval((()=>{t((e=>(e+1)%ei.length))}),8e3);return()=>clearInterval(e)}),[a]);const l=p.useCallback((()=>{r(!1)}),[]),o=p.useCallback((()=>{r(!0)}),[]),c=p.useCallback((e=>{t(e),r(!1),setTimeout((()=>r(!0)),3e3)}),[]);p.useCallback((s=>{e(s)}),[e]);const d=ei[s];return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:"\n  .hero-container {\n    position: relative;\n    height: 100vh;\n    overflow: hidden;\n  }\n  \n  .hero-content {\n    position: absolute;\n    inset: 0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    padding: 0 1rem 4rem;\n  }\n  \n  .hero-badges {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.75rem;\n    margin-bottom: 2rem;\n  }\n  \n  .hero-title {\n    font-size: clamp(2.5rem, 5vw, 4.5rem);\n    font-weight: 700;\n    line-height: 1.1;\n    margin-bottom: 1.5rem;\n  }\n  \n  .hero-subtitle {\n    font-size: clamp(1.125rem, 2.5vw, 1.5rem);\n    line-height: 1.6;\n    margin-bottom: 3rem;\n    max-width: 48rem;\n  }\n  \n  .hero-navigation {\n    position: absolute;\n    bottom: 2rem;\n    left: 50%;\n    transform: translateX(-50%);\n    display: flex;\n    gap: 0.75rem;\n    z-index: 50;\n  }\n\n\n  .hero-cta {\n    margin-top: 2rem;\n  }\n  \n  @media (max-width: 768px) {\n    .hero-content {\n      padding: 0 1rem 8rem;\n    }\n    \n    .hero-badges {\n      gap: 0.5rem;\n      margin-bottom: 1.5rem;\n    }\n    \n    .hero-title {\n      margin-bottom: 1rem;\n      font-size: clamp(2rem, 8vw, 3rem);\n    }\n    \n    .hero-subtitle {\n      margin-bottom: 2rem;\n      font-size: clamp(1rem, 4vw, 1.25rem);\n    }\n    \n    .hero-navigation {\n      bottom: 2rem;\n    }\n  }\n  \n  @media (max-width: 480px) {\n    .hero-content {\n      padding: 0 0.75rem 7rem;\n    }\n    \n    .hero-badges {\n      flex-direction: column;\n      gap: 0.75rem;\n      margin-bottom: 1rem;\n    }\n    \n    .hero-title {\n      margin-bottom: 0.75rem;\n      font-size: clamp(1.75rem, 10vw, 2.5rem);\n    }\n    \n    .hero-subtitle {\n      margin-bottom: 1.5rem;\n      font-size: clamp(0.9rem, 5vw, 1.1rem);\n    }\n    \n    .hero-navigation {\n      bottom: 1.5rem;\n    }\n  }\n"}),h.jsxs("div",{className:"hero-container",onMouseEnter:l,onMouseLeave:o,children:[h.jsx(Wt,{mode:"wait",children:h.jsx(Ht.div,{initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.05},transition:{duration:.8,ease:"easeInOut"},className:"absolute inset-0",children:h.jsx(Zr,{gradient:d.gradient,pattern:d.pattern})},d.id)}),h.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-[2px]"}),h.jsx("div",{className:"hero-content",children:h.jsxs("div",{className:"text-center relative z-10",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"hero-badges",children:[h.jsxs(We,{className:qe("text-white/90 border-0 text-sm px-4 py-2",si(d.category)),children:[h.jsx("span",{className:"mr-2",children:d.categoryIcon}),d.categoryLabel]}),h.jsxs(We,{variant:"outline",className:"text-white/90 border-white/30 text-sm px-4 py-2",children:[h.jsx(Cs,{className:"h-4 w-4 mr-2"}),i.timeSlot," â€¢ ",i.hour,"h"]})]},"badges-"+d.id),h.jsx(Ht.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.3},className:"hero-title text-white",children:d.title},"title-"+d.id),h.jsx(Ht.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.5},className:"hero-subtitle text-gray-100",children:d.subtitle},"subtitle-"+d.id),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.7},className:"w-full max-w-2xl px-4 mt-8 sm:mt-12",children:h.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=s.currentTarget.querySelector('input[name="q"]'),a=(null==t?void 0:t.value)||"",{section:r,params:i}=Jt(a),n=new URLSearchParams(i);e(`${"immobilier"===r?"/immobilier":"automobile"===r?"/automobile":"services"===r?"/services":"/marketplace"}?${n.toString()}`)},className:"relative",children:[h.jsx(Ae,{name:"q",type:"search",placeholder:"Que recherchez-vous sur MaxiMarket ?",className:"w-full py-3 px-4 sm:py-4 sm:px-6 pr-12 sm:pr-16 rounded-full text-base sm:text-lg bg-white/20 text-white placeholder-gray-300 border-2 border-white/30 focus:border-white focus:ring-2 focus:ring-white/50 focus:outline-none backdrop-blur-md h-12 sm:h-16 shadow-xl"}),h.jsx(oe,{type:"submit",size:"lg",className:"absolute right-1 sm:right-2 top-1/2 transform -translate-y-1/2 rounded-full bg-white/20 hover:bg-white/30 h-10 w-10 sm:h-12 sm:w-12 p-0 backdrop-blur-md border border-white/30",children:h.jsx(As,{className:"h-4 w-4 sm:h-6 sm:w-6 text-white"})})]})},"search-"+d.id)]})}),ei.length>1&&h.jsx("div",{className:"hero-navigation",children:ei.map(((e,t)=>h.jsx("button",{className:qe("w-3 h-3 rounded-full transition-all duration-300 cursor-pointer",t===s?"bg-white scale-110 shadow-lg":"bg-white/40 hover:bg-white/60 hover:scale-105"),onClick:()=>c(t),"aria-label":"Aller au slide "+(t+1)},t)))})]})]})},ai="homepage-hero-listings",ri="homepage-popular-listings",ii="homepage-premium-listings",ni="homepage-last-update",li=6e5,oi=()=>{const e=f(),{user:s}=ie(),{popularListings:t,premiumListings:a,loading:r,error:i}=(()=>{const[e,s]=p.useState([]),[t,a]=p.useState([]),[r,i]=p.useState([]),[n,l]=p.useState({hero:!0,popular:!1,premium:!1}),[o,u]=p.useState({hero:null,popular:null,premium:null}),h=((e=[])=>((e=[],s={})=>{const t=s,{maxImages:a=20,priority:r="medium"}=t,i=m(t,["maxImages","priority"]),n=e.slice(0,a).flatMap((e=>e.images&&Array.isArray(e.images)?e.images.map((e=>"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.src)?e.src:null)).filter(Boolean):[]));return Gr(n,d(c({},i),{priority:r}))})(e,{maxImages:6,priority:"high",batchSize:2,delay:50}))(e),g=p.useCallback((()=>{const e=Ps.get(ni);if(!e)return!1;const s=Date.now()-e;return li>s}),[]),j=p.useCallback((()=>{try{const e=Ps.get(ai),t=Ps.get(ri),r=Ps.get(ii);return!!(e&&t&&r)&&(s(e),a(t),i(r),!0)}catch(e){return!1}}),[]),v=p.useCallback(((e,s,t)=>{try{const a=Date.now();Ps.set(ai,e,li),Ps.set(ri,s,li),Ps.set(ii,t,li),Ps.set(ni,a,li)}catch(a){}}),[]),f=p.useCallback((()=>x(null,null,(function*(){var e;try{l((e=>d(c({},e),{hero:!0}))),u((e=>d(c({},e),{hero:null})));const e=yield Es.getHeroListings(6),t=(null==e?void 0:e.data)||[];return s(t),t}catch(t){const s="string"==typeof t?t:(null==t?void 0:t.message)||(null==(e=null==t?void 0:t.error)?void 0:e.message)||"Erreur lors du chargement des annonces hero";return u((e=>d(c({},e),{hero:s}))),[]}finally{l((e=>d(c({},e),{hero:!1})))}}))),[]),b=p.useCallback((()=>x(null,null,(function*(){var e;try{l((e=>d(c({},e),{popular:!0}))),u((e=>d(c({},e),{popular:null})));const e=yield Es.getTopViewedListings(6);return a(e||[]),e||[]}catch(s){const t="string"==typeof s?s:(null==s?void 0:s.message)||(null==(e=null==s?void 0:s.error)?void 0:e.message)||"Erreur lors du chargement des annonces populaires";return u((e=>d(c({},e),{popular:t}))),[]}finally{l((e=>d(c({},e),{popular:!1})))}}))),[]),y=p.useCallback((()=>x(null,null,(function*(){var e;try{l((e=>d(c({},e),{premium:!0}))),u((e=>d(c({},e),{premium:null})));const e=yield Es.getPremiumListings(10);return i((null==e?void 0:e.data)||[]),(null==e?void 0:e.data)||[]}catch(s){const t="string"==typeof s?s:(null==s?void 0:s.message)||(null==(e=null==s?void 0:s.error)?void 0:e.message)||"Erreur lors du chargement des annonces premium";return u((e=>d(c({},e),{premium:t}))),[]}finally{l((e=>d(c({},e),{premium:!1})))}}))),[]),N=p.useCallback((()=>x(null,null,(function*(){if(g()&&j())return void l({hero:!1,popular:!1,premium:!1});const e=yield f(),[s,t]=yield Promise.allSettled([b(),y()]);v(e,s.value||[],t.value||[])}))),[g,j,f,b,y,v]),w=p.useCallback((()=>x(null,null,(function*(){Ps.delete(ai),Ps.delete(ri),Ps.delete(ii),Ps.delete(ni),yield N()}))),[N]);return p.useEffect((()=>{N()}),[N]),p.useEffect((()=>{const e=setInterval((()=>{g()||N()}),6e5);return()=>clearInterval(e)}),[g,N]),{heroListings:e,popularListings:t,premiumListings:r,loading:n,error:o,forceRefresh:w,loadData:N,isCacheValid:g(),cacheStats:Ps.getStats(),imagePreloader:h}})(),n={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:.1*e,duration:.5,ease:"easeOut"}})},l=[{name:"Immobilier",icon:h.jsx(ue,{className:"h-10 w-10 mb-3 text-primary"}),path:"/immobilier",description:"Maisons, appartements, terrains."},{name:"Automobile",icon:h.jsx(Ls,{className:"h-10 w-10 mb-3 text-primary"}),path:"/automobile",description:"Voitures, motos, utilitaires."},{name:"Services Pro",icon:h.jsx(he,{className:"h-10 w-10 mb-3 text-primary"}),path:"/services",description:"Experts qualifiÃ©s Ã  votre service."},{name:"Marketplace",icon:h.jsx(pe,{className:"h-10 w-10 mb-3 text-primary"}),path:"/marketplace",description:"Produits neufs et d'occasion."}];return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-900 to-blue-900/20 text-foreground",children:[r.hero?h.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center text-white",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Chargement des annonces..."}),h.jsx("p",{className:"text-gray-300",children:"PrÃ©paration de votre expÃ©rience personnalisÃ©e"})]})}):i.hero?h.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center text-white",children:[h.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-2xl",children:"âš ï¸"})}),h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erreur de chargement"}),h.jsx("p",{className:"text-gray-300",children:i.hero})]})}):h.jsx(h.Fragment,{children:h.jsx(ti,{})}),h.jsx("section",{className:"py-16 md:py-24",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs(Ht.h2,{className:"text-3xl md:text-4xl font-bold text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["Explorez nos ",h.jsx("span",{className:"gradient-text",children:"Univers"})]}),h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:l.map(((s,t)=>h.jsxs(Ht.div,{custom:t,variants:n,initial:"hidden",animate:"visible",onClick:()=>{return t=s.path,void e(t);var t},className:"bg-card p-6 rounded-xl shadow-2xl hover:shadow-primary/40 transition-all duration-300 transform hover:-translate-y-2 flex flex-col items-center text-center glassmorphic-card border border-transparent hover:border-primary/50 cursor-pointer group",children:[s.icon,h.jsx("h3",{className:"text-xl font-semibold mb-2 group-hover:text-primary transition-colors",children:s.name}),h.jsx("p",{className:"text-muted-foreground text-sm mb-5 flex-grow group-hover:text-primary/80 transition-colors",children:s.description}),h.jsxs("div",{className:"w-full border border-primary/50 rounded-md px-3 py-2 text-primary group-hover:bg-primary group-hover:text-white transition-all duration-300 flex items-center justify-center",children:[h.jsx("span",{className:"text-sm",children:"DÃ©couvrir"}),h.jsx(Ee,{className:"ml-2 h-3 w-3 group-hover:translate-x-1 transition-transform flex-shrink-0"})]})]},s.name)))})]})}),h.jsx("section",{className:"py-16 md:py-24 bg-background/30",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs(Ht.h2,{className:"text-3xl md:text-4xl font-bold text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["â­ Annonces ",h.jsx("span",{className:"gradient-text",children:"Premium"})]}),i.premium&&h.jsx("p",{className:"text-center text-destructive mb-8",children:i.premium}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[r.premium&&!a.length&&Array.from({length:10}).map(((e,s)=>h.jsxs("div",{className:"bg-gradient-to-br from-amber-50/80 to-yellow-100/80 rounded-lg shadow-xl overflow-hidden glassmorphic-card border-2 border-amber-300/50",children:[h.jsx("div",{className:"h-40 sm:h-48 md:h-56 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 animate-pulse"}),h.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[h.jsx("div",{className:"h-6 w-3/4 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 rounded mb-3 animate-pulse"}),h.jsx("div",{className:"h-4 w-1/2 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 rounded mb-4 animate-pulse"}),h.jsx("div",{className:"h-10 w-1/3 bg-gradient-to-r from-amber-300/50 to-yellow-300/50 rounded animate-pulse"})]})]},s))),!r.premium&&0===a.length&&h.jsxs("div",{className:"col-span-full text-center py-16",children:[h.jsx("div",{className:"text-6xl mb-4",children:"â­"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce premium pour le moment"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Soyez le premier Ã  passer premium et boostez votre visibilitÃ© !"}),h.jsx(oe,{onClick:()=>e("/creer-annonce"),variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"CrÃ©er une Annonce Premium"})]}),a.slice(0,10).map((e=>h.jsx(Yr,{listing:e,showActions:!1},e.id)))]}),h.jsx("div",{className:"text-center mt-8",children:h.jsxs(oe,{size:"lg",variant:"default",className:"bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white shadow-lg",onClick:()=>e("/premium"),children:["Voir Toutes les Annonces Premium"," ",h.jsx(Ee,{className:"ml-2 h-5 w-5"})]})})]})}),h.jsx("section",{className:"py-4 md:py-5 bg-background/30",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-12",children:["ðŸ”¥ ",h.jsx("span",{className:"gradient-text",children:"Annonces Populaires"})]}),i.popular&&h.jsx("p",{className:"text-center text-destructive mb-8",children:i.popular}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[r.popular&&!t.length&&Array.from({length:6}).map(((e,s)=>h.jsxs("div",{className:"bg-card rounded-lg shadow-xl overflow-hidden glassmorphic-card border border-transparent",children:[h.jsx("div",{className:"h-40 sm:h-48 md:h-56 bg-muted animate-pulse"}),h.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[h.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-3 animate-pulse"}),h.jsx("div",{className:"h-4 w-1/2 bg-muted rounded mb-4 animate-pulse"}),h.jsx("div",{className:"h-10 w-1/3 bg-muted rounded animate-pulse"})]})]},s))),!r.popular&&0===t.length&&h.jsx("p",{className:"col-span-full text-center text-muted-foreground",children:"Aucune annonce populaire pour le moment."}),t.slice(0,6).map((e=>h.jsx(Yr,{listing:e,showActions:!1},e.id)))]}),h.jsx("div",{className:"text-center mt-12",children:h.jsxs(oe,{size:"lg",variant:"default",className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-primary-foreground",onClick:()=>e("/marketplace?sort=popular&per=24"),children:["Voir Toutes les Annonces ",h.jsx(Ee,{className:"ml-2 h-5 w-5"})]})})]})}),h.jsx("section",{className:"py-20 md:py-32",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6 text-center",children:[h.jsxs(Ht.h2,{className:"text-3xl md:text-4xl font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["PrÃªt Ã  ",h.jsx("span",{className:"gradient-text",children:"Rejoindre MaxiMarket"})," ?"]}),h.jsx(Ht.p,{className:"text-lg text-muted-foreground mb-10 max-w-xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"CrÃ©ez un compte, publiez votre premiÃ¨re annonce ou trouvez l'affaire parfaite en quelques clics."}),h.jsxs(Ht.div,{className:"space-y-4 sm:space-y-0 sm:flex sm:justify-center sm:space-x-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[h.jsx(oe,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground w-full sm:w-auto",onClick:()=>{s?e("/creer-annonce"):e("/connexion",{state:{from:"/creer-annonce"}})},children:"Publier une Annonce"}),h.jsx(oe,{size:"lg",variant:"outline",className:"w-full sm:w-auto",onClick:()=>e("/inscription"),children:"CrÃ©er un Compte"})]})]})})]})},ci=()=>{const{user:e}=ie(),s=f(),t=j(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",l=a.get("location")||"",[o,m]=p.useState({search:r,location:l,type:"",minPrice:i,maxPrice:n}),{listings:u,loading:g,error:v,hasMore:b,loadMore:y}=Xr("real_estate",o),{toggleFavorite:N}=(()=>{const{user:e}=ie(),s=T(),[t,a]=p.useState(new Set),{data:r,isLoading:i,error:n,refetch:l}=F({queryKey:["favorites",null==e?void 0:e.id],queryFn:()=>ps.getUserFavorites(),enabled:!!e,staleTime:3e5,gcTime:6e5}),{data:o,isLoading:m,error:u}=F({queryKey:["favoriteIds",null==e?void 0:e.id],queryFn:()=>ps.getUserFavoritesWithStatus(),enabled:!!e,staleTime:12e4,gcTime:3e5});p.useEffect((()=>{o&&a(o)}),[o]);const h=q({mutationFn:s=>x(null,null,(function*(){if(!e)throw Error("Vous devez Ãªtre connectÃ© pour ajouter aux favoris");const t=yield ps.toggleFavorite(s);return d(c({},t),{listingId:s})})),onMutate:r=>x(null,null,(function*(){yield s.cancelQueries(["favorites",null==e?void 0:e.id]),yield s.cancelQueries(["favoriteIds",null==e?void 0:e.id]);const i=s.getQueryData(["favorites",null==e?void 0:e.id]),n=s.getQueryData(["favoriteIds",null==e?void 0:e.id]),l=new Set(t);return l.has(r)?l.delete(r):l.add(r),a(l),s.setQueryData(["favoriteIds",null==e?void 0:e.id],l),{previousFavorites:i,previousIds:n,listingId:r}})),onSuccess:(t,a)=>{s.invalidateQueries(["favorites",null==e?void 0:e.id]),s.invalidateQueries(["favoriteIds",null==e?void 0:e.id]),s.invalidateQueries(["listings"]),s.invalidateQueries(["userStats"])},onError:(t,r,i)=>{(null==i?void 0:i.previousIds)&&(a(i.previousIds),s.setQueryData(["favoriteIds",null==e?void 0:e.id],i.previousIds))}}),g=e=>t.has(e),j=e=>{h.mutate(e)};return{favorites:r||[],favoriteIds:t,isLoading:i||m,error:n||u,isToggling:h.isLoading,isFavorite:g,toggleFavorite:j,addToFavorites:e=>{g(e)||j(e)},removeFromFavorites:e=>{g(e)&&j(e)},refreshFavorites:()=>{l()},totalFavorites:(null==r?void 0:r.length)||0,toggleFavoriteMutation:h}})(),w=(e,s)=>{m((t=>d(c({},t),{[e]:s})))},k=()=>{m({search:"",location:"",type:"",minPrice:"",maxPrice:""})};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-green-900/10 text-foreground py-12",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur de l'",h.jsx("span",{className:"gradient-text-emerald",children:"Immobilier"})," en Afrique de l'Ouest"]}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Appartements, maisons, terrains et locaux commerciaux. Trouvez votre prochaine propriÃ©tÃ© ou investissement ici."})]}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:h.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ae,{id:"search",type:"text",placeholder:"Entrez une ville, quartier, mots-clÃ©s...",value:o.search,onChange:e=>w("search",e.target.value),className:"pl-10"}),h.jsx(As,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),h.jsx(Ae,{id:"location",type:"text",placeholder:"Ville, rÃ©gion...",value:o.location,onChange:e=>w("location",e.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"minPrice",className:"block text-sm font-medium mb-1",children:"Prix min"}),h.jsx(Ae,{id:"minPrice",type:"number",placeholder:"0",value:o.minPrice,onChange:e=>w("minPrice",e.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"maxPrice",className:"block text-sm font-medium mb-1",children:"Prix max"}),h.jsx(Ae,{id:"maxPrice",type:"number",placeholder:"âˆž",value:o.maxPrice,onChange:e=>w("maxPrice",e.target.value)})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(oe,{type:"submit",className:"flex-1",children:[h.jsx(As,{className:"mr-2 h-4 w-4"}),"Rechercher"]}),h.jsx(oe,{type:"button",variant:"outline",onClick:k,children:h.jsx(zs,{className:"h-4 w-4"})})]})]})}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"text-center mb-12",children:h.jsx(oe,{onClick:()=>{s(e?"/creer-annonce/real-estate":"/connexion")},size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",children:"Publier une annonce immobiliÃ¨re"})}),g&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[h.jsx(ne,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des annonces..."})]}),v&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[h.jsx(Ms,{className:"h-12 w-12 text-destructive mb-4"}),h.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"string"==typeof v?v:(null==v?void 0:v.message)||"Une erreur est survenue"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(oe,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),h.jsx(oe,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!g&&u.length>0&&h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:u.map(((e,s)=>h.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:h.jsx(Yr,{listing:e,onToggleFavorite:N})},e.id)))}),!g&&!v&&0===u.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ "}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce trouvÃ©e"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucune annonce immobiliÃ¨re ne correspond Ã  vos critÃ¨res de recherche."}),h.jsx(oe,{onClick:k,variant:"outline",children:"Effacer les filtres"})]}),b&&u.length>0&&h.jsx("div",{className:"text-center mt-16",children:h.jsx(oe,{onClick:y,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:g,children:g?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):h.jsxs(h.Fragment,{children:["Charger plus d'annonces ",h.jsx(Ee,{className:"ml-2 h-5 w-5"})]})})}),u.length>0&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:h.jsxs("p",{className:"text-muted-foreground",children:[u.length," annonce",u.length>1?"s":""," immobiliÃ¨re",u.length>1?"s":""," trouvÃ©e",u.length>1?"s":""]})})]})})},di=()=>{const{user:e}=ie(),s=f(),t=j(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",l=a.get("location")||"",o=a.get("brand")||"",[m,u]=p.useState({search:r,location:l,brand:o,minPrice:i,maxPrice:n,year:"",fuel:""}),{listings:x,loading:g,error:v,hasMore:b,loadMore:y,toggleFavorite:N}=Xr("automobile",m),w=(e,s)=>{u((t=>d(c({},t),{[e]:s})))},k=()=>{u({search:"",location:"",brand:"",minPrice:"",maxPrice:"",year:"",fuel:""})};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-blue-900/10 text-foreground py-12",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur de l'",h.jsx("span",{className:"gradient-text-blue",children:"Automobile"})," en Afrique de l'Ouest"]}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Voitures, motos, utilitaires et piÃ¨ces dÃ©tachÃ©es. Trouvez votre prochain vÃ©hicule ou vendez le vÃ´tre ici."})]}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:h.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ae,{id:"search",type:"text",placeholder:"Marque, modÃ¨le, mots-clÃ©s...",className:"pl-10 h-12 text-base",value:m.search,onChange:e=>w("search",e.target.value)}),h.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),h.jsx(Ae,{id:"location",type:"text",placeholder:"Ville, rÃ©gion...",className:"h-12 text-base",value:m.location,onChange:e=>w("location",e.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium mb-1",children:"Marque"}),h.jsxs("select",{id:"brand",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:m.brand,onChange:e=>w("brand",e.target.value),children:[h.jsx("option",{value:"",children:"Toutes marques"}),h.jsx("option",{value:"Toyota",children:"Toyota"}),h.jsx("option",{value:"Peugeot",children:"Peugeot"}),h.jsx("option",{value:"Renault",children:"Renault"}),h.jsx("option",{value:"CitroÃ«n",children:"CitroÃ«n"}),h.jsx("option",{value:"Ford",children:"Ford"}),h.jsx("option",{value:"Volkswagen",children:"Volkswagen"}),h.jsx("option",{value:"BMW",children:"BMW"}),h.jsx("option",{value:"Mercedes",children:"Mercedes"}),h.jsx("option",{value:"Audi",children:"Audi"}),h.jsx("option",{value:"Honda",children:"Honda"}),h.jsx("option",{value:"Nissan",children:"Nissan"}),h.jsx("option",{value:"Hyundai",children:"Hyundai"}),h.jsx("option",{value:"Kia",children:"Kia"}),h.jsx("option",{value:"Autre",children:"Autre"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"year",className:"block text-sm font-medium mb-1",children:"AnnÃ©e"}),h.jsxs("select",{id:"year",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:m.year,onChange:e=>w("year",e.target.value),children:[h.jsx("option",{value:"",children:"Toutes annÃ©es"}),Array.from({length:25},((e,s)=>2024-s)).map((e=>h.jsx("option",{value:e,children:e},e)))]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"fuel",className:"block text-sm font-medium mb-1",children:"Carburant"}),h.jsxs("select",{id:"fuel",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:m.fuel,onChange:e=>w("fuel",e.target.value),children:[h.jsx("option",{value:"",children:"Tous carburants"}),h.jsx("option",{value:"essence",children:"Essence"}),h.jsx("option",{value:"diesel",children:"Diesel"}),h.jsx("option",{value:"hybride",children:"Hybride"}),h.jsx("option",{value:"electrique",children:"Ã‰lectrique"}),h.jsx("option",{value:"gpl",children:"GPL"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(oe,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[h.jsx(zs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),h.jsx(oe,{type:"button",variant:"outline",className:"h-12 px-3",onClick:k,children:"Effacer"})]})]})}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:h.jsx(oe,{onClick:()=>{s(e?"/creer-annonce/automobile":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"ðŸš— Publier une annonce automobile"})}),g&&0===x.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[h.jsx(ne,{className:"h-12 w-12 animate-spin text-primary mb-4"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des vÃ©hicules..."})]}),v&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[h.jsx(Ms,{className:"h-12 w-12 text-destructive mb-4"}),h.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"string"==typeof v?v:(null==v?void 0:v.message)||"Une erreur est survenue"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(oe,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),h.jsx(oe,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!g&&x.length>0&&h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:x.map(((e,s)=>h.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:h.jsx(Yr,{listing:e,onToggleFavorite:N})},e.id)))}),!g&&!v&&0===x.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸš—"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun vÃ©hicule trouvÃ©"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun vÃ©hicule ne correspond Ã  vos critÃ¨res de recherche."}),h.jsx(oe,{onClick:k,variant:"outline",children:"Effacer les filtres"})]}),b&&x.length>0&&h.jsx("div",{className:"text-center mt-16",children:h.jsx(oe,{onClick:y,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:g,children:g?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):h.jsxs(h.Fragment,{children:["Charger plus de vÃ©hicules ",h.jsx(Ee,{className:"ml-2 h-5 w-5"})]})})}),x.length>0&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:h.jsxs("p",{className:"text-muted-foreground",children:[x.length," vÃ©hicule",x.length>1?"s":""," trouvÃ©",x.length>1?"s":""]})})]})})},mi=()=>{const{user:e}=ie(),s=f(),t=j(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",l=a.get("location")||"",[o,m]=p.useState({search:r,location:l,serviceType:"",minPrice:i,maxPrice:n}),{listings:u,loading:x,error:g,hasMore:v,loadMore:b,toggleFavorite:y}=Xr("services",o),N=(e,s)=>{m((t=>d(c({},t),{[e]:s})))},w=()=>{m({search:"",location:"",serviceType:"",minPrice:"",maxPrice:""})};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-purple-900/10 text-foreground py-12",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur des ",h.jsx("span",{className:"gradient-text-purple",children:"Services"})," en Afrique de l'Ouest"]}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Plomberie, Ã©lectricitÃ©, cours particuliers, Ã©vÃ©nementiel et bien plus. Trouvez le service dont vous avez besoin."})]}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:h.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ae,{id:"search",type:"text",placeholder:"Type de service, mots-clÃ©s...",className:"pl-10 h-12 text-base",value:o.search,onChange:e=>N("search",e.target.value)}),h.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),h.jsx(Ae,{id:"location",type:"text",placeholder:"Ville, quartier...",className:"h-12 text-base",value:o.location,onChange:e=>N("location",e.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"service-type",className:"block text-sm font-medium mb-1",children:"Type de service"}),h.jsxs("select",{id:"service-type",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:o.serviceType,onChange:e=>N("serviceType",e.target.value),children:[h.jsx("option",{value:"",children:"Tous services"}),h.jsx("option",{value:"plomberie",children:"Plomberie"}),h.jsx("option",{value:"electricite",children:"Ã‰lectricitÃ©"}),h.jsx("option",{value:"menage",children:"MÃ©nage"}),h.jsx("option",{value:"jardinage",children:"Jardinage"}),h.jsx("option",{value:"education",children:"Ã‰ducation"}),h.jsx("option",{value:"informatique",children:"Informatique"}),h.jsx("option",{value:"coiffure",children:"Coiffure"}),h.jsx("option",{value:"beaute",children:"BeautÃ©"}),h.jsx("option",{value:"evenementiel",children:"Ã‰vÃ©nementiel"}),h.jsx("option",{value:"transport",children:"Transport"}),h.jsx("option",{value:"reparation",children:"RÃ©paration"}),h.jsx("option",{value:"conseil",children:"Conseil"}),h.jsx("option",{value:"autre",children:"Autre"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"price-range",className:"block text-sm font-medium mb-1",children:"Prix (FCFA)"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ae,{type:"number",placeholder:"Min",className:"h-12 text-base",value:o.minPrice,onChange:e=>N("minPrice",e.target.value)}),h.jsx(Ae,{type:"number",placeholder:"Max",className:"h-12 text-base",value:o.maxPrice,onChange:e=>N("maxPrice",e.target.value)})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(oe,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[h.jsx(zs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),h.jsx(oe,{type:"button",variant:"outline",className:"h-12 px-3",onClick:w,children:"Effacer"})]})]})}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:h.jsx(oe,{onClick:()=>{s(e?"/creer-annonce/services":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"ðŸ”§ Proposer un service"})}),x&&0===u.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[h.jsx(ne,{className:"h-12 w-12 animate-spin text-primary mb-4"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des services..."})]}),g&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[h.jsx(Ms,{className:"h-12 w-12 text-destructive mb-4"}),h.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"string"==typeof g?g:(null==g?void 0:g.message)||"Une erreur est survenue"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(oe,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),h.jsx(oe,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!x&&u.length>0&&h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:u.map(((e,s)=>h.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:h.jsx(Yr,{listing:e,onToggleFavorite:y})},e.id)))}),!x&&!g&&0===u.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”§"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun service trouvÃ©"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun service ne correspond Ã  vos critÃ¨res de recherche."}),h.jsx(oe,{onClick:w,variant:"outline",children:"Effacer les filtres"})]}),v&&u.length>0&&h.jsx("div",{className:"text-center mt-16",children:h.jsx(oe,{onClick:b,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:x,children:x?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):h.jsxs(h.Fragment,{children:["Charger plus de services ",h.jsx(Ee,{className:"ml-2 h-5 w-5"})]})})}),u.length>0&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:h.jsxs("p",{className:"text-muted-foreground",children:[u.length," service",u.length>1?"s":""," trouvÃ©",u.length>1?"s":""]})})]})})},ui=()=>{const{user:e}=ie(),s=f(),t=j(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("sort")||"",i=parseInt(a.get("per")||"12",10),n=a.get("search")||"",l=a.get("minPrice")||"",o=a.get("maxPrice")||"",m=a.get("location")||"",[u,x]=p.useState({search:n,location:m,category:"",minPrice:l,maxPrice:o,condition:"",sort:r,per:isNaN(i)?12:Math.min(Math.max(i,6),48)}),{listings:g,loading:v,error:b,hasMore:y,loadMore:N,toggleFavorite:w}=Xr("marketplace",u);p.useMemo((()=>"popular"===u.sort?[...g].sort(((e,s)=>((null==s?void 0:s.views_count)||0)-((null==e?void 0:e.views_count)||0))):g),[u.sort,g]);const k=(e,s)=>{x((t=>d(c({},t),{[e]:s})))},C=()=>{x({search:"",location:"",category:"",minPrice:"",maxPrice:"",condition:""})};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-orange-900/10 text-foreground py-12",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur ",h.jsx("span",{className:"gradient-text-orange",children:"Marketplace"})," en Afrique de l'Ouest"]}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"TÃ©lÃ©phones, vÃªtements, meubles, livres et bien plus. Achetez et vendez en toute sÃ©curitÃ©."})]}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:h.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),h.jsxs("div",{className:"relative",children:[h.jsx(Ae,{id:"search",type:"text",placeholder:"Produit, marque, mots-clÃ©s...",className:"pl-10 h-12 text-base",value:u.search,onChange:e=>k("search",e.target.value)}),h.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),h.jsx(Ae,{id:"location",type:"text",placeholder:"Ville, quartier...",className:"h-12 text-base",value:u.location,onChange:e=>k("location",e.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"CatÃ©gorie"}),h.jsxs("select",{id:"category",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:u.category,onChange:e=>k("category",e.target.value),children:[h.jsx("option",{value:"",children:"Toutes catÃ©gories"}),h.jsx("option",{value:"telephonie",children:"TÃ©lÃ©phonie"}),h.jsx("option",{value:"informatique",children:"Informatique"}),h.jsx("option",{value:"vetements",children:"VÃªtements"}),h.jsx("option",{value:"chaussures",children:"Chaussures"}),h.jsx("option",{value:"accessoires",children:"Accessoires"}),h.jsx("option",{value:"mobilier",children:"Mobilier"}),h.jsx("option",{value:"electromenager",children:"Ã‰lectromÃ©nager"}),h.jsx("option",{value:"livres",children:"Livres"}),h.jsx("option",{value:"sport",children:"Sport"}),h.jsx("option",{value:"beaute",children:"BeautÃ©"}),h.jsx("option",{value:"jouets",children:"Jouets"}),h.jsx("option",{value:"bricolage",children:"Bricolage"}),h.jsx("option",{value:"jardinage",children:"Jardinage"}),h.jsx("option",{value:"autre",children:"Autre"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium mb-1",children:"Ã‰tat"}),h.jsxs("select",{id:"condition",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:u.condition,onChange:e=>k("condition",e.target.value),children:[h.jsx("option",{value:"",children:"Tous Ã©tats"}),h.jsx("option",{value:"neuf",children:"Neuf"}),h.jsx("option",{value:"excellent",children:"Excellent"}),h.jsx("option",{value:"bon",children:"Bon"}),h.jsx("option",{value:"moyen",children:"Moyen"}),h.jsx("option",{value:"usage",children:"Usage"})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"price-range",className:"block text-sm font-medium mb-1",children:"Prix (FCFA)"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ae,{type:"number",placeholder:"Min",className:"h-12 text-base",value:u.minPrice,onChange:e=>k("minPrice",e.target.value)}),h.jsx(Ae,{type:"number",placeholder:"Max",className:"h-12 text-base",value:u.maxPrice,onChange:e=>k("maxPrice",e.target.value)})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(oe,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[h.jsx(zs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),h.jsx(oe,{type:"button",variant:"outline",className:"h-12 px-3",onClick:C,children:"Effacer"})]})]})}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:h.jsx(oe,{onClick:()=>{s(e?"/creer-annonce/marketplace":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"ðŸ›ï¸ Vendre un produit"})}),v&&0===g.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[h.jsx(ne,{className:"h-12 w-12 animate-spin text-primary mb-4"}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des produits..."})]}),b&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[h.jsx(Ms,{className:"h-12 w-12 text-destructive mb-4"}),h.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"string"==typeof b?b:(null==b?void 0:b.message)||"Une erreur est survenue"}),h.jsx("div",{className:"flex gap-3",children:h.jsx(oe,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"})})]}),!v&&g.length>0&&h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:g.map(((e,s)=>h.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:h.jsx(Yr,{listing:e,onToggleFavorite:w})},e.id)))}),!v&&!b&&0===g.length&&h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ›ï¸"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun produit trouvÃ©"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun produit ne correspond Ã  vos critÃ¨res de recherche."}),h.jsx(oe,{onClick:C,variant:"outline",children:"Effacer les filtres"})]}),y&&g.length>0&&h.jsx("div",{className:"text-center mt-16",children:h.jsx(oe,{onClick:N,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:v,children:v?h.jsxs(h.Fragment,{children:[h.jsx(ne,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):h.jsxs(h.Fragment,{children:["Charger plus de produits ",h.jsx(Ee,{className:"ml-2 h-5 w-5"})]})})}),g.length>0&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:h.jsxs("p",{className:"text-muted-foreground",children:[g.length," produit",g.length>1?"s":""," trouvÃ©",g.length>1?"s":""]})})]})})},xi=()=>{const e=f(),[s,t]=p.useState([]),[a,r]=p.useState(!0),[i,n]=p.useState(null),[l,o]=p.useState(1),[m,u]=p.useState(1),[g,j]=p.useState(!1),[v,b]=p.useState({category:"",minPrice:"",maxPrice:"",location:"",search:""}),y=(...e)=>x(null,[...e],(function*(e=1,s=v){try{r(!0),n(null);const a=yield hs.getPremiumListings(100,!0);if(null==a?void 0:a.data){let r=a.data;s.category&&(r=r.filter((e=>e.category===s.category))),s.minPrice&&(r=r.filter((e=>e.price>=parseFloat(s.minPrice)))),s.maxPrice&&(r=r.filter((e=>e.price<=parseFloat(s.maxPrice)))),s.location&&(r=r.filter((e=>{var t,a,r,i;return(null==(a=null==(t=e.location)?void 0:t.city)?void 0:a.toLowerCase().includes(s.location.toLowerCase()))||(null==(i=null==(r=e.location)?void 0:r.country)?void 0:i.toLowerCase().includes(s.location.toLowerCase()))}))),s.search&&(r=r.filter((e=>e.title.toLowerCase().includes(s.search.toLowerCase())||e.description.toLowerCase().includes(s.search.toLowerCase()))));const i=12,n=r.length,l=Math.ceil(n/i),c=(e-1)*i,d=c+i,m=r.slice(c,d);t(m),u(l),j(l>e),o(e)}}catch(a){n((null==a?void 0:a.message)||"Erreur lors du chargement des annonces premium")}finally{r(!1)}}));p.useEffect((()=>{y(1,v)}),[]);const N=(e,s)=>{const t=d(c({},v),{[e]:s});b(t),o(1),y(1,t)},w=()=>{const e={category:"",minPrice:"",maxPrice:"",location:"",search:""};b(e),y(1,e)},k=e=>{1>e||e>m||y(e,v)};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-900 to-blue-900/20",children:[h.jsx(Ht.section,{className:"relative py-16 md:py-24 bg-gradient-to-r from-amber-500/10 via-yellow-500/10 to-orange-500/10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[h.jsx("div",{className:"flex items-center mb-6",children:h.jsxs(oe,{variant:"ghost",onClick:()=>e(-1),className:"mr-4 hover:bg-amber-100",children:[h.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Retour"]})}),h.jsxs(Ht.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[h.jsxs("div",{className:"flex justify-center items-center mb-6",children:[h.jsx(_s,{className:"h-16 w-16 text-amber-500 mr-4"}),h.jsx(qs,{className:"h-12 w-12 text-yellow-500"})]}),h.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Annonces ",h.jsx("span",{className:"gradient-text",children:"Premium"})]}),h.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"DÃ©couvrez notre sÃ©lection exclusive d'annonces premium. QualitÃ© garantie, visibilitÃ© maximale."}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[h.jsxs(We,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-300",children:[h.jsx(rs,{className:"h-4 w-4 mr-2"}),"Mise en avant garantie"]}),h.jsxs(We,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[h.jsx(qs,{className:"h-4 w-4 mr-2"}),"QualitÃ© premium"]}),h.jsxs(We,{variant:"secondary",className:"bg-orange-100 text-orange-800 border-orange-300",children:[h.jsx(_s,{className:"h-4 w-4 mr-2"}),"Support prioritaire"]})]})]})]})}),h.jsx("section",{className:"py-8 bg-background/50",children:h.jsx("div",{className:"container mx-auto px-4 md:px-6",children:h.jsx(Ht.div,{className:"bg-card rounded-xl p-6 shadow-lg border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:h.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("form",{onSubmit:e=>{e.preventDefault(),y(1,v)},className:"relative",children:[h.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),h.jsx(Ae,{type:"text",placeholder:"Rechercher dans les annonces premium...",value:v.search,onChange:e=>N("search",e.target.value),className:"pl-10 pr-4 py-3"})]})}),h.jsxs("div",{className:"flex flex-wrap gap-4",children:[h.jsxs("select",{value:v.category,onChange:e=>N("category",e.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[h.jsx("option",{value:"",children:"Toutes catÃ©gories"}),[{value:"real_estate",label:"ðŸ  Immobilier",color:"bg-blue-100 text-blue-800"},{value:"automobile",label:"ðŸš— Automobile",color:"bg-green-100 text-green-800"},{value:"services",label:"ðŸ”§ Services",color:"bg-purple-100 text-purple-800"},{value:"marketplace",label:"ðŸ›ï¸ Marketplace",color:"bg-orange-100 text-orange-800"}].map((e=>h.jsx("option",{value:e.value,children:e.label},e.value)))]}),h.jsx(Ae,{type:"number",placeholder:"Prix min",value:v.minPrice,onChange:e=>N("minPrice",e.target.value),className:"w-32"}),h.jsx(Ae,{type:"number",placeholder:"Prix max",value:v.maxPrice,onChange:e=>N("maxPrice",e.target.value),className:"w-32"}),h.jsx(Ae,{type:"text",placeholder:"Localisation",value:v.location,onChange:e=>N("location",e.target.value),className:"w-40"}),h.jsxs(oe,{variant:"outline",onClick:w,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:[h.jsx(zs,{className:"h-4 w-4 mr-2"}),"Effacer"]})]})]})})})}),h.jsx("section",{className:"py-16",children:h.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[i&&h.jsx(Ht.div,{className:"text-center text-destructive mb-8 p-4 bg-destructive/10 rounded-lg",initial:{opacity:0},animate:{opacity:1},children:i}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?Array.from({length:9}).map(((e,s)=>h.jsxs(Ht.div,{className:"bg-card rounded-lg shadow-lg overflow-hidden border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:[h.jsx("div",{className:"h-48 bg-muted animate-pulse"}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-3 animate-pulse"}),h.jsx("div",{className:"h-4 w-1/2 bg-muted rounded mb-4 animate-pulse"}),h.jsx("div",{className:"h-8 w-1/3 bg-muted rounded animate-pulse"})]})]},s))):s.length>0?s.map(((e,s)=>h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:h.jsx(Yr,{listing:e,showActions:!1})},e.id))):h.jsxs(Ht.div,{className:"col-span-full text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[h.jsx("div",{className:"text-6xl mb-4",children:"â­"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce premium trouvÃ©e"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Essayez de modifier vos filtres ou revenez plus tard"}),h.jsx(oe,{onClick:w,variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Effacer les filtres"})]})}),!a&&m>1&&h.jsxs(Ht.div,{className:"flex justify-center items-center mt-12 gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[h.jsx(oe,{variant:"outline",onClick:()=>k(l-1),disabled:1===l,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"PrÃ©cÃ©dent"}),Array.from({length:m},((e,s)=>s+1)).map((e=>h.jsx(oe,{variant:l===e?"default":"outline",onClick:()=>k(e),className:l===e?"bg-amber-500 hover:bg-amber-600":"border-amber-300 text-amber-700 hover:bg-amber-100",children:e},e))),h.jsx(oe,{variant:"outline",onClick:()=>k(l+1),disabled:l===m,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Suivant"})]}),!a&&s.length>0&&h.jsx(Ht.div,{className:"text-center mt-8 text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:h.jsxs("p",{children:["Affichage de ",s.length," annonces premium",m>1&&` (page ${l} sur ${m})`]})})]})})]})},hi=[{value:"real_estate",label:"Immobilier"},{value:"automobile",label:"Automobile"},{value:"services",label:"Service"},{value:"marketplace",label:"Produit"}],pi={title:"",description:"",price:"",currency:"XOF",category:"",subCategory:"",location:{city:"",country:""},images:[],videos:[],specificData:{}},gi=({onSuccess:e,category:s,onDataChange:t,currentStep:a=1,onStepChange:r})=>{const{toast:i}=Me(),[n,l]=p.useState(d(c({},pi),{category:s?(o=s,{"real-estate":"real_estate",automobile:"automobile",services:"services",marketplace:"marketplace"}[o]||""):""}));var o;const[m,u]=p.useState(!1),[g,j]=p.useState(!1),[v,f]=p.useState({current:0,total:0}),[b,y]=p.useState(a);p.useEffect((()=>{y(a)}),[a]);const N=[{code:"BJ",name:"BÃ©nin",cities:["Cotonou","Porto-Novo","Parakou","Djougou","Bohicon","Kandi","Abomey","Natitingou","Ouidah","Lokossa"]},{code:"CI",name:"CÃ´te d'Ivoire",cities:["Abidjan","BouakÃ©","Daloa","Yamoussoukro","San Pedro","Korhogo","Man","Gagnoa","Abengourou","Divo"]},{code:"NG",name:"Nigeria",cities:["Lagos","Kano","Ibadan","Abuja","Port Harcourt","Benin City","Maiduguri","Zaria","Aba","Jos"]}],w=e=>{const{name:s,value:a}=e.target;if(s.startsWith("location.")){const e=s.split(".")[1];l((s=>d(c({},s),{location:d(c({},s.location),{[e]:a})})))}else l((e=>d(c({},e),{[s]:a})));t&&t({[s]:a})},k=e=>{const{name:s,value:t}=e.target;l((e=>d(c({},e),{specificData:d(c({},e.specificData),{[s]:t})})))},C=e=>new Promise((s=>{const t=new FileReader;t.onload=t=>{s({url:t.target.result,file:e,id:Date.now()+Math.random()})},t.readAsDataURL(e)})),S=e=>x(null,null,(function*(){const s=Array.from(e.target.files);if(s.length)if(8<n.images.length+s.length)i({title:"Limite atteinte",description:"Vous pouvez uploader jusqu'Ã  8 images maximum.",variant:"destructive"});else if(s.filter((e=>!e.type.startsWith("image/"))).length>0)i({title:"Type de fichier invalide",description:"Seules les images sont acceptÃ©es.",variant:"destructive"});else{j(!0),f({current:0,total:s.length});try{const e=yield Promise.all(s.map(C)),a=[...n.images,...e.map((e=>({url:e.url,isPreview:!0,id:e.id,file:e.file})))];l((e=>d(c({},e),{images:a}))),t&&t({images:a});const r=yield Promise.all(s.map((e=>((e,s=1920,t=.8)=>new Promise((a=>{const r=document.createElement("canvas"),i=r.getContext("2d"),n=new Image;n.onload=()=>{let{width:l,height:o}=n;l>s&&(o=o*s/l,l=s),r.width=l,r.height=o,i.drawImage(n,0,0,l,o),r.toBlob((s=>{const t=new File([s],e.name,{type:"image/jpeg",lastModified:Date.now()});a(t)}),"image/jpeg",t)},n.src=URL.createObjectURL(e)})))(e,1920,.8)))),o=(e,s)=>x(null,null,(function*(){const t=e.slice(s,s+3);return Promise.all(t.map(((t,a)=>x(null,null,(function*(){const r=s+a;try{const s=yield Is.uploadImage(t,"listings");return f({current:r+1,total:e.length}),{success:!0,url:s,index:r}}catch(i){return f({current:r+1,total:e.length}),{success:!1,error:i.message,index:r}}})))))})),m=[];for(let s=0;s<r.length;s+=3){const e=yield o(r,s);m.push(...e)}const u=m.filter((e=>e.success)),h=m.filter((e=>!e.success));if(u.length>0){const s=[...a];u.forEach((({url:t,index:a})=>{const r=s.findIndex((s=>s.isPreview&&s.id===e[a].id));-1!==r&&(s[r]={url:t,isPreview:!1})})),l((e=>d(c({},e),{images:s}))),t&&t({images:s}),i({title:"Images ajoutÃ©es",description:u.length+" image(s) tÃ©lÃ©chargÃ©e(s) avec succÃ¨s."})}h.length>0&&i({title:"Erreurs d'upload",description:`Erreurs pour ${h.length} fichier(s): ${h.map((e=>e.error)).join(", ")}`,variant:"destructive"})}catch(a){i({title:"Erreur upload",description:(null==a?void 0:a.message)||"Erreur lors de l'upload.",variant:"destructive"})}finally{j(!1),f({current:0,total:0})}}})),A=()=>{switch(n.category){case"real_estate":return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"propertyType",children:"Type de bien immobilier"}),h.jsx(Ae,{id:"propertyType",name:"propertyType",placeholder:"Ex: Appartement, Maison, Terrain, Local commercial...",value:n.specificData.propertyType||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"transactionType",children:"Type de transaction"}),h.jsx(Ae,{id:"transactionType",name:"transactionType",placeholder:"Ex: Vente, Location, Location-vente...",value:n.specificData.transactionType||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"bedrooms",children:"Nombre de chambres"}),h.jsx(Ae,{id:"bedrooms",name:"bedrooms",type:"number",placeholder:"Ex: 3",min:"0",value:n.specificData.bedrooms||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"bathrooms",children:"Nombre de salles de bain"}),h.jsx(Ae,{id:"bathrooms",name:"bathrooms",type:"number",placeholder:"Ex: 2",min:"0",value:n.specificData.bathrooms||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"areaSqMeters",children:"Surface en mÃ¨tres carrÃ©s"}),h.jsx(Ae,{id:"areaSqMeters",name:"areaSqMeters",type:"number",placeholder:"Ex: 120",min:"1",value:n.specificData.areaSqMeters||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{children:"CommoditÃ©s et Ã©quipements"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ajoutez les commoditÃ©s disponibles (piscine, parking, climatisation, etc.)"}),(n.specificData.amenities||[]).map(((e,s)=>h.jsxs("div",{className:"flex gap-2 mb-1",children:[h.jsx(Ae,{value:e,onChange:e=>z(s,e.target.value),placeholder:"Ex: Piscine, Parking, Climatisation..."}),h.jsx(oe,{type:"button",size:"icon",variant:"destructive",onClick:()=>T(s),title:"Supprimer",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Ã—"})]},s))),h.jsx(oe,{type:"button",size:"sm",variant:"outline",onClick:M,className:"mb-2 border-gray-400 text-gray-700 hover:bg-gray-50",children:"+ Ajouter une commoditÃ©"})]})]});case"automobile":return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"vehicleType",children:"Type de vÃ©hicule"}),h.jsx(Ae,{id:"vehicleType",name:"vehicleType",placeholder:"Ex: Voiture, Moto, Camion, Bus...",value:n.specificData.vehicleType||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"make",children:"Marque du vÃ©hicule"}),h.jsx(Ae,{id:"make",name:"make",placeholder:"Ex: Toyota, Honda, BMW...",value:n.specificData.make||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"model",children:"ModÃ¨le du vÃ©hicule"}),h.jsx(Ae,{id:"model",name:"model",placeholder:"Ex: Corolla, Civic, X5...",value:n.specificData.model||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"year",children:"AnnÃ©e de fabrication"}),h.jsx(Ae,{id:"year",name:"year",type:"number",placeholder:"Ex: 2020",min:"1900",max:(new Date).getFullYear()+1,value:n.specificData.year||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"mileage",children:"KilomÃ©trage en km"}),h.jsx(Ae,{id:"mileage",name:"mileage",type:"number",placeholder:"Ex: 50000",min:"0",value:n.specificData.mileage||"",onChange:k})]})]});case"services":return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"serviceCategory",children:"CatÃ©gorie de service"}),h.jsx(Ae,{id:"serviceCategory",name:"serviceCategory",placeholder:"Ex: Plomberie, Ã‰lectricitÃ©, Design, Formation...",value:n.specificData.serviceCategory||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"availability",children:"DisponibilitÃ©"}),h.jsx(Ae,{id:"availability",name:"availability",placeholder:"Ex: Lundi-Vendredi 9h-18h, Weekends...",value:n.specificData.availability||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"experienceYears",children:"AnnÃ©es d'expÃ©rience"}),h.jsx(Ae,{id:"experienceYears",name:"experienceYears",type:"number",placeholder:"Ex: 5",min:"0",value:n.specificData.experienceYears||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{children:"Liens de portfolio et rÃ©fÃ©rences"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ajoutez des liens vers vos rÃ©alisations, portfolio ou rÃ©fÃ©rences"}),(n.specificData.portfolioLinks||[]).map(((e,s)=>h.jsxs("div",{className:"flex gap-2 mb-1",children:[h.jsx(Ae,{value:e,onChange:e=>P(s,e.target.value),placeholder:"https://votre-portfolio.com ou lien vers vos rÃ©alisations..."}),h.jsx(oe,{type:"button",size:"icon",variant:"destructive",onClick:()=>L(s),title:"Supprimer",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Ã—"})]},s))),h.jsx(oe,{type:"button",size:"sm",variant:"outline",onClick:E,className:"mb-2 border-gray-400 text-gray-700 hover:bg-gray-50",children:"+ Ajouter un lien de portfolio"})]})]});case"marketplace":return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"productCategory",children:"CatÃ©gorie de produit"}),h.jsx(Ae,{id:"productCategory",name:"productCategory",placeholder:"Ex: Ã‰lectronique, VÃªtements, Livres, Sport...",value:n.specificData.productCategory||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"brand",children:"Marque du produit"}),h.jsx(Ae,{id:"brand",name:"brand",placeholder:"Ex: Apple, Nike, Samsung...",value:n.specificData.brand||"",onChange:k})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"stockQuantity",children:"QuantitÃ© disponible en stock"}),h.jsx(Ae,{id:"stockQuantity",name:"stockQuantity",type:"number",placeholder:"Ex: 10",min:"0",value:n.specificData.stockQuantity||"",onChange:k})]})]});default:return null}},P=(e,s)=>{l((t=>{var a;return d(c({},t),{specificData:d(c({},t.specificData),{portfolioLinks:(null==(a=t.specificData.portfolioLinks)?void 0:a.map(((t,a)=>a===e?s:t)))||[]})})}))},E=()=>{l((e=>d(c({},e),{specificData:d(c({},e.specificData),{portfolioLinks:[...e.specificData.portfolioLinks||[],""]})})))},L=e=>{l((s=>{var t;return d(c({},s),{specificData:d(c({},s.specificData),{portfolioLinks:(null==(t=s.specificData.portfolioLinks)?void 0:t.filter(((s,t)=>t!==e)))||[]})})}))},z=(e,s)=>{l((t=>{var a;return d(c({},t),{specificData:d(c({},t.specificData),{amenities:(null==(a=t.specificData.amenities)?void 0:a.map(((t,a)=>a===e?s:t)))||[]})})}))},M=()=>{l((e=>d(c({},e),{specificData:d(c({},e.specificData),{amenities:[...e.specificData.amenities||[],""]})})))},T=e=>{l((s=>{var t;return d(c({},s),{specificData:d(c({},s.specificData),{amenities:(null==(t=s.specificData.amenities)?void 0:t.filter(((s,t)=>t!==e)))||[]})})}))};return h.jsxs("div",{className:"space-y-6",children:[(()=>{var e,s;switch(b){case 1:return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Informations de base"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Commencez par les informations essentielles de votre annonce."})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"title",children:"Titre de l'annonce *"}),h.jsx(Ae,{id:"title",name:"title",value:n.title,onChange:w,placeholder:"Ex: Appartement moderne 3 piÃ¨ces Ã  Cotonou",required:!0,className:"h-12"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"description",children:"Description *"}),h.jsx(Ds,{id:"description",name:"description",value:n.description,onChange:w,placeholder:"DÃ©crivez votre offre en dÃ©tail...",rows:4,required:!0,className:"max-w-2xl resize-none transition-all duration-200",style:{minHeight:"120px",height:"auto",overflow:"hidden"},onInput:e=>{e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,300)+"px"}})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"category",children:"CatÃ©gorie *"}),h.jsxs("select",{id:"category",name:"category",value:n.category,onChange:w,required:!0,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[h.jsx("option",{value:"",className:"text-foreground",children:"SÃ©lectionner une catÃ©gorie"}),hi.map((e=>h.jsx("option",{value:e.value,className:"text-foreground",children:e.label},e.value)))]})]})]}),h.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[h.jsx("h4",{className:"text-lg font-medium text-foreground",children:"Prix et localisation"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"price",children:"Prix *"}),h.jsx(Ae,{id:"price",name:"price",type:"number",value:n.price,onChange:w,placeholder:"0",required:!0,className:"h-12"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"currency",children:"Devise"}),h.jsxs("select",{id:"currency",name:"currency",value:n.currency,onChange:w,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[h.jsx("option",{value:"XOF",className:"text-foreground",children:"XOF (Franc CFA)"}),h.jsx("option",{value:"EUR",className:"text-foreground",children:"EUR (Euro)"}),h.jsx("option",{value:"USD",className:"text-foreground",children:"USD (Dollar US)"}),h.jsx("option",{value:"NGN",className:"text-foreground",children:"NGN (Naira)"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"country",children:"Pays"}),h.jsxs("select",{id:"country",name:"location.country",value:n.location.country,onChange:w,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[h.jsx("option",{value:"",className:"text-foreground",children:"SÃ©lectionner un pays"}),N.map((e=>h.jsx("option",{value:e.name,className:"text-foreground",children:e.name},e.code)))]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"city",children:"Ville"}),h.jsxs("select",{id:"city",name:"location.city",value:n.location.city,onChange:w,required:!0,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground disabled:opacity-50 disabled:cursor-not-allowed",disabled:!n.location.country,children:[h.jsx("option",{value:"",className:"text-foreground",children:"SÃ©lectionner une ville"}),null==(s=null==(e=N.find((e=>e.name===n.location.country)))?void 0:e.cities)?void 0:s.map(((e,s)=>h.jsx("option",{value:e,className:"text-foreground",children:e},`${n.location.country||"unknown"}-${e}-${s}`)))]})]})]})]})]});case 2:return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"MÃ©dias et dÃ©tails"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Ajoutez des photos et des informations spÃ©cifiques Ã  votre catÃ©gorie."})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"text-lg font-medium text-foreground",children:"Images et mÃ©dias"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"image-upload",children:"SÃ©lectionner des images"}),h.jsxs("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-6 text-center transition-colors "+(g?"border-blue-400 bg-blue-50":"hover:border-primary"),children:[h.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:S,className:"hidden",id:"image-upload",disabled:g}),h.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer "+(g?"cursor-not-allowed":""),children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("div",{className:"mx-auto w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:g?h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}):h.jsx(Fs,{className:"h-6 w-6 text-gray-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:g?"Chargement en cours...":"Cliquez pour ajouter des images"}),h.jsx("p",{className:"text-xs text-gray-600",children:g?`Veuillez patienter (${v.current}/${v.total})`:"PNG, JPG jusqu'Ã  10MB"}),g&&v.total>0&&h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:h.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:v.current/v.total*100+"%"}})})]})]})})]})]}),n.images.length>0&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs(Ve,{children:["Images sÃ©lectionnÃ©es (",n.images.length,")"]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:n.images.map(((e,s)=>h.jsxs("div",{className:"relative group aspect-square",children:[h.jsx("img",{src:e.url,alt:"AperÃ§u "+(s+1),className:"w-full h-full object-cover rounded-lg border "+(e.isPreview?"opacity-70":"")}),e.isPreview&&h.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:h.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg",children:h.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}),h.jsx("button",{type:"button",onClick:()=>{return e=s,void l((s=>{const a=s.images.filter(((s,t)=>t!==e));return t&&t({images:a}),d(c({},s),{images:a})}));var e},className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1.5 text-xs opacity-0 group-hover:opacity-100 transition-opacity shadow-md",title:"Supprimer cette image",disabled:e.isPreview,children:"Ã—"})]},s)))})]})]}),h.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[h.jsx("h4",{className:"text-lg font-medium text-foreground",children:"DÃ©tails spÃ©cifiques Ã  la catÃ©gorie"}),n.category?h.jsx("div",{className:"space-y-4",children:A()}):h.jsx("div",{className:"text-center py-4",children:h.jsx("p",{className:"text-muted-foreground",children:"Veuillez d'abord sÃ©lectionner une catÃ©gorie Ã  l'Ã©tape 1."})})]})]});default:return null}})(),h.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[h.jsx(oe,{type:"button",variant:"outline",onClick:()=>{b>1&&(y(b-1),r&&r(b-1))},disabled:1===b,children:"PrÃ©cÃ©dent"}),h.jsx("div",{className:"flex items-center space-x-2",children:2>b?h.jsx(oe,{type:"button",onClick:()=>{2>b&&(y(b+1),r&&r(b+1))},disabled:!n.title||!n.description||!n.category,children:"Suivant"}):h.jsx(oe,{type:"submit",onClick:s=>x(null,null,(function*(){s.preventDefault();const t=!n.title||5>n.title.length?"Le titre est requis (min 5 caractÃ¨res)":!n.description||10>n.description.length?"La description est requise (min 10 caractÃ¨res)":!n.price||isNaN(+n.price)?"Le prix est requis et doit Ãªtre un nombre":n.category?null:"La catÃ©gorie est requise";if(t)i({title:"Erreur de validation",description:t,variant:"destructive"});else{u(!0);try{const s=n.images.filter((e=>!e.isPreview)).map((e=>e.url)),t=d(c({},n),{images:s,price:+n.price}),a=yield hs.createListing(t);i({title:"Annonce crÃ©Ã©e !",description:"Votre annonce a Ã©tÃ© soumise avec succÃ¨s."}),l(pi),e&&e(a)}catch(a){i({title:"Erreur",description:(null==a?void 0:a.message)||"Erreur lors de la crÃ©ation.",variant:"destructive"})}finally{u(!1)}}})),disabled:m,className:"bg-green-600 hover:bg-green-700",children:m?"Publication...":"Publier l'annonce"})})]})]})},ji=({formData:e,onClose:s})=>{var t,a;const[r,i]=p.useState(0),[n,l]=p.useState(!1),o=(m=e.category,{real_estate:Vs,automobile:xe,services:he,marketplace:pe}[m]||Vs);var m;const u=e.images&&Array.isArray(e.images)?e.images.map((e=>{const s=(t=e)?"string"==typeof t?t:(null==t?void 0:t.url)?t.url:(null==t?void 0:t.file)?URL.createObjectURL(t.file):(null==t?void 0:t.src)?t.src:null:null;var t;return s?d(c({},e),{displayUrl:s}):null})).filter(Boolean):[];return h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:s,children:h.jsxs(Ht.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[h.jsxs("div",{className:"sticky top-0 bg-background border-b border-border px-6 py-4 flex items-center justify-between z-10",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"AperÃ§u de l'annonce"}),(!e.title||!e.description||!e.price)&&h.jsx(We,{variant:"outline",className:"text-xs text-yellow-600 border-yellow-600",children:"Preview partiel"})]}),h.jsx(oe,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:"âœ•"})]}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"relative aspect-video bg-muted rounded-lg overflow-hidden",children:u.length>0?h.jsxs(h.Fragment,{children:[h.jsx(Wt,{mode:"wait",children:h.jsx(Ht.img,{src:null==(t=u[r])?void 0:t.displayUrl,alt:"Image "+(r+1),className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},r)}),u.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>{u.length>0&&i((e=>0===e?u.length-1:e))},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:h.jsx(Xe,{className:"h-5 w-5"})}),h.jsx("button",{onClick:()=>{u.length>0&&i((e=>e===u.length-1?0:e+1))},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:h.jsx(Ge,{className:"h-5 w-5"})})]}),h.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm",children:[r+1," / ",u.length]}),h.jsxs("div",{className:"absolute top-4 left-4 flex space-x-2",children:[h.jsx("button",{onClick:()=>l(!n),className:"p-2 rounded-full transition-all "+(n?"bg-red-500 text-white":"bg-white bg-opacity-80 text-gray-700 hover:bg-opacity-100"),children:h.jsx(as,{className:"h-5 w-5 "+(n?"fill-current":"")})}),h.jsx("button",{className:"p-2 rounded-full bg-white bg-opacity-80 text-gray-700 hover:bg-opacity-100 transition-all",children:h.jsx(Rs,{className:"h-5 w-5"})})]})]}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Os,{className:"h-8 w-8"})}),h.jsx("p",{children:"Aucune image"}),h.jsx("p",{className:"text-xs mt-1",children:"Ajoutez des images Ã  l'Ã©tape 2"})]})})}),u.length>1&&h.jsx("div",{className:"flex space-x-2 mt-4 overflow-x-auto",children:u.map(((e,s)=>h.jsx("button",{onClick:()=>(e=>{e>=0&&e<u.length&&i(e)})(s),className:"flex-shrink-0 w-20 h-16 rounded-lg overflow-hidden border-2 transition-all "+(s===r?"border-primary":"border-border hover:border-primary/50"),children:h.jsx("img",{src:e.displayUrl,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover"})},s)))})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-2",children:[h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[h.jsxs(We,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:[h.jsx(o,{className:"h-3 w-3 mr-1"}),(e=>({real_estate:"Immobilier",automobile:"Automobile",services:"Service",marketplace:"Produit"}[e]||"Autre"))(e.category)]}),h.jsx(We,{variant:"outline",className:"text-green-600 border-green-600",children:"Actif"})]}),h.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:e.title||"Titre de l'annonce (Ã  dÃ©finir)"}),h.jsxs("div",{className:"flex items-center text-muted-foreground text-sm",children:[h.jsx(Ke,{className:"h-4 w-4 mr-1"}),e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non dÃ©finie"]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("div",{className:"text-3xl font-bold text-foreground",children:e.price?`${e.price} ${e.currency||"XOF"}`:"Prix Ã  dÃ©finir"}),"real_estate"===e.category&&(null==(a=e.specificData)?void 0:a.areaSqMeters)&&h.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[e.specificData.areaSqMeters," mÂ²"]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"Description"}),h.jsx("p",{className:"text-foreground leading-relaxed",children:e.description||"Description Ã  ajouter pour votre annonce."})]}),e.specificData&&Object.keys(e.specificData).length>0&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"DÃ©tails"}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:["real_estate"===e.category&&h.jsxs(h.Fragment,{children:[e.specificData.propertyType&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Type:"}),h.jsx("div",{className:"font-medium text-foreground",children:e.specificData.propertyType})]}),e.specificData.bedrooms&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Chambres:"}),h.jsx("div",{className:"font-medium text-foreground",children:e.specificData.bedrooms})]}),e.specificData.bathrooms&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Salles de bain:"}),h.jsx("div",{className:"font-medium text-foreground",children:e.specificData.bathrooms})]}),e.specificData.areaSqMeters&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Surface:"}),h.jsxs("div",{className:"font-medium text-foreground",children:[e.specificData.areaSqMeters," mÂ²"]})]})]}),"automobile"===e.category&&h.jsxs(h.Fragment,{children:[e.specificData.make&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"Marque:"}),h.jsx("div",{className:"font-medium text-foreground",children:e.specificData.make})]}),e.specificData.model&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"ModÃ¨le:"}),h.jsx("div",{className:"font-medium text-foreground",children:e.specificData.model})]}),e.specificData.year&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"AnnÃ©e:"}),h.jsx("div",{className:"font-medium text-foreground",children:e.specificData.year})]}),e.specificData.mileage&&h.jsxs("div",{children:[h.jsx("span",{className:"text-sm text-muted-foreground",children:"KilomÃ©trage:"}),h.jsxs("div",{className:"font-medium text-foreground",children:[e.specificData.mileage," km"]})]})]})]})]})]}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[h.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Images"}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.jsxs("p",{children:["â€¢ ",u.length," image(s) ajoutÃ©e(s)"]}),0===u.length&&h.jsx("p",{className:"text-yellow-600 mt-1",children:"âš ï¸ Aucune image - Ajoutez des images Ã  l'Ã©tape 2"})]})]})})]})]})]})})};var vi,fi,bi,yi,Ni,wi;(fi=vi||(vi={})).Prompt="PROMPT",fi.Camera="CAMERA",fi.Photos="PHOTOS",(yi=bi||(bi={})).Rear="REAR",yi.Front="FRONT",(wi=Ni||(Ni={})).Uri="uri",wi.Base64="base64",wi.DataUrl="dataUrl";class ki extends tr{getPhoto(e){return x(this,null,(function*(){return new Promise(((s,t)=>x(this,null,(function*(){if(e.webUseInput||e.source===vi.Photos)this.fileInputExperience(e,s,t);else if(e.source===vi.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=e.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",(a=>x(this,null,(function*(){0===a.detail?this.fileInputExperience(e,s,t):this.cameraExperience(e,s,t)}))))}else this.cameraExperience(e,s,t)}))))}))}pickImages(e){return x(this,null,(function*(){return new Promise(((e,s)=>x(this,null,(function*(){this.multipleFileInputExperience(e,s)}))))}))}cameraExperience(e,s,t){return x(this,null,(function*(){if(customElements.get("pwa-camera-modal")){const r=document.createElement("pwa-camera-modal");r.facingMode=e.direction===bi.Front?"user":"environment",document.body.appendChild(r);try{yield r.componentOnReady(),r.addEventListener("onPhoto",(a=>x(this,null,(function*(){const i=a.detail;null===i?t(new Za("User cancelled photos app")):i instanceof Error?t(i):s(yield this._getCameraPhoto(i,e)),r.dismiss(),document.body.removeChild(r)})))),r.present()}catch(a){this.fileInputExperience(e,s,t)}}else this.fileInputExperience(e,s,t)}))}fileInputExperience(e,s,t){let a=document.querySelector("#_capacitor-camera-input");const r=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input",a.type="file",a.hidden=!0,document.body.appendChild(a),a.addEventListener("change",(t=>{const i=a.files[0];let n="jpeg";if("image/png"===i.type?n="png":"image/gif"===i.type&&(n="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const t=new FileReader;t.addEventListener("load",(()=>{if("dataUrl"===e.resultType)s({dataUrl:t.result,format:n});else if("base64"===e.resultType){const e=t.result.split(",")[1];s({base64String:e,format:n})}r()})),t.readAsDataURL(i)}else s({webPath:URL.createObjectURL(i),format:n}),r()})),a.addEventListener("cancel",(e=>{t(new Za("User cancelled photos app")),r()}))),a.accept="image/*",a.capture=!0,e.source===vi.Photos||e.source===vi.Prompt?a.removeAttribute("capture"):e.direction===bi.Front?a.capture="user":e.direction===bi.Rear&&(a.capture="environment"),a.click()}multipleFileInputExperience(e,s){let t=document.querySelector("#_capacitor-camera-input-multiple");const a=()=>{var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input-multiple",t.type="file",t.hidden=!0,t.multiple=!0,document.body.appendChild(t),t.addEventListener("change",(s=>{const r=[];for(let e=0;e<t.files.length;e++){const s=t.files[e];let a="jpeg";"image/png"===s.type?a="png":"image/gif"===s.type&&(a="gif"),r.push({webPath:URL.createObjectURL(s),format:a})}e({photos:r}),a()})),t.addEventListener("cancel",(e=>{s(new Za("User cancelled photos app")),a()}))),t.accept="image/*",t.click()}_getCameraPhoto(e,s){return new Promise(((t,a)=>{const r=new FileReader,i=e.type.split("/")[1];"uri"===s.resultType?t({webPath:URL.createObjectURL(e),format:i,saved:!1}):(r.readAsDataURL(e),r.onloadend=()=>{const e=r.result;"dataUrl"===s.resultType?t({dataUrl:e,format:i,saved:!1}):t({base64String:e.split(",")[1],format:i,saved:!1})},r.onerror=e=>{a(e)})}))}checkPermissions(){return x(this,null,(function*(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}))}requestPermissions(){return x(this,null,(function*(){throw this.unimplemented("Not implemented on web.")}))}pickLimitedLibraryPhotos(){return x(this,null,(function*(){throw this.unavailable("Not implemented on web.")}))}getLimitedLibraryPhotos(){return x(this,null,(function*(){throw this.unavailable("Not implemented on web.")}))}}const Ci=sr("Camera",{web:()=>new ki}),Si=({onImageSelected:e,maxImages:s=5})=>{const[t,a]=p.useState(!1),[r,i]=p.useState([]),n=t=>{if(r.length<s){const s=[...r,t];i(s),null==e||e(s)}};return h.jsxs(Fe,{className:"w-full",children:[h.jsxs(De,{children:[h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(Us,{className:"h-5 w-5"}),"Ajouter des Photos"]}),h.jsx(Re,{children:"Prenez une photo ou sÃ©lectionnez depuis votre galerie"})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(oe,{onClick:()=>x(null,null,(function*(){try{a(!0);const e=yield Ci.getPhoto({quality:90,allowEditing:!0,resultType:Ni.Uri,source:vi.Camera});if(e.webPath){const s={uri:e.webPath,name:`photo_${Date.now()}.jpg`,type:"image/jpeg"};n(s)}}catch(e){}finally{a(!1)}})),disabled:t||r.length>=s,className:"flex-1",variant:"outline",children:[h.jsx(Fs,{className:"mr-2 h-4 w-4"}),"ðŸ“¸ Photo"]}),h.jsxs(oe,{onClick:()=>x(null,null,(function*(){try{a(!0);const e=yield Ci.getPhoto({quality:90,allowEditing:!0,resultType:Ni.Uri,source:vi.Photos});if(e.webPath){const s={uri:e.webPath,name:`gallery_${Date.now()}.jpg`,type:"image/jpeg"};n(s)}}catch(e){}finally{a(!1)}})),disabled:t||r.length>=s,className:"flex-1",variant:"outline",children:[h.jsx($s,{className:"mr-2 h-4 w-4"}),"ðŸ–¼ï¸ Galerie"]})]}),r.length>0&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("h4",{className:"text-sm font-medium",children:["Images sÃ©lectionnÃ©es (",r.length,"/",s,")"]}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.map(((s,t)=>h.jsxs("div",{className:"relative group",children:[h.jsx("img",{src:s.uri,alt:"Image "+(t+1),className:"w-full h-24 object-cover rounded-lg"}),h.jsx(oe,{onClick:()=>(s=>{const t=r.filter(((e,t)=>t!==s));i(t),null==e||e(t)})(t),size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(ye,{className:"h-3 w-3"})})]},t)))})]}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.jsxs("p",{children:["ðŸ’¡ ",h.jsx("strong",{children:"Instructions :"})]}),h.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[h.jsx("li",{children:'Cliquez sur "Photo" pour prendre une nouvelle photo'}),h.jsx("li",{children:'Cliquez sur "Galerie" pour sÃ©lectionner depuis vos photos'}),h.jsxs("li",{children:["Maximum ",s," images autorisÃ©es"]}),h.jsx("li",{children:"Survolez une image pour la supprimer"})]})]})]})]})},Ai=()=>{var e;const s=f(),{category:t,id:a}=k(),{toast:r}=Me(),[i,n]=p.useState(1),[l,o]=p.useState({}),[d,m]=p.useState(!1),[u,j]=p.useState(!1),[v,b]=p.useState(!1);g.useEffect((()=>{var e;a&&(j(!0),e=a,x(null,null,(function*(){try{b(!0);const s=yield hs.getListingById(e);if(s){const e={title:s.title||"",description:s.description||"",price:s.price||"",category:s.category||t,location:s.location||{},images:s.images||[],contact_info:s.contact_info||{},real_estate_details:s.real_estate_details||{},automobile_details:s.automobile_details||{},service_details:s.service_details||{},product_details:s.product_details||{}};o(e),r({title:"Annonce chargÃ©e",description:"Les donnÃ©es de l'annonce ont Ã©tÃ© chargÃ©es avec succÃ¨s."})}}catch(s){r({title:"Erreur",description:"Impossible de charger les donnÃ©es de l'annonce. Veuillez rÃ©essayer.",variant:"destructive"})}finally{b(!1)}})))}),[a]);const y=e=>({"real-estate":"ImmobiliÃ¨re",automobile:"Automobile",services:"de Service",marketplace:"Marketplace"}[e]||""),N={"real-estate":ue,automobile:xe,services:he,marketplace:pe}[t]||ue,w=[{id:1,title:"Informations de base",description:"Titre, description, catÃ©gorie, prix et localisation",icon:Bs,completed:!1},{id:2,title:"MÃ©dias et publication",description:"Photos, vidÃ©os, caractÃ©ristiques spÃ©cifiques et publication",icon:Fs,completed:!1}],C=()=>l.title||l.description||l.price;return h.jsxs("div",{className:"min-h-screen bg-background",children:[h.jsx("div",{className:"bg-background/80 backdrop-blur-sm border-b border-border sticky top-0 z-50",children:h.jsx("div",{className:"container mx-auto px-4 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs(oe,{variant:"ghost",size:"sm",onClick:()=>s(-1),className:"text-muted-foreground hover:text-foreground",children:[h.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Retour"]}),h.jsx("div",{className:"flex items-center space-x-3",children:t&&h.jsxs("div",{className:"flex items-center space-x-2 bg-primary/10 px-3 py-1 rounded-full",children:[h.jsx(N,{className:"h-4 w-4 text-primary"}),h.jsx("span",{className:"text-sm font-medium text-primary",children:y(t)})]})})]}),h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs(oe,{variant:"outline",size:"sm",onClick:()=>m(!d),disabled:!C(),className:C()?"":"opacity-50 cursor-not-allowed",title:C()?"Voir l'aperÃ§u de votre annonce":l.title||l.description||l.price?"AperÃ§u disponible (certaines donnÃ©es peuvent Ãªtre manquantes)":"Commencez Ã  remplir le formulaire pour voir l'aperÃ§u",children:[h.jsx(Qe,{className:"h-4 w-4 mr-2"}),d?"Masquer":"AperÃ§u"]})})]})})}),h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[h.jsx("h1",{className:"text-4xl font-bold text-foreground mb-3",children:u?"Modifier l'annonce":t?"CrÃ©er une annonce "+y(t):"CrÃ©er une annonce"}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:u?v?"Chargement des donnÃ©es de l'annonce...":"Modifiez les informations de votre annonce existante.":"Partagez votre offre avec notre communautÃ©. Remplissez les informations ci-dessous pour publier votre annonce."})]}),h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[h.jsx("div",{className:"flex items-center justify-center space-x-4",children:w.map(((e,s)=>h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 "+(i<e.id?"bg-card border-border text-muted-foreground":"bg-primary border-primary text-white"),children:i>e.id?h.jsx(Ss,{className:"h-5 w-5"}):h.jsx(e.icon,{className:"h-5 w-5"})}),s<w.length-1&&h.jsx("div",{className:"w-16 h-0.5 mx-2 "+(i>e.id?"bg-primary":"bg-border")})]},e.id)))}),h.jsx("div",{className:"text-center mt-4",children:h.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ã‰tape ",i," sur ",w.length," : ",null==(e=w[i-1])?void 0:e.title]})})]}),d&&h.jsx(ji,{formData:l,onClose:()=>m(!1)}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:h.jsx(Fe,{className:"shadow-lg border-0",children:h.jsx(Oe,{className:"p-6",children:h.jsx(gi,{onSuccess:e=>{(null==e?void 0:e.id)?s("/profile",{state:{message:u?"Annonce modifiÃ©e avec succÃ¨s ! Les changements sont maintenant visibles sur le site.":"Annonce crÃ©Ã©e avec succÃ¨s ! Elle est maintenant visible sur le site.",type:"success"}}):s("/profile")},category:t,onDataChange:e=>{o((s=>c(c({},s),e)))},currentStep:i,onStepChange:n})})})})}),h.jsxs("div",{className:"space-y-6",children:[h.jsx(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:h.jsx(Fe,{className:"shadow-lg border-0",children:h.jsxs(Oe,{className:"p-6",children:[h.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[h.jsx(Ss,{className:"h-5 w-5 text-green-500 mr-2"}),"Conseils pour une annonce rÃ©ussie"]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Utilisez un titre clair et descriptif"})]}),h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez des photos de qualitÃ©"})]}),h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"DÃ©crivez prÃ©cisÃ©ment votre offre"})]}),h.jsxs("div",{className:"flex items-start space-x-3",children:[h.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Fixez un prix compÃ©titif"})]})]})]})})}),h.jsx(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:h.jsx(Fe,{className:"shadow-lg border-0",children:h.jsxs(Oe,{className:"p-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Besoin d'aide ?"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Notre Ã©quipe est lÃ  pour vous accompagner dans la crÃ©ation de votre annonce."}),h.jsx(oe,{variant:"outline",className:"w-full",onClick:()=>{const e=encodeURIComponent("Support crÃ©ation annonce - MaxiMarket"),s=encodeURIComponent(`Bonjour l'Ã©quipe MaxiMarket,\n\nJe rencontre des difficultÃ©s lors de la crÃ©ation de mon annonce et j'aurais besoin de votre aide.\n\nðŸ“‹ DÃ©tails de ma demande :\nâ€¢ CatÃ©gorie d'annonce : ${t?y(t):"Non spÃ©cifiÃ©e"}\nâ€¢ Ã‰tape actuelle : Ã‰tape ${i} sur ${w.length}\nâ€¢ ProblÃ¨me rencontrÃ© : [Veuillez dÃ©crire votre problÃ¨me ici]\n\nðŸ“§ Mon email de contact : [Votre email]\nðŸ“± Mon tÃ©lÃ©phone : [Votre tÃ©lÃ©phone]\n\nMerci de votre aide !\n\nCordialement,\n[Votre nom]\n\n---\nCe message a Ã©tÃ© gÃ©nÃ©rÃ© automatiquement depuis le formulaire de crÃ©ation d'annonce MaxiMarket.\nSupport : support@maxiimarket.com\nSite : https://maxiimarket.com`),a=`mailto:${ke.supportEmail}?subject=${e}&body=${s}`;window.open(a,"_blank","noopener,noreferrer")},children:"Contacter le support"})]})})})]})]})]})}),h.jsx(K,{})]})},Pi=g.memo((e=>{var s=e,{src:t,alt:a,className:r="",placeholder:i=null,context:n="gallery",quality:l="medium",onLoad:o=null,onError:u=null,showSkeleton:x=!0,priority:j="medium",fallbackSrc:v=null,enableHeroAnimations:f=!1,showOverlay:b=!1,overlayGradient:y="to-b from-transparent via-transparent to-black/20"}=s,N=m(s,["src","alt","className","placeholder","context","quality","onLoad","onError","showSkeleton","priority","fallbackSrc","enableHeroAnimations","showOverlay","overlayGradient"]);const[w,k]=p.useState(!1),[C,S]=p.useState(!1),A=e=>e?"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.file)?URL.createObjectURL(e.file):(null==e?void 0:e.src)?e.src:(null==e?void 0:e.displayUrl)?e.displayUrl:null:null,P=p.useMemo((()=>{const e=A(t);return e?Kr(e,n,l):null}),[t,n,l]),E=p.useMemo((()=>{if(v)return v;const e={hero:"https://images.unsplash.com/photo-1542044896530-05d85be9b11a?q=80&w=2070&auto=format&fit=crop",city:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?q=80&w=1920&auto=format&fit=crop",business:"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=1932&auto=format&fit=crop"};return e[n]||e.hero}),[v,n]),{elementRef:L,isIntersecting:z,imageState:M,setImageSrc:T}=((e={})=>{const{threshold:s=.1,rootMargin:t="100px",placeholder:a=null,onLoad:r=null,onError:i=null}=e,[n,l]=p.useState({src:null,isLoading:!1,hasLoaded:!1,hasError:!1}),[o,m]=((e={})=>{const{threshold:s=.1,rootMargin:t="50px",root:a=null,triggerOnce:r=!1}=e,[i,n]=p.useState(!1),[l,o]=p.useState(!1),c=p.useRef(null),d=p.useCallback((e=>{const[s]=e;s.isIntersecting?(n(!0),r&&!l&&o(!0)):r||n(!1)}),[r,l]);return p.useEffect((()=>{const e=c.current;if(!e)return;const r=new IntersectionObserver(d,{threshold:s,rootMargin:t,root:a});return r.observe(e),()=>{r.unobserve(e),r.disconnect()}}),[d,s,t,a]),[c,i]})({threshold:s,rootMargin:t,triggerOnce:!0}),u=p.useCallback((e=>{if(!e||n.src===e)return;l((s=>d(c({},s),{src:e,isLoading:!0,hasLoaded:!1,hasError:!1})));const s=new Image;s.onload=()=>{l((e=>d(c({},e),{isLoading:!1,hasLoaded:!0}))),null==r||r(e)},s.onerror=()=>{l((e=>d(c({},e),{isLoading:!1,hasError:!0}))),null==i||i(e)},s.src=e}),[n.src,r,i]);p.useEffect((()=>{m&&n.src&&u(n.src)}),[m,n.src,u]);const x=p.useCallback((e=>{e!==n.src&&l((s=>d(c({},s),{src:e})))}),[n.src]);return{elementRef:o,isIntersecting:m,imageState:n,setImageSrc:x,loadImage:u}})({threshold:.1,rootMargin:"high"===j?"50px":"100px",onLoad:e=>{S(!0),k(!1),null==o||o(e)},onError:e=>{k(!0),S(!1),null==u||u(e)}});g.useEffect((()=>{z&&P&&T(P)}),[z,P,T]);const _=p.useCallback((e=>{N.onClick&&N.onClick(e)}),[N.onClick]),q=w?E:M.src||A(t),F=()=>h.jsx("div",{className:"animate-pulse bg-muted rounded-lg",children:h.jsx("div",{className:"w-full h-full bg-gradient-to-r from-muted via-muted/50 to-muted"})}),D=()=>h.jsx("div",{className:"flex items-center justify-center w-full h-full bg-muted text-muted-foreground",children:h.jsxs("div",{className:"text-center",children:[h.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("p",{className:"text-sm",children:"Image non disponible"})]})});if(!t)return h.jsx("div",{className:r,children:h.jsx(D,{})});const I=null!==A(t);return h.jsxs("div",{ref:L,className:"relative overflow-hidden "+r,children:[x&&!C&&!w&&I&&h.jsx(Wt,{children:h.jsx(Ht.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-10",children:h.jsx(F,{})})}),i&&!C&&!w&&I&&h.jsx(Wt,{children:h.jsx(Ht.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-10",children:h.jsx("img",{src:i,alt:"Placeholder",className:"w-full h-full object-cover"})})}),h.jsx(Wt,{mode:"wait",children:!w&&I&&h.jsx(Ht.img,c({src:q,alt:a,className:"w-full h-full object-cover transition-opacity duration-300 "+(C?"opacity-100":"opacity-0"),initial:f?{opacity:0,scale:1.1}:{opacity:0},animate:f?{opacity:C?1:.7,scale:C?1:1.05}:{opacity:C?1:0},exit:f?{opacity:0,scale:.95}:{opacity:0},transition:f?{duration:.8,ease:"easeOut",opacity:{duration:.5}}:{duration:.3},onLoad:()=>{q&&(S(!0),k(!1),null==o||o(q))},onError:()=>{k(!0),S(!1),null==u||u(q)},onClick:_,loading:"high"===j?"eager":"lazy",decoding:"async"},N),q)}),b&&C&&h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.2},className:"absolute inset-0 bg-gradient-"+y}),w&&h.jsx(Wt,{children:h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"absolute inset-0 z-20",children:h.jsx(D,{})})}),M.isLoading&&!C&&!w&&I&&h.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/10",children:h.jsx(Ht.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full"})}),!I&&h.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-muted",children:h.jsxs("div",{className:"text-center text-muted-foreground",children:[h.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),h.jsx("p",{className:"text-sm",children:"Format d'image non supportÃ©"})]})})]})})),Ei=g.memo((({images:e=[],title:s="Galerie d'images"})=>{const[t,a]=p.useState(0),[r,i]=p.useState(!1),[n,l]=p.useState(!1),o=p.useRef(null);Gr(e,t);const{touchHandlers:m,zoomLevel:u}=((e,s,t)=>{const[a,r]=p.useState(1),[i,n]=p.useState(!1),l=p.useCallback((({scale:e})=>{const s=Math.max(.5,Math.min(3,e));r(s),n(!0),null==t||t(s)}),[t]),o=p.useCallback((()=>{a>1||null==e||e()}),[e,a]),m=p.useCallback((()=>{a>1||null==s||s()}),[s,a]),{touchHandlers:u}=((e={})=>{const{onSwipeLeft:s,onSwipeRight:t,onSwipeUp:a,onSwipeDown:r,onPinch:i,onDoubleTap:n,minSwipeDistance:l=50,minPinchDistance:o=10,doubleTapDelay:m=300}=e,[u,x]=p.useState({startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1,isDoubleTap:!1}),h=p.useRef(null),g=p.useRef(null),j=p.useRef(0),v=p.useCallback(((e,s)=>Math.hypot(e.clientX-s.clientX,e.clientY-s.clientY)),[]),f=p.useCallback(((e,s)=>180*Math.atan2(s.clientY-e.clientY,s.clientX-e.clientX)/Math.PI),[]),b=p.useCallback((e=>{const s=Date.now(),t=Array.from(e.touches);if(2===t.length){const e=v(t[0],t[1]),a=f(t[0],t[1]);x((t=>d(c({},t),{startDistance:e,startAngle:a,isPinching:!0,startTime:s})))}else if(1===t.length){const e=t[0],a=s-j.current;if(m>a)return x((e=>d(c({},e),{isDoubleTap:!0}))),null==n||n(e),void setTimeout((()=>{x((e=>d(c({},e),{isDoubleTap:!1})))}),100);j.current=s,x((t=>d(c({},t),{startX:e.clientX,startY:e.clientY,startTime:s,isPinching:!1})))}}),[v,f,n,m]),y=p.useCallback((e=>{e.preventDefault();const s=Array.from(e.touches);if(u.isPinching&&2===s.length){const e=v(s[0],s[1]),t=f(s[0],s[1]),a=e-u.startDistance,r=t-u.startAngle;if(Math.abs(a)>o){const t=e/u.startDistance;null==i||i({scale:t,distanceDelta:a,angleDelta:r,center:{x:(s[0].clientX+s[1].clientX)/2,y:(s[0].clientY+s[1].clientY)/2}})}}}),[u,v,f,o,i]),N=p.useCallback((e=>{const i=Array.from(e.changedTouches);if(u.isPinching)x((e=>d(c({},e),{isPinching:!1})));else{if(1===i.length&&!u.isDoubleTap){const e=i[0],n=e.clientX-u.startX,o=e.clientY-u.startY,c=Date.now()-u.startTime,d=Math.hypot(n,o),m=d/c;d>l&&m>.3&&(Math.abs(n)>Math.abs(o)?n>0?null==t||t({deltaX:n,deltaY:o,velocity:m,distance:d}):null==s||s({deltaX:n,deltaY:o,velocity:m,distance:d}):o>0?null==r||r({deltaX:n,deltaY:o,velocity:m,distance:d}):null==a||a({deltaX:n,deltaY:o,velocity:m,distance:d}))}x((e=>d(c({},e),{startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1})))}}),[u,l,s,t,a,r]),w=p.useCallback((()=>{x((e=>d(c({},e),{startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1,isDoubleTap:!1})))}),[]),k=p.useCallback((()=>{h.current&&clearTimeout(h.current),g.current&&clearTimeout(g.current)}),[]);return{touchHandlers:{onTouchStart:b,onTouchMove:y,onTouchEnd:N,onTouchCancel:w},touchState:u,cleanup:k}})({onSwipeLeft:o,onSwipeRight:m,onPinch:l,minSwipeDistance:30}),x=p.useCallback((()=>{r(1),n(!1),null==t||t(1)}),[t]);return{touchHandlers:u,zoomLevel:a,isZooming:i,resetZoom:x}})((()=>a((s=>(s+1)%e.length))),(()=>a((s=>(s-1+e.length)%e.length))),(e=>l(e>1))),x=p.useCallback((()=>{a((s=>(s+1)%e.length))}),[e.length]),g=p.useCallback((()=>{a((s=>(s-1+e.length)%e.length))}),[e.length]),j=e=>{a(e)};p.useEffect((()=>{const e=e=>{if(r)switch(e.key){case"ArrowLeft":e.preventDefault(),g();break;case"ArrowRight":e.preventDefault(),x();break;case"Escape":e.preventDefault(),i(!1),l(!1);break;case" ":e.preventDefault(),l(!n)}};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[r,n,x,g]);const v=()=>{r?l(!n):i(!0)};if(!e||0===e.length)return h.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-muted flex items-center justify-center",children:h.jsx("div",{className:"text-center text-muted-foreground",children:h.jsx("p",{children:"Aucune image disponible"})})});const f=e[t];return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative",children:[h.jsxs("div",d(c({ref:o,className:"relative aspect-video rounded-lg overflow-hidden bg-muted cursor-pointer group"},m),{onClick:v,children:[h.jsx(Pi,{src:f,alt:`${s} - Image ${t+1}`,className:"w-full h-full",context:"gallery",quality:"high",showSkeleton:!0}),h.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300",children:h.jsx(oe,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),i(!0)},children:h.jsx(Hs,{className:"h-4 w-4"})})}),e.length>1&&h.jsxs(h.Fragment,{children:[h.jsx(oe,{variant:"ghost",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),g()},children:h.jsx(Xe,{className:"h-4 w-4"})}),h.jsx(oe,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),x()},children:h.jsx(Ge,{className:"h-4 w-4"})})]})]})),e.length>1&&h.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:e.map(((e,s)=>h.jsx("button",{onClick:()=>j(s),className:"w-2 h-2 rounded-full transition-all duration-300 "+(s===t?"bg-primary scale-125":"bg-muted-foreground/30 hover:bg-muted-foreground/50"),"aria-label":"Aller Ã  l'image "+(s+1)},s)))}),e.length>1&&h.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[t+1," / ",e.length]})]}),h.jsx(Wt,{children:r&&h.jsxs(Ht.div,d(c({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center"},m),{children:[h.jsx(oe,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white z-10",onClick:()=>{i(!1),l(!1)},children:h.jsx(ye,{className:"h-6 w-6"})}),h.jsx(oe,{variant:"ghost",size:"sm",className:"absolute top-4 right-16 bg-black/50 hover:bg-black/70 text-white z-10",onClick:()=>{l(!n)},children:n?h.jsx(Ws,{className:"h-6 w-6"}):h.jsx(Hs,{className:"h-6 w-6"})}),h.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:h.jsx(Pi,{src:f,alt:`${s} - Image ${t+1}`,className:"max-w-full max-h-full object-contain transition-transform duration-300 "+(n?"cursor-zoom-out":"cursor-zoom-in"),context:"fullscreen",quality:"high",showSkeleton:!1,onClick:v,style:{transform:`scale(${u})`,cursor:n?"zoom-out":"zoom-in"}})}),e.length>1&&h.jsxs(h.Fragment,{children:[h.jsx(oe,{variant:"ghost",size:"lg",className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:g,children:h.jsx(Xe,{className:"h-8 w-8"})}),h.jsx(oe,{variant:"ghost",size:"lg",className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:x,children:h.jsx(Ge,{className:"h-8 w-8"})})]}),e.length>1&&h.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-3",children:e.map(((e,s)=>h.jsx("button",{onClick:()=>j(s),className:"w-3 h-3 rounded-full transition-all duration-300 "+(s===t?"bg-white scale-125":"bg-white/50 hover:bg-white/75"),"aria-label":"Aller Ã  l'image "+(s+1)},s)))}),h.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white text-sm px-3 py-1 rounded",children:[t+1," / ",e.length]}),h.jsx("div",{className:"absolute top-4 left-4 text-white/70 text-sm",children:h.jsx("p",{children:"â† â†’ Navigation â€¢ Espace Zoom â€¢ Ã‰chap Fermer"})})]}))})]})})),Li=({listing:e,variant:s="default"})=>{const{toast:t}=Me(),[a,r]=p.useState(!1),i=`${window.location.origin}/annonce/${e.id}`,n=s=>{var t,a,r,n;const l="ðŸ  DÃ©couvrez cette annonce sur MaxiMarket : "+e.title;switch(s){case"facebook":return`${l}\n\nðŸ’° Prix : ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\n\nðŸ“ ${(null==(t=e.location)?void 0:t.city)||"Localisation non spÃ©cifiÃ©e"}`;case"instagram":return`${l}\n\nðŸ’° ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nðŸ“ ${(null==(a=e.location)?void 0:a.city)||"Localisation non spÃ©cifiÃ©e"}\n\n#MaxiMarket #Marketplace #Afrique`;case"tiktok":return`${l}\nðŸ’° ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nðŸ“ ${(null==(r=e.location)?void 0:r.city)||"Localisation non spÃ©cifiÃ©e"}\n\n#MaxiMarket #Marketplace #Afrique #FYP`;case"whatsapp":return`${l}\n\nðŸ’° Prix : ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nðŸ“ ${(null==(n=e.location)?void 0:n.city)||"Localisation non spÃ©cifiÃ©e"}\n\n${i}`;default:return l}},l=()=>{r(!0);const e=n("facebook"),s=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}&quote=${encodeURIComponent(e)}`;window.open(s,"_blank","width=600,height=500,scrollbars=yes,resizable=yes"),setTimeout((()=>r(!1)),1e3),t({title:"PartagÃ© sur Facebook",description:"L'annonce a Ã©tÃ© partagÃ©e sur Facebook"})},o=()=>{r(!0),navigator.clipboard.writeText(i).then((()=>{t({title:"Lien copiÃ© !",description:"Le lien a Ã©tÃ© copiÃ©. Ouvrez Instagram et collez-le dans votre story ou post."}),window.open("https://www.instagram.com","_blank","noopener,noreferrer")})).catch((()=>{t({title:"Erreur",description:"Impossible de copier le lien automatiquement.",variant:"destructive"})})),setTimeout((()=>r(!1)),1e3)},c=()=>{r(!0),navigator.clipboard.writeText(i).then((()=>{t({title:"Lien copiÃ© !",description:"Le lien a Ã©tÃ© copiÃ©. Ouvrez TikTok et collez-le dans votre vidÃ©o ou description."}),window.open("https://www.tiktok.com","_blank","noopener,noreferrer")})).catch((()=>{t({title:"Erreur",description:"Impossible de copier le lien automatiquement.",variant:"destructive"})})),setTimeout((()=>r(!1)),1e3)},d=()=>{r(!0);const e=n("whatsapp"),s="https://wa.me/?text="+encodeURIComponent(e);window.open(s,"_blank","noopener,noreferrer"),setTimeout((()=>r(!1)),1e3),t({title:"PartagÃ© sur WhatsApp",description:"L'annonce a Ã©tÃ© partagÃ©e sur WhatsApp"})},m=()=>x(null,null,(function*(){try{yield navigator.clipboard.writeText(i),t({title:"Lien copiÃ© !",description:"Le lien de l'annonce a Ã©tÃ© copiÃ© dans le presse-papiers."})}catch(e){t({title:"Erreur",description:"Impossible de copier le lien.",variant:"destructive"})}})),u=()=>{window.open(i,"_blank","noopener,noreferrer")};return"compact"===s?h.jsxs(Xs,{children:[h.jsx(Gs,{asChild:!0,children:h.jsxs(oe,{variant:"outline",size:"sm",disabled:a,className:"flex items-center space-x-1 px-1.5 py-0.5 text-xs",children:[h.jsx(Rs,{className:"h-2.5 w-2.5"}),h.jsx("span",{children:"Partager"})]})}),h.jsxs(Ks,{align:"end",className:"w-48",children:[h.jsxs(Js,{onClick:l,children:[h.jsx(Ce,{className:"h-4 w-4 mr-2 text-blue-600"}),"Facebook"]}),h.jsxs(Js,{onClick:o,children:[h.jsx(Se,{className:"h-4 w-4 mr-2 text-pink-600"}),"Instagram"]}),h.jsxs(Js,{onClick:c,children:[h.jsx("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),"TikTok"]}),h.jsxs(Js,{onClick:d,children:[h.jsx("svg",{className:"h-4 w-4 mr-2 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]}),h.jsxs(Js,{onClick:m,children:[h.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Copier le lien"]}),h.jsxs(Js,{onClick:u,children:[h.jsx(Ys,{className:"h-4 w-4 mr-2"}),"Ouvrir l'annonce"]})]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Rs,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm font-medium",children:"Partager cette annonce"})]}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsxs(oe,{variant:"outline",size:"sm",onClick:l,disabled:a,className:"flex items-center space-x-2 bg-blue-50 hover:bg-blue-100 border-blue-200",children:[h.jsx(Ce,{className:"h-4 w-4 text-blue-600"}),h.jsx("span",{children:"Facebook"})]}),h.jsxs(oe,{variant:"outline",size:"sm",onClick:o,disabled:a,className:"flex items-center space-x-2 bg-pink-50 hover:bg-pink-100 border-pink-200",children:[h.jsx(Se,{className:"h-4 w-4 text-pink-600"}),h.jsx("span",{children:"Instagram"})]}),h.jsxs(oe,{variant:"outline",size:"sm",onClick:c,disabled:a,className:"flex items-center space-x-2 bg-black hover:bg-gray-800 text-white border-gray-700",children:[h.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),h.jsx("span",{children:"TikTok"})]}),h.jsxs(oe,{variant:"outline",size:"sm",onClick:d,disabled:a,className:"flex items-center space-x-2 bg-green-50 hover:bg-green-100 border-green-200",children:[h.jsx("svg",{className:"h-4 w-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),h.jsx("span",{children:"WhatsApp"})]}),h.jsxs(oe,{variant:"outline",size:"sm",onClick:m,className:"flex items-center space-x-2",children:[h.jsx(Qs,{className:"h-4 w-4"}),h.jsx("span",{children:"Copier le lien"})]}),h.jsxs(oe,{variant:"outline",size:"sm",onClick:u,className:"flex items-center space-x-2",children:[h.jsx(Ys,{className:"h-4 w-4"}),h.jsx("span",{children:"Ouvrir l'annonce"})]})]})]})},zi=({rating:e=0,onRatingChange:s,readonly:t=!1,size:a="md",showLabel:r=!1,className:i=""})=>{const[n,l]=p.useState(0),o={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6"},c=()=>{t||l(0)};return h.jsxs("div",{className:qe("flex items-center space-x-1",i),children:[h.jsx("div",{className:"flex items-center space-x-0.5",children:[1,2,3,4,5].map((r=>{return h.jsx("button",{type:"button",onClick:()=>{!t&&s&&s(r)},onMouseEnter:()=>{t||l(r)},onMouseLeave:c,disabled:t,className:qe("transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 rounded-sm",o[a],t?"cursor-default":"cursor-pointer hover:scale-110",(i=r,i>(n||e)?"text-gray-300":"text-yellow-400 fill-current")),"aria-label":`${r} Ã©toile${r>1?"s":""}`,children:h.jsx(qs,{className:"w-full h-full"})},r);var i}))}),r&&h.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:(d=e,{0:"Aucune note",1:"TrÃ¨s mauvais",2:"Mauvais",3:"Moyen",4:"Bon",5:"Excellent"}[d]||"Aucune note")}),!t&&h.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:e>0?e+"/5":"Cliquez pour noter"})]});var d},Mi=Gt({content:Kt().min(1,"Le commentaire ne peut pas Ãªtre vide").max(1e3,"Le commentaire ne peut pas dÃ©passer 1000 caractÃ¨res"),parent_id:Kt().uuid().optional()}),Ti=({listingId:e,onSubmit:s,onCancel:t,initialData:a=null,parentId:r=null,className:i=""})=>{const{toast:n}=Me(),[l,o]=p.useState(!1),[m,u]=p.useState((null==a?void 0:a.rating)||0),{register:g,handleSubmit:j,watch:v,formState:{errors:f,isValid:b},reset:y}=Xt({resolver:J(Mi),defaultValues:{content:(null==a?void 0:a.content)||"",parent_id:r||(null==a?void 0:a.parent_id)},mode:"onChange"}),N=v("content"),w=!!a,k=i=>x(null,null,(function*(){o(!0);try{const l=d(c({},i),{rating:m||null,listing_id:e,parent_id:r||(null==a?void 0:a.parent_id)}),o=yield s(l);if(o.error)throw Error(o.error);n({title:w?"Commentaire modifiÃ©":"Commentaire ajoutÃ©",description:w?"Votre commentaire a Ã©tÃ© modifiÃ© avec succÃ¨s.":"Votre commentaire a Ã©tÃ© ajoutÃ© avec succÃ¨s."}),w||(y(),u(0)),t&&t()}catch(l){n({title:"Erreur",description:l.message||"Une erreur est survenue lors de l'envoi du commentaire.",variant:"destructive"})}finally{o(!1)}})),C=()=>(null==N?void 0:N.length)||0;return h.jsxs("div",{className:qe("space-y-4",i),children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold",children:w?"Modifier le commentaire":"Ajouter un commentaire"}),r&&h.jsx(We,{variant:"secondary",className:"text-xs",children:"RÃ©ponse"})]}),h.jsxs("form",{onSubmit:j(k),className:"space-y-4",children:[void 0,void 0,h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",children:"Votre note (optionnelle)"}),h.jsx(zi,{rating:m,onRatingChange:e=>{u(e)},size:"lg",showLabel:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"content",className:"text-sm font-medium",children:"Votre commentaire *"}),h.jsx(Ds,d(c({id:"content"},g("content")),{placeholder:w?"Modifiez votre commentaire...":"Partagez votre expÃ©rience avec cette annonce...",className:qe("min-h-[120px] resize-none",f.content&&"border-red-500 focus:border-red-500"),maxLength:1e3})),h.jsx("div",{className:"flex items-center justify-between text-xs",children:h.jsxs("span",{className:(()=>{const e=C();return 0===e?"text-red-500":e>900?"text-orange-500":"text-muted-foreground"})(),children:[C(),"/1000 caractÃ¨res"]})}),f.content&&h.jsxs("p",{className:"text-sm text-red-500 flex items-center",children:[h.jsx(Ms,{className:"h-4 w-4 mr-1"}),f.content.message]})]}),h.jsxs("div",{className:"flex items-center justify-between pt-2",children:[h.jsx("div",{className:"flex items-center space-x-2",children:t&&h.jsx(oe,{type:"button",variant:"outline",onClick:t,disabled:l,children:"Annuler"})}),h.jsx(oe,{type:"submit",disabled:l||!(null==N?void 0:N.trim()),className:"flex items-center space-x-2",onClick:e=>{e.preventDefault(),(null==N?void 0:N.trim())&&!l&&j(k)()},children:l?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),h.jsx("span",{children:"Envoi..."})]}):h.jsxs(h.Fragment,{children:[h.jsx(Pe,{className:"h-4 w-4"}),h.jsx("span",{children:w?"Modifier":"Publier"})]})})]})]})]})},_i=({comment:e,onUpdate:s,onDelete:t,onReply:a,onReport:r,showReplies:i=!0,className:n=""})=>{var l;const{user:o}=ie(),{toast:c}=Me(),[d,m]=p.useState(!1),[u,g]=p.useState(!1),[j,v]=p.useState(!1),[f,b]=p.useState(e.replies||[]),y=(null==o?void 0:o.id)===e.user_id,N="admin"===(null==o?void 0:o.role),w=y||N,k=()=>{g(!0)};return d?h.jsx("div",{className:qe("border rounded-lg p-4 bg-muted/30",n),children:h.jsx(Ti,{listingId:e.listing_id,onSubmit:t=>x(null,null,(function*(){try{const r=yield s(e.id,t);if(r.error)throw Error(r.error);return a=r.comment,m(!1),s&&s(a),r}catch(r){return{error:r.message}}var a})),onCancel:()=>m(!1),initialData:e})}):h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:qe("transition-all",n),children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(Q,{className:"h-10 w-10",children:h.jsx(Y,{className:"bg-primary/10 text-primary",children:(C=e.user_id||"U",(null==C?void 0:C.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2))||"U")})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("h4",{className:"font-medium text-sm",children:e.user_display_name||`Utilisateur ${null==(l=e.user_id)?void 0:l.slice(0,8)}...`}),e.is_verified_purchase&&h.jsxs(We,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-300",children:[h.jsx(Ss,{className:"h-3 w-3 mr-1"}),"Achat vÃ©rifiÃ©"]})]}),h.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[h.jsx("span",{children:Zs(e.created_at)}),e.updated_at!==e.created_at&&h.jsx("span",{children:"(modifiÃ©)"})]})]})]}),h.jsxs(Xs,{children:[h.jsx(Gs,{asChild:!0,children:h.jsx(oe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:h.jsx(et,{className:"h-4 w-4"})})}),h.jsxs(Ks,{align:"end",children:[h.jsxs(Js,{onClick:k,children:[h.jsx(st,{className:"h-4 w-4 mr-2"}),"RÃ©pondre"]}),w&&h.jsxs(h.Fragment,{children:[h.jsxs(Js,{onClick:()=>{m(!0)},children:[h.jsx(es,{className:"h-4 w-4 mr-2"}),"Modifier"]}),h.jsxs(Js,{onClick:()=>x(null,null,(function*(){if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce commentaire ?"))try{const s=yield t(e.id);if(s.error)throw Error(s.error);c({title:"Commentaire supprimÃ©",description:"Votre commentaire a Ã©tÃ© supprimÃ© avec succÃ¨s."})}catch(s){c({title:"Erreur",description:s.message||"Impossible de supprimer le commentaire.",variant:"destructive"})}})),className:"text-red-600",children:[h.jsx(ss,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]}),!y&&h.jsxs(Js,{onClick:()=>x(null,null,(function*(){try{const s=yield r(e.id,{reason:"inappropriate",description:"Commentaire signalÃ© par l'utilisateur"});if(s.error)throw Error(s.error);c({title:"Commentaire signalÃ©",description:"Le commentaire a Ã©tÃ© signalÃ© aux modÃ©rateurs."})}catch(s){c({title:"Erreur",description:s.message||"Impossible de signaler le commentaire.",variant:"destructive"})}})),children:[h.jsx(tt,{className:"h-4 w-4 mr-2"}),"Signaler"]})]})]})]}),"approved"!==e.status&&h.jsx("div",{className:"mb-3",children:(e=>{switch(e){case"approved":return h.jsxs(We,{variant:"default",className:"bg-green-100 text-green-800 border-green-300",children:[h.jsx(Ss,{className:"h-3 w-3 mr-1"}),"ApprouvÃ©"]});case"pending":return h.jsxs(We,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[h.jsx(Cs,{className:"h-3 w-3 mr-1"}),"En attente"]});case"rejected":return h.jsxs(We,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-300",children:[h.jsx(tt,{className:"h-3 w-3 mr-1"}),"RejetÃ©"]});default:return null}})(e.status)}),h.jsx("div",{className:"mb-3",children:h.jsx(zi,{rating:e.rating,readonly:!0,size:"sm"})}),h.jsx("div",{className:"mb-4",children:h.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.content})}),h.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[h.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.likes_count>0&&h.jsxs("span",{children:[e.likes_count," j'aime"]}),e.replies_count>0&&h.jsxs("button",{onClick:()=>v(!j),className:"flex items-center space-x-1 hover:text-foreground transition-colors",children:[h.jsx(be,{className:"h-3 w-3"}),h.jsxs("span",{children:[e.replies_count," rÃ©ponse",e.replies_count>1?"s":""]})]})]}),h.jsxs(oe,{variant:"ghost",size:"sm",onClick:k,className:"text-xs",children:[h.jsx(st,{className:"h-3 w-3 mr-1"}),"RÃ©pondre"]})]}),u&&h.jsx("div",{className:"mt-4 pt-4 border-t",children:h.jsx(Ti,{listingId:e.listing_id,onSubmit:e=>x(null,null,(function*(){try{const t=yield a(e);if(t.error)throw Error(t.error);return s=t.comment,g(!1),b((e=>[s,...e])),a&&a(s),t}catch(t){return{error:t.message}}var s})),onCancel:()=>g(!1),parentId:e.id})}),i&&e.replies_count>0&&j&&h.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[h.jsxs("h5",{className:"text-sm font-medium text-muted-foreground",children:["RÃ©ponses (",e.replies_count,")"]}),f.map((e=>h.jsx(_i,{comment:e,onUpdate:s,onDelete:t,onReply:a,onReport:r,showReplies:!1,className:"ml-4 border-l-2 border-muted pl-4"},e.id)))]})]});var C},qi=({listingId:e,listing:s,className:t="",showStats:a=!0,showFilters:r=!0})=>{const{user:i}=ie(),{toast:n}=Me(),[l,o]=p.useState(!1),{comments:m,loading:u,error:g,pagination:j,addComment:v,updateComment:f,deleteComment:b,reportComment:y,changePage:N,refresh:w,forceRefresh:k}=((e,s={})=>{const[t,a]=p.useState([]),[r,i]=p.useState(!0),[n,l]=p.useState(null),[o,m]=p.useState({}),[u,h]=p.useState(null),g=p.useCallback(((...t)=>x(null,[...t],(function*(t={}){if(e)try{i(!0),l(null);const{comments:r,pagination:n,error:o}=yield vs.getComments(e,c(c({},s),t));if(o)throw Error(o);a(r),m(n)}catch(r){l(r.message)}finally{i(!1)}}))),[e]),j=p.useCallback((()=>x(null,null,(function*(){try{"undefined"!=typeof window&&window.localStorage&&Object.keys(localStorage).filter((e=>e.includes("comment")||e.includes("benome"))).forEach((e=>{localStorage.removeItem(e)}))}catch(e){}yield g({forceRefresh:!0})}))),[g]),v=p.useCallback((s=>x(null,null,(function*(){try{l(null);const{comment:t,error:r}=yield vs.createComment(d(c({},s),{listing_id:e}));if(r)throw Error(r);return a((e=>[t,...e])),{comment:t,error:null}}catch(t){const e=t.message;return l(e),{comment:null,error:e}}}))),[e]),f=p.useCallback(((e,s)=>x(null,null,(function*(){try{l(null);const{comment:t,error:r}=yield vs.updateComment(e,s);if(r)throw Error(r);return a((s=>s.map((s=>s.id===e?t:s)))),{comment:t,error:null}}catch(t){const e=t.message;return l(e),{comment:null,error:e}}}))),[]),b=p.useCallback((e=>x(null,null,(function*(){try{l(null);const{error:s}=yield vs.deleteComment(e);if(s)throw Error(s);return a((s=>s.filter((s=>s.id!==e)))),{error:null}}catch(s){const e=s.message;return l(e),{error:e}}}))),[]),y=p.useCallback(((e,s)=>x(null,null,(function*(){try{l(null);const{report:t,error:a}=yield vs.reportComment(e,s);if(a)throw Error(a);return{report:t,error:null}}catch(t){const e=t.message;return l(e),{report:null,error:e}}}))),[]),N=p.useCallback((e=>{g({page:e})}),[g]),w=p.useCallback((e=>{g(d(c({},e),{page:1}))}),[g]),k=p.useCallback((()=>{g()}),[g]);return p.useEffect((()=>{e&&g()}),[e]),{comments:t,loading:r,error:n,pagination:o,fetchComments:g,addComment:v,updateComment:f,deleteComment:b,reportComment:y,changePage:N,changeFilters:w,refresh:k,forceRefresh:j}})(e),C=(e,s)=>x(null,null,(function*(){return yield f(e,s)})),S=e=>x(null,null,(function*(){return yield b(e)})),A=e=>x(null,null,(function*(){return i?yield v(d(c({},e),{user_id:i.id})):(n({title:"Connexion requise",description:"Vous devez Ãªtre connectÃ© pour rÃ©pondre.",variant:"destructive"}),{error:"Connexion requise"})})),P=(e,s)=>x(null,null,(function*(){return i?yield y(e,d(c({},s),{reporter_id:i.id})):(n({title:"Connexion requise",description:"Vous devez Ãªtre connectÃ© pour signaler un commentaire.",variant:"destructive"}),{error:"Connexion requise"})}));return g?h.jsx(Fe,{className:qe("mt-8",t),children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"text-center text-muted-foreground",children:[h.jsx(be,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Impossible de charger les commentaires"}),h.jsx("p",{className:"mb-4",children:"Une erreur est survenue lors du chargement des commentaires."}),h.jsxs(oe,{onClick:w,variant:"outline",children:[h.jsx(ce,{className:"h-4 w-4 mr-2"}),"RÃ©essayer"]})]})})}):h.jsxs("div",{className:qe("space-y-6",t),children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(be,{className:"h-6 w-6 text-primary"}),h.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Commentaires et Avis"})]}),h.jsx("div",{className:"flex items-center space-x-2",children:h.jsxs(oe,{variant:"outline",size:"sm",onClick:()=>{k()},disabled:u,className:"flex items-center space-x-2",children:[h.jsx(ce,{className:"h-4 w-4 "+(u?"animate-spin":"")}),h.jsx("span",{className:"hidden sm:inline",children:"Actualiser"})]})})]}),h.jsx(Wt,{children:l&&h.jsx(Ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:h.jsxs(Fe,{children:[h.jsx(De,{children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(Ie,{children:"Ajouter un commentaire"}),h.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>o(!1),children:h.jsx(ye,{className:"h-4 w-4"})})]})}),h.jsx(Oe,{children:h.jsx(Ti,{listingId:e,onSubmit:e=>x(null,null,(function*(){if(!i)return void n({title:"Connexion requise",description:"Vous devez Ãªtre connectÃ© pour ajouter un commentaire.",variant:"destructive"});const s=yield v(d(c({},e),{user_id:i.id}));return s.error||o(!1),s})),onCancel:()=>o(!1)})})]})})}),h.jsx(Fe,{children:h.jsx(Oe,{className:"p-0",children:u?h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),h.jsx("p",{className:"text-muted-foreground",children:"Chargement des commentaires..."})]}):0===m.length?h.jsxs("div",{className:"p-8 text-center",children:[h.jsx(be,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun commentaire"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"Soyez le premier Ã  laisser un commentaire sur cette annonce !"}),i&&h.jsxs(oe,{onClick:()=>{o(!0)},children:[h.jsx(ts,{className:"h-4 w-4 mr-2"}),"Ajouter un commentaire"]})]}):h.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[h.jsx("div",{className:"divide-y divide-border",children:m.map(((e,s)=>h.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:h.jsx(_i,{comment:e,onUpdate:C,onDelete:S,onReply:A,onReport:P,className:"border-0 p-0 shadow-none"})},e.id)))}),j&&j.pages>1&&h.jsxs("div",{className:"flex items-center justify-center space-x-2 p-4 border-t",children:[h.jsx(oe,{variant:"outline",size:"sm",onClick:()=>N(j.page-1),disabled:1>=j.page,children:"PrÃ©cÃ©dent"}),h.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",j.page," sur ",j.pages]}),h.jsx(oe,{variant:"outline",size:"sm",onClick:()=>N(j.page+1),disabled:j.page>=j.pages,children:"Suivant"})]})]})})})]})},Fi=({listings:e=[],title:s="Annonces similaires",currentListing:t=null})=>{const[a,r]=p.useState(0),[i,n]=p.useState(!0),l=p.useRef(null),o=p.useRef(null),c=()=>"undefined"==typeof window?4:640>window.innerWidth?2:768>window.innerWidth?3:(window.innerWidth,4),[d,m]=p.useState(c());p.useEffect((()=>{const e=()=>{m(c())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const u=Math.max(0,e.length-d),x=()=>{r((e=>u>e?e+1:0))};return p.useEffect((()=>(i&&e.length>d&&(o.current=setInterval(x,4e3)),()=>{o.current&&clearInterval(o.current)})),[i,a,e.length,d]),e&&0!==e.length?h.jsxs("div",{className:"mt-12",children:[h.jsx("div",{className:"mb-6",children:h.jsx("h2",{className:"text-2xl font-bold",children:s})}),h.jsxs("div",{className:"relative group",children:[e.length>d&&h.jsx(oe,{variant:"outline",size:"icon",onClick:()=>{r((e=>e>0?e-1:u))},className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 h-12 w-12 rounded-full bg-background/90 backdrop-blur-sm shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-background","aria-label":"PrÃ©cÃ©dent",children:h.jsx(Xe,{className:"h-6 w-6"})}),e.length>d&&h.jsx(oe,{variant:"outline",size:"icon",onClick:x,className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 h-12 w-12 rounded-full bg-background/90 backdrop-blur-sm shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-background","aria-label":"Suivant",children:h.jsx(Ge,{className:"h-6 w-6"})}),h.jsx("div",{className:"relative overflow-hidden",onMouseEnter:()=>n(!1),onMouseLeave:()=>n(!0),ref:l,children:h.jsx("div",{className:"flex transition-transform duration-500 ease-out gap-4",style:{transform:`translateX(-${a*(100/d)}%)`},children:e.map((e=>{var s,t;return h.jsx(b,{to:"/annonce/"+e.id,className:"group block flex-shrink-0",style:{width:`calc(${100/d}% - ${16*(d-1)/d}px)`},children:h.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary hover:shadow-lg h-full",children:[h.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[h.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:e.title,src:(null==(s=e.images)?void 0:s[0])||"/placeholder-image.jpg",loading:"lazy"}),(e.is_featured||e.is_boosted||e.is_premium)&&h.jsx("div",{className:"absolute top-2 right-2",children:h.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white text-xs px-2 py-1 rounded-full",children:"â­ Premium"})})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors line-clamp-1",children:e.title}),h.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),e.location&&h.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[h.jsx("span",{className:"mr-1",children:"ðŸ“"}),h.jsx("span",{children:e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non spÃ©cifiÃ©e"})]}),h.jsx("p",{className:"text-lg font-bold text-primary",children:(t=e.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(t))})]})]})},e.id)}))})})]}),t&&h.jsx("div",{className:"mt-8 text-center",children:h.jsxs(b,{to:"/marketplace?category="+t.category,className:"inline-flex items-center px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors font-medium",children:["Voir toutes les annonces similaires (",e.length,")"]})})]}):h.jsxs("div",{className:"mt-12",children:[h.jsx("div",{className:"mb-6",children:h.jsx("h2",{className:"text-2xl font-bold",children:s})}),h.jsx("div",{className:"text-center py-8 text-muted-foreground",children:h.jsx("p",{children:"Aucune annonce similaire trouvÃ©e"})})]})},Di=({isOpen:e,onClose:s,listing:t,onReportSubmitted:a})=>{const[r,i]=p.useState(""),[n,l]=p.useState(""),[o,c]=p.useState("medium"),[d,m]=p.useState(!1),{toast:u}=Me(),g=()=>{d||s()};return e?h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs(Fe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsxs(De,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(tt,{className:"h-5 w-5 text-red-500"}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Signaler cette annonce"}),h.jsx(Re,{children:"Aidez-nous Ã  maintenir la qualitÃ© de notre plateforme"})]})]}),h.jsx(oe,{variant:"ghost",size:"sm",onClick:g,disabled:d,className:"h-8 w-8 p-0",children:h.jsx(ye,{className:"h-4 w-4"})})]}),h.jsxs(Oe,{className:"space-y-6",children:[h.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[h.jsx("h4",{className:"font-medium mb-2",children:"Annonce signalÃ©e :"}),h.jsxs("div",{className:"flex items-start space-x-3",children:[t.images&&t.images[0]&&h.jsx("img",{src:t.images[0],alt:t.title,className:"w-16 h-16 object-cover rounded-lg"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h5",{className:"font-medium truncate",children:t.title}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["PubliÃ©e le ",new Date(t.created_at).toLocaleDateString()]}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:["CatÃ©gorie : ",t.category]})]})]})]}),h.jsxs("form",{onSubmit:e=>x(null,null,(function*(){if(e.preventDefault(),r)if(n.trim()){m(!0);try{const e={listing_id:t.id,type:"listing",reason:r,description:n.trim(),severity:o,status:"pending"};yield ot.createReport(e),u({title:"Signalement envoyÃ©",description:"Votre signalement a Ã©tÃ© enregistrÃ© et sera examinÃ© par notre Ã©quipe."}),i(""),l(""),c("medium"),s(),a&&a()}catch(d){u({title:"Erreur",description:"Impossible d'envoyer le signalement. Veuillez rÃ©essayer.",variant:"destructive"})}finally{m(!1)}}else u({title:"Erreur",description:"Veuillez dÃ©crire le problÃ¨me.",variant:"destructive"});else u({title:"Erreur",description:"Veuillez sÃ©lectionner une raison de signalement.",variant:"destructive"})})),className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"reason",children:"Raison du signalement *"}),h.jsxs(at,{value:r,onValueChange:i,disabled:d,children:[h.jsx(rt,{children:h.jsx(it,{placeholder:"SÃ©lectionnez une raison"})}),h.jsx(nt,{children:[{value:"inappropriate_content",label:"Contenu inappropriÃ©",description:"Contenu offensant, violent ou choquant"},{value:"fake_listing",label:"Annonce fausse",description:"Produit/service inexistant ou trompeur"},{value:"spam",label:"Spam",description:"Annonce rÃ©pÃ©titive ou non pertinente"},{value:"scam",label:"Arnaque",description:"Tentative de fraude ou d'escroquerie"},{value:"copyright",label:"Violation de droits",description:"Contenu protÃ©gÃ© par des droits d'auteur"},{value:"other",label:"Autre",description:"Autre raison non listÃ©e"}].map((e=>h.jsx(lt,{value:e.value,children:h.jsxs("div",{className:"flex flex-col items-start",children:[h.jsx("span",{className:"font-medium",children:e.label}),h.jsx("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value)))})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"severity",children:"Niveau de gravitÃ©"}),h.jsxs(at,{value:o,onValueChange:c,disabled:d,children:[h.jsx(rt,{children:h.jsx(it,{})}),h.jsx(nt,{children:[{value:"low",label:"Faible",color:"bg-blue-100 text-blue-800"},{value:"medium",label:"Moyen",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"Ã‰levÃ©",color:"bg-red-100 text-red-800"}].map((e=>h.jsx(lt,{value:e.value,children:h.jsx(We,{className:e.color,variant:"secondary",children:e.label})},e.value)))})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(Ve,{htmlFor:"description",children:["Description dÃ©taillÃ©e du problÃ¨me *",h.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"(minimum 20 caractÃ¨res)"})]}),h.jsx(Ds,{id:"description",value:n,onChange:e=>l(e.target.value),placeholder:"DÃ©crivez en dÃ©tail le problÃ¨me que vous avez identifiÃ©...",rows:4,disabled:d,minLength:20,required:!0}),h.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length,"/500 caractÃ¨res"]})]}),h.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:h.jsxs("div",{className:"flex items-start space-x-2",children:[h.jsx(de,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),h.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[h.jsx("p",{className:"font-medium",children:"Important :"}),h.jsx("p",{children:"Les signalements abusifs peuvent entraÃ®ner la suspension de votre compte. Assurez-vous que votre signalement est justifiÃ© et basÃ© sur des faits."})]})]})}),h.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[h.jsx(oe,{type:"button",variant:"outline",onClick:g,disabled:d,children:"Annuler"}),h.jsx(oe,{type:"submit",disabled:d||!r||20>n.length,className:"bg-red-600 hover:bg-red-700",children:d?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent mr-2"}),"Envoi en cours..."]}):h.jsxs(h.Fragment,{children:[h.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Envoyer le signalement"]})})]})]})]})]})}):null},Ii=()=>{const{id:e}=k(),s=f(),{user:t}=ie(),{toast:a}=Me(),[r,i]=p.useState(null),[n,l]=p.useState([]),[o,c]=p.useState(!0),[d,m]=p.useState(!1),[u,g]=p.useState(!1),[j,v]=p.useState(!1),[y,N]=p.useState(!1),{images:w}=Jr(r);p.useEffect((()=>{e&&x(null,null,(function*(){c(!0);try{if(!e||""===e||"string"!=typeof e)throw Error(`ID d'annonce invalide: "${e}"`);const r=yield hs.getListingById(e);if(r){i(r);try{hs.incrementViews(r.id)}catch(t){}"approved"!==r.status&&a({title:"Annonce en attente",description:"Cette annonce est en cours de modÃ©ration.",variant:"default"});const{data:e}=yield hs.getAllListings({category:r.category,status:"approved",limit:15});l(e.filter((e=>e.id!==r.id)).slice(0,10))}else a({title:"Annonce non trouvÃ©e",description:"L'annonce que vous recherchez n'existe pas ou a Ã©tÃ© supprimÃ©e.",variant:"destructive"}),s("/marketplace")}catch(r){a({title:"Erreur",description:"Impossible de charger les dÃ©tails de l'annonce: "+r.message,variant:"destructive"}),s("/marketplace")}finally{c(!1)}}))}),[e,s,a]),p.useEffect((()=>{try{if("undefined"!=typeof window&&r){const e=(null==r?void 0:r.location)&&"object"==typeof r.location&&r.location.city||"";window.__MAXIMARKET_CONTEXT={listing:{id:r.id,title:r.title,price:r.price,locationCity:e,sellerId:r.user_id,category:r.category}}}}catch(e){}return()=>{try{"undefined"!=typeof window&&window.__MAXIMARKET_CONTEXT&&delete window.__MAXIMARKET_CONTEXT}catch(e){}}}),[r]);const C=e=>{switch(e){case"real_estate":return"Immobilier";case"automobile":return"Automobile";case"services":return"Services";case"marketplace":return"Marketplace";default:return"Autre"}},S=e=>x(null,null,(function*(){var i,n;if("whatsapp"!==e&&"phone"!==e){if("message"===e){if(!t)return a({title:"Connexion requise",description:"Connectez-vous pour envoyer un message privÃ© au vendeur.",variant:"default"}),void s("/connexion");if(r.user_id===t.id)return void a({title:"Action impossible",description:"Vous ne pouvez pas vous contacter vous-mÃªme.",variant:"destructive"});if(!r.user_id||"test-user-1"===r.user_id)return void a({title:"Annonce de test",description:"Cette annonce est en mode test. Les fonctionnalitÃ©s de contact ne sont pas disponibles.",variant:"default"});try{const e=yield gs.createConversation(r.user_id,r.id);s(`/messages?conversation=${e.id}&listing=${r.id}`),a({title:"Conversation crÃ©Ã©e",description:"Vous avez Ã©tÃ© redirigÃ© vers la messagerie."})}catch(l){a({title:"Erreur",description:"Impossible de crÃ©er la conversation. Veuillez rÃ©essayer.",variant:"destructive"})}}}else{const s=(null==(i=r.contact_info)?void 0:i.phone)||(null==(n=r.users)?void 0:n.phone_number);if(!s)return void a({title:"Pas de numÃ©ro disponible",description:"Aucun numÃ©ro de tÃ©lÃ©phone n'est disponible pour cette annonce.",variant:"destructive"});const t=s.replace(/[\s\-\(\)]/g,""),l=t.startsWith("+")?t:t.startsWith("221")?"+"+t:"+221"+t;if("phone"===e)window.open("tel:"+l,"_blank","noopener,noreferrer"),a({title:"Appel en cours",description:"Appel vers "+l});else if("whatsapp"===e){const e=encodeURIComponent(`Bonjour ! Je suis intÃ©ressÃ©(e) par votre annonce "${r.title}".\n\nPouvez-vous me donner plus d'informations ?`);window.open(`https://wa.me/${l}?text=${e}`,"_blank","noopener,noreferrer"),a({title:"WhatsApp ouvert",description:"Conversation WhatsApp avec "+l})}}}));return o?h.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),h.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de l'annonce..."})]})}):r?h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs(oe,{variant:"ghost",onClick:()=>s(-1),className:"mb-4",children:[h.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Retour"]}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[h.jsx(b,{to:"/",className:"hover:text-primary",children:"Accueil"}),h.jsx("span",{children:"/"}),h.jsx(b,{to:"/"+("real_estate"===r.category?"immobilier":"automobile"===r.category?"automobile":"services"===r.category?"services":"marketplace"),className:"hover:text-primary",children:C(r.category)}),h.jsx("span",{children:"/"}),h.jsx("span",{className:"text-foreground",children:r.title})]})]}),h.jsx("div",{className:"max-w-4xl mx-auto",children:h.jsxs("div",{children:[h.jsx("div",{className:"mb-8",children:h.jsx(Ei,{images:w,title:r.title})}),h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.title}),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ke,{className:"h-4 w-4 mr-1"}),h.jsx("span",{className:"text-sm",children:r.location&&"object"==typeof r.location&&r.location.city?`${r.location.city}, ${r.location.country||""}`:"Localisation non spÃ©cifiÃ©e"})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Je,{className:"h-4 w-4 mr-1"}),h.jsxs("span",{className:"text-sm",children:["PubliÃ© le ",(P=r.created_at,new Date(P).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}))]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Li,{listing:r,variant:"compact"}),h.jsxs(oe,{variant:"outline",size:"sm",onClick:()=>{t?g(!0):s("/connexion")},children:[h.jsx(tt,{className:"h-4 w-4 mr-1"}),"Signaler"]})]})]}),h.jsxs("div",{className:"text-3xl font-bold text-primary mb-4",children:[(A=r.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(A)),(r.is_featured||r.is_boosted||r.is_premium)&&h.jsx(We,{className:"ml-3 bg-gradient-to-r from-amber-500 to-yellow-500 text-white border-amber-600",children:"â­ Premium"})]}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[h.jsxs(We,{variant:"secondary",className:"bg-primary/10 text-primary",children:[(e=>{switch(e){case"real_estate":return"ðŸ ";case"automobile":return"ðŸš—";case"services":return"ðŸ”§";case"marketplace":return"ðŸ›ï¸";default:return"ðŸ“‹"}})(r.category)," ",C(r.category)]}),"approved"===r.status&&h.jsx(We,{variant:"default",className:"badge-approved",children:"ApprouvÃ©"}),t&&r.user_id===t.id&&h.jsx(Qr,{listingId:r.id,listing:r,size:"default",showActions:!0,className:"ml-auto"})]})]}),h.jsx(ct,{className:"my-8"}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Description"}),h.jsx("div",{className:"prose prose-invert max-w-none",children:h.jsx("p",{className:"whitespace-pre-line",children:r.description})})]}),r.real_estate_details&&h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"DÃ©tails immobiliers"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.real_estate_details.type&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),h.jsx("p",{className:"font-medium",children:r.real_estate_details.type})]}),r.real_estate_details.rooms&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"PiÃ¨ces"}),h.jsx("p",{className:"font-medium",children:r.real_estate_details.rooms})]}),r.real_estate_details.surface&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Surface"}),h.jsxs("p",{className:"font-medium",children:[r.real_estate_details.surface," mÂ²"]})]})]})]}),r.automobile_details&&h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"DÃ©tails automobile"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.automobile_details.brand&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Marque"}),h.jsx("p",{className:"font-medium",children:r.automobile_details.brand})]}),r.automobile_details.model&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"ModÃ¨le"}),h.jsx("p",{className:"font-medium",children:r.automobile_details.model})]}),r.automobile_details.year&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"AnnÃ©e"}),h.jsx("p",{className:"font-medium",children:r.automobile_details.year})]}),r.automobile_details.fuel&&h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Carburant"}),h.jsx("p",{className:"font-medium",children:r.automobile_details.fuel})]})]})]}),h.jsx("div",{className:"mt-12 mb-8",children:h.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Contacter le vendeur"}),r.users&&h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendeur"}),h.jsxs("p",{className:"font-medium",children:[r.users.first_name," ",r.users.last_name]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[h.jsxs(oe,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>S("whatsapp"),children:[h.jsx(be,{className:"h-4 w-4 mr-2"}),"WhatsApp"]}),h.jsxs(oe,{className:"w-full",onClick:()=>S("phone"),children:[h.jsx(ze,{className:"h-4 w-4 mr-2"}),"Appeler"]}),h.jsxs(oe,{variant:"outline",className:"w-full",onClick:()=>S("message"),children:[h.jsx(Le,{className:"h-4 w-4 mr-2"}),"Message"]}),h.jsxs(oe,{variant:"outline",className:"w-full",onClick:()=>x(null,null,(function*(){if(t)try{m(!d),a({title:d?"RetirÃ© des favoris":"AjoutÃ© aux favoris",description:d?"L'annonce a Ã©tÃ© retirÃ©e de vos favoris.":"L'annonce a Ã©tÃ© ajoutÃ©e Ã  vos favoris."})}catch(e){a({title:"Erreur",description:"Impossible de modifier les favoris.",variant:"destructive"})}else s("/connexion")})),children:[h.jsx(as,{className:"h-4 w-4 mr-2 "+(d?"fill-red-500 text-red-500":"")}),d?"Retirer":"Favoris"]})]}),!t&&h.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:h.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["ðŸ’¡ ",h.jsx("strong",{children:"Conseil :"})," Vous pouvez contacter le vendeur directement par WhatsApp ou tÃ©lÃ©phone sans crÃ©er de compte. Connectez-vous uniquement si vous souhaitez utiliser la messagerie privÃ©e."]})})]})}),h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-amber-600 dark:text-amber-400 text-lg mr-2",children:"âš ï¸"}),h.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Conseils de sÃ©curitÃ©"})]}),h.jsx("button",{onClick:()=>v(!j),className:"text-xs text-amber-600 dark:text-amber-400 hover:underline",children:j?"Masquer":"Voir plus"})]}),h.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300 mb-2",children:"ðŸ¤ Lieu public â€¢ ðŸ” VÃ©rifiez le bien â€¢ ðŸ’° Paiement sÃ©curisÃ© â€¢ ðŸš¨ Signalez les problÃ¨mes"}),j&&h.jsx("div",{className:"mt-3 pt-3 border-t border-amber-200 dark:border-amber-700",children:h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs",children:[h.jsxs("div",{children:[h.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Rencontre :"}),h.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Lieu public, Ã©vitez les heures tardives"})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"VÃ©rification :"}),h.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Inspectez, testez, demandez les documents"})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Paiement :"}),h.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"EspÃ¨ces privilÃ©giÃ©es, mÃ©fiez-vous des prix bas"})]}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Signalement :"}),h.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Conservez les communications, signalez les abus"})]})]})})]})}),h.jsx("div",{className:"mb-8",children:h.jsx(qi,{listingId:r.id,listing:r,className:"mt-8"})}),h.jsx(Fi,{listings:n,title:"Annonces similaires",currentListing:r})]})}),h.jsx(Di,{isOpen:u,onClose:()=>g(!1),listing:r,onReportSubmitted:()=>{}})]}):null;var A,P},Ri=()=>{const{user:e}=ie(),[s,t]=p.useState([]),[a,r]=p.useState([]),[i,n]=p.useState(!0),[l,o]=p.useState("grid"),[m,u]=p.useState(""),[g,j]=p.useState([]),[v,f]=p.useState(null),[b,y]=p.useState("");p.useEffect((()=>{x(null,null,(function*(){if(e){n(!0);try{const{data:s,error:a}=yield le.from("favorites").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;const i=s.map((e=>e.listing_id));if(i.length>0){const{data:e,error:a}=yield le.from("listings").select("\n            *,\n            user:users(id, full_name, avatar_url),\n            category:categories(name, slug)\n          ").in("id",i).eq("status","approved");if(a)throw a;const n=s.map((s=>{const t=e.find((e=>e.id===s.listing_id));return d(c({},s),{listing:t})})).filter((e=>e.listing));t(n),r(e)}else t([]),r([])}catch(s){}finally{n(!1)}}}))}),[e]);const N=s.filter((e=>{var s,t;const a=e.listing;if(!a)return!1;const r=""===m||a.title.toLowerCase().includes(m.toLowerCase())||(null==(s=a.description)?void 0:s.toLowerCase().includes(m.toLowerCase()))||(null==(t=e.notes)?void 0:t.toLowerCase().includes(m.toLowerCase())),i=0===g.length||g.some((s=>{var t;return null==(t=e.tags)?void 0:t.includes(s)}));return r&&i})),w=[...new Set(s.flatMap((e=>e.tags||[])))].sort(),k={total:s.length,withNotes:s.filter((e=>e.notes)).length,withTags:s.filter((e=>e.tags&&e.tags.length>0)).length,categories:[...new Set(s.map((e=>{var s,t;return null==(t=null==(s=e.listing)?void 0:s.category)?void 0:t.name})).filter(Boolean))]};return e?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx("div",{className:"mb-8",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Favoris"}),h.jsxs("p",{className:"text-gray-600 mt-2",children:[k.total," annonce(s) sauvegardÃ©e(s)"]})]}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[h.jsxs("span",{children:[k.withNotes," avec notes"]}),h.jsxs("span",{children:[k.withTags," avec tags"]}),h.jsxs("span",{children:[k.categories.length," catÃ©gories"]})]})]})}),h.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsx("div",{className:"flex-1",children:h.jsxs("div",{className:"relative",children:[h.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),h.jsx("input",{type:"text",placeholder:"Rechercher dans vos favoris...",value:m,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(zs,{size:20,className:"text-gray-400"}),h.jsxs("select",{value:g.length>0?g[0]:"",onChange:e=>j(e.target.value?[e.target.value]:[]),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"",children:"Tous les tags"}),w.map((e=>h.jsx("option",{value:e,children:e},e)))]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{onClick:()=>o("grid"),className:"p-2 rounded "+("grid"===l?"bg-blue-100 text-blue-600":"text-gray-400"),children:h.jsx(dt,{size:20})}),h.jsx("button",{onClick:()=>o("list"),className:"p-2 rounded "+("list"===l?"bg-blue-100 text-blue-600":"text-gray-400"),children:h.jsx(mt,{size:20})})]})]})}),i?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement de vos favoris..."})]}):0===N.length?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(as,{className:"mx-auto h-12 w-12 text-gray-400"}),h.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:m||g.length>0?"Aucun rÃ©sultat":"Aucun favori"}),h.jsx("p",{className:"mt-2 text-gray-600",children:m||g.length>0?"Essayez de modifier vos critÃ¨res de recherche":"Commencez Ã  ajouter des annonces Ã  vos favoris"})]}):h.jsx("div",{className:"grid"===l?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:N.map((e=>h.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[h.jsx("div",{className:"p-4",children:h.jsx(Yr,{listing:e.listing,compact:"list"===l})}),h.jsxs("div",{className:"px-4 pb-4",children:[e.tags&&e.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e=>h.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[h.jsx(Os,{size:12,className:"mr-1"}),e]},e)))}),h.jsx("div",{className:"mb-3",children:v===e.id?h.jsxs("div",{className:"space-y-2",children:[h.jsx("textarea",{value:b,onChange:e=>y(e.target.value),placeholder:"Ajouter une note...",className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",rows:"2"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx("button",{onClick:()=>{return s=e.id,a=b,x(null,null,(function*(){try{const{error:e}=yield le.from("favorites").update({notes:a}).eq("id",s);if(e)throw e;t((e=>e.map((e=>e.id===s?d(c({},e),{notes:a}):e)))),f(null),y("")}catch(e){}}));var s,a},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Sauvegarder"}),h.jsx("button",{onClick:()=>{f(null),y("")},className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400",children:"Annuler"})]})]}):h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.notes||"Aucune note"}),h.jsx("button",{onClick:()=>{f(e.id),y(e.notes||"")},className:"ml-2 p-1 text-gray-400 hover:text-gray-600",children:h.jsx(ut,{size:14})})]})}),h.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[h.jsxs("span",{className:"text-xs text-gray-500",children:["AjoutÃ© le ",new Date(e.created_at).toLocaleDateString("fr-FR")]}),h.jsxs("button",{onClick:()=>{return s=e.id,x(null,null,(function*(){try{const{error:e}=yield le.from("favorites").delete().eq("id",s);if(e)throw e;t((e=>e.filter((e=>e.id!==s))))}catch(e){}}));var s},className:"flex items-center space-x-1 text-red-600 hover:text-red-800 text-sm",children:[h.jsx(xt,{size:14}),h.jsx("span",{children:"Retirer"})]})]})]})]},e.id)))})]}):h.jsx("div",{className:"text-center py-8",children:h.jsx("p",{className:"text-gray-500",children:"Connectez-vous pour voir vos favoris"})})},Oi=()=>h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsxs("div",{className:"flex items-center justify-center mb-4",children:[h.jsx(as,{className:"h-12 w-12 text-primary mr-4"}),h.jsx("h1",{className:"text-4xl font-bold",children:"Mes Favoris"})]}),h.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Retrouvez toutes vos annonces sauvegardÃ©es et gÃ©rez vos favoris en toute simplicitÃ©."})]}),h.jsxs(Fe,{className:"shadow-lg border-0",children:[h.jsx(De,{children:h.jsxs(Ie,{className:"flex items-center space-x-2",children:[h.jsx(as,{className:"h-5 w-5 text-primary"}),h.jsx("span",{children:"Annonces Favorites"})]})}),h.jsx(Oe,{children:h.jsx(Ri,{})})]}),h.jsxs("div",{className:"text-center mt-12",children:[h.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous ne trouvez pas ce que vous cherchez ?"}),h.jsx(oe,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>window.location.href="/marketplace",children:"Explorer le Marketplace"})]})]})}),Vi=({listingId:e,onPackageSelected:s,onClose:t})=>{const{user:a}=ie(),r=f(),[i,n]=p.useState([]),[l,o]=p.useState(!0),[c,d]=p.useState(null),[m,u]=p.useState(!1),[g,j]=p.useState(null);p.useEffect((()=>{v()}),[]);const v=()=>x(null,null,(function*(){try{o(!0);const e=yield fs.getBoostPackages();n(e.packages||[])}catch(e){j("Erreur lors du chargement des packages de boost")}finally{o(!1)}})),b=e=>{switch(e){case"priority":return h.jsx(Ze,{className:"h-4 w-4"});case"badge":return h.jsx(qs,{className:"h-4 w-4"});case"featured":return h.jsx(_s,{className:"h-4 w-4"});case"analytics":return h.jsx(ms,{className:"h-4 w-4"});case"support":return h.jsx(Ye,{className:"h-4 w-4"});default:return h.jsx(ht,{className:"h-4 w-4"})}},y=(e,s)=>{switch(e){case"priority":return"highest"===s?"PrioritÃ© maximale":"high"===s?"PrioritÃ© Ã©levÃ©e":"PrioritÃ© moyenne";case"badge":return"Badge boostÃ© visible";case"featured":return s?"Mise en avant premium":"VisibilitÃ© standard";case"analytics":return"premium"===s?"Analytics dÃ©taillÃ©s":"detailed"===s?"Analytics avancÃ©s":"Analytics de base";case"support":return"Support prioritaire";default:return s}},N=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return l?h.jsx("div",{className:"flex items-center justify-center p-8",children:h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):g?h.jsxs("div",{className:"text-center p-6",children:[h.jsx("div",{className:"text-red-500 mb-4",children:g}),h.jsx(oe,{onClick:v,variant:"outline",children:"RÃ©essayer"})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ðŸš€ Booster votre annonce"}),h.jsx("p",{className:"text-muted-foreground",children:"Choisissez le package qui correspond Ã  vos besoins et boostez votre visibilitÃ© !"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(((e,s)=>{var t,a;return h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:h.jsxs(Fe,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg "+((null==c?void 0:c.id)===e.id?"ring-2 ring-primary border-primary":"hover:border-primary/50"),onClick:()=>(e=>{d(e)})(e),children:[h.jsxs(De,{className:"text-center pb-4",children:[h.jsx("div",{className:"flex justify-center mb-3",children:(null==(t=e.features)?void 0:t.featured)?h.jsx(_s,{className:"h-8 w-8 text-yellow-500"}):"highest"===(null==(a=e.features)?void 0:a.priority)?h.jsx(qs,{className:"h-8 w-8 text-purple-500"}):h.jsx(rs,{className:"h-8 w-8 text-blue-500"})}),h.jsx(Ie,{className:"text-xl",children:e.name}),h.jsx("p",{className:"text-muted-foreground text-sm",children:e.description})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:N(e.price)}),h.jsxs("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[h.jsx(Cs,{className:"h-4 w-4 mr-1"}),e.duration_days," jour",e.duration_days>1?"s":""]})]}),h.jsx("div",{className:"space-y-2",children:Object.entries(e.features||{}).map((([e,s])=>h.jsxs("div",{className:"flex items-center text-sm",children:[h.jsx("div",{className:"text-primary mr-2",children:b(e)}),h.jsx("span",{children:y(e,s)})]},e)))}),(null==c?void 0:c.id)===e.id&&h.jsx("div",{className:"flex justify-center",children:h.jsxs(We,{variant:"default",className:"bg-primary",children:[h.jsx(ht,{className:"h-4 w-4 mr-1"}),"SÃ©lectionnÃ©"]})})]})]})},e.id)}))}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[h.jsx(oe,{onClick:t,variant:"outline",className:"flex-1 sm:flex-none",children:"Annuler"}),h.jsx(oe,{onClick:()=>x(null,null,(function*(){if(a)if(c)try{u(!0),j(null);const r=yield fs.purchaseBoost(c.id,e,a.id);r.success&&(null==s||s(r),null==t||t())}catch(i){j(i.message||"Erreur lors de l'achat du boost")}finally{u(!1)}else j("Veuillez sÃ©lectionner un package");else r("/connexion",{state:{from:"/booster-annonce"}})})),disabled:!c||m,className:"flex-1 sm:flex-none bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:m?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Achat en cours..."]}):h.jsxs(h.Fragment,{children:["ðŸš€ Acheter le Boost",c&&" - "+N(c.price)]})})]}),h.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[h.jsx("p",{children:"ðŸ’¡ Les boosts sont activÃ©s immÃ©diatement aprÃ¨s confirmation du paiement"}),h.jsx("p",{children:"ðŸ”„ Vous pouvez renouveler ou annuler vos boosts Ã  tout moment"})]})]})},Ui=()=>{var e;const{id:s}=k(),t=f(),{user:a}=ie(),{toast:r}=Me(),[i,n]=p.useState(null),[l,o]=p.useState(null),[c,d]=p.useState(!0),[m,u]=p.useState(null),[g,j]=p.useState(!1),[v,b]=p.useState(null);p.useEffect((()=>{s&&y()}),[s]);const y=()=>x(null,null,(function*(){try{d(!0),u(null);const e=yield hs.getListingById(s);n(e);const t=yield fs.getBoostStatus(s);o(t)}catch(e){u(e.message||"Erreur lors du chargement des donnÃ©es")}finally{d(!1)}}));return c?h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"flex items-center justify-center py-20",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):m?h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"text-center py-20",children:[h.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erreur"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:m}),h.jsx(oe,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})}):i?(null==a?void 0:a.id)!==i.user_id?h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸš«"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AccÃ¨s non autorisÃ©"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous ne pouvez booster que vos propres annonces."}),h.jsx(oe,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[h.jsxs(oe,{onClick:()=>t(-1),variant:"ghost",className:"mb-4",children:[h.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Retour"]}),h.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"ðŸš€ Booster votre annonce"}),h.jsx("p",{className:"text-muted-foreground text-lg",children:"Augmentez votre visibilitÃ© et obtenez plus de contacts"})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Votre annonce"}),h.jsx(Yr,{listing:i,showActions:!1})]}),h.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:h.jsxs(Fe,{children:[h.jsx(De,{children:h.jsxs(Ie,{className:"flex items-center",children:[h.jsx(Ze,{className:"h-5 w-5 mr-2 text-primary"}),"Statut du boost"]})}),h.jsx(Oe,{children:(null==l?void 0:l.hasActiveBoost)?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(qs,{className:"h-5 w-5 text-green-600 mr-2"}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-semibold text-green-800",children:["Boost actif : ",null==(e=l.currentBoost.boost_packages)?void 0:e.name]}),h.jsxs("p",{className:"text-sm text-green-600",children:["Expire le ",new Date(l.currentBoost.end_date).toLocaleDateString("fr-FR")]})]})]}),h.jsx(We,{variant:"default",className:"bg-green-600",children:"Actif"})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(oe,{onClick:()=>x(null,null,(function*(){if(null==l?void 0:l.currentBoost)try{(yield fs.renewBoost(l.currentBoost.id,a.id)).success&&(r({title:"Boost renouvelÃ© !",description:"Votre boost a Ã©tÃ© prolongÃ© avec succÃ¨s."}),y())}catch(e){r({title:"Erreur",description:e.message||"Erreur lors du renouvellement",variant:"destructive"})}})),variant:"outline",className:"flex-1",children:"ðŸ”„ Renouveler"}),h.jsx(oe,{onClick:()=>x(null,null,(function*(){if((null==l?void 0:l.currentBoost)&&confirm("ÃŠtes-vous sÃ»r de vouloir annuler ce boost ?"))try{(yield fs.cancelBoost(l.currentBoost.id,a.id)).success&&(r({title:"Boost annulÃ©",description:"Votre boost a Ã©tÃ© annulÃ© avec succÃ¨s."}),y())}catch(e){r({title:"Erreur",description:e.message||"Erreur lors de l'annulation",variant:"destructive"})}})),variant:"outline",className:"flex-1",children:"âŒ Annuler"})]})]}):h.jsxs("div",{className:"text-center py-8",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“ˆ"}),h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun boost actif"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre annonce n'est actuellement pas boostÃ©e"}),h.jsx(oe,{onClick:()=>j(!0),className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:"ðŸš€ Booster maintenant"})]})})]})})]}),h.jsx(Ht.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-6",children:!(null==l?void 0:l.hasActiveBoost)&&h.jsx(Fe,{className:"bg-gradient-to-br from-primary/10 to-blue-500/10 border-primary/20",children:h.jsxs(Oe,{className:"p-6 text-center",children:[h.jsx("div",{className:"text-4xl mb-3",children:"ðŸš€"}),h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"PrÃªt Ã  booster ?"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Augmentez votre visibilitÃ© et obtenez plus de contacts"}),h.jsx(oe,{onClick:()=>j(!0),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:"Commencer maintenant"})]})})})]}),v&&h.jsx(pt,{open:!!v,onOpenChange:()=>b(null),children:h.jsxs(gt,{className:"sm:max-w-md",children:[h.jsx(jt,{children:h.jsx(vt,{className:"text-center",children:"ðŸŽ‰ Boost achetÃ© !"})}),h.jsxs("div",{className:"text-center py-6",children:[h.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),h.jsx("h3",{className:"text-lg font-semibold mb-2",children:"FÃ©licitations !"}),h.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre boost a Ã©tÃ© achetÃ© avec succÃ¨s et sera activÃ© aprÃ¨s confirmation du paiement."}),h.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:h.jsxs("p",{className:"text-sm text-green-800",children:[h.jsx("strong",{children:"Package :"})," ",v.packageData.name,h.jsx("br",{}),h.jsx("strong",{children:"Prix :"})," ",v.packageData.price," FCFA",h.jsx("br",{}),h.jsx("strong",{children:"DurÃ©e :"})," ",v.packageData.duration_days," jours"]})})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx(oe,{onClick:()=>b(null),children:"Continuer"})})]})}),h.jsx(pt,{open:g,onOpenChange:j,children:h.jsxs(gt,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[h.jsx(jt,{children:h.jsx(vt,{children:"Choisir un package de boost"})}),h.jsx(Vi,{listingId:s,onPackageSelected:e=>{b(e),j(!1),e.boostId?t("/paiement/"+e.boostId):r({title:"Erreur",description:"Erreur lors de la crÃ©ation du boost. Veuillez rÃ©essayer.",variant:"destructive"})},onClose:()=>j(!1)})]})})]})}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce non trouvÃ©e"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"L'annonce que vous recherchez n'existe pas."}),h.jsx(oe,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})})},$i=({amount:e,currency:s="XOF",onPaymentMethodSelected:t,onClose:a,packageName:r="Package Premium",userCountry:i="BJ"})=>{var n,l;const[o,m]=p.useState(""),[u,g]=p.useState(""),[j,v]=p.useState({number:"",expiry:"",cvv:"",name:"",brand:"visa"}),[f,b]=p.useState(!1),[y,N]=p.useState(null),[w,k]=p.useState(!1),[C,S]=p.useState(""),[A,P]=p.useState(i),E=ft.getPaymentMethods(A),L=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),z=e=>{switch(e){case"orange":return"border-orange-200 bg-gradient-to-r from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100";case"yellow":return"border-yellow-200 bg-gradient-to-r from-yellow-50 to-orange-50 hover:from-yellow-100 hover:to-orange-100";case"blue":return"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100";case"green":return"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100";default:return"border-gray-200 bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100"}};return h.jsx(bs,{children:h.jsxs("div",{className:"space-y-6",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"ðŸ’³ Choisir le mode de paiement"}),h.jsx("p",{className:"text-muted-foreground",children:"SÃ©lectionnez votre mÃ©thode de paiement prÃ©fÃ©rÃ©e pour finaliser votre achat"}),h.jsx("div",{className:"mt-4 flex justify-center",children:h.jsxs("div",{className:"flex items-center gap-2 bg-white/50 px-4 py-2 rounded-lg border",children:[h.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}),h.jsx("span",{className:"text-sm text-muted-foreground",children:"Pays :"}),h.jsxs(at,{value:A,onValueChange:P,children:[h.jsx(rt,{className:"w-32 h-8",children:h.jsx(it,{})}),h.jsxs(nt,{children:[h.jsx(lt,{value:"BJ",children:"ðŸ‡§ðŸ‡¯ BÃ©nin"}),h.jsx(lt,{value:"CI",children:"ðŸ‡¨ðŸ‡® CÃ´te d'Ivoire"}),h.jsx(lt,{value:"SN",children:"ðŸ‡¸ðŸ‡³ SÃ©nÃ©gal"}),h.jsx(lt,{value:"ML",children:"ðŸ‡²ðŸ‡± Mali"}),h.jsx(lt,{value:"BF",children:"ðŸ‡§ðŸ‡« Burkina Faso"}),h.jsx(lt,{value:"NE",children:"ðŸ‡³ðŸ‡ª Niger"}),h.jsx(lt,{value:"TG",children:"ðŸ‡¹ðŸ‡¬ Togo"}),h.jsx(lt,{value:"GH",children:"ðŸ‡¬ðŸ‡­ Ghana"}),h.jsx(lt,{value:"NG",children:"ðŸ‡³ðŸ‡¬ Nigeria"})]})]})]})}),h.jsxs(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-6 p-6 bg-gradient-to-r from-primary/5 to-blue-500/5 rounded-xl border border-primary/20 shadow-sm",children:[h.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"RÃ©sumÃ© de votre commande"}),h.jsx("div",{className:"font-semibold text-lg text-primary",children:r}),h.jsx("div",{className:"text-3xl font-bold text-primary",children:L(e)}),h.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Paiement sÃ©curisÃ© via Kkiapay â€¢ Frais : 1.5% + 50 FCFA"})]})]}),h.jsx(Z,{value:o,onValueChange:e=>{m(e),N(null)},children:h.jsx("div",{className:"space-y-4",children:Object.entries(E).map((([e,s],t)=>h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:[h.jsx(ee,{value:e,id:e,className:"sr-only"}),h.jsx(Ve,{htmlFor:e,className:"block cursor-pointer p-6 border-2 rounded-xl transition-all duration-300 hover:shadow-lg "+(o===e?"border-primary bg-gradient-to-r from-primary/5 to-blue-500/5 shadow-lg scale-[1.02]":z(s.color||"blue")),children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx(Ht.div,{whileHover:{scale:1.1},className:"p-3 rounded-lg bg-white shadow-sm",children:h.jsx("span",{className:"text-2xl",children:s.icon})})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("h3",{className:"font-semibold text-lg",children:s.name}),s.popular&&h.jsxs(We,{variant:"default",className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs",children:[h.jsx(qs,{className:"h-3 w-3 mr-1"}),"Populaire"]}),h.jsxs(ys,{children:[h.jsx(Ns,{children:h.jsx(yt,{className:"h-4 w-4 text-muted-foreground"})}),h.jsx(ws,{children:h.jsxs("p",{children:["Temps de traitement : ",s.processingTime]})})]})]}),h.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["â±ï¸ Traitement : ",s.processingTime]})]}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx("div",{className:"w-6 h-6 rounded-full border-2 transition-all duration-300 "+(o===e?"border-primary bg-primary shadow-lg":"border-gray-300"),children:o===e&&h.jsx(Ht.div,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 bg-white rounded-full m-0.5"})})})]})})]},e)))})}),h.jsx(Wt,{mode:"wait",children:o&&h.jsxs(Ht.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[("orange_money"===o||"mtn_mobile_money"===o||"moov_money"===o)&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs(Fe,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[h.jsx(De,{children:h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(Nt,{className:"h-5 w-5"}),null==(n=E[o])?void 0:n.name]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"phone",className:"text-sm font-medium",children:"NumÃ©ro de tÃ©lÃ©phone"}),h.jsx(Ae,{id:"phone",type:"tel",placeholder:"Ex: "+("BJ"===A?"90 12 34 56":"CI"===A?"07 08 09 10 11":"NumÃ©ro local"),value:u,onChange:e=>(e=>{const s=ft.formatPhoneNumber(e,A);g(s)})(e.target.value),className:"mt-2 h-12 text-lg",onFocus:()=>S("phone"),onBlur:()=>S("")}),h.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Entrez votre numÃ©ro ",null==(l=E[o])?void 0:l.name]})]}),h.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(ls,{className:"h-5 w-5 text-blue-600 mt-0.5"}),h.jsxs("div",{className:"text-sm text-blue-800",children:[h.jsx("p",{className:"font-medium mb-1",children:"Paiement sÃ©curisÃ©"}),h.jsx("p",{children:"Vous recevrez un SMS de confirmation pour valider le paiement"})]})]})})]})]})}),"card"===o&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:h.jsxs(Fe,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[h.jsx(De,{children:h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(is,{className:"h-5 w-5"}),"Informations de la carte"]})}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"cardNumber",className:"text-sm font-medium",children:"NumÃ©ro de carte"}),h.jsxs("div",{className:"relative mt-2",children:[h.jsx(Ae,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:j.number,onChange:e=>(e=>{var s;const t=(null==(s=e.replace(/\D/g,"").match(/.{1,4}/g))?void 0:s.join(" "))||"";v((e=>d(c({},e),{number:t})));const a=e.replace(/\D/g,"")[0];let r="visa";"5"===a?r="mastercard":"3"===a?r="amex":"6"===a&&(r="discover"),v((e=>d(c({},e),{brand:r})))})(e.target.value),maxLength:19,className:"h-12 text-lg pr-12",onFocus:()=>S("cardNumber"),onBlur:()=>S("")}),h.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-2xl",children:(j.brand,"ðŸ’³")})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"expiry",className:"text-sm font-medium",children:"Date d'expiration"}),h.jsx(Ae,{id:"expiry",type:"text",placeholder:"MM/AA",value:j.expiry,onChange:e=>(e=>{let s=e.replace(/\D/g,"");2>s.length||(s=s.substring(0,2)+"/"+s.substring(2,4)),v((e=>d(c({},e),{expiry:s})))})(e.target.value),maxLength:5,className:"mt-2 h-12",onFocus:()=>S("expiry"),onBlur:()=>S("")})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"cvv",className:"text-sm font-medium",children:"Code de sÃ©curitÃ©"}),h.jsxs("div",{className:"relative mt-2",children:[h.jsx(Ae,{id:"cvv",type:w?"text":"password",placeholder:"123",value:j.cvv,onChange:e=>v((s=>d(c({},s),{cvv:e.target.value}))),maxLength:4,className:"h-12 pr-12",onFocus:()=>S("cvv"),onBlur:()=>S("")}),h.jsx(oe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>k(!w),children:w?h.jsx(wt,{className:"h-4 w-4"}):h.jsx(Qe,{className:"h-4 w-4"})})]})]})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"cardName",className:"text-sm font-medium",children:"Nom sur la carte"}),h.jsx(Ae,{id:"cardName",type:"text",placeholder:"Nom et prÃ©nom",value:j.name,onChange:e=>v((s=>d(c({},s),{name:e.target.value}))),className:"mt-2 h-12",onFocus:()=>S("cardName"),onBlur:()=>S("")})]}),h.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Ue,{className:"h-5 w-5 text-green-600 mt-0.5"}),h.jsxs("div",{className:"text-sm text-green-800",children:[h.jsx("p",{className:"font-medium mb-1",children:"Paiement sÃ©curisÃ© SSL"}),h.jsx("p",{children:"Vos informations sont chiffrÃ©es et protÃ©gÃ©es"})]})]})})]})]})})]},o)}),h.jsx(Wt,{children:y&&h.jsx(Ht.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:h.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[h.jsx(Ms,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm",children:y})]})})}),h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row gap-3 justify-center",children:[h.jsx(oe,{onClick:a,variant:"outline",className:"flex-1 sm:flex-none h-12",children:"Annuler"}),h.jsx(oe,{onClick:()=>x(null,null,(function*(){if(N(null),o)if("orange_money"!==o&&"mtn_mobile_money"!==o&&"moov_money"!==o||u&&ft.validatePhoneNumber(u,A))if("card"!==o||j.number&&j.expiry&&j.cvv&&j.name)try{b(!0);const a=c(c({method:o,amount:e,currency:s,packageName:r,country:A},"orange_money"===o||"mtn_mobile_money"===o||"moov_money"===o?{phoneNumber:u}:{}),"card"===o?{cardData:j}:{});t(a)}catch(a){N(a.message||"Erreur lors de la sÃ©lection de la mÃ©thode de paiement")}finally{b(!1)}else N("Veuillez remplir tous les champs de la carte correctement");else N("Veuillez entrer un numÃ©ro de tÃ©lÃ©phone valide");else N("Veuillez sÃ©lectionner une mÃ©thode de paiement")})),disabled:!o||f,className:"flex-1 sm:flex-none h-12 bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 shadow-lg",children:f?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Traitement..."]}):h.jsxs(h.Fragment,{children:[h.jsx(rs,{className:"h-4 w-4 mr-2"}),"Payer ",L(e)]})})]}),h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-sm text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[h.jsx(Ue,{className:"h-4 w-4"}),h.jsx("span",{children:"Paiement 100% sÃ©curisÃ© via Kkiapay"})]}),h.jsx("p",{children:"Vos informations de paiement sont protÃ©gÃ©es par un chiffrement SSL de niveau bancaire"})]})]})})},Bi=()=>{var e,s,t,a,r,i;const{boostId:n}=k(),l=f(),o=j(),{user:c}=ie(),{toast:d}=Me(),[m,u]=p.useState("method-selection"),[g,v]=p.useState(null),[b,y]=p.useState(null),[N,w]=p.useState("pending"),[C,S]=p.useState(!0),[A,P]=p.useState(null),[E,L]=p.useState(!1),[z,M]=p.useState(0),[T,_]=p.useState(0),[q,F]=p.useState(!1);p.useEffect((()=>{n&&D()}),[n]);const D=()=>x(null,null,(function*(){var e;try{if(S(!0),P(null),null==(e=o.state)?void 0:e.boostData)v(o.state.boostData);else{const e=yield fs.getBoostStatus(n);if(e.currentBoost)v(e.currentBoost);else{const{data:e,error:s}=yield le.from("listing_boosts").select("\n              *,\n              boost_packages (*)\n            ").eq("id",n).single();if(s||!e)throw Error("Boost non trouvÃ©");v(e)}}}catch(s){P(s.message||"Erreur lors du chargement des donnÃ©es du boost"),d({title:"Erreur",description:s.message,variant:"destructive"})}finally{S(!1)}})),I=()=>{u("method-selection"),y(null),w("pending"),P(null),M(0)},R=e=>{switch(e){case"orange_money":return"Orange Money";case"mtn_mobile_money":return"MTN Mobile Money";case"card":return"Carte Bancaire";default:return"MÃ©thode de paiement"}};return c?C?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:h.jsx(Fe,{className:"w-full max-w-md mx-4",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Chargement..."}),h.jsx("p",{className:"text-muted-foreground",children:"PrÃ©paration de votre paiement"})]})})}):A&&"error"===m?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:h.jsx(Fe,{className:"w-full max-w-md mx-4",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erreur de paiement"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:A}),3>T&&h.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:h.jsxs("p",{className:"text-sm text-yellow-800",children:["Tentative ",T+1," sur 3"]})}),h.jsxs("div",{className:"space-y-3",children:[3>T&&h.jsxs(oe,{onClick:()=>x(null,null,(function*(){_((e=>e+1)),P(null),u("method-selection")})),className:"w-full",children:[h.jsx(ce,{className:"h-4 w-4 mr-2"}),"RÃ©essayer"]}),h.jsx(oe,{onClick:I,variant:"outline",className:"w-full",children:"Changer de mÃ©thode"}),h.jsx(oe,{onClick:()=>l(-1),variant:"ghost",className:"w-full",children:"Retour"})]})]})})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[h.jsxs(oe,{onClick:()=>l(-1),variant:"ghost",className:"mb-4 hover:bg-white/50",children:[h.jsx(Ts,{className:"h-4 w-4 mr-2"}),"Retour"]}),h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"ðŸ’³ Paiement SÃ©curisÃ©"}),h.jsx("p",{className:"text-muted-foreground text-lg",children:"Finalisez votre achat de boost premium en toute sÃ©curitÃ©"})]})]}),h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[h.jsxs("div",{className:"flex items-center "+("method-selection"===m?"text-primary":"text-muted-foreground"),children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("method-selection"===m?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"1"}),h.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"MÃ©thode de paiement"})]}),h.jsx("div",{className:"w-8 h-1 bg-muted-foreground/30"}),h.jsxs("div",{className:"flex items-center "+("payment-processing"===m?"text-primary":"text-muted-foreground"),children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("payment-processing"===m?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"2"}),h.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"Traitement"})]}),h.jsx("div",{className:"w-8 h-1 bg-muted-foreground/30"}),h.jsxs("div",{className:"flex items-center "+("success"===m?"text-primary":"text-muted-foreground"),children:[h.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("success"===m?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"3"}),h.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"Confirmation"})]})]}),"payment-processing"===m&&h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx(kt,{value:z,className:"h-2"}),h.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-2",children:[z,"% terminÃ©"]})]})]}),h.jsxs(Wt,{mode:"wait",children:["method-selection"===m&&h.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"max-w-2xl mx-auto",children:h.jsx($i,{amount:(null==(e=null==g?void 0:g.boost_packages)?void 0:e.price)||0,currency:"XOF",packageName:(null==(s=null==g?void 0:g.boost_packages)?void 0:s.name)||"Package Premium",onPaymentMethodSelected:e=>x(null,null,(function*(){try{u("payment-processing"),M(0);const s=g.boost_packages,t=(null==s?void 0:s.price)||0,a=yield ft.createPayment({userId:c.id,amount:t,currency:"XOF",paymentMethod:e.method,boostId:g.id,packageName:(null==s?void 0:s.name)||"Package Premium",listingId:g.listing_id,description:"Boost "+((null==s?void 0:s.name)||"Premium"),phoneNumber:e.phoneNumber,email:c.email,country:e.country,cardData:e.cardData});if(!a.success)throw Error("Erreur lors de la crÃ©ation du paiement");let r;if(M(30),"orange_money"===e.method?r=yield ft.initiateOrangeMoneyPayment(a.paymentId,e.phoneNumber):"mtn_mobile_money"===e.method?r=yield ft.initiateMTNPayment(a.paymentId,e.phoneNumber):"moov_money"===e.method?r=yield ft.initiateMoovPayment(a.paymentId,e.phoneNumber):"card"===e.method&&(r=yield ft.initiateCardPayment(a.paymentId,e.cardData)),M(60),!r.success)throw Error("Erreur lors de l'initialisation du paiement");if(M(80),!r.paymentUrl)throw Error("URL de paiement non disponible");window.open(r.paymentUrl,"_blank","noopener,noreferrer"),M(100)}catch(s){P(s.message),u("error")}})),onClose:()=>l(-1)})},"method-selection"),"payment-processing"===m&&h.jsx(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"max-w-md mx-auto",children:h.jsx(Fe,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx(Ht.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"mb-6",children:(e=>{switch(e){case"orange_money":return h.jsx(Pt,{className:"h-6 w-6 text-orange-500"});case"mtn_mobile_money":return h.jsx(At,{className:"h-6 w-6 text-yellow-500"});case"card":return h.jsx(is,{className:"h-6 w-6 text-blue-500"});default:return h.jsx(is,{className:"h-6 w-6"})}})(null==b?void 0:b.method)}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Traitement en cours..."}),h.jsxs("p",{className:"text-muted-foreground mb-6",children:["Votre paiement via ",R(null==b?void 0:b.method)," est en cours de traitement."]}),h.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground mb-6",children:[h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(Ss,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"VÃ©rification de la transaction"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(Ss,{className:"h-4 w-4 text-green-500"}),h.jsx("span",{children:"Confirmation du paiement"})]}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[h.jsx(Cs,{className:"h-4 w-4 text-blue-500"}),h.jsx("span",{children:"Activation de votre boost"})]})]}),h.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6",children:h.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[h.jsx(yt,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm",children:"Ne fermez pas cette page pendant le traitement"})]})}),h.jsx(oe,{onClick:I,variant:"outline",size:"sm",children:"Annuler"})]})})},"payment-processing"),"success"===m&&h.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"max-w-md mx-auto",children:h.jsx(Fe,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 shadow-xl",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx(Ht.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"text-6xl mb-4",children:"ðŸŽ‰"}),h.jsx("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"Paiement rÃ©ussi !"}),h.jsx("p",{className:"text-green-700 mb-6",children:"Votre boost premium a Ã©tÃ© activÃ© avec succÃ¨s."}),h.jsx("div",{className:"bg-white p-4 rounded-lg border border-green-200 mb-6 shadow-sm",children:h.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Package :"}),h.jsx("span",{className:"font-semibold",children:null==(t=null==g?void 0:g.boost_packages)?void 0:t.name})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Montant :"}),h.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format((null==(a=null==g?void 0:g.boost_packages)?void 0:a.price)||0)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"MÃ©thode :"}),h.jsx("span",{children:R(null==b?void 0:b.method)})]})]})}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs(oe,{onClick:()=>{L(!0)},variant:"outline",className:"w-full hover:bg-green-50",children:[h.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Voir le reÃ§u"]}),h.jsxs(oe,{onClick:()=>l("/booster-annonce/"+(null==g?void 0:g.listing_id)),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 shadow-lg",children:[h.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Voir mon boost"]}),h.jsx(oe,{onClick:()=>l("/mes-boosts"),variant:"ghost",className:"w-full hover:bg-green-50",children:"Mes boosts"})]})]})})},"success")]}),h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:h.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-muted-foreground bg-white/50 px-4 py-2 rounded-full border",children:[h.jsx(ls,{className:"h-4 w-4"}),h.jsx("span",{children:"Paiement 100% sÃ©curisÃ© SSL"}),h.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>F(!0),className:"h-6 w-6 p-0",children:h.jsx(yt,{className:"h-3 w-3"})})]})}),h.jsx(pt,{open:E,onOpenChange:L,children:h.jsxs(gt,{className:"sm:max-w-md",children:[h.jsx(jt,{children:h.jsxs(vt,{className:"flex items-center gap-2",children:[h.jsx(Ct,{className:"h-5 w-5"}),"ReÃ§u de paiement"]})}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:h.jsxs("div",{className:"text-sm space-y-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"NumÃ©ro de transaction :"}),h.jsxs("span",{className:"font-mono",children:["TXN-",Date.now()]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Date :"}),h.jsx("span",{children:(new Date).toLocaleDateString("fr-FR")})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Package :"}),h.jsx("span",{children:null==(r=null==g?void 0:g.boost_packages)?void 0:r.name})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Montant :"}),h.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format((null==(i=null==g?void 0:g.boost_packages)?void 0:i.price)||0)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"MÃ©thode :"}),h.jsx("span",{children:R(null==b?void 0:b.method)})]})]})}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(oe,{onClick:()=>x(null,null,(function*(){try{const e=yield ft.generateReceipt(null==b?void 0:b.paymentId);if(e.success){const s=document.createElement("a");s.href=e.receiptUrl,s.download=`receipt-${n}.pdf`,s.target="_blank",s.rel="noopener noreferrer",document.body.appendChild(s),s.click(),document.body.removeChild(s),d({title:"ReÃ§u tÃ©lÃ©chargÃ©",description:"Le reÃ§u a Ã©tÃ© tÃ©lÃ©chargÃ© avec succÃ¨s."})}}catch(e){d({title:"Erreur",description:"Impossible de tÃ©lÃ©charger le reÃ§u",variant:"destructive"})}})),className:"flex-1",children:[h.jsx(St,{className:"h-4 w-4 mr-2"}),"TÃ©lÃ©charger"]}),h.jsx(oe,{onClick:()=>L(!1),variant:"outline",className:"flex-1",children:"Fermer"})]})]})]})}),h.jsx(pt,{open:q,onOpenChange:F,children:h.jsxs(gt,{className:"sm:max-w-md",children:[h.jsx(jt,{children:h.jsxs(vt,{className:"flex items-center gap-2",children:[h.jsx(ls,{className:"h-5 w-5"}),"SÃ©curitÃ© du paiement"]})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Ue,{className:"h-5 w-5 text-green-600 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Chiffrement SSL"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Vos donnÃ©es sont protÃ©gÃ©es par un chiffrement de niveau bancaire"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(ls,{className:"h-5 w-5 text-blue-600 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"ConformitÃ© PCI DSS"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Nos partenaires de paiement respectent les standards internationaux"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(Qe,{className:"h-5 w-5 text-purple-600 mt-0.5"}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold",children:"Aucun stockage"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Nous ne stockons jamais vos informations de paiement"})]})]})]}),h.jsx(oe,{onClick:()=>F(!1),className:"w-full",children:"Compris"})]})]})})]})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:h.jsx(Fe,{className:"w-full max-w-md mx-4",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”’"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Connexion requise"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous devez Ãªtre connectÃ© pour effectuer un paiement."}),h.jsx(oe,{onClick:()=>l("/connexion"),className:"w-full",children:"Se connecter"})]})})})},Hi=()=>{const[e]=w(),s=f(),{toast:t}=Me(),[a,r]=p.useState("processing"),[i,n]=p.useState(null),[l,o]=p.useState(!0),[c,d]=p.useState(null);p.useEffect((()=>{m()}),[]);const m=()=>x(null,null,(function*(){try{o(!0);const s=e.get("payment_id"),a=e.get("transaction_id"),i=e.get("status"),l=e.get("reference");if(!s)throw Error("ID de paiement manquant");if("success"===i||"successful"===i){const e=yield ft.confirmPayment(s,{transactionId:a,reference:l,status:"successful"});if(!e.success)throw Error("Erreur lors de la confirmation du paiement");r("success"),n(e.paymentData),t({title:"ðŸŽ‰ Paiement rÃ©ussi !",description:"Votre boost a Ã©tÃ© activÃ© avec succÃ¨s."})}else if("failed"===i||"cancelled"===i)r("failed"),d("Le paiement a Ã©chouÃ© ou a Ã©tÃ© annulÃ©"),t({title:"âŒ Paiement Ã©chouÃ©",description:"Le paiement n'a pas pu Ãªtre traitÃ©.",variant:"destructive"});else{const e=yield ft.getPaymentStatus(s);"completed"===e.status?(r("success"),n(e)):"failed"===e.status||"cancelled"===e.status?(r("failed"),d("Le paiement a Ã©chouÃ©")):(r("pending"),d("Le statut du paiement est en attente de confirmation"))}}catch(s){r("error"),d(s.message),t({title:"Erreur",description:s.message,variant:"destructive"})}finally{o(!1)}}));return l?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:h.jsx(Fe,{className:"w-full max-w-md mx-4",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"VÃ©rification du paiement..."}),h.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous vÃ©rifions votre transaction"})]})})}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsx("div",{className:"max-w-md mx-auto",children:h.jsx(Ht.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:h.jsx(Fe,{className:"shadow-xl border-0",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx(Ht.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mb-6",children:(()=>{switch(a){case"success":return h.jsx(Ss,{className:"h-16 w-16 text-green-500"});case"failed":case"error":return h.jsx(ks,{className:"h-16 w-16 text-red-500"});case"pending":return h.jsx(Cs,{className:"h-16 w-16 text-yellow-500"});default:return h.jsx(Ms,{className:"h-16 w-16 text-blue-500"})}})()}),h.jsx("h1",{className:"text-2xl font-bold mb-2",children:(()=>{switch(a){case"success":return"Paiement rÃ©ussi !";case"failed":return"Paiement Ã©chouÃ©";case"error":return"Erreur de paiement";case"pending":return"Paiement en attente";default:return"Traitement en cours..."}})()}),h.jsx("p",{className:"text-muted-foreground mb-6",children:(()=>{switch(a){case"success":return"Votre boost premium a Ã©tÃ© activÃ© avec succÃ¨s.";case"failed":return"Le paiement n'a pas pu Ãªtre traitÃ©. Veuillez rÃ©essayer.";case"error":return"Une erreur s'est produite lors du traitement du paiement.";case"pending":return"Votre paiement est en cours de traitement.";default:return"VÃ©rification du statut de votre paiement..."}})()}),"success"===a&&i&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-green-50 p-4 rounded-lg border border-green-200 mb-6",children:h.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"RÃ©fÃ©rence :"}),h.jsx("span",{className:"font-mono",children:i.reference})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"Montant :"}),h.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:i.currency||"XOF"}).format(i.amount)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{children:"MÃ©thode :"}),h.jsx("span",{children:i.paymentMethod})]})]})}),"failed"===a||"error"===a&&h.jsx(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-6",children:h.jsxs("div",{className:"text-sm text-red-800",children:[h.jsx("p",{className:"font-medium mb-1",children:"DÃ©tails de l'erreur :"}),h.jsx("p",{children:c})]})}),h.jsxs("div",{className:"space-y-3",children:["success"===a&&h.jsxs(h.Fragment,{children:[h.jsxs(oe,{onClick:()=>s("/mes-boosts"),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[h.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Voir mes boosts"]}),h.jsxs(oe,{onClick:()=>s("/dashboard"),variant:"outline",className:"w-full",children:[h.jsx(ue,{className:"h-4 w-4 mr-2"}),"Retour au tableau de bord"]})]}),("failed"===a||"error"===a)&&h.jsxs(h.Fragment,{children:[h.jsxs(oe,{onClick:()=>s(-2),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[h.jsx(Ee,{className:"h-4 w-4 mr-2"}),"RÃ©essayer le paiement"]}),h.jsxs(oe,{onClick:()=>s("/"),variant:"outline",className:"w-full",children:[h.jsx(ue,{className:"h-4 w-4 mr-2"}),"Retour Ã  l'accueil"]})]}),"pending"===a&&h.jsxs(h.Fragment,{children:[h.jsxs(oe,{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[h.jsx(Ee,{className:"h-4 w-4 mr-2"}),"Actualiser le statut"]}),h.jsxs(oe,{onClick:()=>s("/"),variant:"outline",className:"w-full",children:[h.jsx(ue,{className:"h-4 w-4 mr-2"}),"Retour Ã  l'accueil"]})]})]}),h.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:h.jsx("p",{className:"text-xs text-muted-foreground",children:"Si vous avez des questions, contactez notre support client."})})]})})})})})})};function Wi(){const e=f(),{user:s}=ie(),[t,a]=p.useState(""),{data:r,isLoading:i,isError:n}=F({queryKey:["userListings",null==s?void 0:s.id],queryFn:()=>x(null,null,(function*(){return(null==s?void 0:s.id)?yield hs.getUserListings(s.id):[]})),enabled:!!(null==s?void 0:s.id)}),{data:l}=F({queryKey:["boostPackages"],queryFn:()=>x(null,null,(function*(){return yield fs.getBoostPackages()}))}),o=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),c=(null==r?void 0:r.filter((e=>{var s,a;return(null==(s=e.title)?void 0:s.toLowerCase().includes(t.toLowerCase()))||(null==(a=e.category)?void 0:a.toLowerCase().includes(t.toLowerCase()))})))||[];return s?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs(oe,{variant:"ghost",onClick:()=>e(-1),className:"mb-4",children:[h.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Retour"]}),h.jsx("div",{className:"flex items-center justify-between mb-6",children:h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"âš¡ Booster vos Annonces"}),h.jsx("p",{className:"text-muted-foreground text-lg",children:"Augmentez la visibilitÃ© de vos annonces et obtenez plus de contacts"})]})}),h.jsxs("div",{className:"relative max-w-md",children:[h.jsx(As,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),h.jsx(Ae,{placeholder:"Rechercher une annonce...",className:"pl-10",value:t,onChange:e=>a(e.target.value)})]})]}),l&&l.length>0&&h.jsxs(Fe,{className:"mb-8 bg-gradient-to-r from-primary/10 to-blue-500/10 border-primary/20",children:[h.jsx(De,{children:h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(rs,{className:"h-5 w-5 text-primary"}),"Packages de Boost Disponibles"]})}),h.jsx(Oe,{children:h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.map((e=>h.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"font-semibold",children:e.name}),h.jsxs(We,{variant:"default",children:[e.duration_days," jours"]})]}),h.jsx("p",{className:"text-2xl font-bold text-primary mb-2",children:o(e.price)}),h.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},e.id)))})})]}),h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Vos Annonces"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"SÃ©lectionnez une annonce Ã  booster"})]}),h.jsx(Oe,{children:i?h.jsxs("div",{className:"flex items-center justify-center py-12",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),h.jsx("span",{className:"ml-2",children:"Chargement de vos annonces..."})]}):n?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Erreur"}),h.jsx("p",{className:"text-muted-foreground",children:"Impossible de charger vos annonces"})]}):0===c.length?h.jsxs("div",{className:"text-center py-12",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“"}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:t?"Aucune annonce trouvÃ©e":"Aucune annonce"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:t?"Essayez avec d'autres mots-clÃ©s":"CrÃ©ez votre premiÃ¨re annonce pour commencer"}),!t&&h.jsx(oe,{onClick:()=>e("/creer-annonce"),children:"CrÃ©er une annonce"})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map((s=>{return h.jsx(Fe,{className:"hover:shadow-lg transition-all duration-200",children:h.jsxs(Oe,{className:"p-6",children:[s.images&&s.images.length>0&&h.jsxs("div",{className:"relative h-48 mb-4 rounded-lg overflow-hidden",children:[h.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-full object-cover"}),s.is_boosted&&h.jsxs(We,{className:"absolute top-2 right-2 bg-yellow-500",children:[h.jsx(rs,{className:"h-3 w-3 mr-1"}),"BoostÃ©"]})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-lg mb-1",children:s.title}),h.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[h.jsx(We,{variant:"outline",children:s.category}),s.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"â€¢"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ke,{className:"h-3 w-3 mr-1"}),s.location]})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"text-2xl font-bold text-primary",children:o(s.price)}),h.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Qe,{className:"h-4 w-4 mr-1"}),s.views||0]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(as,{className:"h-4 w-4 mr-1"}),s.favorites_count||0]})]})]}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Cs,{className:"h-3 w-3 mr-1"}),"PubliÃ© le ",(t=s.created_at,new Date(t).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"}))]}),h.jsx(We,{variant:"active"===s.status?"default":"secondary",children:"active"===s.status?"Active":s.status})]}),h.jsxs(oe,{onClick:()=>{return t=s.id,void e("/booster-annonce/"+t);var t},className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[h.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Booster cette annonce"]})]})]})},s.id);var t}))})})]}),h.jsx(Fe,{className:"mt-8 bg-gradient-to-br from-primary/10 to-blue-500/10 border-primary/20",children:h.jsxs(Oe,{className:"p-8 text-center",children:[h.jsx("div",{className:"text-4xl mb-4",children:"ðŸ’¡"}),h.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Pourquoi booster vos annonces ?"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl mb-2",children:"ðŸ‘ï¸"}),h.jsx("h4",{className:"font-semibold mb-1",children:"Plus de visibilitÃ©"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Votre annonce apparaÃ®t en premier"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl mb-2",children:"ðŸ“ˆ"}),h.jsx("h4",{className:"font-semibold mb-1",children:"Plus de contacts"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Augmentez vos chances de vente"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl mb-2",children:"âš¡"}),h.jsx("h4",{className:"font-semibold mb-1",children:"Vente rapide"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendez plus rapidement"})]})]})]})})]})}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”’"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Connexion requise"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous devez Ãªtre connectÃ© pour booster vos annonces."}),h.jsx(oe,{onClick:()=>e("/connexion"),children:"Se connecter"})]})})}function Xi(){const e=f(),{user:s}=ie(),[t,a]=p.useState("all"),{data:r,isLoading:i,isError:n}=F({queryKey:["userTransactions",null==s?void 0:s.id],queryFn:()=>x(null,null,(function*(){return(null==s?void 0:s.id)?yield zt.getUserTransactions(s.id):[]})),enabled:!!(null==s?void 0:s.id)}),l=(e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),o=e=>{switch(e){case"completed":return h.jsxs(We,{variant:"default",className:"bg-green-500",children:[h.jsx(Ss,{className:"mr-1 h-3 w-3"})," ComplÃ©tÃ©e"]});case"pending":return h.jsxs(We,{variant:"secondary",className:"bg-yellow-500 text-white",children:[h.jsx(Cs,{className:"mr-1 h-3 w-3"})," En attente"]});case"failed":return h.jsxs(We,{variant:"destructive",children:[h.jsx(ks,{className:"mr-1 h-3 w-3"})," Ã‰chouÃ©e"]});case"refunded":return h.jsxs(We,{variant:"outline",children:[h.jsx(is,{className:"mr-1 h-3 w-3"})," RemboursÃ©e"]});default:return h.jsx(We,{variant:"outline",children:e})}},c=e=>r?"all"===e?r:r.filter((s=>s.status===e)):[],d=r?{total:r.length,completed:r.filter((e=>"completed"===e.status)).length,pending:r.filter((e=>"pending"===e.status)).length,totalSpent:r.filter((e=>"completed"===e.status)).reduce(((e,s)=>e+(s.amount||0)),0)}:{total:0,completed:0,pending:0,totalSpent:0};return s?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:h.jsxs("div",{className:"container mx-auto px-4 py-8",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs(oe,{variant:"ghost",onClick:()=>e(-1),className:"mb-4",children:[h.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Retour"]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold mb-2",children:"ðŸ’³ Mes Transactions"}),h.jsx("p",{className:"text-muted-foreground",children:"Historique complet de vos paiements et transactions"})]}),h.jsxs(oe,{variant:"outline",size:"sm",children:[h.jsx(St,{className:"mr-2 h-4 w-4"}),"Exporter"]})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-4 mb-8",children:[h.jsx(Fe,{children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"rounded-full bg-blue-100 p-3 dark:bg-blue-900/50",children:h.jsx(is,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total"}),h.jsx("p",{className:"text-2xl font-bold",children:d.total})]})]})})}),h.jsx(Fe,{children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"rounded-full bg-green-100 p-3 dark:bg-green-900/50",children:h.jsx(Ss,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"ComplÃ©tÃ©es"}),h.jsx("p",{className:"text-2xl font-bold",children:d.completed})]})]})})}),h.jsx(Fe,{children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"rounded-full bg-yellow-100 p-3 dark:bg-yellow-900/50",children:h.jsx(Cs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"En attente"}),h.jsx("p",{className:"text-2xl font-bold",children:d.pending})]})]})})}),h.jsx(Fe,{children:h.jsx(Oe,{className:"p-6",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"rounded-full bg-purple-100 p-3 dark:bg-purple-900/50",children:h.jsx(Et,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total dÃ©pensÃ©"}),h.jsx("p",{className:"text-xl font-bold",children:l(d.totalSpent)})]})]})})})]}),h.jsxs(Fe,{children:[h.jsx(De,{children:h.jsx(Ie,{children:"Historique des transactions"})}),h.jsx(Oe,{children:h.jsxs(os,{value:t,onValueChange:a,children:[h.jsxs(cs,{className:"grid w-full grid-cols-4 mb-6",children:[h.jsxs(ds,{value:"all",children:["Toutes (",d.total,")"]}),h.jsxs(ds,{value:"completed",children:["ComplÃ©tÃ©es (",d.completed,")"]}),h.jsxs(ds,{value:"pending",children:["En attente (",d.pending,")"]}),h.jsx(ds,{value:"failed",children:"Ã‰chouÃ©es"})]}),i?h.jsxs("div",{className:"flex items-center justify-center py-12",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),h.jsx("span",{className:"ml-2",children:"Chargement..."})]}):n?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(Ms,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-medium",children:"Erreur de chargement"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Impossible de charger vos transactions"})]}):0===c(t).length?h.jsxs("div",{className:"text-center py-12",children:[h.jsx(is,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),h.jsx("p",{className:"text-lg font-medium",children:"Aucune transaction"}),h.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Vous n'avez pas encore effectuÃ© de transaction"}),h.jsxs(oe,{onClick:()=>e("/premium"),children:[h.jsx(Ze,{className:"mr-2 h-4 w-4"}),"DÃ©couvrir Premium"]})]}):h.jsx("div",{className:"space-y-4",children:c(t).map((e=>h.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center space-x-4 flex-1",children:[h.jsx("div",{className:"rounded-full bg-primary/10 p-3",children:h.jsx(is,{className:"h-5 w-5 text-primary"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("p",{className:"font-medium",children:e.description||"Transaction"}),o(e.status)]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[h.jsxs("span",{children:["RÃ©f: ",e.payment_reference||e.id.slice(0,8)]}),h.jsx("span",{children:"â€¢"}),h.jsx("span",{children:e.created_at?Qt(new Date(e.created_at),"PPp",{locale:Lt}):"N/A"})]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-lg font-bold",children:l(e.amount,e.currency)}),h.jsx(oe,{variant:"ghost",size:"sm",onClick:()=>{},children:h.jsx(Qe,{className:"h-4 w-4"})})]})]},e.id)))})]})})]})]})}):h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs("div",{className:"text-center py-20",children:[h.jsx("div",{className:"text-6xl mb-4",children:"ðŸ”’"}),h.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Connexion requise"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous devez Ãªtre connectÃ© pour voir vos transactions."}),h.jsx(oe,{onClick:()=>e("/connexion"),children:"Se connecter"})]})})}const Gi=new class{constructor(){this.publicKey=void 0,this.secretKey=void 0,this.baseUrl="https://api.fedapay.com/v1",this.isTestMode=!1,this.isTestMode&&(this.baseUrl="https://sandbox-api.fedapay.com/v1")}initializePayment(e){return x(this,null,(function*(){try{const s=yield fetch(this.baseUrl+"/transactions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.secretKey},body:JSON.stringify({amount:e.amount,currency:e.currency||"XOF",description:e.description,customer:{email:e.email,phone:e.phone,name:e.name},payment_method:e.payment_method,callback_url:e.callback_url,metadata:{boost_id:e.boost_id,listing_id:e.listing_id,package_name:e.package_name,user_id:e.user_id}})}),t=yield s.json();if(!s.ok)throw Error(t.message||"Erreur lors de l'initialisation du paiement");return{success:!0,transactionId:t.id,reference:t.reference,paymentUrl:t.payment_url,status:t.status,message:"Paiement initialisÃ© avec succÃ¨s"}}catch(s){throw Error("Erreur FedaPay: "+s.message)}}))}verifyPayment(e){return x(this,null,(function*(){try{const s=yield fetch(`${this.baseUrl}/transactions/${e}`,{method:"GET",headers:{Authorization:"Bearer "+this.secretKey}}),t=yield s.json();if(!s.ok)throw Error(t.message||"Erreur lors de la vÃ©rification du paiement");return{success:!0,status:t.status,amount:t.amount,currency:t.currency,reference:t.reference,paymentMethod:t.payment_method,customer:t.customer,metadata:t.metadata,createdAt:t.created_at,updatedAt:t.updated_at}}catch(s){throw Error("Erreur vÃ©rification: "+s.message)}}))}refundPayment(e,s=null){return x(this,null,(function*(){try{const t=s?{amount:s}:{},a=yield fetch(`${this.baseUrl}/transactions/${e}/refunds`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.secretKey},body:JSON.stringify(t)}),r=yield a.json();if(!a.ok)throw Error(r.message||"Erreur lors du remboursement");return{success:!0,refundId:r.id,amount:r.amount,status:r.status,message:"Remboursement effectuÃ© avec succÃ¨s"}}catch(t){throw Error("Erreur remboursement: "+t.message)}}))}getPaymentMethods(e="BJ"){return[{id:"orange_money",name:"Orange Money",icon:"ðŸŸ ",description:"Paiement via Orange Money",available:!0,minAmount:100,maxAmount:5e5},{id:"mtn_mobile_money",name:"MTN Mobile Money",icon:"ðŸŸ¡",description:"Paiement via MTN Mobile Money",available:!0,minAmount:100,maxAmount:5e5},{id:"moov_money",name:"Moov Money",icon:"ðŸ”µ",description:"Paiement via Moov Money",available:!0,minAmount:100,maxAmount:5e5},{id:"card",name:"Carte Bancaire",icon:"ðŸ’³",description:"Paiement par carte Visa/Mastercard",available:!0,minAmount:100,maxAmount:1e6}]}calculateFees(e){const s=.025*e+50;return{amount:e,fee:Math.round(s),total:e+Math.round(s),percentage:2.5,fixedFee:50}}validatePhoneNumber(e,s="BJ"){return/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,""))}formatPhoneNumber(e,s="BJ"){const t=e.replace(/\D/g,"");return 8===t.length?`+229 ${t.slice(0,2)} ${t.slice(2,4)} ${t.slice(4,6)} ${t.slice(6,8)}`:e}isConfigured(){return!(!this.publicKey||!this.secretKey)}getConfig(){return{isConfigured:this.isConfigured(),isTestMode:this.isTestMode,baseUrl:this.baseUrl,hasPublicKey:!!this.publicKey,hasSecretKey:!!this.secretKey}}};function Ki(){const[e,s]=p.useState(null),[t,a]=p.useState(!1),[r,i]=p.useState(null),[n,l]=p.useState(null),[o,m]=p.useState({amount:1e3,currency:"XOF",description:"Test FedaPay - MaxiMarket",email:"test@maxiimarket.com",phone:"+229 90 12 34 56",name:"Test Utilisateur",payment_method:"orange_money"});p.useEffect((()=>{const e=Gi.getConfig();s(e)}),[]);const u=(e,s)=>{m((t=>d(c({},t),{[e]:s})))},g=Gi.getPaymentMethods(),j=Gi.calculateFees(o.amount);return h.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{className:"flex items-center gap-2",children:"ðŸ¦ Test FedaPay - Paiements BÃ©nin"}),h.jsx(Re,{children:"Testez l'intÃ©gration FedaPay pour les paiements Orange Money, MTN, Moov et cartes bancaires"})]}),h.jsxs(Oe,{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Configuration"}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(We,{variant:(null==e?void 0:e.isConfigured)?"default":"destructive",children:(null==e?void 0:e.isConfigured)?"âœ… ConfigurÃ©":"âŒ Non configurÃ©"}),h.jsx(We,{variant:(null==e?void 0:e.isTestMode)?"secondary":"default",children:(null==e?void 0:e.isTestMode)?"ðŸ§ª Mode Test":"ðŸš€ Mode Production"}),h.jsx(We,{variant:(null==e?void 0:e.hasPublicKey)?"default":"destructive",children:(null==e?void 0:e.hasPublicKey)?"ðŸ”‘ ClÃ© Publique":"âŒ Pas de clÃ©"}),h.jsx(We,{variant:(null==e?void 0:e.hasSecretKey)?"default":"destructive",children:(null==e?void 0:e.hasSecretKey)?"ðŸ” ClÃ© SecrÃ¨te":"âŒ Pas de clÃ©"})]})]}),h.jsx(ct,{}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"DonnÃ©es de Test"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"amount",children:"Montant (FCFA)"}),h.jsx(Ae,{id:"amount",type:"number",value:o.amount,onChange:e=>u("amount",parseInt(e.target.value)),placeholder:"1000"})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"currency",children:"Devise"}),h.jsxs(at,{value:o.currency,onValueChange:e=>u("currency",e),children:[h.jsx(rt,{children:h.jsx(it,{})}),h.jsxs(nt,{children:[h.jsx(lt,{value:"XOF",children:"XOF (FCFA)"}),h.jsx(lt,{value:"EUR",children:"EUR (Euro)"})]})]})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"email",children:"Email"}),h.jsx(Ae,{id:"email",type:"email",value:o.email,onChange:e=>u("email",e.target.value),placeholder:"test@maxiimarket.com"})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"phone",children:"TÃ©lÃ©phone"}),h.jsx(Ae,{id:"phone",type:"tel",value:o.phone,onChange:e=>u("phone",e.target.value),placeholder:"+229 90 12 34 56"})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"name",children:"Nom complet"}),h.jsx(Ae,{id:"name",type:"text",value:o.name,onChange:e=>u("name",e.target.value),placeholder:"Test Utilisateur"})]}),h.jsxs("div",{children:[h.jsx(Ve,{htmlFor:"payment_method",children:"MÃ©thode de paiement"}),h.jsxs(at,{value:o.payment_method,onValueChange:e=>u("payment_method",e),children:[h.jsx(rt,{children:h.jsx(it,{})}),h.jsx(nt,{children:g.map((e=>h.jsxs(lt,{value:e.id,children:[e.icon," ",e.name]},e.id)))})]})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Calcul des Frais"}),h.jsx("div",{className:"bg-muted p-4 rounded-lg",children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Montant:"}),h.jsxs("div",{className:"text-lg font-bold",children:[j.amount.toLocaleString()," FCFA"]})]}),h.jsxs("div",{children:[h.jsxs("span",{className:"font-medium",children:["Frais (",j.percentage,"%):"]}),h.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fee.toLocaleString()," FCFA"]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Frais fixes:"}),h.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fixedFee," FCFA"]})]}),h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:"Total:"}),h.jsxs("div",{className:"text-lg font-bold text-green-600",children:[j.total.toLocaleString()," FCFA"]})]})]})})]}),h.jsx(ct,{}),h.jsxs("div",{className:"flex flex-wrap gap-4",children:[h.jsx(oe,{onClick:()=>x(null,null,(function*(){a(!0),l(null),i(null);try{const e=yield Gi.initializePayment(d(c({},o),{callback_url:window.location.origin+"/payment-callback?test=true"}));i(e),e.paymentUrl&&window.open(e.paymentUrl,"_blank","noopener,noreferrer")}catch(e){l(e.message)}finally{a(!1)}})),disabled:t||!(null==e?void 0:e.isConfigured),className:"flex-1",children:t?"â³ Initialisation...":"ðŸš€ Tester le Paiement"}),h.jsx(oe,{variant:"outline",onClick:()=>{i(null),l(null)},children:"ðŸ”„ RÃ©initialiser"})]}),(null==r?void 0:r.transactionId)&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"VÃ©rification Manuelle"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ae,{placeholder:"ID de transaction",value:r.transactionId,readOnly:!0}),h.jsx(oe,{variant:"outline",onClick:()=>{return e=r.transactionId,x(null,null,(function*(){if(e){a(!0),l(null);try{const s=yield Gi.verifyPayment(e);i(s)}catch(s){l(s.message)}finally{a(!1)}}else l("ID de transaction requis")}));var e},disabled:t,children:t?"â³ VÃ©rification...":"ðŸ” VÃ©rifier"})]})]}),n&&h.jsx(I,{variant:"destructive",children:h.jsxs(O,{children:[h.jsx("strong",{children:"Erreur:"})," ",n]})}),r&&h.jsx(I,{children:h.jsx(O,{children:h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{children:[h.jsx("strong",{children:"Statut:"})," ",r.success?"âœ… SuccÃ¨s":"âŒ Ã‰chec"]}),r.transactionId&&h.jsxs("div",{children:[h.jsx("strong",{children:"ID Transaction:"})," ",r.transactionId]}),r.reference&&h.jsxs("div",{children:[h.jsx("strong",{children:"RÃ©fÃ©rence:"})," ",r.reference]}),r.paymentUrl&&h.jsxs("div",{children:[h.jsx("strong",{children:"URL Paiement:"})," ",h.jsx("a",{href:r.paymentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:r.paymentUrl})]}),r.status&&h.jsxs("div",{children:[h.jsx("strong",{children:"Statut:"})," ",r.status]}),r.message&&h.jsxs("div",{children:[h.jsx("strong",{children:"Message:"})," ",r.message]})]})})})]})]})})}function Ji(){return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:h.jsxs("div",{className:"container mx-auto",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ðŸ¦ Test FedaPay - Paiements BÃ©nin"}),h.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Testez l'intÃ©gration FedaPay pour les paiements mobiles et cartes bancaires au BÃ©nin. Orange Money, MTN Mobile Money, Moov Money et cartes Visa/Mastercard."})]}),h.jsx(Ki,{}),h.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:h.jsxs("p",{children:["ðŸ’¡ ",h.jsx("strong",{children:"Note:"})," Ceci est un environnement de test. Les paiements ne seront pas rÃ©ellement dÃ©bitÃ©s."]})})]})})}const Qi=()=>{const[e,s]=p.useState(!1),[t,a]=p.useState(!1);return h.jsxs(Fe,{className:"w-full max-w-md mx-auto",children:[h.jsxs(De,{children:[h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(xs,{className:"h-5 w-5"}),"Test Notifications Push"]}),h.jsx(Re,{children:"Testez les notifications push sur votre device mobile"})]}),h.jsxs(Oe,{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsxs(oe,{onClick:()=>x(null,null,(function*(){a(!0);try{yield br(),s(!0)}catch(e){}finally{a(!1)}})),disabled:t||e,className:"w-full",variant:e?"outline":"default",children:[h.jsx(xs,{className:"mr-2 h-4 w-4"}),e?"Notifications ActivÃ©es":"Activer Notifications"]}),e&&h.jsxs(oe,{onClick:()=>x(null,null,(function*(){a(!0);try{yield x(null,null,(function*(){try{const{data:{user:e}}=yield le.auth.getUser()}catch(e){}}))}catch(e){}finally{a(!1)}})),disabled:t,className:"w-full",variant:"secondary",children:[h.jsx(Mt,{className:"mr-2 h-4 w-4"}),"Envoyer Notification Test"]}),e&&h.jsxs(oe,{onClick:()=>x(null,null,(function*(){a(!0);try{yield x(null,null,(function*(){try{const{data:{user:e}}=yield le.auth.getUser();e&&(yield le.from("user_push_tokens").delete().eq("user_id",e.id)),yield fr.removeAllListeners()}catch(e){}})),s(!1)}catch(e){}finally{a(!1)}})),disabled:t,className:"w-full",variant:"destructive",children:[h.jsx(Tt,{className:"mr-2 h-4 w-4"}),"DÃ©sactiver Notifications"]})]}),h.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.jsxs("p",{children:["ðŸ’¡ ",h.jsx("strong",{children:"Instructions :"})]}),h.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[h.jsx("li",{children:'Cliquez sur "Activer Notifications" pour demander les permissions'}),h.jsx("li",{children:"Acceptez les permissions dans la popup du systÃ¨me"}),h.jsx("li",{children:'Testez avec "Envoyer Notification Test"'}),h.jsx("li",{children:"VÃ©rifiez les logs dans la console pour le debug"})]})]})]})]})},Yi=sr("Geolocation",{web:()=>z((()=>import("./web-CK9Ugmfu.js")),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then((e=>new e.GeolocationWeb))});!function(e=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||e?void 0!==window.cordova&&function(e){e.CapacitorUtils.Synapse=new Proxy({},{get:(s,t)=>e.cordova.plugins[t]})}(window):function(e){e.CapacitorUtils.Synapse=new Proxy({},{get:(s,t)=>new Proxy({},{get:(s,a)=>(s,r,i)=>{const n=e.Capacitor.Plugins[t];void 0!==n?"function"==typeof n[a]?x(null,null,(function*(){try{const e=yield n[a](s);r(e)}catch(e){i(e)}})):i(Error(`Method ${a} not found in Capacitor plugin ${t}`)):i(Error(`Capacitor plugin ${t} not found`))}})})}(window))}();const Zi=()=>{const[e,s]=p.useState({}),[t,a]=p.useState(!1),[r,i]=p.useState(null),n=s=>void 0===e[s]?"pending":e[s]?"passed":"failed",l=e=>{switch(e){case"passed":return h.jsx(Ss,{className:"h-4 w-4 text-green-500"});case"failed":return h.jsx(ks,{className:"h-4 w-4 text-red-500"});default:return h.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"})}},o=e=>{switch(e){case"passed":return h.jsx(We,{variant:"default",className:"bg-green-500",children:"âœ… RÃ©ussi"});case"failed":return h.jsx(We,{variant:"destructive",children:"âŒ Ã‰chouÃ©"});default:return h.jsx(We,{variant:"secondary",children:"â³ En attente"})}};return h.jsxs("div",{className:"space-y-6 p-4",children:[h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(Nt,{className:"h-5 w-5"}),"Suite de Tests Mobile - MaxiMarket"]}),h.jsx(Re,{children:"Tests automatisÃ©s pour valider toutes les fonctionnalitÃ©s mobiles"})]}),h.jsxs(Oe,{className:"space-y-4",children:[r&&h.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[h.jsx("h4",{className:"font-medium mb-2",children:"ðŸ“± Informations du Device"}),h.jsxs("div",{className:"text-sm space-y-1",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Platform:"})," ",r.platform]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Model:"})," ",r.model]}),h.jsxs("p",{children:[h.jsx("strong",{children:"OS Version:"})," ",r.osVersion]}),h.jsxs("p",{children:[h.jsx("strong",{children:"App Version:"})," ",r.appVersion]})]})]}),h.jsx(oe,{onClick:()=>x(null,null,(function*(){a(!0);const e={};try{const s=yield lr.getInfo();i(s),e.nativeApp="web"!==s.platform;try{const s=yield x(null,null,(function*(){try{const e=yield Yi.checkPermissions();return"granted"===e.location||"denied"!==e.location&&"granted"===(yield Yi.requestPermissions()).location}catch(e){return!1}}));e.geolocation=s}catch(t){e.geolocation=!1}try{const s=yield x(null,null,(function*(){try{const e=yield Yi.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4});return{latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:e.timestamp}}catch(t){throw t}}));e.location=!!s}catch(t){e.location=!1}e.navigation=!0;const a=performance.now();yield new Promise((e=>setTimeout(e,100)));const r=performance.now();e.performance=200>r-a,e.responsive=768>=window.innerWidth,e.touchTargets=!0}catch(t){}s(e),a(!1)})),disabled:t,className:"w-full",children:t?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Tests en cours..."]}):h.jsxs(h.Fragment,{children:[h.jsx(rs,{className:"mr-2 h-4 w-4"}),"Lancer Tous les Tests"]})}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"font-medium",children:"ðŸ“Š RÃ©sultats des Tests"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("nativeApp")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"App Native"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"DÃ©tection de l'app Capacitor"})]})]}),o(n("nativeApp"))]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("geolocation")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Permissions GPS"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"AccÃ¨s Ã  la gÃ©olocalisation"})]})]}),o(n("geolocation"))]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("location")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Obtenir Position"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"RÃ©cupÃ©ration des coordonnÃ©es"})]})]}),o(n("location"))]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("navigation")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Navigation Mobile"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"BottomNavigation et bouton retour"})]})]}),o(n("navigation"))]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("performance")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Performance"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Temps de rÃ©ponse < 200ms"})]})]}),o(n("performance"))]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("responsive")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Responsive Design"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Adaptation mobile"})]})]}),o(n("responsive"))]}),h.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[l(n("touchTargets")),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Touch Targets"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Boutons â‰¥ 44px"})]})]}),o(n("touchTargets"))]})]})]})]})]}),h.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(Fs,{className:"h-5 w-5"}),"Test CamÃ©ra"]}),h.jsx(Re,{children:"Testez la prise de photos et la sÃ©lection depuis la galerie"})]}),h.jsx(Oe,{children:h.jsx(Si,{onImageSelected:e=>{},maxImages:3})})]}),h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(xs,{className:"h-5 w-5"}),"Test Notifications"]}),h.jsx(Re,{children:"Testez les notifications push"})]}),h.jsx(Oe,{children:h.jsx(Qi,{})})]})]}),h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsxs(Ie,{className:"flex items-center gap-2",children:[h.jsx(_t,{className:"h-5 w-5"}),"Tests Manuels Requis"]}),h.jsx(Re,{children:"Tests qui nÃ©cessitent une intervention manuelle"})]}),h.jsx(Oe,{children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Navigation entre les pages"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez la navigation entre toutes les sections"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"CrÃ©ation d'annonces avec photos"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"CrÃ©ez une annonce avec photos prises via l'app"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Messagerie en temps rÃ©el"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez l'envoi et rÃ©ception de messages"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Paiements"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Testez le processus de paiement"})]})]}),h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:"Performance et fluiditÃ©"}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"VÃ©rifiez que l'app reste fluide"})]})]})]})})]})]})},en=()=>h.jsx("div",{className:"container mx-auto py-8",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-bold mb-4",children:"ðŸ§ª Tests Mobile - MaxiMarket"}),h.jsx("p",{className:"text-muted-foreground",children:"Suite complÃ¨te de tests pour valider toutes les fonctionnalitÃ©s mobiles"})]}),h.jsx(Zi,{})]})}),sn=({title:e="MaxiMarket - Marketplace NÂ°1 en Afrique de l'Ouest",description:s="MaxiMarket, la plateforme marketplace leader en Afrique de l'Ouest. Achetez, vendez et louez immobilier, automobiles, services au BÃ©nin, SÃ©nÃ©gal, Togo, CÃ´te d'Ivoire.",keywords:t="marketplace afrique ouest, immobilier bÃ©nin, voiture sÃ©nÃ©gal, services togo, annonces cÃ´te ivoire",image:a="https://maxiimarket.com/og-image.png",url:r="https://maxiimarket.com",type:i="website",author:n="MaxiMarket",publishedTime:l,modifiedTime:o,canonical:c})=>{const d=e.includes("MaxiMarket")?e:e+" | MaxiMarket",m=c||r;return h.jsxs(Wa,{children:[h.jsx("title",{children:d}),h.jsx("meta",{name:"description",content:s}),h.jsx("meta",{name:"keywords",content:t}),h.jsx("meta",{name:"author",content:n}),h.jsx("link",{rel:"canonical",href:m}),h.jsx("meta",{property:"og:type",content:i}),h.jsx("meta",{property:"og:title",content:d}),h.jsx("meta",{property:"og:description",content:s}),h.jsx("meta",{property:"og:image",content:a}),h.jsx("meta",{property:"og:url",content:r}),h.jsx("meta",{property:"og:site_name",content:"MaxiMarket"}),h.jsx("meta",{property:"og:locale",content:"fr_FR"}),l&&h.jsx("meta",{property:"article:published_time",content:l}),o&&h.jsx("meta",{property:"article:modified_time",content:o}),h.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),h.jsx("meta",{name:"twitter:title",content:d}),h.jsx("meta",{name:"twitter:description",content:s}),h.jsx("meta",{name:"twitter:image",content:a}),h.jsx("meta",{name:"twitter:url",content:r}),h.jsx("meta",{name:"robots",content:"index, follow, max-image-preview:large"})]})},tn=()=>h.jsxs(h.Fragment,{children:[h.jsx(sn,{title:"Page non trouvÃ©e - 404",description:"La page que vous recherchez n'existe pas ou a Ã©tÃ© dÃ©placÃ©e.",robots:"noindex, nofollow"}),h.jsx("div",{className:"min-h-screen flex items-center justify-center px-4",children:h.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[h.jsx("div",{className:"mb-8",children:h.jsx("img",{src:"/logo.png",alt:"MaxiMarket",className:"h-24 w-auto mx-auto"})}),h.jsx("h1",{className:"text-9xl font-bold gradient-text mb-4",children:"404"}),h.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Page non trouvÃ©e"}),h.jsx("p",{className:"text-muted-foreground text-lg mb-8",children:"DÃ©solÃ©, la page que vous recherchez n'existe pas ou a Ã©tÃ© dÃ©placÃ©e."}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsx(oe,{asChild:!0,size:"lg",className:"btn-gradient-primary",children:h.jsxs(b,{to:"/",children:[h.jsx(ue,{className:"mr-2 h-5 w-5"}),"Retour Ã  l'accueil"]})}),h.jsx(oe,{asChild:!0,size:"lg",variant:"outline",children:h.jsxs(b,{to:"/marketplace",children:[h.jsx(As,{className:"mr-2 h-5 w-5"}),"Voir les annonces"]})})]}),h.jsxs("div",{className:"mt-12 pt-8 border-t border-border",children:[h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Liens utiles :"}),h.jsxs("div",{className:"flex flex-wrap gap-4 justify-center text-sm",children:[h.jsx(b,{to:"/immobilier",className:"text-primary hover:underline",children:"Immobilier"}),h.jsx(b,{to:"/automobile",className:"text-primary hover:underline",children:"Automobile"}),h.jsx(b,{to:"/services",className:"text-primary hover:underline",children:"Services"}),h.jsx(b,{to:"/aide",className:"text-primary hover:underline",children:"Centre d'aide"}),h.jsx(b,{to:"/contact",className:"text-primary hover:underline",children:"Contact"})]})]})]})})]}),an=()=>{const e=[{icon:h.jsx(Ft,{className:"h-8 w-8 text-primary"}),title:"Innovation Continue",description:"Nous repoussons constamment les limites pour offrir des solutions de pointe."},{icon:h.jsx(Dt,{className:"h-8 w-8 text-primary"}),title:"Confiance & SÃ©curitÃ©",description:"La sÃ©curitÃ© de vos transactions et de vos donnÃ©es est notre prioritÃ© absolue."},{icon:h.jsx(Ye,{className:"h-8 w-8 text-primary"}),title:"Approche Communautaire",description:"Nous construisons une plateforme pour et avec la communautÃ© ouest-africaine."},{icon:h.jsx(bt,{className:"h-8 w-8 text-primary"}),title:"Impact Local Positif",description:"Nous visons Ã  dynamiser l'Ã©conomie locale et Ã  crÃ©er des opportunitÃ©s."}];return h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-16",children:[h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Ã€ Propos de ",h.jsx("span",{className:"gradient-text",children:ke.siteName})]}),h.jsxs("p",{className:"text-xl text-muted-foreground",children:[ke.tagline,". Notre mission est de rÃ©volutionner le commerce en ligne en Afrique de l'Ouest grÃ¢ce Ã  une technologie innovante et une approche centrÃ©e sur l'utilisateur."]})]}),h.jsxs("div",{className:"max-w-5xl mx-auto",children:[h.jsxs(Ht.section,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"mb-20 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center",children:[h.jsx(Vs,{className:"h-8 w-8 mr-3 text-primary"}),"Notre Histoire"]}),h.jsxs("p",{className:"text-muted-foreground mb-4",children:["FondÃ©e avec la vision de simplifier et de sÃ©curiser les Ã©changes commerciaux en Afrique de l'Ouest, ",ke.siteName," est nÃ©e d'une passion pour la technologie et d'un engagement profond envers le dÃ©veloppement Ã©conomique de la rÃ©gion. Nous avons identifiÃ© un besoin crucial pour une plateforme unifiÃ©e, moderne et fiable, capable de connecter acheteurs et vendeurs de maniÃ¨re transparente."]}),h.jsxs("p",{className:"text-muted-foreground",children:["Depuis nos dÃ©buts, nous avons travaillÃ© sans relÃ¢che pour construire une marketplace qui non seulement rÃ©pond aux besoins actuels, mais anticipe Ã©galement les tendances futures du commerce Ã©lectronique. Notre Ã©quipe est composÃ©e d'experts locaux et internationaux, tous unis par l'objectif de faire de ",ke.siteName," le leader incontestÃ© du marchÃ©."]})]}),h.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden shadow-2xl",children:[h.jsx("img",{className:"w-full h-full object-cover",alt:"Ã‰quipe MaxiMarket travaillant ensemble",src:"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=1932&auto=format&fit=crop"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]})]}),h.jsx(ct,{className:"my-20"}),h.jsxs(Ht.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-20 text-center",children:[h.jsxs("h2",{className:"text-3xl font-bold mb-10 flex items-center justify-center",children:[h.jsx(qt,{className:"h-8 w-8 mr-3 text-primary"}),"Notre Mission & Vision"]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border glassmorphic-card",children:[h.jsx("h3",{className:"text-2xl font-semibold mb-4 text-primary",children:"Mission"}),h.jsx("p",{className:"text-muted-foreground",children:"Connecter l'Afrique de l'Ouest au futur du commerce en fournissant une plateforme marketplace innovante, sÃ©curisÃ©e et accessible Ã  tous. Nous nous engageons Ã  autonomiser les individus et les entreprises en facilitant les transactions et en stimulant la croissance Ã©conomique locale."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border glassmorphic-card",children:[h.jsx("h3",{className:"text-2xl font-semibold mb-4 text-primary",children:"Vision"}),h.jsx("p",{className:"text-muted-foreground",children:"Devenir la marketplace de rÃ©fÃ©rence en Afrique, reconnue pour son excellence technologique, son impact positif sur les communautÃ©s et sa contribution Ã  un Ã©cosystÃ¨me commercial numÃ©rique florissant et inclusif pour le continent."})]})]})]}),h.jsx(ct,{className:"my-20"}),h.jsxs(Ht.section,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"mb-16",children:[h.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Nos Valeurs Fondamentales"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map(((e,s)=>h.jsxs(Ht.div,{className:"bg-card p-6 rounded-xl shadow-lg text-center border border-border hover:border-primary transition-colors duration-300 glassmorphic-card",whileHover:{y:-5},children:[h.jsx("div",{className:"p-4 bg-primary/10 rounded-full inline-block mb-4",children:e.icon}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),h.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},s)))})]}),h.jsx("div",{className:"text-center mt-16",children:h.jsxs("p",{className:"text-lg text-muted-foreground",children:["PrÃªt Ã  dÃ©couvrir la diffÃ©rence ",ke.siteName," ? ",h.jsx("a",{href:"/",className:"text-primary font-semibold hover:underline",children:"Explorez notre plateforme dÃ¨s maintenant."})]})})]})]})},rn=()=>{const{toast:e}=Me(),[s,t]=p.useState({name:"",email:"",subject:"",message:""}),[a,r]=p.useState(!1),i=e=>{const{name:s,value:a}=e.target;t((e=>d(c({},e),{[s]:a})))};return h.jsxs(Ht.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onSubmit:a=>x(null,null,(function*(){a.preventDefault(),r(!0);try{const{emailService:a}=yield z((()=>x(null,null,(function*(){const{emailService:e}=yield import("./admin-De95lozH.js").then((e=>e.bX));return{emailService:e}}))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])),{personalData:r}=yield z((()=>x(null,null,(function*(){const{personalData:e}=yield import("./admin-De95lozH.js").then((e=>e.bW));return{personalData:e}}))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12]));yield a.sendEmail(r.contactEmail||"contact@maximarket.com","[Contact MaxiMarket] "+s.subject,`\n          Nouveau message de contact reÃ§u:\n          \n          De: ${s.name}\n          Email: ${s.email}\n          Sujet: ${s.subject}\n          \n          Message:\n          ${s.message}\n          \n          ---\n          EnvoyÃ© depuis MaxiMarket Contact Form\n        `,!1),e({title:"Message envoyÃ© !",description:"Merci pour votre message. Nous vous rÃ©pondrons dans les plus brefs dÃ©lais.",duration:5e3}),t({name:"",email:"",subject:"",message:""})}catch(i){e({title:"Erreur d'envoi",description:"Une erreur est survenue. Veuillez rÃ©essayer ou nous contacter directement par email.",variant:"destructive",duration:5e3})}finally{r(!1)}})),className:"space-y-6 gradient-border p-6 bg-card rounded-lg",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"name",children:"Nom"}),h.jsx(Ae,{id:"name",name:"name",placeholder:"Votre nom",value:s.name,onChange:i,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"email",children:"Email"}),h.jsx(Ae,{id:"email",name:"email",type:"email",placeholder:"votre@email.com",value:s.email,onChange:i,required:!0})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"subject",children:"Sujet"}),h.jsx(Ae,{id:"subject",name:"subject",placeholder:"Sujet de votre message",value:s.subject,onChange:i,required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Ve,{htmlFor:"message",children:"Message"}),h.jsx(Ds,{id:"message",name:"message",placeholder:"Votre message...",rows:6,value:s.message,onChange:i,required:!0})]}),h.jsx(oe,{type:"submit",className:"w-full",disabled:a,children:a?h.jsxs("span",{className:"flex items-center",children:[h.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi en cours..."]}):h.jsxs("span",{className:"flex items-center",children:[h.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Envoyer le message"]})})]})},nn=()=>{const e=[{icon:h.jsx(Le,{className:"h-6 w-6"}),label:"Email",value:ke.contactEmail,href:"mailto:"+ke.contactEmail},{icon:h.jsx(ze,{className:"h-6 w-6"}),label:"TÃ©lÃ©phone",value:ke.phone,href:"tel:"+ke.phone},{icon:h.jsx(Ke,{className:"h-6 w-6"}),label:"Adresse",value:ke.address,href:"https://maps.google.com/?q="+encodeURIComponent(ke.address)}],s=[{icon:h.jsx(Ce,{className:"h-6 w-6"}),label:"Facebook",href:ke.socials.facebook},{icon:h.jsx(Se,{className:"h-6 w-6"}),label:"Instagram",href:ke.socials.instagram},{icon:h.jsx("svg",{className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:h.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),label:"TikTok",href:ke.socials.tiktok}];return h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Contactez ",h.jsx("span",{className:"gradient-text",children:ke.name})]}),h.jsx("p",{className:"text-muted-foreground",children:"Vous avez un projet en tÃªte ou une question ? N'hÃ©sitez pas Ã  nous contacter !"})]}),h.jsx("div",{className:"max-w-5xl mx-auto",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[h.jsxs(Ht.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"space-y-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Informations de contact"}),h.jsx("div",{className:"space-y-6",children:e.map(((e,s)=>h.jsxs(Ht.a,{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-4 p-4 rounded-lg glass-effect hover:border-primary transition-colors",whileHover:{y:-5},whileTap:{scale:.95},children:[h.jsx("div",{className:"p-3 rounded-full bg-primary/10 text-primary",children:e.icon}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:e.label}),h.jsx("p",{className:"text-muted-foreground",children:e.value})]})]},s)))})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"RÃ©seaux sociaux"}),h.jsx("div",{className:"flex space-x-4",children:s.map(((e,s)=>h.jsx(Ht.a,{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.label,className:"p-4 rounded-full bg-secondary hover:bg-primary/20 transition-colors",whileHover:{y:-5},whileTap:{scale:.95},children:e.icon},s)))})]})]}),h.jsx(Ht.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"space-y-8",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Envoyez un message"}),h.jsx(rn,{})]})})]})})]})},ln=()=>{const e=[{title:"DÃ©veloppeur Frontend Senior (React)",location:"Dakar, SÃ©nÃ©gal (Hybride)",type:"Temps Plein",link:"#"},{title:"Chef de Produit Marketplace",location:"Abidjan, CÃ´te d'Ivoire",type:"Temps Plein",link:"#"},{title:"SpÃ©cialiste Marketing Digital",location:"Lagos, NigÃ©ria (Remote)",type:"Temps Plein",link:"#"},{title:"Responsable Service Client Bilingue",location:"Dakar, SÃ©nÃ©gal",type:"Temps Plein",link:"#"}];return h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-16",children:[h.jsx(he,{className:"h-16 w-16 text-primary mx-auto mb-6"}),h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Rejoignez l'Ã‰quipe ",h.jsx("span",{className:"gradient-text",children:ke.siteName})]}),h.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"FaÃ§onnez l'avenir du commerce en Afrique de l'Ouest avec nous. DÃ©couvrez nos opportunitÃ©s de carriÃ¨re passionnantes."})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-16 bg-card p-8 md:p-12 rounded-xl shadow-xl glassmorphic-card",children:[h.jsxs("h2",{className:"text-3xl font-bold mb-8 text-center flex items-center justify-center",children:["Pourquoi travailler chez ",ke.siteName," ?"]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[h.jsxs("div",{className:"p-6",children:[h.jsx(It,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Impact Significatif"}),h.jsx("p",{className:"text-muted-foreground",children:"Contribuez Ã  un projet qui transforme rÃ©ellement la vie des gens et l'Ã©conomie locale."})]}),h.jsxs("div",{className:"p-6",children:[h.jsx(Ye,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Culture Collaborative"}),h.jsx("p",{className:"text-muted-foreground",children:"Rejoignez une Ã©quipe passionnÃ©e, diverse et solidaire oÃ¹ chaque voix compte."})]}),h.jsxs("div",{className:"p-6",children:[h.jsx(he,{className:"h-12 w-12 text-green-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Croissance et Apprentissage"}),h.jsx("p",{className:"text-muted-foreground",children:"BÃ©nÃ©ficiez d'opportunitÃ©s de dÃ©veloppement professionnel continu et relevez des dÃ©fis stimulants."})]})]})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[h.jsx("h2",{className:"text-3xl font-bold mb-10 text-center",children:"Postes Ouverts Actuellement"}),e.length>0?h.jsx("div",{className:"space-y-6 max-w-3xl mx-auto",children:e.map(((e,s)=>h.jsxs(Ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1*s+.5},className:"bg-card p-6 rounded-lg shadow-md border border-border hover:border-primary transition-colors flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-semibold text-primary",children:e.title}),h.jsxs("p",{className:"text-muted-foreground text-sm",children:[e.location," - ",e.type]})]}),h.jsx(oe,{asChild:!0,className:"mt-4 sm:mt-0 bg-primary hover:bg-primary/90",children:h.jsxs("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:["Voir l'Offre ",h.jsx(Ys,{className:"ml-2 h-4 w-4"})]})})]},s)))}):h.jsx("p",{className:"text-center text-muted-foreground text-lg",children:"Nous n'avons pas de postes ouverts pour le moment, mais nous sommes toujours Ã  la recherche de talents exceptionnels. N'hÃ©sitez pas Ã  nous envoyer une candidature spontanÃ©e !"}),h.jsx("div",{className:"text-center mt-12",children:h.jsx(oe,{variant:"outline",size:"lg",children:"Envoyer une Candidature SpontanÃ©e"})})]})]})},on=()=>{const e={logos:[{name:"Logo Principal",format:"PNG, SVG",size:"2MB",url:"#"},{name:"Logo Monochrome",format:"PNG, SVG",size:"1.5MB",url:"#"}],photos:[{name:"Photos de l'Ã©quipe",format:"JPG",size:"5MB",url:"#"},{name:"Interface utilisateur",format:"JPG",size:"3MB",url:"#"}]},s={name:"Service Relations Presse",email:"press@maxiimarket.com",phone:ke.phone};return h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx(Rt,{className:"h-16 w-16 text-primary mx-auto mb-6"}),h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Espace ",h.jsx("span",{className:"gradient-text",children:"Presse"})]}),h.jsxs("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:["Retrouvez toutes les actualitÃ©s, ressources et informations pour la presse concernant ",ke.siteName,"."]})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-16",children:[h.jsxs("h2",{className:"text-2xl font-bold mb-8 flex items-center",children:[h.jsx(Ot,{className:"h-6 w-6 mr-2 text-primary"}),"Derniers CommuniquÃ©s de Presse"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:1,title:"MaxiMarket rÃ©volutionne le e-commerce en Afrique de l'Ouest",date:"01 Juin 2025",description:"Lancement officiel de la plateforme marketplace innovante MaxiMarket.",pdfUrl:"#"},{id:2,title:"Partenariat stratÃ©gique avec PayDunya",date:"15 Mai 2025",description:"MaxiMarket s'associe Ã  PayDunya pour faciliter les paiements en ligne.",pdfUrl:"#"}].map((e=>h.jsxs(Fe,{className:"hover:border-primary transition-colors",children:[h.jsxs(De,{children:[h.jsx(Ie,{children:e.title}),h.jsx(Re,{children:e.date})]}),h.jsxs(Oe,{children:[h.jsx("p",{className:"mb-4 text-muted-foreground",children:e.description}),h.jsx(oe,{variant:"outline",className:"w-full",asChild:!0,children:h.jsxs("a",{href:e.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:[h.jsx(St,{className:"mr-2 h-4 w-4"})," TÃ©lÃ©charger le PDF"]})})]})]},e.id)))})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-16",children:[h.jsx("h2",{className:"text-2xl font-bold mb-8",children:"Kit MÃ©dia"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Logos"}),h.jsx(Re,{children:"TÃ©lÃ©chargez nos logos officiels"})]}),h.jsx(Oe,{children:h.jsx("ul",{className:"space-y-4",children:e.logos.map(((e,s)=>h.jsxs("li",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:e.name}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.format," â€¢ ",e.size]})]}),h.jsx(oe,{variant:"outline",size:"sm",asChild:!0,children:h.jsx("a",{href:e.url,download:!0,children:h.jsx(St,{className:"h-4 w-4"})})})]},s)))})})]}),h.jsxs(Fe,{children:[h.jsxs(De,{children:[h.jsx(Ie,{children:"Photos"}),h.jsx(Re,{children:"Photos officielles haute rÃ©solution"})]}),h.jsx(Oe,{children:h.jsx("ul",{className:"space-y-4",children:e.photos.map(((e,s)=>h.jsxs("li",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-medium",children:e.name}),h.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.format," â€¢ ",e.size]})]}),h.jsx(oe,{variant:"outline",size:"sm",asChild:!0,children:h.jsx("a",{href:e.url,download:!0,children:h.jsx(St,{className:"h-4 w-4"})})})]},s)))})})]})]})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"text-center bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Contact Presse"}),h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx("p",{className:"font-medium text-lg mb-2",children:s.name}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Pour toute demande d'interview ou d'information complÃ©mentaire"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(oe,{variant:"outline",className:"w-full",asChild:!0,children:h.jsxs("a",{href:"mailto:"+s.email,children:[h.jsx(Ys,{className:"mr-2 h-4 w-4"}),s.email]})}),h.jsxs(oe,{variant:"outline",className:"w-full",children:[h.jsx(Ys,{className:"mr-2 h-4 w-4"}),s.phone]})]})]})]})]})},cn=()=>{const e=f(),[s,t]=p.useState(""),a=[{name:"Comptes et Profils",icon:h.jsx(Ye,{className:"h-8 w-8 text-primary"}),description:"Gestion de votre compte, paramÃ¨tres et notifications."},{name:"Acheter sur MaxiMarket",icon:h.jsx(Ut,{className:"h-8 w-8 text-primary"}),description:"Recherche, achat, paiements et livraisons."},{name:"Vendre sur MaxiMarket",icon:h.jsx(Os,{className:"h-8 w-8 text-primary"}),description:"CrÃ©ation d'annonces, gestion des ventes, boosters."},{name:"SÃ©curitÃ© et Confiance",icon:h.jsx(Dt,{className:"h-8 w-8 text-primary"}),description:"ProtÃ©ger votre compte, Ã©viter les fraudes."}];return h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx(ns,{className:"h-16 w-16 text-primary mx-auto mb-6"}),h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Centre d'Aide ",h.jsx("span",{className:"gradient-text",children:ke.siteName})]}),h.jsx("p",{className:"text-xl text-muted-foreground",children:"Comment pouvons-nous vous aider aujourd'hui ?"})]}),h.jsxs(Ht.form,{onSubmit:t=>{t.preventDefault(),s.trim()&&e("/faq?search="+encodeURIComponent(s.trim()))},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto mb-16 relative",children:[h.jsx(Ae,{type:"search",placeholder:"Rechercher des articles d'aide (ex: mot de passe oubliÃ©)",className:"w-full h-14 pl-12 pr-4 text-lg rounded-full shadow-lg",value:s,onChange:e=>t(e.target.value)}),h.jsx(As,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-6 w-6 text-muted-foreground"}),h.jsx(oe,{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-10 rounded-full",children:"Rechercher"})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-16",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Sujets Populaires"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Comment publier une annonce ?",link:"/faq#publier-annonce"},{title:"SÃ©curiser mon compte",link:"/faq#securite-compte"},{title:"ProblÃ¨mes de paiement",link:"/faq#paiement"},{title:"Contacter un vendeur/acheteur",link:"/faq#contacter-utilisateur"},{title:"Signaler un problÃ¨me",link:"/faq#signaler-probleme"}].map(((e,s)=>h.jsxs(b,{to:e.link,className:"block bg-card p-6 rounded-lg shadow-md hover:shadow-lg hover:border-primary border border-transparent transition-all duration-300 transform hover:-translate-y-1 glassmorphic-card",children:[h.jsxs("h3",{className:"text-lg font-semibold text-primary mb-2 flex items-center",children:[e.title," ",h.jsx(Ee,{className:"ml-auto h-4 w-4 opacity-50 group-hover:opacity-100"})]}),h.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultez notre FAQ pour une rÃ©ponse rapide."})]},s)))})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mb-16",children:[h.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Parcourir par CatÃ©gorie"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(((e,s)=>h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s+.7},className:"bg-card p-6 rounded-xl shadow-lg text-center border border-border hover:border-primary transition-colors glassmorphic-card",children:[h.jsx("div",{className:"p-3 bg-primary/10 rounded-full inline-block mb-4",children:e.icon}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),h.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),h.jsx(oe,{variant:"outline",asChild:!0,children:h.jsx(b,{to:"/faq#cat-"+e.name.toLowerCase().replace(/\s+/g,"-"),children:"Explorer"})})]},s)))})]}),h.jsxs(Ht.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"text-center bg-card p-8 md:p-12 rounded-xl shadow-xl glassmorphic-card border border-border",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Vous ne trouvez pas ce que vous cherchez ?"}),h.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Notre Ã©quipe d'assistance est lÃ  pour vous aider. Contactez-nous directement ou consultez notre FAQ complÃ¨te."}),h.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[h.jsx(oe,{size:"lg",asChild:!0,className:"bg-primary hover:bg-primary/90",children:h.jsxs(b,{to:"/contactez-nous",children:[h.jsx(be,{className:"mr-2 h-5 w-5"})," Contacter le Support"]})}),h.jsx(oe,{size:"lg",variant:"outline",asChild:!0,children:h.jsxs(b,{to:"/faq",children:[h.jsx(Vt,{className:"mr-2 h-5 w-5"})," Consulter la FAQ"]})})]})]})]})},dn=()=>{const[e,s]=w(),[t,a]=p.useState(e.get("search")||""),[r,i]=p.useState([]),n=ke.siteName||"MaxiMarket",l=[{id:"general-1",category:"GÃ©nÃ©ral",question:`Qu'est-ce que ${n} ?`,answer:n+" est une plateforme marketplace innovante conÃ§ue pour l'Afrique de l'Ouest, facilitant l'achat et la vente de biens immobiliers, vÃ©hicules, services professionnels et divers autres produits. Notre objectif est de simplifier le commerce en ligne et de le rendre plus sÃ»r et accessible."},{id:"compte-1",category:"Compte Utilisateur",question:`Comment crÃ©er un compte sur ${n} ?`,answer:"Pour crÃ©er un compte, cliquez sur le bouton 'Connexion / Inscription' en haut Ã  droite de la page. Vous pourrez alors vous inscrire en utilisant votre adresse e-mail ou via des services tiers comme Google ou Facebook (si activÃ©). Suivez simplement les instructions Ã  l'Ã©cran."},{id:"compte-2",category:"Compte Utilisateur",question:"J'ai oubliÃ© mon mot de passe, que faire ?",answer:"Si vous avez oubliÃ© votre mot de passe, cliquez sur le lien 'Mot de passe oubliÃ© ?' sur la page de connexion. Entrez votre adresse e-mail et nous vous enverrons un lien pour rÃ©initialiser votre mot de passe."},{id:"publier-annonce",category:"Vendre sur "+n,question:"Comment publier une annonce ?",answer:"Une fois connectÃ©, accÃ©dez Ã  votre tableau de bord et cherchez le bouton 'Publier une annonce' ou 'Nouvelle annonce'. Choisissez la catÃ©gorie appropriÃ©e, remplissez tous les champs requis (titre, description, prix, photos, etc.) et soumettez votre annonce. Elle sera examinÃ©e par notre Ã©quipe avant d'Ãªtre publiÃ©e."},{id:"paiement",category:"Paiements et Transactions",question:"Quels sont les moyens de paiement acceptÃ©s ?",answer:"Nous acceptons plusieurs moyens de paiement, y compris les cartes bancaires (Visa, Mastercard), les paiements mobiles (Orange Money, Wave, etc. selon disponibilitÃ© rÃ©gionale), PayPal et PayDunya. Les options exactes peuvent varier en fonction de votre pays."},{id:"securite-compte",category:"SÃ©curitÃ©",question:"Comment puis-je sÃ©curiser mon compte ?",answer:"Pour sÃ©curiser votre compte, utilisez un mot de passe fort et unique. Activez l'authentification Ã  deux facteurs (2FA) si disponible dans vos paramÃ¨tres de compte. MÃ©fiez-vous des e-mails de phishing et ne partagez jamais vos identifiants."},{id:"contacter-utilisateur",category:"Interaction",question:"Comment contacter un vendeur ou un acheteur ?",answer:"Sur la page d'une annonce, vous trouverez gÃ©nÃ©ralement un bouton ou un lien pour contacter le vendeur (par exemple, 'Contacter le vendeur', 'Envoyer un message'). Utilisez notre systÃ¨me de messagerie intÃ©grÃ© pour communiquer en toute sÃ©curitÃ©. Les coordonnÃ©es directes ne sont partagÃ©es qu'avec le consentement des deux parties."},{id:"signaler-probleme",category:"Support et Litiges",question:"Comment signaler un problÃ¨me ou une annonce suspecte ?",answer:"Si vous rencontrez un problÃ¨me ou si une annonce vous semble suspecte, vous pouvez la signaler en utilisant le lien 'Signaler cette annonce' prÃ©sent sur la page de l'annonce. Pour d'autres problÃ¨mes, contactez notre support client via le Centre d'Aide."}];p.useEffect((()=>{if(t.trim()){const e=l.filter((e=>e.question.toLowerCase().includes(t.toLowerCase())||e.answer.toLowerCase().includes(t.toLowerCase())||e.category.toLowerCase().includes(t.toLowerCase())));i(e)}else i(l)}),[t]);const o=()=>{a(""),s({})},c=t.trim()?r:l,d=[...new Set(c.map((e=>e.category)))],m=c.length>0;return h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx(ns,{className:"h-16 w-16 text-primary mx-auto mb-6"}),h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6 text-foreground",children:["Questions FrÃ©quemment PosÃ©es ",h.jsx("span",{className:"gradient-text",children:"(FAQ)"})]}),h.jsxs("p",{className:"text-xl text-muted-foreground",children:["Trouvez des rÃ©ponses rapides Ã  vos questions sur ",n,"."]})]}),h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto mb-12",children:[h.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"relative",children:[h.jsx(Ae,{type:"search",placeholder:"Rechercher dans les FAQ...",value:t,onChange:e=>a(e.target.value),className:"w-full pl-12 pr-24 py-6 text-lg rounded-full border-2 border-border focus:border-primary"}),h.jsx(As,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),t&&h.jsx(oe,{type:"button",onClick:o,variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2",children:"Effacer"})]}),t&&h.jsx("p",{className:"text-sm text-muted-foreground mt-3 text-center",children:m?`${c.length} rÃ©sultat${c.length>1?"s":""} trouvÃ©${c.length>1?"s":""}`:"Aucun rÃ©sultat trouvÃ©"})]}),m?d.map(((e,s)=>{const t=c.filter((s=>s.category===e));return 0===t.length?null:h.jsxs(Ht.section,{id:"cat-"+e.toLowerCase().replace(/\s+/g,"-"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s},className:"mb-12 max-w-3xl mx-auto",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6 border-l-4 border-primary pl-4 text-foreground",children:e}),h.jsx(se,{type:"single",collapsible:!0,className:"w-full space-y-3",children:t.map((e=>h.jsxs(te,{value:e.id,id:e.id,className:"bg-card border border-border rounded-lg shadow-sm hover:border-primary/50 transition-colors",children:[h.jsx(ae,{className:"p-6 text-left font-semibold hover:no-underline text-foreground",children:e.question}),h.jsx(re,{className:"p-6 pt-0 text-muted-foreground",children:e.answer})]},e.id)))})]},e)})):h.jsxs(Ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[h.jsxs("p",{className:"text-lg text-muted-foreground mb-4",children:['Aucun rÃ©sultat ne correspond Ã  votre recherche "',t,'"']}),h.jsx(oe,{onClick:o,variant:"outline",children:"Voir toutes les questions"})]}),h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2+.1*d.length},className:"text-center mt-16",children:[h.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Vous n'avez pas trouvÃ© de rÃ©ponse ?"}),h.jsx(oe,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:opacity-90 transition-opacity",children:h.jsx(b,{to:"/contactez-nous",children:"Contactez notre support"})})]})]})},mn=()=>h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx(Dt,{className:"h-16 w-16 text-primary mx-auto mb-6"}),h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Politique de ",h.jsx("span",{className:"gradient-text",children:"ConfidentialitÃ©"})]}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"DerniÃ¨re mise Ã  jour : 02 Juin 2025"})]}),h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-3xl mx-auto space-y-8",children:[h.jsx("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:h.jsxs("p",{className:"text-lg mb-6",children:["Bienvenue sur ",ke.siteName,". Nous nous engageons Ã  protÃ©ger la confidentialitÃ© de vos informations personnelles. Cette politique de confidentialitÃ© explique comment nous collectons, utilisons, divulguons et protÃ©geons vos informations lorsque vous visitez notre site web et utilisez nos services."]})}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"1. Informations que nous collectons"]}),h.jsx("p",{className:"mb-4",children:"Nous pouvons collecter des informations personnelles vous concernant de diffÃ©rentes maniÃ¨res, notamment :"}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Informations fournies directement par vous :"})," Lorsque vous crÃ©ez un compte, publiez une annonce, effectuez une transaction, communiquez avec nous ou d'autres utilisateurs (nom, adresse e-mail, numÃ©ro de tÃ©lÃ©phone, informations de paiement, etc.)."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Informations collectÃ©es automatiquement :"})," Lorsque vous utilisez notre site, nous pouvons collecter des informations sur votre appareil, votre activitÃ© de navigation, votre adresse IP, votre localisation (si autorisÃ©e), les cookies et autres technologies de suivi."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Informations provenant de tiers :"})," Nous pouvons recevoir des informations vous concernant de la part de services tiers, tels que les fournisseurs de services de paiement ou les plateformes de mÃ©dias sociaux si vous choisissez de lier votre compte."]})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"2. Utilisation de vos informations"]}),h.jsx("p",{className:"mb-4",children:"Nous utilisons les informations que nous collectons pour :"}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsx("li",{children:"Fournir, exploiter et amÃ©liorer nos services."}),h.jsx("li",{children:"Traiter vos transactions et gÃ©rer votre compte."}),h.jsx("li",{children:"Personnaliser votre expÃ©rience sur notre plateforme."}),h.jsx("li",{children:"Communiquer avec vous, y compris pour le service client et les mises Ã  jour."}),h.jsx("li",{children:"Assurer la sÃ©curitÃ© de notre plateforme et prÃ©venir la fraude."}),h.jsx("li",{children:"Analyser l'utilisation de notre site et amÃ©liorer nos offres."}),h.jsx("li",{children:"Respecter nos obligations lÃ©gales."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"3. Partage de vos informations"]}),h.jsx("p",{className:"mb-4",children:"Nous pouvons partager vos informations personnelles dans les circonstances suivantes :"}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsxs("li",{children:[h.jsx("strong",{children:"Avec d'autres utilisateurs :"})," Pour faciliter les transactions et les communications (par exemple, partager votre nom d'utilisateur ou les informations de contact nÃ©cessaires pour une transaction)."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Avec des fournisseurs de services tiers :"})," Qui nous aident Ã  exploiter notre plateforme (hÃ©bergement, traitement des paiements, analyse de donnÃ©es, marketing, etc.). Ces fournisseurs sont contractuellement tenus de protÃ©ger vos informations."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"Pour des raisons lÃ©gales :"})," Si la loi l'exige, ou pour rÃ©pondre Ã  une procÃ©dure lÃ©gale valide, protÃ©ger nos droits, notre propriÃ©tÃ© ou notre sÃ©curitÃ©, ou ceux de nos utilisateurs ou du public."]}),h.jsxs("li",{children:[h.jsx("strong",{children:"En cas de transfert d'entreprise :"})," En cas de fusion, acquisition, rÃ©organisation ou vente d'actifs, vos informations peuvent Ãªtre transfÃ©rÃ©es."]})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"4. Vos droits et choix"]}),h.jsx("p",{className:"mb-4",children:"Selon votre juridiction, vous pouvez avoir certains droits concernant vos informations personnelles, tels que :"}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsx("li",{children:"Le droit d'accÃ©der Ã  vos informations."}),h.jsx("li",{children:"Le droit de corriger ou de mettre Ã  jour vos informations."}),h.jsx("li",{children:"Le droit de supprimer vos informations."}),h.jsx("li",{children:"Le droit de vous opposer ou de restreindre certains traitements."}),h.jsx("li",{children:"Le droit Ã  la portabilitÃ© des donnÃ©es."})]}),h.jsx("p",{className:"mt-4 text-muted-foreground",children:"Vous pouvez gÃ©nÃ©ralement gÃ©rer les informations de votre compte et vos prÃ©fÃ©rences de communication via les paramÃ¨tres de votre compte. Pour exercer d'autres droits, veuillez nous contacter."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"5. SÃ©curitÃ© des donnÃ©es"]}),h.jsx("p",{className:"text-muted-foreground",children:"Nous mettons en Å“uvre des mesures de sÃ©curitÃ© techniques et organisationnelles raisonnables pour protÃ©ger vos informations personnelles contre l'accÃ¨s non autorisÃ©, la divulgation, l'altÃ©ration ou la destruction. Cependant, aucune mÃ©thode de transmission sur Internet ou de stockage Ã©lectronique n'est totalement sÃ©curisÃ©e."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"6. Conservation des donnÃ©es"]}),h.jsx("p",{className:"text-muted-foreground",children:"Nous conservons vos informations personnelles aussi longtemps que nÃ©cessaire pour atteindre les objectifs dÃ©crits dans cette politique de confidentialitÃ©, sauf si une pÃ©riode de conservation plus longue est requise ou autorisÃ©e par la loi."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"7. Transferts internationaux"]}),h.jsx("p",{className:"text-muted-foreground",children:"Vos informations peuvent Ãªtre transfÃ©rÃ©es et traitÃ©es dans des pays autres que votre pays de rÃ©sidence, oÃ¹ les lois sur la protection des donnÃ©es peuvent diffÃ©rer. Nous prendrons des mesures appropriÃ©es pour garantir que vos informations personnelles restent protÃ©gÃ©es conformÃ©ment Ã  cette politique."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"8. Modifications de cette politique"]}),h.jsx("p",{className:"text-muted-foreground",children:'Nous pouvons mettre Ã  jour cette politique de confidentialitÃ© de temps Ã  autre. Nous vous informerons de tout changement important en publiant la nouvelle politique sur notre site et en mettant Ã  jour la date de "DerniÃ¨re mise Ã  jour".'})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"9. Nous contacter"]}),h.jsxs("p",{className:"text-muted-foreground",children:["Si vous avez des questions ou des prÃ©occupations concernant cette politique de confidentialitÃ© ou nos pratiques en matiÃ¨re de donnÃ©es, veuillez nous contacter Ã  ",h.jsx("a",{href:"mailto:"+ke.infoEmail,className:"text-primary hover:underline",children:ke.infoEmail}),"."]})]})]})]}),un=()=>h.jsxs("div",{className:"container mx-auto px-4 py-16",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[h.jsx(Bs,{className:"h-16 w-16 text-primary mx-auto mb-6"}),h.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Termes et ",h.jsx("span",{className:"gradient-text",children:"Conditions"})," d'Utilisation"]}),h.jsx("p",{className:"text-lg text-muted-foreground",children:"DerniÃ¨re mise Ã  jour : 02 Juin 2025"})]}),h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-3xl mx-auto space-y-8",children:[h.jsx("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:h.jsxs("p",{className:"text-lg",children:['Veuillez lire attentivement ces Termes et Conditions ("Termes") avant d\'utiliser le site web ',ke.siteName,' (le "Service") exploitÃ© par ',ke.siteName,' ("nous", "notre", ou "nos"). Votre accÃ¨s et votre utilisation du Service sont conditionnÃ©s par votre acceptation et votre respect de ces Termes. Ces Termes s\'appliquent Ã  tous les visiteurs, utilisateurs et autres personnes qui accÃ¨dent ou utilisent le Service.']})}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(de,{className:"mr-2 h-6 w-6 text-primary"}),"1. Acceptation des Termes"]}),h.jsx("p",{className:"text-muted-foreground",children:"En accÃ©dant ou en utilisant le Service, vous acceptez d'Ãªtre liÃ© par ces Termes. Si vous n'Ãªtes pas d'accord avec une partie des termes, vous ne pouvez pas accÃ©der au Service."})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"2. Comptes"]}),h.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[h.jsx("p",{children:"Lorsque vous crÃ©ez un compte chez nous, vous devez nous fournir des informations exactes, complÃ¨tes et Ã  jour Ã  tout moment. Le non-respect de cette obligation constitue une violation des Termes, ce qui peut entraÃ®ner la rÃ©siliation immÃ©diate de votre compte sur notre Service."}),h.jsx("p",{children:"Vous Ãªtes responsable de la protection du mot de passe que vous utilisez pour accÃ©der au Service et de toutes les activitÃ©s ou actions effectuÃ©es sous votre mot de passe, que votre mot de passe soit avec notre Service ou un service tiers."}),h.jsx("p",{children:"Vous acceptez de ne pas divulguer votre mot de passe Ã  un tiers. Vous devez nous informer immÃ©diatement dÃ¨s que vous prenez connaissance d'une violation de la sÃ©curitÃ© ou d'une utilisation non autorisÃ©e de votre compte."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"3. Contenu Utilisateur"]}),h.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[h.jsx("p",{children:'Notre Service vous permet de publier, lier, stocker, partager et autrement rendre disponible certaines informations, textes, graphiques, vidÃ©os ou autres supports ("Contenu Utilisateur"). Vous Ãªtes responsable du Contenu Utilisateur que vous publiez sur ou via le Service, y compris sa lÃ©galitÃ©, sa fiabilitÃ© et sa pertinence.'}),h.jsx("p",{children:"En publiant du Contenu Utilisateur sur ou via le Service, vous dÃ©clarez et garantissez que : (i) le Contenu Utilisateur vous appartient (vous en Ãªtes propriÃ©taire) et/ou vous avez le droit de l'utiliser et le droit de nous accorder les droits et la licence prÃ©vus dans ces Termes, et (ii) la publication de votre Contenu Utilisateur sur ou via le Service ne viole pas les droits Ã  la vie privÃ©e, les droits de publicitÃ©, les droits d'auteur, les droits contractuels ou tout autre droit de toute personne ou entitÃ©."}),h.jsx("p",{children:"Vous conservez tous vos droits sur tout Contenu Utilisateur que vous soumettez, publiez ou affichez sur ou via le Service et vous Ãªtes responsable de la protection de ces droits. Nous n'assumons aucune responsabilitÃ© et n'engageons aucune responsabilitÃ© pour le Contenu Utilisateur que vous ou un tiers publiez sur ou via le Service."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"4. Utilisation Acceptable"]}),h.jsx("p",{className:"mb-4",children:"Vous acceptez de ne pas utiliser le Service pour :"}),h.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[h.jsx("li",{children:"Publier du contenu illÃ©gal, nuisible, menaÃ§ant, abusif, harcelant, diffamatoire, vulgaire, obscÃ¨ne, haineux ou autrement rÃ©prÃ©hensible."}),h.jsx("li",{children:"Usurper l'identitÃ© d'une personne ou d'une entitÃ©, ou dÃ©clarer faussement ou dÃ©former autrement votre affiliation avec une personne ou une entitÃ©."}),h.jsx("li",{children:"TÃ©lÃ©charger, publier ou transmettre de quelque maniÃ¨re que ce soit tout contenu que vous n'avez pas le droit de transmettre en vertu d'une loi ou de relations contractuelles ou fiduciaires."}),h.jsx("li",{children:"Violer toute loi locale, Ã©tatique, nationale ou internationale applicable."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"5. PropriÃ©tÃ© Intellectuelle"]}),h.jsxs("p",{className:"text-muted-foreground",children:["Le Service et son contenu original (Ã  l'exclusion du Contenu Utilisateur), ses caractÃ©ristiques et fonctionnalitÃ©s sont et resteront la propriÃ©tÃ© exclusive de ",ke.siteName," et de ses concÃ©dants de licence. Le Service est protÃ©gÃ© par le droit d'auteur, les marques commerciales et d'autres lois. Nos marques et habillages commerciaux ne peuvent Ãªtre utilisÃ©s en relation avec un produit ou service sans le consentement Ã©crit prÃ©alable de ",ke.siteName,"."]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"6. Liens Vers D'autres Sites Web"]}),h.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[h.jsxs("p",{children:["Notre Service peut contenir des liens vers des sites web ou des services tiers qui ne sont pas dÃ©tenus ou contrÃ´lÃ©s par ",ke.siteName,"."]}),h.jsxs("p",{children:[ke.siteName," n'a aucun contrÃ´le sur, et n'assume aucune responsabilitÃ© pour, le contenu, les politiques de confidentialitÃ© ou les pratiques de tout site web ou service tiers. Vous reconnaissez et acceptez en outre que ",ke.siteName," ne sera pas responsable, directement ou indirectement, de tout dommage ou perte causÃ© ou prÃ©sumÃ© avoir Ã©tÃ© causÃ© par ou en relation avec l'utilisation ou la confiance accordÃ©e Ã  un tel contenu, biens ou services disponibles sur ou via de tels sites web ou services."]}),h.jsx("p",{children:"Nous vous conseillons vivement de lire les termes et conditions et les politiques de confidentialitÃ© de tout site web ou service tiers que vous visitez."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"7. RÃ©siliation"]}),h.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[h.jsx("p",{children:"Nous pouvons rÃ©silier ou suspendre votre compte et interdire l'accÃ¨s au Service immÃ©diatement, sans prÃ©avis ni responsabilitÃ©, Ã  notre seule discrÃ©tion, pour quelque raison que ce soit et sans limitation, y compris mais sans s'y limiter, une violation des Termes."}),h.jsx("p",{children:"Si vous souhaitez rÃ©silier votre compte, vous pouvez simplement cesser d'utiliser le Service."}),h.jsx("p",{children:"Toutes les dispositions des Termes qui, de par leur nature, devraient survivre Ã  la rÃ©siliation survivront Ã  la rÃ©siliation, y compris, sans limitation, les dispositions relatives Ã  la propriÃ©tÃ©, les exclusions de garantie, l'indemnisation et les limitations de responsabilitÃ©."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"8. Limitation de ResponsabilitÃ©"]}),h.jsxs("p",{className:"text-muted-foreground",children:["En aucun cas ",ke.siteName,", ni ses administrateurs, employÃ©s, partenaires, agents, fournisseurs ou affiliÃ©s, ne pourront Ãªtre tenus responsables de tout dommage indirect, accessoire, spÃ©cial, consÃ©cutif ou punitif, y compris, sans limitation, la perte de profits, de donnÃ©es, d'utilisation, de clientÃ¨le ou d'autres pertes immatÃ©rielles, rÃ©sultant de votre accÃ¨s ou votre utilisation ou votre incapacitÃ© Ã  accÃ©der ou Ã  utiliser le Service."]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"9. Droit Applicable"]}),h.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[h.jsx("p",{children:"Ces Termes seront rÃ©gis et interprÃ©tÃ©s conformÃ©ment aux lois du SÃ©nÃ©gal, sans Ã©gard Ã  ses dispositions relatives aux conflits de lois."}),h.jsx("p",{children:"Notre manquement Ã  faire respecter un droit ou une disposition de ces Termes ne sera pas considÃ©rÃ© comme une renonciation Ã  ces droits. Si une disposition de ces Termes est jugÃ©e invalide ou inapplicable par un tribunal, les autres dispositions de ces Termes resteront en vigueur. Ces Termes constituent l'intÃ©gralitÃ© de l'accord entre nous concernant notre Service, et remplacent et annulent tous les accords antÃ©rieurs que nous pourrions avoir entre nous concernant le Service."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"10. Modifications"]}),h.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[h.jsx("p",{children:"Nous nous rÃ©servons le droit, Ã  notre seule discrÃ©tion, de modifier ou de remplacer ces Termes Ã  tout moment. Si une rÃ©vision est importante, nous nous efforcerons de fournir un prÃ©avis d'au moins 30 jours avant l'entrÃ©e en vigueur des nouveaux termes. Ce qui constitue un changement important sera dÃ©terminÃ© Ã  notre seule discrÃ©tion."}),h.jsx("p",{children:"En continuant Ã  accÃ©der ou Ã  utiliser notre Service aprÃ¨s l'entrÃ©e en vigueur de ces rÃ©visions, vous acceptez d'Ãªtre liÃ© par les termes rÃ©visÃ©s. Si vous n'acceptez pas les nouveaux termes, veuillez cesser d'utiliser le Service."})]})]}),h.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[h.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[h.jsx(Bs,{className:"mr-2 h-6 w-6 text-primary"}),"11. Nous Contacter"]}),h.jsxs("p",{className:"text-muted-foreground",children:["Si vous avez des questions concernant ces Termes, veuillez nous contacter Ã  ",h.jsx("a",{href:"mailto:"+ke.infoEmail,className:"text-primary hover:underline",children:ke.infoEmail}),"."]})]})]})]}),xn=({post:e,index:s,featured:t=!1})=>{const a=new Date(e.publishedAt),r=Yt(a,{addSuffix:!0,locale:Lt});return h.jsx(Ht.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},className:qe("group overflow-hidden rounded-lg border border-border bg-card transition-all duration-300 card-hover",t?"col-span-full md:col-span-2 md:row-span-2":"md:col-span-1"),children:h.jsxs(b,{to:"/blog/"+(e.slug||e.id),className:"block h-full",children:[h.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[h.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Image de couverture pour l'article "+e.title,src:"https://images.unsplash.com/photo-1578811344633-3376eab0f8ce"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-70"}),t&&h.jsx("div",{className:"absolute top-4 left-4",children:h.jsx(We,{variant:"default",className:"bg-primary/90 backdrop-blur-sm",children:"Ã€ la une"})}),h.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.tags&&e.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.tags.slice(0,t?3:2).map(((e,s)=>h.jsx(We,{variant:"secondary",className:"bg-secondary/50 backdrop-blur-sm",children:e},s)))}),t&&h.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-2 line-clamp-2",children:e.title})]})]}),h.jsxs("div",{className:"p-5",children:[!t&&h.jsx("h2",{className:"text-lg font-bold mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),h.jsx("p",{className:"text-muted-foreground line-clamp-2 mb-4",children:e.excerpt}),h.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"flex items-center",children:[h.jsx(Je,{className:"h-3 w-3 mr-1"}),r]}),h.jsxs("span",{className:"flex items-center",children:[h.jsx(Cs,{className:"h-3 w-3 mr-1"}),e.readingTime]})]}),e.category&&h.jsxs("span",{className:"flex items-center",children:[h.jsx(Os,{className:"h-3 w-3 mr-1"}),e.category]})]})]})]})})},hn=e=>{const s=e.split(/\s+/).length;return Math.ceil(s/200)};let pn=localStorage.getItem("blogPosts")?JSON.parse(localStorage.getItem("blogPosts")):[{id:"maximarket-welcome-post",title:"Bienvenue sur MaxiMarket : Votre Nouvelle Marketplace Futuriste !",slug:"bienvenue-sur-maximarket-marketplace-futuriste",excerpt:"DÃ©couvrez MaxiMarket, la plateforme innovante qui rÃ©volutionne le commerce en Afrique de l'Ouest. Immobilier, automobile, services et plus encore !",content:"\n# Bienvenue sur MaxiMarket : Votre Nouvelle Marketplace Futuriste !\n\nNous sommes ravis de vous accueillir sur **MaxiMarket**, la destination incontournable pour toutes vos transactions en Afrique de l'Ouest. Que vous cherchiez Ã  acheter, vendre ou louer, MaxiMarket vous offre une expÃ©rience utilisateur unique, moderne et sÃ©curisÃ©e.\n\n## Ce que MaxiMarket vous propose :\n\n### 1. Immobilier de Pointe\nTrouvez l'appartement de vos rÃªves, la maison idÃ©ale pour votre famille, un terrain pour construire votre avenir ou le local commercial parfait pour votre entreprise. Avec nos filtres avancÃ©s, nos visites virtuelles Ã  360Â° et nos outils d'estimation IA, la recherche immobiliÃ¨re n'a jamais Ã©tÃ© aussi simple et efficace.\n\n### 2. Automobile SimplifiÃ©\nParcourez notre vaste sÃ©lection de voitures, motos et vÃ©hicules utilitaires, neufs ou d'occasion. BÃ©nÃ©ficiez d'historiques de vÃ©hicules transparents, d'inspections virtuelles et de calculateurs de financement intÃ©grÃ©s pour prendre des dÃ©cisions Ã©clairÃ©es.\n\n### 3. Services Professionnels Ã  portÃ©e de clic\nBesoin d'un expert en BTP, d'un technicien qualifiÃ©, d'une aide domestique ou d'un professionnel de la santÃ© ? MaxiMarket vous met en relation avec des prestataires vÃ©rifiÃ©s. Prenez rendez-vous en ligne, consultez les portfolios et suivez l'avancement de vos projets en toute sÃ©rÃ©nitÃ©.\n\n### 4. Une Marketplace GÃ©nÃ©rale Riche et VariÃ©e\nExplorez un univers de produits allant de l'Ã©lectronique dernier cri Ã  la mode tendance, en passant par les articles pour la maison, les Ã©quipements sportifs et l'artisanat local authentique. MaxiMarket est votre guichet unique pour tous vos besoins.\n\n## Une ExpÃ©rience Utilisateur InÃ©galÃ©e\n\nChez MaxiMarket, nous avons mis l'accent sur un design futuriste et des fonctionnalitÃ©s innovantes :\n- **ThÃ¨me adaptatif sombre/clair** et effets visuels saisissants comme le glassmorphism.\n- **Recherche vocale** et **contrÃ´les gestuels** sur mobile pour une navigation intuitive.\n- **Tableaux de bord personnalisÃ©s** avec analyses dÃ©taillÃ©es pour les vendeurs.\n- **Intelligence Artificielle** intÃ©grÃ©e pour des recommandations personnalisÃ©es, des estimations de prix et une modÃ©ration intelligente.\n\n## Rejoignez la RÃ©volution MaxiMarket !\n\nNous sommes plus qu'une simple marketplace. Nous sommes une communautÃ© qui construit l'avenir du commerce en Afrique de l'Ouest. CrÃ©ez votre compte dÃ¨s aujourd'hui, publiez vos annonces ou trouvez exactement ce que vous cherchez.\n\nL'Ã©quipe MaxiMarket.\n    ",coverImage:"maximarket-marketplace-skyline-futuristic",author:{name:"L'Ã©quipe MaxiMarket",avatar:"maximarket-logo-avatar"},category:"Annonces MaxiMarket",tags:["MaxiMarket","Marketplace","Afrique de l'Ouest","Innovation","Immobilier","Automobile","Services"],publishedAt:"2025-06-02T10:00:00Z",readingTime:"4 min"},{id:"1",title:"Comment j'ai crÃ©Ã© une application React performante",slug:"comment-jai-cree-une-application-react-performante",excerpt:"DÃ©couvrez les techniques que j'ai utilisÃ©es pour optimiser les performances de mon application React.",content:"\n# Comment j'ai crÃ©Ã© une application React performante\n\nReact est une bibliothÃ¨que JavaScript populaire pour crÃ©er des interfaces utilisateur interactives. Cependant, Ã  mesure que les applications grandissent, les performances peuvent devenir un problÃ¨me. Dans cet article, je vais partager les techniques que j'ai utilisÃ©es pour optimiser les performances de mon application React.\n\n## 1. Utilisation de React.memo et useMemo\n\nL'un des premiers problÃ¨mes que j'ai rencontrÃ©s Ã©tait des rendus inutiles de composants. Pour rÃ©soudre ce problÃ¨me, j'ai utilisÃ© React.memo pour mÃ©moriser les composants et useMemo pour mÃ©moriser les valeurs calculÃ©es.\n\n```jsx\nconst ExpensiveComponent = React.memo(({ data }) => {\n  // Rendu du composant\n});\n\nfunction App() {\n  const expensiveCalculation = useMemo(() => {\n    return performExpensiveCalculation(data);\n  }, [data]);\n  \n  return <div>{expensiveCalculation}</div>;\n}\n```\n\n## 2. Optimisation des listes avec useCallback\n\nPour les listes, j'ai utilisÃ© useCallback pour Ã©viter de recrÃ©er des fonctions Ã  chaque rendu.\n\n```jsx\nfunction TodoList({ todos }) {\n  const handleDelete = useCallback((id) => {\n    // Logique de suppression\n  }, []);\n  \n  return (\n    <ul>\n      {todos.map(todo => (\n        <TodoItem \n          key={todo.id} \n          todo={todo} \n          onDelete={handleDelete} \n        />\n      ))}\n    </ul>\n  );\n}\n```\n\n## 3. Lazy Loading des composants\n\nJ'ai utilisÃ© le lazy loading pour charger les composants uniquement lorsqu'ils sont nÃ©cessaires.\n\n```jsx\nconst LazyComponent = React.lazy(() => import('./LazyComponent'));\n\nfunction App() {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <LazyComponent />\n    </React.Suspense>\n  );\n}\n```\n\n## 4. Utilisation de la virtualisation pour les grandes listes\n\nPour les listes contenant de nombreux Ã©lÃ©ments, j'ai utilisÃ© la virtualisation pour ne rendre que les Ã©lÃ©ments visibles Ã  l'Ã©cran.\n\n## Conclusion\n\nL'optimisation des performances est un aspect crucial du dÃ©veloppement d'applications React. En utilisant ces techniques, j'ai pu amÃ©liorer considÃ©rablement les performances de mon application.\n    ",coverImage:"react-performance",author:{name:"DÃ©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"React",tags:["React","Performance","JavaScript","Optimisation"],publishedAt:"2023-09-15T10:00:00Z",readingTime:"8 min"},{id:"2",title:"Les meilleures pratiques pour l'architecture de vos projets React",slug:"meilleures-pratiques-architecture-projets-react",excerpt:"Une architecture bien pensÃ©e est essentielle pour maintenir des projets React Ã  long terme. Voici mes conseils.",content:"\n# Les meilleures pratiques pour l'architecture de vos projets React\n\nUne bonne architecture est la clÃ© pour maintenir des projets React Ã  long terme. Dans cet article, je partage mes meilleures pratiques pour structurer vos projets React.\n\n## 1. Organisation des dossiers\n\nJ'ai trouvÃ© qu'une structure de dossiers claire aide Ã©normÃ©ment Ã  naviguer dans le code. Voici comment j'organise gÃ©nÃ©ralement mes projets:\n\n```\nsrc/\n  â”œâ”€â”€ components/\n  â”‚   â”œâ”€â”€ common/\n  â”‚   â”œâ”€â”€ layout/\n  â”‚   â””â”€â”€ features/\n  â”œâ”€â”€ hooks/\n  â”œâ”€â”€ context/\n  â”œâ”€â”€ utils/\n  â”œâ”€â”€ services/\n  â”œâ”€â”€ pages/\n  â””â”€â”€ assets/\n```\n\n## 2. SÃ©paration des prÃ©occupations\n\nIl est important de sÃ©parer la logique mÃ©tier de la prÃ©sentation. J'utilise des hooks personnalisÃ©s pour encapsuler la logique et des composants pour la prÃ©sentation.\n\n## 3. Utilisation des patterns React modernes\n\nJ'ai adoptÃ© des patterns comme le Compound Component et le Render Props pour crÃ©er des composants flexibles et rÃ©utilisables.\n\n## 4. Tests unitaires et d'intÃ©gration\n\nLes tests sont essentiels pour maintenir la qualitÃ© du code. J'utilise Jest et React Testing Library pour tester mes composants.\n\n## Conclusion\n\nUne bonne architecture est un investissement qui paie sur le long terme. En suivant ces pratiques, vous pourrez maintenir et faire Ã©voluer vos projets React plus facilement.\n    ",coverImage:"react-architecture",author:{name:"DÃ©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"Architecture",tags:["React","Architecture","Bonnes pratiques","Structure de projet"],publishedAt:"2023-08-22T14:30:00Z",readingTime:"6 min"},{id:"3",title:"Comment j'ai intÃ©grÃ© TailwindCSS dans mon workflow",slug:"comment-jai-integre-tailwindcss-dans-mon-workflow",excerpt:"TailwindCSS a rÃ©volutionnÃ© ma faÃ§on de styliser mes applications. Voici comment je l'ai intÃ©grÃ© dans mon workflow.",content:"\n# Comment j'ai intÃ©grÃ© TailwindCSS dans mon workflow\n\nTailwindCSS est un framework CSS utilitaire qui a changÃ© ma faÃ§on de styliser mes applications. Dans cet article, je vais vous montrer comment je l'ai intÃ©grÃ© dans mon workflow et les avantages que j'en ai tirÃ©s.\n\n## 1. Installation et configuration\n\nL'installation de TailwindCSS est simple avec npm ou yarn:\n\n```bash\nnpm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n```\n\n## 2. Personnalisation du thÃ¨me\n\nJ'ai personnalisÃ© le thÃ¨me pour correspondre Ã  l'identitÃ© visuelle de mon projet:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  theme: {\n    extend: {\n      colors: {\n        primary: '#3490dc',\n        secondary: '#ffed4a',\n        danger: '#e3342f',\n      },\n    },\n  },\n  // ...\n}\n```\n\n## 3. CrÃ©ation de composants rÃ©utilisables\n\nJ'ai crÃ©Ã© des composants rÃ©utilisables avec TailwindCSS:\n\n```jsx\nfunction Button({ children, variant = 'primary' }) {\n  const baseClasses = 'px-4 py-2 rounded font-bold';\n  const variantClasses = {\n    primary: 'bg-primary text-white',\n    secondary: 'bg-secondary text-gray-800',\n    danger: 'bg-danger text-white',\n  };\n  \n  return (\n    <button className={`${baseClasses} ${variantClasses[variant]}`}>\n      {children}\n    </button>\n  );\n}\n```\n\n## 4. Optimisation pour la production\n\nPour la production, j'ai utilisÃ© PurgeCSS pour Ã©liminer les classes non utilisÃ©es:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  purge: ['./src/**/*.{js,jsx,ts,tsx}', './public/index.html'],\n  // ...\n}\n```\n\n## Conclusion\n\nTailwindCSS a considÃ©rablement amÃ©liorÃ© ma productivitÃ© en me permettant de styliser rapidement mes applications sans quitter mon HTML/JSX. Si vous n'avez pas encore essayÃ©, je vous encourage vivement Ã  le faire!\n    ",coverImage:"tailwindcss-workflow",author:{name:"DÃ©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"CSS",tags:["TailwindCSS","CSS","Workflow","Design"],publishedAt:"2023-07-10T09:15:00Z",readingTime:"5 min"}].map((e=>{return d(c({},e),{readingTime:hn(e.content)+" min",author:e.author||{name:"MaxiMarket Admin",avatar:"maximarket-admin-avatar"},slug:e.slug||(s=e.title,s.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),id:e.id||$t(),publishedAt:e.publishedAt||(new Date).toISOString()});var s}));const gn=()=>{const[e,s]=p.useState(""),[t,a]=p.useState(""),[r,i]=p.useState(""),[n,l]=p.useState([]),[o,c]=p.useState([]),[d,m]=p.useState([]),[u,x]=p.useState([]);return p.useEffect((()=>{const e=[...pn].sort(((e,s)=>new Date(s.publishedAt)-new Date(e.publishedAt)));l(e),c(e),m([...new Set(pn.map((e=>e.category)).filter(Boolean))]),x((()=>{const e=pn.flatMap((e=>e.tags||[]));return[...new Set(e.filter(Boolean))]})())}),[]),p.useEffect((()=>{let s=[...n];if(e){const t=e.toLowerCase();s=s.filter((e=>e.title.toLowerCase().includes(t)||e.excerpt.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)))}t&&(s=s.filter((e=>e.category===t))),r&&(s=s.filter((e=>e.tags.includes(r)))),c(s)}),[e,t,r,n]),h.jsxs("div",{className:"container mx-auto px-4 py-12",children:[h.jsxs(Ht.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-12",children:[h.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Mon ",h.jsx("span",{className:"gradient-text",children:"Blog"})]}),h.jsx("p",{className:"text-muted-foreground",children:"DÃ©couvrez mes articles sur le dÃ©veloppement web, les technologies et les bonnes pratiques."})]}),h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[h.jsxs("div",{className:"relative flex-grow",children:[h.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),h.jsx(Ae,{type:"text",placeholder:"Rechercher un article...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(t||r||e)&&h.jsx(oe,{variant:"outline",onClick:()=>{s(""),a(""),i("")},children:"Effacer les filtres"})]}),h.jsxs("div",{className:"space-y-4",children:[d.length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx(zs,{className:"h-4 w-4 mr-2"}),h.jsx("span",{className:"text-sm font-medium",children:"CatÃ©gories"})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(((e,s)=>h.jsx(We,{variant:t===e?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{a((s=>s===e?"":e))})(e),children:e},s)))})]}),u.length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx(zs,{className:"h-4 w-4 mr-2"}),h.jsx("span",{className:"text-sm font-medium",children:"Tags"})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(((e,s)=>h.jsx(We,{variant:r===e?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{i((s=>s===e?"":e))})(e),children:e},s)))})]})]})]}),o.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(((s,a)=>h.jsx(xn,{post:s,index:a,featured:0===a&&!e&&!t&&!r},s.id)))}):h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-muted-foreground",children:"Aucun article ne correspond Ã  votre recherche."})})]})},jn=()=>{const{id:e}=k(),[s,t]=p.useState(null),[a,r]=p.useState([]),[i,n]=p.useState(!0),{toast:l}=Me();if(p.useEffect((()=>{n(!0),setTimeout((()=>{const s=(a=e,pn.find((e=>e.id===a||e.slug===a)));var a,i;if(s){t(s);const e=(i=s)?pn.filter((e=>e.id!==i.id&&(e.category===i.category||e.tags&&i.tags&&e.tags.some((e=>i.tags.includes(e)))))).sort(((e,s)=>new Date(s.publishedAt)-new Date(e.publishedAt))).slice(0,3):[];r(e)}else l({title:"Article non trouvÃ©",description:"L'article que vous recherchez n'existe pas.",variant:"destructive"});n(!1)}),500)}),[e,l]),i)return h.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),h.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de l'article..."})]})});if(!s)return h.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Article non trouvÃ©"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"L'article que vous recherchez n'existe pas ou a Ã©tÃ© supprimÃ©."}),h.jsx(oe,{asChild:!0,children:h.jsxs(b,{to:"/blog",children:[h.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Retour aux articles"]})})]})});const o=new Date(s.publishedAt),c=Qt(o,"d MMMM yyyy",{locale:Lt});return h.jsx(Ht.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"container mx-auto px-4 py-12",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsx(oe,{asChild:!0,variant:"outline",className:"mb-8",children:h.jsxs(b,{to:"/blog",children:[h.jsx(Ts,{className:"mr-2 h-4 w-4"}),"Retour aux articles"]})}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:s.title}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-6",children:[s.author&&h.jsxs("div",{className:"flex items-center",children:[h.jsx(_e,{className:"h-4 w-4 mr-1"}),s.author.name]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Je,{className:"h-4 w-4 mr-1"}),c]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Cs,{className:"h-4 w-4 mr-1"}),s.readingTime]}),s.category&&h.jsxs("div",{className:"flex items-center",children:[h.jsx(Os,{className:"h-4 w-4 mr-1"}),s.category]})]}),s.coverImage&&h.jsx("div",{className:"relative aspect-[21/9] rounded-lg overflow-hidden mb-8",children:h.jsx("img",{className:"w-full h-full object-cover",alt:"Image de couverture pour l'article "+s.title,src:"https://images.unsplash.com/photo-1578470155518-c5697b07e280"})}),s.tags&&s.tags.length>0&&h.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:s.tags.map(((e,s)=>h.jsx(We,{variant:"secondary",children:e},s)))}),h.jsx("div",{className:"prose prose-invert max-w-none",children:h.jsx("div",{className:"whitespace-pre-line",children:s.content})})]}),a.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(ct,{className:"my-12"}),h.jsxs("div",{className:"mt-12",children:[h.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Articles similaires"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((e=>h.jsx(b,{to:"/blog/"+(e.slug||e.id),className:"group block",children:h.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary",children:[e.coverImage&&h.jsx("div",{className:"aspect-video relative overflow-hidden",children:h.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Image de couverture pour l'article "+e.title,src:"https://images.unsplash.com/photo-1578470155518-c5697b07e280"})}),h.jsxs("div",{className:"p-4",children:[h.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors",children:e.title}),h.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.excerpt})]})]})},e.id)))})]})]})]})})},vn=p.lazy((()=>z((()=>import("./chatbot-dlvekz3I.js").then((e=>e.C))),__vite__mapDeps([15,1,2,3,6,7,4,8,9,10,11,12,5,13,14])))),fn=p.lazy((()=>z((()=>import("./AdminLayout-jVOytkPB.js")),__vite__mapDeps([18,1,2,3,6,7,4,8,9,10,11,12])))),bn=p.lazy((()=>z((()=>import("./messaging-DrPLMxma.js").then((e=>e.M))),__vite__mapDeps([5,1,2,3,6,7,4,8,9,10,11,12,13,14])))),yn=p.lazy((()=>z((()=>import("./DiagnosticPage-DaMErl4Q.js")),__vite__mapDeps([19,1,2,3,6,7,4,8,9,10,11,12,5,13,14])))),Nn=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.bY))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),wn=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.bZ))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),kn=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.b_))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Cn=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.b$))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Sn=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.c0))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),An=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.c1))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Pn=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.c2))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),En=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.c3))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),Ln=p.lazy((()=>z((()=>import("./admin-De95lozH.js").then((e=>e.c4))),__vite__mapDeps([6,1,2,3,7,4,8,9,10,11,12])))),zn=()=>h.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:h.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),Mn=()=>h.jsxs("div",{className:"flex items-center justify-center min-h-[400px] bg-background",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"ml-3 text-muted-foreground",children:"Chargement de l'interface admin..."})]}),Tn=()=>h.jsxs("div",{className:"flex items-center justify-center p-4",children:[h.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),h.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Chargement d'AIDA..."})]});function _n(){return g.useEffect((()=>{vr.register()}),[]),p.useEffect((()=>{x(null,null,(function*(){try{if("web"!==(yield lr.getInfo()).platform){document.body.classList.add("mobile-app");try{yield jr.setAccessoryBarVisible({isVisible:!1})}catch(e){}try{yield ur.setStyle({style:"dark"}),yield ur.setBackgroundColor({color:"#ffffff"})}catch(e){}const s=document.querySelector("meta[name=viewport]");s&&s.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),document.body.classList.add("mobile-scroll"),document.addEventListener("touchmove",(e=>{e.touches.length>1&&e.preventDefault()}),{passive:!1})}}catch(e){}}))}),[]),g.useEffect((()=>{br()}),[]),h.jsxs(D,{client:Ka,children:[h.jsx(wr,{children:h.jsxs(Pr,{children:[h.jsxs(Bt,{children:[h.jsx(Cr,{}),h.jsx(Ar,{}),h.jsx(Wt,{mode:"wait",children:h.jsxs(C,{children:[h.jsx(S,{path:"messages",element:h.jsx(Xa,{children:h.jsx(p.Suspense,{fallback:h.jsx(zn,{}),children:h.jsx(bn,{})})})}),h.jsxs(S,{path:"/",element:h.jsx(Tr,{}),children:[h.jsx(S,{index:!0,element:h.jsx(oi,{})}),h.jsx(S,{path:"connexion",element:h.jsx(qr,{})}),h.jsx(S,{path:"inscription",element:h.jsx(Dr,{})}),h.jsx(S,{path:"auth/callback",element:h.jsx(Wr,{})}),h.jsx(S,{path:"mot-de-passe-oublie",element:h.jsx(Ir,{})}),h.jsx(S,{path:"reinitialiser-mot-de-passe",element:h.jsx(Rr,{})}),h.jsx(S,{path:"profile",element:h.jsx(Hr,{})}),h.jsx(S,{path:"immobilier",element:h.jsx(ci,{})}),h.jsx(S,{path:"automobile",element:h.jsx(di,{})}),h.jsx(S,{path:"services",element:h.jsx(mi,{})}),h.jsx(S,{path:"marketplace",element:h.jsx(ui,{})}),h.jsx(S,{path:"premium",element:h.jsx(xi,{})}),h.jsx(S,{path:"creer-annonce",element:h.jsx(Xa,{children:h.jsx(Ai,{})})}),h.jsx(S,{path:"creer-annonce/:category",element:h.jsx(Xa,{children:h.jsx(Ai,{})})}),h.jsx(S,{path:"create-listing",element:h.jsx(Xa,{children:h.jsx(Ai,{})})}),h.jsx(S,{path:"annonce/:id",element:h.jsx(Ii,{})}),h.jsx(S,{path:"booster-annonce/:id",element:h.jsx(Xa,{children:h.jsx(Ui,{})})}),h.jsx(S,{path:"paiement/:boostId",element:h.jsx(Xa,{children:h.jsx(Bi,{})})}),h.jsx(S,{path:"payment-callback",element:h.jsx(Hi,{})}),h.jsx(S,{path:"fedapay-test",element:h.jsx(Ji,{})}),h.jsx(S,{path:"mobile-tests",element:h.jsx(en,{})}),h.jsx(S,{path:"diagnostic",element:h.jsx(p.Suspense,{fallback:h.jsx(zn,{}),children:h.jsx(yn,{})})}),h.jsx(S,{path:"annonce/:id/modifier",element:h.jsx(Xa,{children:h.jsx(Ai,{})})}),h.jsx(S,{path:"favorites",element:h.jsx(Xa,{children:h.jsx(Oi,{})})}),h.jsx(S,{path:"boost",element:h.jsx(Xa,{children:h.jsx(Wi,{})})}),h.jsx(S,{path:"transactions",element:h.jsx(Xa,{children:h.jsx(Xi,{})})}),h.jsxs(S,{path:"admin",element:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(fn,{})}),children:[h.jsx(S,{index:!0,element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(Nn,{})})})}),h.jsx(S,{path:"users",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(wn,{})})})}),h.jsx(S,{path:"listings",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(kn,{})})})}),h.jsx(S,{path:"transactions",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(Cn,{})})})}),h.jsx(S,{path:"analytics",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(Sn,{})})})}),h.jsx(S,{path:"newsletter",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(Ln,{})})})}),h.jsx(S,{path:"moderation",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(An,{})})})}),h.jsx(S,{path:"categories",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(Pn,{})})})}),h.jsx(S,{path:"settings",element:h.jsx(Ga,{children:h.jsx(p.Suspense,{fallback:h.jsx(Mn,{}),children:h.jsx(En,{})})})})]}),h.jsx(S,{path:"a-propos",element:h.jsx(an,{})}),h.jsx(S,{path:"contact",element:h.jsx(nn,{})}),h.jsx(S,{path:"carrieres",element:h.jsx(ln,{})}),h.jsx(S,{path:"presse",element:h.jsx(on,{})}),h.jsx(S,{path:"aide",element:h.jsx(cn,{})}),h.jsx(S,{path:"faq",element:h.jsx(dn,{})}),h.jsx(S,{path:"politique-confidentialite",element:h.jsx(mn,{})}),h.jsx(S,{path:"conditions-utilisation",element:h.jsx(un,{})}),h.jsx(S,{path:"blog",element:h.jsx(gn,{})}),h.jsx(S,{path:"blog/:id",element:h.jsx(jn,{})}),h.jsx(S,{path:"*",element:h.jsx(tn,{})})]})]})})]}),h.jsx(K,{}),h.jsx(p.Suspense,{fallback:h.jsx(Tn,{}),children:h.jsx(vn,{})})]})}),!1]})}class qn extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){if(this.state.hasError){const e=!1;return h.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f172a",color:"#e2e8f0",padding:24,textAlign:"center"},children:h.jsxs("div",{style:{maxWidth:720},children:[h.jsx("h1",{style:{marginBottom:12},children:"Une erreur est survenue"}),h.jsx("p",{style:{opacity:.9},children:"Une erreur inattendue a Ã©tÃ© dÃ©tectÃ©e."}),h.jsx("pre",{style:{textAlign:"left",background:"#111827",padding:12,borderRadius:8,overflow:"auto",marginTop:16},children:this.state.error+""}),e]})})}return this.props.children}}sa.createRoot(document.getElementById("root")).render(h.jsx(g.StrictMode,{children:h.jsx(qn,{children:h.jsx(Oa,{children:h.jsx(A,{children:h.jsx(_n,{})})})})}));export{tr as W};
