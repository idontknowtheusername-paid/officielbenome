const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chatbot-CmDBeVrq.js","assets/ui-BkW4XaSf.js","assets/router-g3RhsYON.js","assets/vendor-DaBoii6j.js","assets/admin-xTumA9HW.js","assets/animations-B7Vm-81o.js","assets/query-BZBOCxXK.js","assets/utils-iFD8Ag1C.js","assets/charts-B6pUC4mM.js","assets/forms-CVlSZARz.js","assets/supabase-CS--z241.js","assets/services-CqmL7Hwe.js","assets/messaging-BP1mmKem.js","assets/maps-DILUY6PO.js","assets/messaging-DUfRhC-v.css","assets/AdminLayout-v2YQ_Uc5.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertyNames,r=Object.getOwnPropertySymbols,i={}.hasOwnProperty,n={}.propertyIsEnumerable,l=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,o=(e,s)=>{for(var t in s||(s={}))i.call(s,t)&&l(e,t,s[t]);if(r)for(var t of r(s))n.call(s,t)&&l(e,t,s[t]);return e},c=(e,a)=>s(e,t(a)),d=(e,s,t)=>new Promise(((a,r)=>{var i=e=>{try{l(t.next(e))}catch(s){r(s)}},n=e=>{try{l(t.throw(e))}catch(s){r(s)}},l=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,n);l((t=t.apply(e,s)).next())}));import{j as m}from"./ui-BkW4XaSf.js";import{d as u,N as x,R as h,r as p,L as g,f as j,O as v,u as f,c as b,g as N,h as y,i as w,B as k}from"./router-g3RhsYON.js";import{a as C,g as S}from"./vendor-DaBoii6j.js";import{c as z,d as A,u as P,e as M,b as _,a as E,_ as q,Q as F}from"./query-BZBOCxXK.js";import{a as L,b as D,c as T,C as I,U as R,S as V,L as O,P as B,D as U,E as $,R as X,B as J,T as H,t as W,d as Q,e as K,f as G,g as Y,h as Z,i as ee,j as se,k as te}from"./messaging-BP1mmKem.js";import{u as ae,y as re,B as ie,R as ne,f as le,ag as oe,H as ce,ah as de,ai as me,aj as ue,ak as xe,al as he,am as pe,p as ge,an as je,ao as ve,q as fe,X as be,M as Ne,ap as ye,aq as we,ar as ke,I as Ce,a8 as Se,as as ze,at as Ae,P as Pe,v as Me,au as _e,c as Ee,av as qe,aw as Fe,ax as Le,ay as De,az as Te,L as Ie,aA as Re,aB as Ve,aC as Oe,aD as Be,s as Ue,U as $e,o as Xe,k as Je,l as He,Q as We,Y as Qe,ae as Ke,aE as Ge,aF as Ye,S as Ze,T as es,r as ss,b as ts,aG as as,t as rs,aH as is,aI as ns,w as ls,D as os,aJ as cs,a5 as ds,aK as ms,x as us,aL as xs,aM as hs,aN as ps,aO as gs,aP as js,aQ as vs,aR as fs,F as bs,aS as Ns,af as ys,aT as ws,m as ks,aU as Cs,aV as Ss,aW as zs,aX as As,aY as Ps,aZ as Ms,a_ as _s,a$ as Es,b0 as qs,b1 as Fs,a9 as Ls,aa as Ds,b2 as Ts,ab as Is,ac as Rs,b3 as Vs,b4 as Os,b5 as Bs,b6 as Us,b7 as $s,b8 as Xs,Z as Js,b9 as Hs,ba as Ws,bb as Qs,N as Ks,bc as Gs,bd as Ys,be as Zs,E as et,bf as st,bg as tt,bh as at,bi as rt,bj as it,bk as nt,bl as lt,bm as ot,bn as ct,bo as dt,bp as mt,bq as ut,C as xt,br as ht,bs as pt,bt as gt,bu as jt,bv as vt,bw as ft,bx as bt,by as Nt,J as yt,bz as wt,bA as kt,bB as Ct,bC as St,bD as zt,bE as At,bF as Pt,bG as Mt,bH as _t,bI as Et,bJ as qt,bK as Ft,bL as Lt,bM as Dt,bN as Tt,bO as It,bP as Rt}from"./admin-xTumA9HW.js";import{m as Vt,A as Ot}from"./animations-B7Vm-81o.js";import{i as Bt,o as Ut,s as $t}from"./forms-CVlSZARz.js";import{r as Xt}from"./chatbot-CmDBeVrq.js";import{j as Jt,f as Ht}from"./utils-iFD8Ag1C.js";import"./services-CqmL7Hwe.js";import"./maps-DILUY6PO.js";import"./charts-B6pUC4mM.js";import"./supabase-CS--z241.js";var Wt,Qt,Kt=(Wt={"assets/index-sGBwnsro.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)})).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var s,t={},a=function(){if(s)return t;s=1;var e=C();return t.createRoot=e.createRoot,t.hydrateRoot=e.hydrateRoot,t}();const l=S(a),Wt=({children:e,requiredRole:s="user"})=>{const{user:t,loading:a}=ae(),r=u();if(a)return m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:m.jsx(re,{className:"h-12 w-12 animate-spin text-blue-500"})});if(!t)return m.jsx(x,{to:"/connexion",state:{from:r},replace:!0});const i=Array.isArray(t.roles)&&t.roles.includes(s)||t.role===s||t.roles===s;return s&&!i?m.jsx(x,{to:"/",replace:!0}):e},Qt=({children:e})=>m.jsx(Wt,{requiredRole:"admin",children:e}),Kt=new z({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,s)=>(null==s?void 0:s.status)>=500&&2>e,refetchOnWindowFocus:!1,refetchOnReconnect:!0},mutations:{retry:!1}}}),Gt={staleTime:12e4,gcTime:3e5},Yt=new class{constructor(){this.isSupported="serviceWorker"in navigator,this.registration=null,this.updateAvailable=!1}register(){return d(this,null,(function*(){if(!this.isSupported)return!1;try{return this.registration=yield navigator.serviceWorker.register("/sw.js",{scope:"/"}),this.registration.addEventListener("updatefound",(()=>{this.updateAvailable=!0})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{this.updateAvailable=!1,window.location.reload()})),navigator.serviceWorker.addEventListener("message",(e=>{})),!0}catch(e){return!1}}))}unregister(){return d(this,null,(function*(){if(this.registration)try{return yield this.registration.unregister(),!0}catch(e){return!1}return!1}))}update(){return d(this,null,(function*(){if(this.registration&&this.updateAvailable)try{return this.registration.active.postMessage({type:"SKIP_WAITING"}),!0}catch(e){return!1}return!1}))}clearCache(){return d(this,null,(function*(){if(this.registration)try{return this.registration.active.postMessage({type:"CLEAR_CACHE"}),!0}catch(e){return!1}return!1}))}getStatus(){var e;return{isSupported:this.isSupported,isRegistered:!!this.registration,updateAvailable:this.updateAvailable,scope:(null==(e=this.registration)?void 0:e.scope)||null}}};let Zt=class extends h.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){var e;return this.state.hasError?this.props.fallbackRender?this.props.fallbackRender({error:this.state.error,resetErrorBoundary:()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()}}):m.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Une erreur est survenue"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:(null==(e=this.state.error)?void 0:e.message)||"Erreur inconnue"}),m.jsxs(ie,{onClick:()=>{this.setState({hasError:!1,error:null}),this.props.onReset&&this.props.onReset()},variant:"outline",children:[m.jsx(ne,{className:"w-4 h-4 mr-2"}),"RÃ©essayer"]})]})}):this.props.children}};const ea=({children:e})=>{const{reset:s}=A();return m.jsx(Zt,{onReset:s,fallbackRender:({error:e,resetErrorBoundary:s})=>m.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:m.jsxs(L,{className:"max-w-md",children:[m.jsx(le,{className:"h-4 w-4"}),m.jsx(D,{children:"Erreur de chargement"}),m.jsxs(T,{className:"mt-2",children:["Une erreur est survenue lors du chargement des donnÃ©es.",m.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:e.message})]}),m.jsxs(ie,{onClick:s,className:"mt-4",variant:"outline",children:[m.jsx(ne,{className:"w-4 h-4 mr-2"}),"RÃ©essayer"]})]})}),children:e})},sa={theme:"light",notifications:{email:!0,push:!0,sms:!1},privacy:{profile_visibility:"public",show_online_status:!0,allow_messages:!0},security_settings:{two_factor_auth:!1,login_notifications:!0,session_timeout:30,require_password_change:!1,remember_me_enabled:!0,auto_logout:!0,max_session_age:7},customization:{primary_color:"#3B82F6",accent_color:"#10B981",font_size:"medium",animations_enabled:!0}},ta=()=>((()=>{const{session:e,logout:s,isRememberMe:t}=ae(),{preferences:a}=(()=>{const{user:e}=ae(),[s,t]=p.useState(sa),[a,r]=p.useState(!1),[i,n]=p.useState(null),l=()=>d(null,null,(function*(){if(!e)return t(sa),void r(!1);try{r(!0),n(null);const s=localStorage.getItem("maximarket-preferences-"+e.id);if(s){const e=JSON.parse(s);t(o(o({},sa),e))}else t(sa)}catch(s){n(s.message),t(sa)}finally{r(!1)}}));return p.useEffect((()=>{l()}),[e]),{preferences:s,loading:a,error:i,updatePreference:(a,r)=>d(null,null,(function*(){if(e)try{const i=o({},s),n=a.split(".");let l=i;for(let e=0;e<n.length-1;e++)l[n[e]]||(l[n[e]]={}),l=l[n[e]];l[n[n.length-1]]=r,t(i),localStorage.setItem("maximarket-preferences-"+e.id,JSON.stringify(i))}catch(i){n(i.message)}})),updateMultiplePreferences:a=>d(null,null,(function*(){if(e)try{const r=o({},s);Object.entries(a).forEach((([e,s])=>{const t=e.split(".");let a=r;for(let r=0;r<t.length-1;r++)a[t[r]]||(a[t[r]]={}),a=a[t[r]];a[t[t.length-1]]=s})),t(r),localStorage.setItem("maximarket-preferences-"+e.id,JSON.stringify(r))}catch(r){n(r.message)}})),resetPreferences:()=>d(null,null,(function*(){if(e)try{t(sa),localStorage.removeItem("maximarket-preferences-"+e.id)}catch(s){n(s.message)}})),reloadPreferences:l}})(),r=p.useRef(null),i=p.useRef(Date.now()),n=p.useCallback((()=>{var n,l,o,c;if(i.current=Date.now(),r.current&&clearTimeout(r.current),!e)return;if(t)return;if(null!=(l=null==(n=null==a?void 0:a.security_settings)?void 0:n.auto_logout)&&!l)return;const d=6e4*(null!=(c=null==(o=null==a?void 0:a.security_settings)?void 0:o.session_timeout)?c:30);r.current=setTimeout((()=>{s()}),d)}),[e,t,a,s]),l=p.useCallback((()=>{n()}),[n]);p.useEffect((()=>{if(!e)return;const s=["mousedown","mousemove","keypress","keydown","scroll","touchstart","click","focus","input","change"];return s.forEach((e=>{document.addEventListener(e,l,{passive:!0})})),n(),()=>{s.forEach((e=>{document.removeEventListener(e,l)})),r.current&&clearTimeout(r.current)}}),[e,l,n]),p.useEffect((()=>{!e&&r.current&&clearTimeout(r.current)}),[e]),i.current})(),null),aa=({children:e})=>oe?e:m.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#1a1a1a",color:"#fff",fontFamily:"Arial, sans-serif",padding:"20px",textAlign:"center"},children:m.jsxs("div",{children:[m.jsx("h1",{style:{color:"#e74c3c",marginBottom:"20px"},children:"âš ï¸ Configuration Supabase requise"}),m.jsx("p",{style:{marginBottom:"15px"},children:"L'application nÃ©cessite la configuration des variables Supabase."}),m.jsxs("div",{style:{backgroundColor:"#2c3e50",padding:"15px",borderRadius:"5px",textAlign:"left",marginBottom:"20px"},children:[m.jsx("strong",{children:"Variables requises dans Vercel :"}),m.jsxs("div",{style:{marginTop:"10px",fontFamily:"monospace"},children:["VITE_SUPABASE_URL",m.jsx("br",{}),"VITE_SUPABASE_ANON_KEY"]})]}),m.jsx("button",{onClick:()=>window.location.reload(),style:{backgroundColor:"#3498db",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"5px",cursor:"pointer"},children:"ğŸ”„ Recharger"})]})}),ra=()=>{const[e,s]=p.useState(!1),[t,a]=p.useState(!1),[r,i]=p.useState(!0),{user:n}=ae(),l=p.useMemo((()=>[{name:"Immobilier",path:"/immobilier",icon:m.jsx(ce,{className:"mr-2 h-4 w-4"})},{name:"Automobile",path:"/automobile",icon:m.jsx(de,{className:"mr-2 h-4 w-4"})},{name:"Services",path:"/services",icon:m.jsx(me,{className:"mr-2 h-4 w-4"})},{name:"Marketplace",path:"/marketplace",icon:m.jsx(ue,{className:"mr-2 h-4 w-4"})}]),[]),o=p.useMemo((()=>({closed:{opacity:0,x:"-100%"},open:{opacity:1,x:"0%",transition:{duration:.3,ease:"easeInOut"}}})),[]),c=p.useMemo((()=>"text-muted-foreground hover:text-primary transition-colors px-3 py-2 rounded-md text-sm font-medium flex items-center"),[]),d=p.useMemo((()=>"text-primary bg-primary/10"),[]);p.useEffect((()=>{const e=()=>{a(window.scrollY>20)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}),[]),p.useEffect((()=>{r?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[r]);const u=p.useMemo((()=>m.jsx(g,{to:"/",className:"flex items-center space-x-2","aria-label":"Accueil MaxiMarket",children:m.jsx("span",{className:"text-2xl font-bold gradient-text",children:xe.siteName})})),[]);return m.jsxs("header",{role:"banner","aria-label":"Navigation principale",children:[m.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 transition-all duration-300 "+(t||e?"bg-background/95 shadow-lg backdrop-blur-md":"bg-transparent"),role:"navigation","aria-label":"Menu principal",children:m.jsx("div",{className:"container mx-auto px-4 md:px-6",children:m.jsxs("div",{className:"flex items-center justify-between h-20",children:[m.jsx(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},children:u}),m.jsx("nav",{role:"navigation","aria-label":"Navigation desktop",className:"hidden md:flex items-center space-x-2 lg:space-x-4",children:l.map((e=>m.jsxs(j,{to:e.path,className:({isActive:e})=>`${c} ${e?d:""}`,"aria-current":({isActive:e})=>e?"page":void 0,children:[e.icon,e.name]},e.name)))}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(ie,{variant:"ghost",size:"icon",onClick:()=>{i(!r)},"aria-label":"Changer de thÃ¨me",type:"button",children:r?m.jsx(he,{className:"h-5 w-5"}):m.jsx(pe,{className:"h-5 w-5"})}),m.jsx(ie,{variant:"ghost",size:"icon",className:"md:hidden","aria-label":"Rechercher",type:"button",children:m.jsx(ge,{className:"h-5 w-5"})}),!n&&m.jsxs(m.Fragment,{children:[m.jsx(ie,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:m.jsxs(g,{to:"/connexion","aria-label":"Se connecter",children:[m.jsx(je,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Connexion"]})}),m.jsx(ie,{asChild:!0,className:"hidden md:inline-flex btn-gradient-secondary",children:m.jsxs(g,{to:"/inscription","aria-label":"S'inscrire",children:[m.jsx(je,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Inscription"]})})]}),n&&"admin"===n.role?m.jsx(ie,{asChild:!0,className:"hidden md:inline-flex btn-secondary",children:m.jsxs(g,{to:"/admin","aria-label":"AccÃ©der Ã  l'administration",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Admin"]})}):n&&m.jsxs(m.Fragment,{children:[m.jsx(ie,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:m.jsxs(g,{to:"/messages","aria-label":"AccÃ©der aux messages",children:[m.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Messages"]})}),m.jsx(ie,{asChild:!0,className:"hidden md:inline-flex btn-gradient-primary",children:m.jsxs(g,{to:"/profile","aria-label":"AccÃ©der Ã  mon compte",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Mon Compte"]})})]}),m.jsx("div",{className:"md:hidden",children:m.jsx(ie,{variant:"ghost",size:"icon",onClick:()=>s(!e),"aria-label":e?"Fermer le menu":"Ouvrir le menu","aria-expanded":e,type:"button",children:e?m.jsx(be,{className:"h-6 w-6"}):m.jsx(Ne,{className:"h-6 w-6"})})})]})]})})}),m.jsx(Ot,{children:e&&m.jsxs(Vt.nav,{variants:o,initial:"closed",animate:"open",exit:"closed",className:"md:hidden fixed inset-0 top-20 bg-background/95 backdrop-blur-md z-40 p-4 space-y-3 border-t border-border",role:"navigation","aria-label":"Menu mobile",children:[l.map((e=>m.jsxs(j,{to:e.path,onClick:()=>s(!1),className:({isActive:e})=>`${c} text-base w-full justify-start ${e?d:""}`,"aria-current":({isActive:e})=>e?"page":void 0,children:[e.icon,e.name]},e.name))),!n&&m.jsxs(m.Fragment,{children:[m.jsxs(j,{to:"/connexion",onClick:()=>s(!1),className:c+" text-base w-full justify-start","aria-label":"Se connecter",children:[m.jsx(je,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Connexion"]}),m.jsxs(j,{to:"/inscription",onClick:()=>s(!1),className:c+" text-base w-full justify-start","aria-label":"S'inscrire",children:[m.jsx(je,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Inscription"]})]}),n&&"admin"===n.role?m.jsxs(j,{to:"/admin",onClick:()=>s(!1),className:({isActive:e})=>`${c} text-base w-full justify-start ${e?d:""}`,"aria-label":"AccÃ©der Ã  l'administration",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Admin"]}):n&&m.jsxs(m.Fragment,{children:[m.jsxs(j,{to:"/messages",onClick:()=>s(!1),className:({isActive:e})=>`${c} text-base w-full justify-start ${e?d:""}`,"aria-label":"AccÃ©der aux messages",children:[m.jsx(fe,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Messages"]}),m.jsxs(j,{to:"/profile",onClick:()=>s(!1),className:({isActive:e})=>`${c} text-base w-full justify-start ${e?d:""}`,"aria-label":"AccÃ©der Ã  mon compte",children:[m.jsx(ve,{className:"mr-2 h-4 w-4","aria-hidden":"true"})," Mon Compte"]})]})]})})]})},ia=()=>{const e=(new Date).getFullYear(),{toast:s}=Me(),[t,a]=p.useState(""),[r,i]=p.useState(!1),n=[{title:"Explorer",links:[{name:"Immobilier",path:"/immobilier"},{name:"Automobile",path:"/automobile"},{name:"Services Pro",path:"/services"},{name:"Marketplace",path:"/marketplace"}]},{title:"Entreprise",links:[{name:"Ã€ Propos",path:"/a-propos"},{name:"CarriÃ¨res",path:"/carrieres"},{name:"Presse",path:"/presse"},{name:"Blog",path:"/blog"}]},{title:"Support",links:[{name:"Centre d'Aide",path:"/aide"},{name:"Contactez-nous",path:"/contact"},{name:"FAQ",path:"/faq"},{name:"Politique de ConfidentialitÃ©",path:"/politique-confidentialite"},{name:"Termes & Conditions",path:"/conditions-utilisation"}]}],l=[{name:"Facebook",icon:m.jsx(ye,{className:"h-5 w-5"}),path:xe.socials.facebook},{name:"Twitter",icon:m.jsx(we,{className:"h-5 w-5"}),path:xe.socials.twitter},{name:"Instagram",icon:m.jsx(ke,{className:"h-5 w-5"}),path:xe.socials.instagram}].filter((e=>e.path&&""!==e.path)),o=e=>d(null,null,(function*(){if(e.preventDefault(),t.trim()){i(!0);try{const e=yield _e.subscribe(t.trim());s({title:"Inscription rÃ©ussie !",description:e.message}),a("")}catch(r){s({title:"Erreur d'inscription",description:r.message||"Une erreur s'est produite",variant:"destructive"})}finally{i(!1)}}else s({title:"Email requis",description:"Veuillez saisir votre adresse email",variant:"destructive"})}));return m.jsx("footer",{className:"bg-card text-card-foreground border-t border-border",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("div",{className:"hidden md:grid md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-5 gap-6 pt-8 pb-6",children:[m.jsxs("div",{className:"md:col-span-2 lg:col-span-1 xl:col-span-2 pr-4",children:[m.jsx(g,{to:"/",className:"flex items-center space-x-2 mb-4",children:m.jsx("span",{className:"text-2xl font-bold gradient-text",children:xe.siteName})}),m.jsx("p",{className:"text-muted-foreground text-sm mb-4",children:"La plateforme NÂ°1 en Afrique de l'Ouest pour l'immobilier, l'automobile, les services et bien plus."}),m.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Restez informÃ© de nos nouveautÃ©s :"}),m.jsxs("form",{onSubmit:o,className:"flex items-center gap-2",children:[m.jsx(Ce,{type:"email",placeholder:"Votre adresse e-mail",className:"flex-grow",value:t,onChange:e=>a(e.target.value),disabled:r}),m.jsx(ie,{type:"submit",size:"icon",className:"bg-primary hover:bg-primary/90",disabled:r,children:r?m.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):m.jsx(Se,{className:"h-4 w-4"})})]})]}),n.map((e=>m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold mb-3",children:e.title}),m.jsx("ul",{className:"space-y-1",children:e.links.map((e=>m.jsx("li",{children:m.jsxs(g,{to:e.path,className:"text-sm text-muted-foreground hover:text-primary transition-colors flex items-center group",children:[e.name,m.jsx(ze,{className:"h-3 w-3 ml-1 opacity-0 group-hover:opacity-100 transition-opacity"})]})},e.name)))})]},e.title)))]}),m.jsxs("div",{className:"md:hidden",children:[m.jsxs("div",{className:"pt-6 pb-4 text-center",children:[m.jsx(g,{to:"/",className:"flex items-center justify-center space-x-2 mb-3",children:m.jsx("span",{className:"text-xl font-bold gradient-text",children:xe.siteName})}),m.jsx("p",{className:"text-muted-foreground text-sm mb-3",children:"La plateforme NÂ°1 en Afrique de l'Ouest"}),m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"font-semibold mb-2 text-sm",children:"Newsletter :"}),m.jsxs("form",{onSubmit:o,className:"flex items-center gap-2 max-w-xs mx-auto",children:[m.jsx(Ce,{type:"email",placeholder:"Email",className:"flex-grow text-sm",value:t,onChange:e=>a(e.target.value),disabled:r}),m.jsx(ie,{type:"submit",size:"sm",className:"bg-primary hover:bg-primary/90",disabled:r,children:r?m.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-white border-t-transparent"}):m.jsx(Se,{className:"h-3 w-3"})})]})]})]}),m.jsx("div",{className:"pb-4",children:m.jsx("div",{className:"grid grid-cols-3 gap-4",children:n.map((e=>m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"font-semibold mb-2 text-sm text-primary",children:e.title}),m.jsx("div",{className:"space-y-1",children:e.links.slice(0,3).map((e=>m.jsx(g,{to:e.path,className:"block text-xs text-muted-foreground hover:text-primary transition-colors",children:e.name},e.name)))})]},e.title)))})}),m.jsxs("div",{className:"pb-4",children:[m.jsx("p",{className:"text-center font-semibold mb-3 text-sm text-primary",children:"Suivez-nous"}),m.jsx("div",{className:"flex justify-center space-x-6",children:l.length>0?l.map((e=>m.jsx(g,{to:e.path,target:"_blank",rel:"noopener noreferrer","aria-label":e.name,className:"text-muted-foreground hover:text-primary transition-colors p-2 rounded-full hover:bg-accent",children:e.icon},e.name))):m.jsx("p",{className:"text-xs text-muted-foreground",children:"RÃ©seaux sociaux en cours de configuration"})})]}),m.jsxs("div",{className:"pb-4",children:[m.jsx("p",{className:"text-center font-semibold mb-3 text-sm text-primary",children:"Contact"}),m.jsxs("div",{className:"flex justify-center space-x-6 text-xs text-muted-foreground",children:[m.jsxs(g,{to:"/contact",className:"flex items-center space-x-1 hover:text-primary",children:[m.jsx(Ae,{className:"h-3 w-3"}),m.jsx("span",{children:"Contact"})]}),m.jsxs(g,{to:"/aide",className:"flex items-center space-x-1 hover:text-primary",children:[m.jsx(Pe,{className:"h-3 w-3"}),m.jsx("span",{children:"Aide"})]})]})]})]}),m.jsx("div",{className:"hidden md:block border-t border-border pt-6 pb-6",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[m.jsxs("p",{className:"text-xs text-muted-foreground mb-4 md:mb-0",children:["Â© ",e," ",xe.siteName,". Tous droits rÃ©servÃ©s."]}),m.jsx("div",{className:"flex space-x-4",children:l.length>0?l.map((e=>m.jsx(g,{to:e.path,target:"_blank",rel:"noopener noreferrer","aria-label":e.name,className:"text-muted-foreground hover:text-primary transition-colors",children:e.icon},e.name))):m.jsx("p",{className:"text-xs text-muted-foreground",children:"RÃ©seaux sociaux en cours de configuration"})})]})}),m.jsx("div",{className:"md:hidden border-t border-border pt-4 pb-6 text-center",children:m.jsxs("p",{className:"text-xs text-muted-foreground",children:["Â© ",e," ",xe.siteName,". Tous droits rÃ©servÃ©s."]})})]})})},na=()=>{const e=u(),[s,t]=p.useState(!1),a=p.useCallback((()=>{t(window.scrollY>20)}),[]);p.useEffect((()=>(window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a))),[a]),p.useEffect((()=>{window.scrollTo(0,0)}),[e.pathname]);const r=p.useMemo((()=>Ee("fixed top-0 left-0 right-0 z-50 transition-all duration-300",s?"py-3 glass-effect":"py-5 bg-transparent")),[s]),i=p.useMemo((()=>({initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}})),[]);return m.jsxs("div",{className:"min-h-screen flex flex-col bg-background grid-pattern",children:[m.jsx("header",{className:r,role:"banner","aria-label":"En-tÃªte principal",children:m.jsx(ra,{})}),m.jsx("main",{className:"flex-grow pt-24 pb-16",role:"main","aria-label":"Contenu principal",id:"main-content",children:m.jsx(Vt.div,c(o({},i),{children:m.jsx(v,{})}),e.pathname)}),m.jsx(ia,{})]})},la=()=>{const{login:e}=ae(),{register:s,handleSubmit:t,formState:{errors:a,isSubmitting:r}}=Bt(),[i,n]=p.useState(!1);return m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"Connexion"}),m.jsx(De,{children:"Connectez-vous Ã  votre compte"})]}),m.jsx(Te,{children:m.jsxs("form",{onSubmit:t((s=>d(null,null,(function*(){yield e(s,i)})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"email",children:"Adresse e-mail"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ae,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'adresse e-mail est requise",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Adresse e-mail invalide"}})))]}),a.email&&m.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"password",children:"Mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"pl-10"},s("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"}})))]}),a.password&&m.jsx("p",{className:"text-sm text-destructive",children:a.password.message})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(I,{id:"rememberMe",checked:i,onCheckedChange:n}),m.jsx(Ie,{htmlFor:"rememberMe",className:"text-sm font-normal cursor-pointer",children:"Se souvenir de moi"})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:r,children:r?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion en cours..."]}):"Se connecter"})]})}),m.jsxs(Ve,{className:"flex flex-col space-y-2",children:[m.jsx(g,{to:"/mot-de-passe-oublie",className:"text-sm text-primary hover:underline",children:"Mot de passe oubliÃ© ?"}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",m.jsx(g,{to:"/inscription",className:"text-primary hover:underline",children:"S'inscrire"})]})]})]})})},oa=()=>{const{user:e,loading:s}=ae(),t=f(),a=u();return p.useEffect((()=>{var r;if(!s&&e){const s=(null==(r=a.state)?void 0:r.from)||("admin"===e.role?"/admin":"/");t(s,{replace:!0})}}),[e,s,t,a]),s||e?null:m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx(la,{})})},ca=()=>{const{register:e}=ae(),{register:s,handleSubmit:t,watch:a,formState:{errors:r,isSubmitting:i}}=Bt(),[n,l]=p.useState({shown:!1,email:""}),[c,u]=p.useState(!1),[x,h]=p.useState(null),j=a("password");return n.shown?m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Oe,{className:"h-5 w-5 text-green-600"}),m.jsx(Le,{children:"Inscription rÃ©ussie"})]}),m.jsx(De,{children:"VÃ©rifiez votre email pour confirmer votre compte."})]}),m.jsxs(Te,{className:"space-y-4",children:[m.jsxs("div",{className:"text-sm text-muted-foreground",children:["Nous avons envoyÃ© un lien de confirmation Ã :",m.jsx("div",{className:"mt-1 font-medium text-foreground",children:n.email})]}),x&&m.jsx("div",{className:"text-sm",children:x}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ie,{type:"button",onClick:()=>d(null,null,(function*(){try{u(!0),h(null);const{error:e}=yield Ue.auth.resend({type:"signup",email:n.email,options:{emailRedirectTo:window.location.origin+"/auth/callback"}});if(e)throw e;h("Un nouvel email de confirmation a Ã©tÃ© envoyÃ©.")}catch(e){h(e.message||"Impossible d'envoyer l'email de confirmation.")}finally{u(!1)}})),disabled:c,className:"inline-flex items-center",children:c?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Be,{className:"mr-2 h-4 w-4"}),"Renvoyer l'email"]})}),m.jsx(ie,{type:"button",variant:"outline",onClick:()=>l({shown:!1,email:""}),children:"Utiliser une autre adresse"})]})]}),m.jsxs(Ve,{className:"flex flex-col items-start gap-2",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"DÃ©jÃ  confirmÃ© ?"}),m.jsx(g,{to:"/connexion",className:"text-primary hover:underline text-sm",children:"Se connecter"})]})]})}):m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md mx-auto p-4",children:m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"Inscription"}),m.jsx(De,{children:"CrÃ©ez votre compte MaxiMarket"})]}),m.jsx(Te,{children:m.jsxs("form",{onSubmit:t((s=>d(null,null,(function*(){const t=yield e(s);t&&t.needsConfirmation&&l({shown:!0,email:s.email})})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"firstName",children:"PrÃ©nom"}),m.jsxs("div",{className:"relative",children:[m.jsx($e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"firstName",type:"text",placeholder:"John",className:"pl-10"},s("firstName",{required:"Le prÃ©nom est requis",minLength:{value:2,message:"Le prÃ©nom doit contenir au moins 2 caractÃ¨res"}})))]}),r.firstName&&m.jsx("p",{className:"text-sm text-destructive",children:r.firstName.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"lastName",children:"Nom"}),m.jsxs("div",{className:"relative",children:[m.jsx($e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"lastName",type:"text",placeholder:"Doe",className:"pl-10"},s("lastName",{required:"Le nom est requis",minLength:{value:2,message:"Le nom doit contenir au moins 2 caractÃ¨res"}})))]}),r.lastName&&m.jsx("p",{className:"text-sm text-destructive",children:r.lastName.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"email",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ae,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),r.email&&m.jsx("p",{className:"text-sm text-destructive",children:r.email.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"phoneNumber",children:"TÃ©lÃ©phone"}),m.jsxs("div",{className:"relative",children:[m.jsx(Pe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"phoneNumber",type:"tel",placeholder:"+221 77 123 45 67",className:"pl-10"},s("phoneNumber",{required:"Le numÃ©ro de tÃ©lÃ©phone est requis",pattern:{value:/^\+?[1-9]\d{1,14}$/,message:"NumÃ©ro de tÃ©lÃ©phone invalide"}})))]}),r.phoneNumber&&m.jsx("p",{className:"text-sm text-destructive",children:r.phoneNumber.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"password",children:"Mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"password",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"pl-10"},s("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractÃ¨re spÃ©cial"}})))]}),r.password&&m.jsx("p",{className:"text-sm text-destructive",children:r.password.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"confirmPassword",type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"pl-10"},s("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:e=>e===j||"Les mots de passe ne correspondent pas"})))]}),r.confirmPassword&&m.jsx("p",{className:"text-sm text-destructive",children:r.confirmPassword.message})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:i,children:i?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Inscription en cours..."]}):"S'inscrire"})]})}),m.jsx(Ve,{children:m.jsxs("p",{className:"text-sm text-muted-foreground",children:["DÃ©jÃ  un compte ?"," ",m.jsx(g,{to:"/connexion",className:"text-primary hover:underline",children:"Se connecter"})]})})]})})},da=()=>m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx(ca,{})}),ma=()=>{const{toast:e}=Me(),{register:s,handleSubmit:t,formState:{errors:a,isSubmitting:r}}=Bt();return m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"w-full max-w-md",children:m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"Mot de passe oubliÃ©"}),m.jsx(De,{children:"Entrez votre adresse email pour recevoir les instructions de rÃ©initialisation"})]}),m.jsx(Te,{children:m.jsxs("form",{onSubmit:t((s=>d(null,null,(function*(){try{e({title:"Email envoyÃ©",description:"Si un compte existe avec cet email, vous recevrez les instructions de rÃ©initialisation."})}catch(s){e({title:"Erreur",description:s.message,variant:"destructive"})}})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"email",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ae,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"email",type:"email",placeholder:"votre@email.com",className:"pl-10"},s("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),a.email&&m.jsx("p",{className:"text-sm text-destructive",children:a.email.message})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:r,children:r?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer les instructions"})]})}),m.jsx(Ve,{children:m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Retour Ã  la"," ",m.jsx(g,{to:"/connexion",className:"text-primary hover:underline",children:"page de connexion"})]})})]})})})},ua=()=>{const{toast:e}=Me(),s=f(),[t]=b(),a=t.get("token"),{register:r,handleSubmit:i,watch:n,formState:{errors:l,isSubmitting:c}}=Bt(),u=n("password");return a?m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"w-full max-w-md",children:m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"RÃ©initialisation du mot de passe"}),m.jsx(De,{children:"Choisissez votre nouveau mot de passe"})]}),m.jsx(Te,{children:m.jsxs("form",{onSubmit:i((t=>d(null,null,(function*(){try{if(!a)throw Error("Token de rÃ©initialisation manquant");e({title:"Mot de passe rÃ©initialisÃ©",description:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe."}),s("/connexion")}catch(t){e({title:"Erreur",description:t.message,variant:"destructive"})}})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"password",children:"Nouveau mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"password",type:"password",className:"pl-10"},r("password",{required:"Le mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Le mot de passe doit contenir au moins une majuscule, une minuscule, un chiffre et un caractÃ¨re spÃ©cial"}})))]}),l.password&&m.jsx("p",{className:"text-sm text-destructive",children:l.password.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"confirmPassword",type:"password",className:"pl-10"},r("confirmPassword",{required:"Veuillez confirmer votre mot de passe",validate:e=>e===u||"Les mots de passe ne correspondent pas"})))]}),l.confirmPassword&&m.jsx("p",{className:"text-sm text-destructive",children:l.confirmPassword.message})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:c,children:c?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"RÃ©initialisation en cours..."]}):"RÃ©initialiser le mot de passe"})]})})]})})}):m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx(qe,{children:m.jsxs(Fe,{children:[m.jsx(Le,{className:"text-destructive",children:"Lien invalide"}),m.jsx(De,{children:"Le lien de rÃ©initialisation est invalide ou a expirÃ©. Veuillez faire une nouvelle demande de rÃ©initialisation."})]})})})},xa=({title:e,value:s,icon:t,trend:a,trendValue:r,color:i="blue",className:n})=>m.jsx(qe,{className:Ee(`bg-gradient-to-br ${{blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600",teal:"from-teal-500 to-teal-600",indigo:"from-indigo-500 to-indigo-600",pink:"from-pink-500 to-pink-600"}[i]} text-white overflow-hidden`,n),children:m.jsx(Te,{className:"p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm opacity-90 mb-1",children:e}),m.jsx("p",{className:"text-2xl font-bold",children:s}),a&&m.jsx("div",{className:"flex items-center mt-2",children:m.jsxs(Xe,{variant:"secondary",className:Ee("text-xs bg-white/20 text-white border-0","up"===a?"text-green-200":"text-red-200"),children:["up"===a?"â†—":"â†˜"," ",r]})})]}),t&&m.jsx("div",{className:Ee("p-3 rounded-full bg-white/10",{blue:"text-blue-200",green:"text-green-200",purple:"text-purple-200",orange:"text-orange-200",red:"text-red-200",teal:"text-teal-200",indigo:"text-indigo-200",pink:"text-pink-200"}[i]),children:m.jsx(t,{className:"h-6 w-6"})})]})})}),ha=(e,s="gallery",t="medium")=>{if(!e)return e;if(e.includes("unsplash.com")||e.includes("cloudinary.com"))return e;const a={hero:{width:1920,height:1080,quality:85,format:"webp"},gallery:{width:800,height:600,quality:80,format:"webp"},thumbnail:{width:400,height:300,quality:75,format:"webp"},avatar:{width:150,height:150,quality:80,format:"webp"}},r=a[s]||a.gallery;if(e.startsWith("/")||e.startsWith("./")||e.startsWith("../"))return e;try{const s=new URL(e);if(s.hostname.includes("unsplash.com"))return s.searchParams.set("w",r.width),s.searchParams.set("h",r.height),s.searchParams.set("q",r.quality),s.searchParams.set("auto","format"),s.searchParams.set("fit","crop"),s.toString();if(s.hostname.includes("cloudinary.com")){const e=s.pathname.split("/"),t=e.findIndex((e=>"upload"===e));if(-1!==t)return e.splice(t+1,0,`f_${r.format},q_${r.quality},w_${r.width},h_${r.height},c_fill`),s.pathname=e.join("/"),s.toString()}return e}catch(i){return e}},pa=h.memo((e=>{var s=e,{src:t,alt:a,className:l="",placeholder:d=null,context:u="gallery",quality:x="medium",onLoad:g=null,onError:j=null,showSkeleton:v=!0,priority:f="medium",fallbackSrc:b=null,enableHeroAnimations:N=!1,showOverlay:y=!1,overlayGradient:w="to-b from-transparent via-transparent to-black/20"}=s,k=((e,s)=>{var t={};for(var a in e)i.call(e,a)&&0>s.indexOf(a)&&(t[a]=e[a]);if(null!=e&&r)for(var a of r(e))0>s.indexOf(a)&&n.call(e,a)&&(t[a]=e[a]);return t})(s,["src","alt","className","placeholder","context","quality","onLoad","onError","showSkeleton","priority","fallbackSrc","enableHeroAnimations","showOverlay","overlayGradient"]);const[C,S]=p.useState(!1),[z,A]=p.useState(!1),P=e=>e?"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.file)?URL.createObjectURL(e.file):(null==e?void 0:e.src)?e.src:(null==e?void 0:e.displayUrl)?e.displayUrl:null:null,M=p.useMemo((()=>{const e=P(t);return e?ha(e,u,x):null}),[t,u,x]),_=p.useMemo((()=>{if(b)return b;const e={hero:"https://images.unsplash.com/photo-1542044896530-05d85be9b11a?q=80&w=2070&auto=format&fit=crop",city:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?q=80&w=1920&auto=format&fit=crop",business:"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=1932&auto=format&fit=crop"};return e[u]||e.hero}),[b,u]),{elementRef:E,isIntersecting:q,imageState:F,setImageSrc:L}=((e={})=>{const{threshold:s=.1,rootMargin:t="100px",placeholder:a=null,onLoad:r=null,onError:i=null}=e,[n,l]=p.useState({src:null,isLoading:!1,hasLoaded:!1,hasError:!1}),[d,m]=((e={})=>{const{threshold:s=.1,rootMargin:t="50px",root:a=null,triggerOnce:r=!1}=e,[i,n]=p.useState(!1),[l,o]=p.useState(!1),c=p.useRef(null),d=p.useCallback((e=>{const[s]=e;s.isIntersecting?(n(!0),r&&!l&&o(!0)):r||n(!1)}),[r,l]);return p.useEffect((()=>{const e=c.current;if(!e)return;const r=new IntersectionObserver(d,{threshold:s,rootMargin:t,root:a});return r.observe(e),()=>{r.unobserve(e),r.disconnect()}}),[d,s,t,a]),[c,i]})({threshold:s,rootMargin:t,triggerOnce:!0}),u=p.useCallback((e=>{if(!e||n.src===e)return;l((s=>c(o({},s),{src:e,isLoading:!0,hasLoaded:!1,hasError:!1})));const s=new Image;s.onload=()=>{l((e=>c(o({},e),{isLoading:!1,hasLoaded:!0}))),null==r||r(e)},s.onerror=()=>{l((e=>c(o({},e),{isLoading:!1,hasError:!0}))),null==i||i(e)},s.src=e}),[n.src,r,i]);p.useEffect((()=>{m&&n.src&&u(n.src)}),[m,n.src,u]);const x=p.useCallback((e=>{e!==n.src&&l((s=>c(o({},s),{src:e})))}),[n.src]);return{elementRef:d,isIntersecting:m,imageState:n,setImageSrc:x,loadImage:u}})({threshold:.1,rootMargin:"high"===f?"50px":"100px",onLoad:e=>{A(!0),S(!1),null==g||g(e)},onError:e=>{S(!0),A(!1),null==j||j(e)}});h.useEffect((()=>{q&&M&&L(M)}),[q,M,L]);const D=p.useCallback((e=>{k.onClick&&k.onClick(e)}),[k.onClick]),T=C?_:F.src||P(t),I=()=>m.jsx("div",{className:"animate-pulse bg-muted rounded-lg",children:m.jsx("div",{className:"w-full h-full bg-gradient-to-r from-muted via-muted/50 to-muted"})}),R=()=>m.jsx("div",{className:"flex items-center justify-center w-full h-full bg-muted text-muted-foreground",children:m.jsxs("div",{className:"text-center",children:[m.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.jsx("p",{className:"text-sm",children:"Image non disponible"})]})});if(!t)return m.jsx("div",{className:l,children:m.jsx(R,{})});const V=null!==P(t);return m.jsxs("div",{ref:E,className:"relative overflow-hidden "+l,children:[v&&!z&&!C&&V&&m.jsx(Ot,{children:m.jsx(Vt.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-10",children:m.jsx(I,{})})}),d&&!z&&!C&&V&&m.jsx(Ot,{children:m.jsx(Vt.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 z-10",children:m.jsx("img",{src:d,alt:"Placeholder",className:"w-full h-full object-cover"})})}),m.jsx(Ot,{mode:"wait",children:!C&&V&&m.jsx(Vt.img,o({src:T,alt:a,className:"w-full h-full object-cover transition-opacity duration-300 "+(z?"opacity-100":"opacity-0"),initial:N?{opacity:0,scale:1.1}:{opacity:0},animate:N?{opacity:z?1:.7,scale:z?1:1.05}:{opacity:z?1:0},exit:N?{opacity:0,scale:.95}:{opacity:0},transition:N?{duration:.8,ease:"easeOut",opacity:{duration:.5}}:{duration:.3},onLoad:()=>{T&&(A(!0),S(!1),null==g||g(T))},onError:()=>{S(!0),A(!1),null==j||j(T)},onClick:D,loading:"high"===f?"eager":"lazy",decoding:"async"},k),T)}),y&&z&&m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:.2},className:"absolute inset-0 bg-gradient-"+w}),C&&m.jsx(Ot,{children:m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"absolute inset-0 z-20",children:m.jsx(R,{})})}),F.isLoading&&!z&&!C&&V&&m.jsx("div",{className:"absolute inset-0 z-30 flex items-center justify-center bg-black/10",children:m.jsx(Vt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full"})}),!V&&m.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-muted",children:m.jsxs("div",{className:"text-center text-muted-foreground",children:[m.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.jsx("p",{className:"text-sm",children:"Format d'image non supportÃ©"})]})})]})})),ga=h.memo((({images:e=[],title:s="Galerie d'images",className:t=""})=>{const[a,r]=p.useState(0),[i,n]=p.useState(!1),l=e.filter((e=>{return null!==((s=e)?"string"==typeof s?s:(null==s?void 0:s.url)?s.url:(null==s?void 0:s.file)?URL.createObjectURL(s.file):(null==s?void 0:s.src)?s.src:(null==s?void 0:s.displayUrl)?s.displayUrl:null:null);var s}));if(p.useEffect((()=>{if(!i||1>=l.length)return;const e=setInterval((()=>{r((e=>(e+1)%l.length))}),3e3);return()=>clearInterval(e)}),[i,l.length]),!l||0===l.length)return m.jsx("div",{className:"relative bg-muted flex items-center justify-center "+t,children:m.jsx("div",{className:"text-center text-muted-foreground",children:m.jsx("p",{className:"text-xs sm:text-sm",children:"Aucune image"})})});const o=l[a];return m.jsxs("div",{className:"relative bg-muted overflow-hidden group "+t,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[m.jsx(Ot,{mode:"wait",children:m.jsx(Vt.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.3},className:"w-full h-full",children:m.jsx(pa,{src:o,alt:`${s} - Image ${a+1}`,className:"w-full h-full object-cover",context:"card",quality:"medium",showSkeleton:!0})},a)}),l.length>1&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:e=>{e.stopPropagation(),l.length>0&&r((e=>(e-1+l.length)%l.length))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 z-10","aria-label":"Image prÃ©cÃ©dente",children:m.jsx(Je,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),m.jsx("button",{onClick:e=>{e.stopPropagation(),l.length>0&&r((e=>(e+1)%l.length))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-1 sm:p-2 rounded-full opacity-0 group-hover:opacity-100 transition-all duration-200 z-10","aria-label":"Image suivante",children:m.jsx(He,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]}),l.length>1&&m.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1 sm:gap-1.5",children:l.map(((e,s)=>m.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{e>=0&&e<l.length&&r(e)})(s)},className:"w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full transition-all duration-200 "+(s===a?"bg-white":"bg-white/50 hover:bg-white/75"),"aria-label":"Aller Ã  l'image "+(s+1)},s)))})]})})),ja=({listing:e,onEdit:s,onDelete:t,onRefresh:a,onBoost:r,showActions:i=!0})=>{var n,l;return m.jsxs(qe,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 group",children:[m.jsxs("div",{className:"relative",children:[m.jsx(ga,{images:e.images||[e.image],title:e.title,className:"h-48"}),m.jsxs("div",{className:"absolute top-2 right-2 flex space-x-1",children:[m.jsx(Xe,{variant:"secondary",className:Ee("text-xs font-medium",(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"expired":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.status)),children:(e=>{switch(e){case"active":return"Active";case"pending":return"En attente";case"expired":return"ExpirÃ©e";case"draft":return"Brouillon";default:return e}})(e.status)}),e.featured&&m.jsx(Xe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-200 text-xs",children:"â­ Premium"})]}),m.jsx("div",{className:"absolute top-2 left-2",children:m.jsx("span",{className:"text-2xl",children:(e=>{let s="";if("string"==typeof e)s=e;else{if(!e||"object"!=typeof e||!e.name)return"ğŸ“¦";s=e.name}switch(s.toLowerCase()){case"immobilier":return"ğŸ ";case"automobile":return"ğŸš—";case"services":return"ğŸ”§";case"marketplace":return"ğŸ›ï¸";default:return"ğŸ“¦"}})(e.category)})})]}),m.jsx(Te,{className:"p-4",children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-semibold text-lg mb-1 line-clamp-2",children:e.title}),m.jsx("p",{className:"text-primary font-bold text-lg",children:e.price})]}),m.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx(We,{className:"h-3 w-3 mr-1"}),e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:(null==(n=e.location)?void 0:n.city)||(null==(l=e.location)?void 0:l.country)||"Localisation non spÃ©cifiÃ©e"]}),m.jsxs("span",{className:"flex items-center",children:[m.jsx(Qe,{className:"h-3 w-3 mr-1"}),e.createdAt||e.created_at?new Date(e.createdAt||e.created_at).toLocaleDateString("fr-FR"):"Date inconnue"]})]}),m.jsxs("div",{className:"flex items-center justify-between text-sm",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ke,{className:"h-4 w-4 mr-1"}),e.views||e.views_count||0," vues"]}),m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ge,{className:"h-4 w-4 mr-1"}),e.contacts||e.contacts_count||0," contacts"]})]}),e.boosted&&m.jsxs(Xe,{variant:"outline",className:"text-xs",children:[m.jsx(Ye,{className:"h-3 w-3 mr-1"}),"BoostÃ©"]})]}),i&&m.jsxs("div",{className:"flex space-x-2 pt-2 border-t",children:[m.jsxs(ie,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>null==s?void 0:s(e),children:[m.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Modifier"]}),"active"===e.status&&m.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>null==r?void 0:r(e),className:"flex-1",children:[m.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Booster"]}),m.jsx(ie,{size:"sm",variant:"outline",onClick:()=>null==a?void 0:a(e),children:m.jsx(ne,{className:"h-4 w-4"})}),m.jsx(ie,{size:"sm",variant:"outline",onClick:()=>null==t?void 0:t(e),className:"text-red-600 hover:text-red-700",children:m.jsx(es,{className:"h-4 w-4"})})]})]})})]})},va=({conversation:e,onReply:s,onArchive:t,onDelete:a,onMarkAsRead:r,onStar:i,showActions:n=!0})=>{const{user:l}=ae();if("welcome-message"===e.id||"system"===e.type||e.is_system)return m.jsx(qe,{className:"bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200 shadow-sm",children:m.jsx(Te,{className:"p-4",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsx("div",{className:"relative",children:m.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:m.jsx("span",{className:"text-white text-lg",children:"ğŸ¤–"})})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[m.jsx("h3",{className:"font-semibold text-blue-800",children:"AIDA"}),m.jsx(Xe,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-800",children:"SystÃ¨me"})]}),m.jsx("p",{className:"text-gray-700 whitespace-pre-line text-sm leading-relaxed",children:e.content||"Bienvenue sur MaxiMarket !"}),m.jsx("div",{className:"flex items-center space-x-1 mt-2",children:m.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),"Ã€ l'instant"]})})]})]})})});const o=e.messages&&e.messages.length>0?e.messages[e.messages.length-1]:null;let c=null,d="unknown";l&&e.participant1&&e.participant2?e.participant1_id===l.id?(c=e.participant2,d="participant2"):e.participant2_id===l.id?(c=e.participant1,d="participant1"):"00000000-0000-0000-0000-000000000000"===e.participant1_id?(c=e.participant2,d="assistant_participant2"):"00000000-0000-0000-0000-000000000000"===e.participant2_id?(c=e.participant1,d="assistant_participant1"):(c=e.participant1,d="fallback_participant1"):e.participant1?(c=e.participant1,d="only_participant1"):e.participant2&&(c=e.participant2,d="only_participant2");const u=(e=>{if(!e)return"Utilisateur inconnu";if(e.first_name&&e.last_name)return`${e.first_name} ${e.last_name}`;if(e.first_name)return e.first_name;if(e.last_name)return e.last_name;if(e.name)return e.name;if(e.email){const s=e.email.split("@")[0];return s.charAt(0).toUpperCase()+s.slice(1)}return"Utilisateur"})(c),x=e.messages&&e.messages.some((e=>!e.is_read&&e.sender_id!==(null==l?void 0:l.id))),h=!c||!c.first_name&&!c.last_name&&!c.name;return m.jsx(qe,{className:Ee("transition-all duration-200 hover:shadow-md",x&&"bg-blue-50 border-blue-200",e.starred&&"bg-yellow-50 border-yellow-200",h&&"bg-orange-50 border-orange-200"),children:m.jsx(Te,{className:"p-4",children:m.jsxs("div",{className:"flex items-start space-x-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx(R,{user:c,size:"lg",className:"flex-shrink-0"}),x&&m.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 border-2 border-white rounded-full"})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-start justify-between mb-2",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("h3",{className:"font-semibold text-sm",children:u}),h&&m.jsxs(Xe,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:[m.jsx(le,{className:"h-3 w-3 mr-1"}),"DonnÃ©es manquantes"]}),x&&m.jsx(Xe,{variant:"destructive",className:"text-xs",children:"Nouveau"})]}),m.jsxs("div",{className:"flex items-center space-x-1",children:[e.starred&&m.jsx(ts,{className:"h-4 w-4 text-yellow-500 fill-current"}),m.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),(e=>{if(!e)return"Ã€ l'instant";try{const s=new Date(e),t=new Date,a=Math.floor((t-s)/36e5),r=Math.floor((t-s)/864e5);return 1>a?"Ã€ l'instant":24>a?`Il y a ${a}h`:7>r?`Il y a ${r}j`:s.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}catch(s){return"Ã€ l'instant"}})(e.last_message_at)]})]})]}),o&&m.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:o.content||"Aucun contenu"}),m.jsx("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:m.jsxs("div",{className:"flex items-center space-x-4",children:[e.listing&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(ce,{className:"h-3 w-3 mr-1"}),e.listing.title||"Annonce"]}),e.messages&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(fe,{className:"h-3 w-3 mr-1"}),e.messages.length," message",e.messages.length>1?"s":""]})]})}),n&&m.jsxs("div",{className:"flex items-center space-x-2 mt-3 pt-3 border-t",children:[m.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>null==s?void 0:s(e),className:"flex-1",children:[m.jsx(as,{className:"h-3 w-3 mr-1"}),"RÃ©pondre"]}),m.jsxs(ie,{size:"sm",variant:"outline",onClick:()=>null==r?void 0:r(e),className:"flex-1",children:[m.jsx(Ke,{className:"h-3 w-3 mr-1"}),"Marquer lu"]}),m.jsx(ie,{size:"sm",variant:"outline",onClick:()=>null==t?void 0:t(e),children:m.jsx(rs,{className:"h-3 w-3"})}),m.jsx(ie,{size:"sm",variant:"outline",onClick:()=>null==i?void 0:i(e),children:m.jsx(ts,{className:"h-3 w-3"})})]})]})]})})})},fa=({activities:e=[]})=>{const s=e=>{switch(e){case"view":return m.jsx(Ke,{className:"h-4 w-4"});case"message":return m.jsx(fe,{className:"h-4 w-4"});case"favorite":return m.jsx(cs,{className:"h-4 w-4"});case"boost":return m.jsx(Ye,{className:"h-4 w-4"});case"approval":return m.jsx(os,{className:"h-4 w-4"});case"warning":return m.jsx(ls,{className:"h-4 w-4"});case"info":return m.jsx(ns,{className:"h-4 w-4"});default:return m.jsx(is,{className:"h-4 w-4"})}},t=e=>{switch(e){case"view":case"info":return"bg-blue-50 border-blue-200";case"message":case"approval":return"bg-green-50 border-green-200";case"favorite":return"bg-pink-50 border-pink-200";case"boost":return"bg-purple-50 border-purple-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}},a=e=>{switch(e){case"view":case"info":return"text-blue-500";case"message":case"approval":return"text-green-500";case"favorite":return"text-pink-500";case"boost":return"text-purple-500";case"warning":return"text-yellow-500";default:return"text-gray-500"}};return 0===e.length?m.jsxs(qe,{children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center space-x-2",children:[m.jsx(Ye,{className:"h-5 w-5"}),m.jsx("span",{children:"ActivitÃ© RÃ©cente"})]})}),m.jsx(Te,{children:m.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[m.jsx(Ye,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{className:"text-sm",children:"Aucune activitÃ© rÃ©cente"}),m.jsx("p",{className:"text-xs mt-1",children:"Vos activitÃ©s apparaÃ®tront ici"})]})})]}):m.jsxs(qe,{children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center space-x-2",children:[m.jsx(Ye,{className:"h-5 w-5"}),m.jsx("span",{children:"ActivitÃ© RÃ©cente"})]})}),m.jsxs(Te,{children:[m.jsx("div",{className:"space-y-4",children:e.map((e=>m.jsxs("div",{className:Ee("flex items-start space-x-3 p-3 rounded-lg transition-colors",t(e.type),e.unread&&"bg-blue-50 border-blue-200"),children:[m.jsx("div",{className:Ee("flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",t(e.type).replace("border-","bg-").replace("-50","-100")),children:m.jsx("div",{className:a(e.type),children:s(e.type)})}),m.jsx("div",{className:"flex-1 min-w-0",children:m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm font-medium text-foreground",children:e.title}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),m.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-xs text-muted-foreground",children:[e.listing&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ke,{className:"h-3 w-3 mr-1"}),e.listing]}),e.location&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(We,{className:"h-3 w-3 mr-1"}),e.location]}),e.sender&&m.jsxs("span",{className:"flex items-center",children:[m.jsx($e,{className:"h-3 w-3 mr-1"}),e.sender]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[e.unread&&m.jsx(Xe,{variant:"destructive",className:"text-xs",children:"Nouveau"}),m.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[m.jsx(Qe,{className:"h-3 w-3 mr-1"}),e.time]})]})]})})]},e.id)))}),0===activitiesToShow.length&&m.jsxs("div",{className:"text-center py-8",children:[m.jsx(is,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune activitÃ©"}),m.jsx("p",{className:"text-muted-foreground",children:"Vous n'avez pas encore d'activitÃ© rÃ©cente."})]})]})]})},ba=({stats:e={}})=>{const s=[{id:"new-listing",title:"Nouvelle Annonce",description:"Publier une nouvelle annonce",icon:ds,color:"from-primary to-blue-600",href:"/creer-annonce",badge:null},{id:"messages",title:"Messages",description:"Voir vos conversations",icon:fe,color:"from-green-500 to-green-600",href:"/messages",badge:e.unreadMessages||0},{id:"favorites",title:"Mes Favoris",description:"Annonces sauvegardÃ©es",icon:cs,color:"from-pink-500 to-pink-600",href:"/favorites",badge:e.totalFavorites||0},{id:"analytics",title:"Analytics",description:"Voir vos statistiques",icon:Ye,color:"from-purple-500 to-purple-600",href:"/admin/analytics",badge:null},{id:"settings",title:"ParamÃ¨tres",description:"Configurer votre compte",icon:ve,color:"from-gray-500 to-gray-600",href:"/profile",badge:null},{id:"support",title:"Support",description:"Besoin d'aide ?",icon:ms,color:"from-orange-500 to-orange-600",href:"/aide",badge:null}];return m.jsxs(qe,{children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center space-x-2",children:[m.jsx(ds,{className:"h-5 w-5"}),m.jsx("span",{children:"Actions Rapides"})]})}),m.jsx(Te,{children:m.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map((e=>m.jsx(ie,{variant:"outline",className:`h-12 bg-gradient-to-r ${e.color} hover:from-primary/90 hover:to-blue-600/90 text-white border-0 transition-all duration-200 hover:scale-105`,asChild:!0,children:m.jsxs(g,{to:e.href,className:"flex items-center space-x-2",children:[m.jsx(e.icon,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm font-medium",children:e.title}),e.badge&&e.badge>0&&m.jsx(Xe,{variant:"secondary",className:"ml-auto bg-white/20 text-white border-0",children:e.badge})]})},e.id)))})})]})},Na=()=>{var e,s,t,a;const{user:r,loading:i,logout:n}=ae(),{toast:l}=Me(),u=f(),[x,h]=p.useState(!1),{activeTab:j,handleTabChange:v}=((e="dashboard")=>{const[s,t]=b(),[a,r]=p.useState(e);return p.useEffect((()=>{const e=s.get("tab");e&&r(e)}),[s]),{activeTab:a,handleTabChange:e=>{r(e),t({tab:e})},setActiveTab:r}})("dashboard"),[N,y]=p.useState([]),[w,k]=p.useState([]),[C,S]=p.useState([]),[z,A]=p.useState({totalListings:0,activeListings:0,totalViews:0,totalContacts:0,unreadMessages:0,totalFavorites:0}),[P,M]=p.useState({isOpen:!1,item:null}),[_,E]=p.useState({isOpen:!1,item:null}),[q,F]=p.useState({isOpen:!1,item:null}),[L,D]=p.useState({isOpen:!1,item:null}),[T,I]=p.useState(1),[R,H]=p.useState(1),[W]=p.useState(6),{register:Q,handleSubmit:K,formState:{errors:G}}=Bt({defaultValues:{firstName:(null==r?void 0:r.firstName)||"",lastName:(null==r?void 0:r.lastName)||"",email:(null==r?void 0:r.email)||"",phoneNumber:(null==r?void 0:r.phoneNumber)||""}});p.useEffect((()=>{d(null,null,(function*(){if(r)try{const t=yield ys.getUserListings();y(t);let a=[];try{a=yield ws.getUserFavorites()}catch(e){}S(a);let r=[];try{r=yield ks.getUserConversations()}catch(s){}k(r);const i=t.filter((e=>"approved"===e.status)).length,n=t.reduce(((e,s)=>e+(s.views_count||0)),0),l=r.filter((e=>!e.read)).length;A({totalListings:t.length,activeListings:i,totalViews:n,totalContacts:r.length,unreadMessages:l,totalFavorites:a.length}),H(Math.ceil(t.length/W))}catch(t){l({title:"Erreur",description:"Impossible de charger vos donnÃ©es",variant:"destructive"})}}))}),[r,l]);const Y=e=>{E({isOpen:!0,item:e})},Z=e=>{M({isOpen:!0,item:e})},ee=e=>{D({isOpen:!0,item:e})},se=e=>{F({isOpen:!0,item:e})},te=e=>{u("/messages?conversation="+e.id)},ne=e=>d(null,null,(function*(){try{yield ks.archiveConversation(e.id);const s=w.map((s=>s.id===e.id?c(o({},s),{is_archived:!0}):s));k(s),l({title:"Conversation archivÃ©e",description:"La conversation a Ã©tÃ© archivÃ©e"})}catch(s){l({title:"Erreur",description:"Impossible d'archiver la conversation",variant:"destructive"})}})),le=e=>d(null,null,(function*(){try{yield ks.markMessagesAsRead(e.id);const s=w.map((s=>{var t;return s.id===e.id?c(o({},s),{messages:null==(t=s.messages)?void 0:t.map((e=>c(o({},e),{is_read:!0})))}):s}));k(s),A((e=>c(o({},e),{unreadMessages:Math.max(0,e.unreadMessages-1)}))),l({title:"Messages marquÃ©s comme lus",description:"Les messages ont Ã©tÃ© marquÃ©s comme lus"})}catch(s){l({title:"Erreur",description:"Impossible de marquer les messages comme lus",variant:"destructive"})}})),oe=e=>d(null,null,(function*(){try{const s=!e.starred;yield ks.toggleConversationStar(e.id,s);const t=w.map((t=>t.id===e.id?c(o({},t),{starred:s}):t));k(t),l({title:s?"Conversation ajoutÃ©e aux favoris":"Conversation retirÃ©e des favoris",description:s?"La conversation a Ã©tÃ© ajoutÃ©e Ã  vos favoris":"La conversation a Ã©tÃ© retirÃ©e de vos favoris"})}catch(s){l({title:"Erreur",description:"Impossible de modifier le statut favori",variant:"destructive"})}}));return i?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx(re,{className:"h-8 w-8 animate-spin"})}):m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/20",children:[m.jsxs("div",{className:"container mx-auto py-8 px-4",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"flex items-center space-x-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary to-blue-600 flex items-center justify-center overflow-hidden shadow-lg",children:(null==r?void 0:r.profileImage)?m.jsx("img",{src:r.profileImage,alt:`${r.firstName} ${r.lastName}`,className:"w-full h-full object-cover"}):m.jsx($e,{className:"h-10 w-10 text-white"})}),m.jsx(ie,{size:"icon",variant:"secondary",className:"absolute -bottom-1 -right-1 rounded-full shadow-md",children:m.jsx(us,{className:"h-4 w-4"})})]}),m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold text-foreground",children:[null==r?void 0:r.firstName," ",null==r?void 0:r.lastName]}),m.jsxs("p",{className:"text-muted-foreground flex items-center",children:[m.jsx(Ae,{className:"h-4 w-4 mr-2"}),null==r?void 0:r.email]}),m.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-green-100 text-green-800",children:[m.jsx(xs,{className:"h-3 w-3 mr-1"}),"Compte vÃ©rifiÃ©"]}),m.jsxs(Xe,{variant:"outline",children:["Membre depuis ",new Date(null==r?void 0:r.createdAt).toLocaleDateString()]})]})]})]})}),m.jsxs(hs,{value:j,onValueChange:v,className:"w-full",children:[m.jsxs(ps,{className:"grid w-full grid-cols-7 bg-white/50 backdrop-blur-sm border border-border/50",children:[m.jsxs(gs,{value:"dashboard",className:"flex items-center space-x-2",children:[m.jsx(js,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]}),m.jsxs(gs,{value:"listings",className:"flex items-center space-x-2",children:[m.jsx(ce,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Mes Annonces"})]}),m.jsxs(gs,{value:"messages",className:"flex items-center space-x-2",children:[m.jsx(fe,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Messages"}),z.unreadMessages>0&&m.jsx(Xe,{variant:"destructive",className:"h-5 w-5 p-0 text-xs",children:z.unreadMessages})]}),m.jsxs(gs,{value:"favorites",className:"flex items-center space-x-2",children:[m.jsx(cs,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Favoris"})]}),m.jsxs(gs,{value:"transactions",className:"flex items-center space-x-2",children:[m.jsx(vs,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Transactions"})]}),m.jsxs(gs,{value:"profile",className:"flex items-center space-x-2",children:[m.jsx($e,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"Profil"})]}),m.jsxs(gs,{value:"security",className:"flex items-center space-x-2",children:[m.jsx(xs,{className:"h-4 w-4"}),m.jsx("span",{className:"hidden sm:inline",children:"SÃ©curitÃ©"})]})]}),m.jsxs(fs,{value:"dashboard",className:"space-y-6",children:[i?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...[,,,,]].map(((e,s)=>m.jsx(V,{},s)))}):m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(xa,{title:"Annonces Actives",value:z.activeListings,icon:ce,color:"blue"}),m.jsx(xa,{title:"Total des Vues",value:z.totalViews.toLocaleString(),icon:Ke,color:"green"}),m.jsx(xa,{title:"Contacts ReÃ§us",value:z.totalContacts,icon:Ge,color:"purple"}),m.jsx(xa,{title:"Messages Non Lus",value:z.unreadMessages,icon:is,color:"orange"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsx(fa,{}),m.jsx(ba,{stats:z})]})]}),m.jsxs(fs,{value:"listings",className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Mes Annonces"}),m.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez vos annonces publiÃ©es"})]}),m.jsx(ie,{asChild:!0,className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-white",children:m.jsxs(g,{to:"/creer-annonce",children:[m.jsx(ds,{className:"h-4 w-4 mr-2"}),"Nouvelle Annonce"]})})]}),i?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...[,,,,,,]].map(((e,s)=>m.jsx(O,{},s)))}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(()=>{const e=(T-1)*W,s=e+W;return N.slice(e,s)})().map((e=>m.jsx(ja,{listing:e,onEdit:Y,onDelete:Z,onRefresh:se,onBoost:ee,showActions:!0},e.id)))}),m.jsx(B,{currentPage:T,totalPages:R,onPageChange:e=>{I(e)},hasNextPage:R>T,hasPrevPage:T>1,isLoading:i})]})]}),m.jsxs(fs,{value:"messages",className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Messages"}),m.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez vos conversations"})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs(ie,{variant:"outline",size:"sm",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),"Filtrer"]}),m.jsxs(ie,{variant:"outline",size:"sm",children:[m.jsx(ge,{className:"h-4 w-4 mr-2"}),"Rechercher"]})]})]}),m.jsx("div",{className:"space-y-4",children:w.map((e=>m.jsx(va,{conversation:e,onReply:te,onArchive:ne,onDelete:()=>{},onMarkAsRead:le,onStar:oe,showActions:!0},e.id)))})]}),m.jsxs(fs,{value:"favorites",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Mes Favoris"}),m.jsx("p",{className:"text-muted-foreground",children:"Annonces que vous avez sauvegardÃ©es"})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map((e=>m.jsx(ja,{listing:e,showActions:!1},e.id)))})]}),m.jsxs(fs,{value:"transactions",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Transactions"}),m.jsx("p",{className:"text-muted-foreground",children:"Historique de vos transactions"})]})}),m.jsx(qe,{children:m.jsx(Te,{className:"p-6",children:m.jsxs("div",{className:"text-center py-8",children:[m.jsx(vs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucune transaction"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous n'avez pas encore effectuÃ© de transactions sur MaxiMarket."}),m.jsx(ie,{variant:"outline",children:"DÃ©couvrir nos services"})]})})})]}),m.jsxs(fs,{value:"profile",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"Informations du profil"}),m.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez vos informations personnelles"})]})}),m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"ParamÃ¨tres du profil"}),m.jsx(De,{children:"GÃ©rez vos informations personnelles et vos prÃ©fÃ©rences"})]}),m.jsx(Te,{children:m.jsxs("form",{onSubmit:K((e=>d(null,null,(function*(){try{h(!0),yield Cs.updateProfile(e),l({title:"Profil mis Ã  jour",description:"Vos informations ont Ã©tÃ© mises Ã  jour avec succÃ¨s."})}catch(s){l({title:"Erreur",description:s.message,variant:"destructive"})}finally{h(!1)}})))),className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"firstName",children:"PrÃ©nom"}),m.jsxs("div",{className:"relative",children:[m.jsx($e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"firstName",className:"pl-10"},Q("firstName",{required:"Le prÃ©nom est requis"})))]}),G.firstName&&m.jsx("p",{className:"text-sm text-destructive",children:G.firstName.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"lastName",children:"Nom"}),m.jsxs("div",{className:"relative",children:[m.jsx($e,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"lastName",className:"pl-10"},Q("lastName",{required:"Le nom est requis"})))]}),G.lastName&&m.jsx("p",{className:"text-sm text-destructive",children:G.lastName.message})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"email",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ae,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"email",type:"email",className:"pl-10"},Q("email",{required:"L'email est requis",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Email invalide"}})))]}),G.email&&m.jsx("p",{className:"text-sm text-destructive",children:G.email.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"phoneNumber",children:"TÃ©lÃ©phone"}),m.jsxs("div",{className:"relative",children:[m.jsx(Pe,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"phoneNumber",type:"tel",className:"pl-10"},Q("phoneNumber",{pattern:{value:/^\+?[1-9]\d{1,14}$/,message:"NumÃ©ro de tÃ©lÃ©phone invalide"}})))]}),G.phoneNumber&&m.jsx("p",{className:"text-sm text-destructive",children:G.phoneNumber.message})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:x,children:x?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise Ã  jour en cours..."]}):"Mettre Ã  jour le profil"})]})})]})]}),m.jsxs(fs,{value:"security",className:"space-y-6",children:[m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold",children:"SÃ©curitÃ©"}),m.jsx("p",{className:"text-muted-foreground",children:"GÃ©rez la sÃ©curitÃ© de votre compte"})]})}),m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"Changer le mot de passe"}),m.jsx(De,{children:"Assurez-vous d'utiliser un mot de passe fort et unique"})]}),m.jsx(Te,{children:m.jsxs("form",{onSubmit:K((e=>d(null,null,(function*(){try{h(!0),yield Cs.updatePassword(e.newPassword),l({title:"Mot de passe mis Ã  jour",description:"Votre mot de passe a Ã©tÃ© changÃ© avec succÃ¨s."})}catch(s){l({title:"Erreur",description:s.message,variant:"destructive"})}finally{h(!1)}})))),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"currentPassword",children:"Mot de passe actuel"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"currentPassword",type:"password",className:"pl-10"},Q("currentPassword",{required:"Le mot de passe actuel est requis"})))]}),G.currentPassword&&m.jsx("p",{className:"text-sm text-destructive",children:G.currentPassword.message})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"newPassword",children:"Nouveau mot de passe"}),m.jsxs("div",{className:"relative",children:[m.jsx(Re,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),m.jsx(Ce,o({id:"newPassword",type:"password",className:"pl-10"},Q("newPassword",{required:"Le nouveau mot de passe est requis",minLength:{value:8,message:"Le mot de passe doit contenir au moins 8 caractÃ¨res"}})))]}),G.newPassword&&m.jsx("p",{className:"text-sm text-destructive",children:G.newPassword.message})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:x,children:x?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise Ã  jour en cours..."]}):"Changer le mot de passe"})]})})]}),m.jsx("div",{className:"mt-6",children:m.jsxs(ie,{onClick:()=>d(null,null,(function*(){try{if(!(yield n()))throw Error("Ã‰chec de la dÃ©connexion");l({title:"DÃ©connexion rÃ©ussie",description:"Vous avez Ã©tÃ© dÃ©connectÃ© avec succÃ¨s."}),u("/")}catch(e){l({title:"Erreur de dÃ©connexion",description:e.message||"Une erreur est survenue lors de la dÃ©connexion",variant:"destructive"})}})),variant:"destructive",className:"w-full",children:[m.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Se dÃ©connecter"]})})]})]})]}),m.jsx(U,{isOpen:P.isOpen,onClose:()=>M({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=P.item;yield ys.deleteListing(e.id);const s=N.filter((s=>s.id!==e.id));y(s),l({title:"Annonce supprimÃ©e",description:`"${e.title}" a Ã©tÃ© supprimÃ©e`}),M({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible de supprimer l'annonce",variant:"destructive"})}})),itemName:null==(e=P.item)?void 0:e.title,isLoading:x}),m.jsx($,{isOpen:_.isOpen,onClose:()=>E({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=_.item;u("/editer-annonce/"+e.id),E({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible de modifier l'annonce",variant:"destructive"})}})),itemName:null==(s=_.item)?void 0:s.title,isLoading:x}),m.jsx(X,{isOpen:q.isOpen,onClose:()=>F({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=q.item;yield ys.updateListing(e.id,{updated_at:(new Date).toISOString()}),l({title:"Annonce actualisÃ©e",description:`"${e.title}" a Ã©tÃ© actualisÃ©e`}),F({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible d'actualiser l'annonce",variant:"destructive"})}})),itemName:null==(t=q.item)?void 0:t.title,isLoading:x}),m.jsx(J,{isOpen:L.isOpen,onClose:()=>D({isOpen:!1,item:null}),onConfirm:()=>d(null,null,(function*(){try{const e=L.item;yield ys.updateListing(e.id,{boosted:!e.boosted});const s=N.map((s=>s.id===e.id?c(o({},s),{boosted:!s.boosted}):s));y(s),l({title:"Annonce boostÃ©e",description:`"${e.title}" a Ã©tÃ© boostÃ©e`}),D({isOpen:!1,item:null})}catch(e){l({title:"Erreur",description:"Impossible de booster l'annonce",variant:"destructive"})}})),itemName:null==(a=L.item)?void 0:a.title,isLoading:x})]})},ya=()=>{const e=f();return p.useEffect((()=>{d(null,null,(function*(){try{const{data:{session:s}}=yield Ue.auth.getSession();(null==s?void 0:s.user)?e("/",{replace:!0}):e("/connexion",{replace:!0})}catch(s){e("/connexion",{replace:!0})}}))}),[e]),m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"flex items-center text-muted-foreground",children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Traitement de la confirmation..."]})})},wa=(e=null,s={})=>{const t=P(),{user:a}=ae(),[r,i]=p.useState(new Set);p.useEffect((()=>{a&&n()}),[a]);const n=()=>d(null,null,(function*(){try{const e=yield ws.getUserFavoritesWithStatus();i(e)}catch(e){}})),{data:l,fetchNextPage:m,hasNextPage:u,isFetchingNextPage:x,isLoading:h,error:g,refetch:j}=M({queryKey:["listings",e,s],queryFn:({pageParam:t=0})=>{const a=o({status:"approved",category:e,search:s.search,minPrice:s.minPrice,maxPrice:s.maxPrice,location:s.location,page:t,limit:12},s);return ys.getAllListings(a)},getNextPageParam:(e,s)=>e.hasMore?s.length:void 0,staleTime:Gt.staleTime,gcTime:Gt.gcTime,keepPreviousData:!0}),v=_({mutationFn:e=>{if(!a)throw Error("Vous devez Ãªtre connectÃ© pour crÃ©er une annonce");return ys.createListing(c(o({},e),{user_id:a.id,status:"pending"}))},onSuccess:()=>{t.invalidateQueries(["listings"])}}),f=_({mutationFn:({id:e,updates:s})=>ys.updateListing(e,s),onSuccess:(e,s)=>{t.setQueryData(["listings"],(e=>e?c(o({},e),{pages:e.pages.map((e=>c(o({},e),{data:e.data.map((e=>e.id===s.id?o(o({},e),s.updates):e))})))}):e))}}),b=_({mutationFn:e=>ys.deleteListing(e),onSuccess:(e,s)=>{t.setQueryData(["listings"],(e=>e?c(o({},e),{pages:e.pages.map((e=>c(o({},e),{data:e.data.filter((e=>e.id!==s))})))}):e))}}),N=_({mutationFn:e=>d(null,null,(function*(){if(!a)throw Error("Vous devez Ãªtre connectÃ© pour ajouter aux favoris");const s=yield ws.toggleFavorite(e);return i((t=>{const a=new Set(t);return s.is_favorite?a.add(e):a.delete(e),a})),s})),onSuccess:(e,s)=>{t.setQueryData(["listings"],(t=>t?c(o({},t),{pages:t.pages.map((t=>c(o({},t),{data:t.data.map((t=>t.id===s?c(o({},t),{is_favorite:e.is_favorite}):t))})))}):t)),t.invalidateQueries(["favorites"]),t.invalidateQueries(["userStats"])},onError:(e,s)=>{i((e=>{const t=new Set(e);return r.has(s)?t.delete(s):t.add(s),t}))}});return{listings:((null==l?void 0:l.pages.flatMap((e=>e.data)))||[]).map((e=>c(o({},e),{is_favorite:r.has(e.id)}))),loading:h,error:g,hasMore:u,isFetchingMore:x,loadMore:m,refresh:j,createListing:v.mutate,updateListing:f.mutate,deleteListing:b.mutate,toggleFavorite:N.mutate,isCreating:v.isLoading,isUpdating:f.isLoading,isDeleting:b.isLoading,isTogglingFavorite:N.isLoading,isFavorite:e=>r.has(e),favoriteIds:r,loadUserFavorites:n}},ka=e=>{const s=p.useMemo((()=>{if((null==e?void 0:e.images)&&e.images.length>0){const s=e.images.map((e=>"string"==typeof e?e:(null==e?void 0:e.url)?e.url:(null==e?void 0:e.file)?URL.createObjectURL(e.file):(null==e?void 0:e.src)?e.src:(null==e?void 0:e.displayUrl)?e.displayUrl:null)).filter(Boolean);if(s.length>0)return s}const s={real_estate:["https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=600&fit=crop"],automobile:["https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=800&h=600&fit=crop"],services:["https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=800&h=600&fit=crop"],marketplace:["https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742044-3c52d6e88c62?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=800&h=600&fit=crop"]};let t=null==e?void 0:e.category;return t&&(t={immobilier:"real_estate",automobile:"automobile",services:"services",marketplace:"marketplace"}[t.toLowerCase()]||t),((e,s="gallery",t="medium")=>Array.isArray(e)?e.map((e=>ha(e,s,t))):[])(s[t]||s.marketplace,"gallery","medium")}),[null==e?void 0:e.images,null==e?void 0:e.category]),t=p.useMemo((()=>s[0]),[s]),a=p.useMemo((()=>s.length>1),[s]);return{images:s,mainImage:t,hasMultipleImages:a,imageCount:s.length}},Ca="hero-listings",Sa="hero-info",za="hero-last-update",Aa=36e5,Pa=({listingId:e,listing:s,size:t="default",showActions:a=!0,className:r=""})=>{var i;const{user:n}=ae(),l=f(),{toast:o}=Me(),[c,u]=p.useState(null),[x,h]=p.useState(!1),[g,j]=p.useState(!1);p.useEffect((()=>{e&&n&&v()}),[e,n]);const v=()=>d(null,null,(function*(){try{h(!0);const s=yield As.getBoostStatus(e);u(s)}catch(s){}finally{h(!1)}})),b=(()=>{if(!(null==c?void 0:c.hasActiveBoost))return{icon:m.jsx(Fs,{className:"h-4 w-4"}),label:"Non boostÃ©",color:"secondary",description:"Aucun boost actif"};const e=c.currentBoost,s=new Date,t=new Date(e.end_date),a=Math.ceil((t-s)/864e5);return a>0?a>3?a>7?{icon:m.jsx(os,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"default",description:"Boost actif"}:{icon:m.jsx(Ye,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"default",description:"Boost actif"}:{icon:m.jsx(ss,{className:"h-4 w-4"}),label:`${a}j restant${a>1?"s":""}`,color:"destructive",description:"Boost expire bientÃ´t"}:{icon:m.jsx(ss,{className:"h-4 w-4"}),label:"ExpirÃ©",color:"secondary",description:"Boost expirÃ©"}})(),N=(e=>{switch(e){case"small":return"text-xs px-2 py-1";case"large":return"text-sm px-3 py-1.5";default:return"text-xs px-2.5 py-1"}})(t),y=(e=>{switch(e){case"small":return"h-3 w-3";case"large":return"h-5 w-5";default:return"h-4 w-4"}})(t);return n&&s?n.id!==s.user_id?null:m.jsx(Ps,{children:m.jsxs("div",{className:"flex items-center gap-2 "+r,children:[m.jsxs(Ms,{children:[m.jsx(_s,{asChild:!0,children:m.jsx(Xe,{variant:b.color,className:N+" cursor-help transition-all duration-200 hover:scale-105",children:m.jsxs("div",{className:"flex items-center gap-1",children:[b.icon,m.jsx("span",{className:"hidden sm:inline",children:b.label})]})})}),m.jsxs(Es,{children:[m.jsx("p",{children:b.description}),(null==c?void 0:c.hasActiveBoost)&&c.currentBoost&&m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Package: ",null==(i=c.currentBoost.boost_packages)?void 0:i.name]})]})]}),a&&(null==c?void 0:c.hasActiveBoost)&&c.currentBoost&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs(Ms,{children:[m.jsx(_s,{asChild:!0,children:m.jsx(ie,{onClick:()=>d(null,null,(function*(){if(null==c?void 0:c.currentBoost)try{j(!0),(yield As.renewBoost(c.currentBoost.id,n.id)).success&&(o({title:"Boost renouvelÃ© !",description:"Votre boost a Ã©tÃ© prolongÃ© avec succÃ¨s."}),v())}catch(e){o({title:"Erreur",description:e.message||"Erreur lors du renouvellement",variant:"destructive"})}finally{j(!1)}})),disabled:g,variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-primary/10",children:m.jsx(ne,{className:y+" text-primary"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Renouveler le boost"})})]}),m.jsxs(Ms,{children:[m.jsx(_s,{asChild:!0,children:m.jsx(ie,{onClick:()=>d(null,null,(function*(){if((null==c?void 0:c.currentBoost)&&confirm("ÃŠtes-vous sÃ»r de vouloir annuler ce boost ?"))try{j(!0),(yield As.cancelBoost(c.currentBoost.id,n.id)).success&&(o({title:"Boost annulÃ©",description:"Votre boost a Ã©tÃ© annulÃ© avec succÃ¨s."}),v())}catch(e){o({title:"Erreur",description:e.message||"Erreur lors de l'annulation",variant:"destructive"})}finally{j(!1)}})),disabled:g,variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-destructive/10",children:m.jsx(qs,{className:y+" text-destructive"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Annuler le boost"})})]}),m.jsxs(Ms,{children:[m.jsx(_s,{asChild:!0,children:m.jsx(ie,{onClick:()=>l("/booster-annonce/"+e),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-500/10",children:m.jsx(js,{className:y+" text-blue-500"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Voir les dÃ©tails et analytics"})})]})]}),a&&!(null==c?void 0:c.hasActiveBoost)&&m.jsxs(Ms,{children:[m.jsx(_s,{asChild:!0,children:m.jsx(ie,{onClick:()=>l("/booster-annonce/"+e),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-primary/10",children:m.jsx(Ye,{className:y+" text-primary"})})}),m.jsx(Es,{children:m.jsx("p",{children:"Booster cette annonce"})})]}),x&&m.jsx(Vt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-primary border-t-transparent rounded-full"}),g&&m.jsx(Vt.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"h-4 w-4 border-2 border-green-500 border-t-transparent rounded-full"})]})}):null},Ma=({listing:e,variant:s="default"})=>{const{toast:t}=Me(),[a,r]=p.useState(!1),i=`${window.location.origin}/annonce/${e.id}`,n=s=>{var t,a,r,n;const l="ğŸ  DÃ©couvrez cette annonce sur MaxiMarket : "+e.title;switch(s){case"facebook":return`${l}\n\nğŸ’° Prix : ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\n\nğŸ“ ${(null==(t=e.location)?void 0:t.city)||"Localisation non spÃ©cifiÃ©e"}`;case"instagram":return`${l}\n\nğŸ’° ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nğŸ“ ${(null==(a=e.location)?void 0:a.city)||"Localisation non spÃ©cifiÃ©e"}\n\n#MaxiMarket #Marketplace #Afrique`;case"tiktok":return`${l}\nğŸ’° ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nğŸ“ ${(null==(r=e.location)?void 0:r.city)||"Localisation non spÃ©cifiÃ©e"}\n\n#MaxiMarket #Marketplace #Afrique #FYP`;case"whatsapp":return`${l}\n\nğŸ’° Prix : ${e.price?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(e.price):"Prix sur demande"}\nğŸ“ ${(null==(n=e.location)?void 0:n.city)||"Localisation non spÃ©cifiÃ©e"}\n\n${i}`;default:return l}},l=()=>{r(!0);const e=n("facebook"),s=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}&quote=${encodeURIComponent(e)}`;window.open(s,"_blank","width=600,height=500,scrollbars=yes,resizable=yes"),setTimeout((()=>r(!1)),1e3),t({title:"PartagÃ© sur Facebook",description:"L'annonce a Ã©tÃ© partagÃ©e sur Facebook"})},o=()=>{r(!0),navigator.clipboard.writeText(i).then((()=>{t({title:"Lien copiÃ© !",description:"Le lien a Ã©tÃ© copiÃ©. Ouvrez Instagram et collez-le dans votre story ou post."}),window.open("https://www.instagram.com","_blank")})).catch((()=>{t({title:"Erreur",description:"Impossible de copier le lien automatiquement.",variant:"destructive"})})),setTimeout((()=>r(!1)),1e3)},c=()=>{r(!0),navigator.clipboard.writeText(i).then((()=>{t({title:"Lien copiÃ© !",description:"Le lien a Ã©tÃ© copiÃ©. Ouvrez TikTok et collez-le dans votre vidÃ©o ou description."}),window.open("https://www.tiktok.com","_blank")})).catch((()=>{t({title:"Erreur",description:"Impossible de copier le lien automatiquement.",variant:"destructive"})})),setTimeout((()=>r(!1)),1e3)},u=()=>{r(!0);const e=n("whatsapp"),s="https://wa.me/?text="+encodeURIComponent(e);window.open(s,"_blank"),setTimeout((()=>r(!1)),1e3),t({title:"PartagÃ© sur WhatsApp",description:"L'annonce a Ã©tÃ© partagÃ©e sur WhatsApp"})},x=()=>d(null,null,(function*(){try{yield navigator.clipboard.writeText(i),t({title:"Lien copiÃ© !",description:"Le lien de l'annonce a Ã©tÃ© copiÃ© dans le presse-papiers."})}catch(e){t({title:"Erreur",description:"Impossible de copier le lien.",variant:"destructive"})}})),h=()=>{window.open(i,"_blank")};return"compact"===s?m.jsxs(Ls,{children:[m.jsx(Ds,{asChild:!0,children:m.jsxs(ie,{variant:"outline",size:"sm",disabled:a,className:"flex items-center space-x-1 px-2 py-1 text-xs",children:[m.jsx(Ts,{className:"h-3 w-3"}),m.jsx("span",{children:"Partager"})]})}),m.jsxs(Is,{align:"end",className:"w-48",children:[m.jsxs(Rs,{onClick:l,children:[m.jsx(ye,{className:"h-4 w-4 mr-2 text-blue-600"}),"Facebook"]}),m.jsxs(Rs,{onClick:o,children:[m.jsx(ke,{className:"h-4 w-4 mr-2 text-pink-600"}),"Instagram"]}),m.jsxs(Rs,{onClick:c,children:[m.jsx("svg",{className:"h-4 w-4 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),"TikTok"]}),m.jsxs(Rs,{onClick:u,children:[m.jsx("svg",{className:"h-4 w-4 mr-2 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),"WhatsApp"]}),m.jsxs(Rs,{onClick:x,children:[m.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Copier le lien"]}),m.jsxs(Rs,{onClick:h,children:[m.jsx(Os,{className:"h-4 w-4 mr-2"}),"Ouvrir l'annonce"]})]})]}):m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Ts,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"text-sm font-medium",children:"Partager cette annonce"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsxs(ie,{variant:"outline",size:"sm",onClick:l,disabled:a,className:"flex items-center space-x-2 bg-blue-50 hover:bg-blue-100 border-blue-200",children:[m.jsx(ye,{className:"h-4 w-4 text-blue-600"}),m.jsx("span",{children:"Facebook"})]}),m.jsxs(ie,{variant:"outline",size:"sm",onClick:o,disabled:a,className:"flex items-center space-x-2 bg-pink-50 hover:bg-pink-100 border-pink-200",children:[m.jsx(ke,{className:"h-4 w-4 text-pink-600"}),m.jsx("span",{children:"Instagram"})]}),m.jsxs(ie,{variant:"outline",size:"sm",onClick:c,disabled:a,className:"flex items-center space-x-2 bg-black hover:bg-gray-800 text-white border-gray-700",children:[m.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),m.jsx("span",{children:"TikTok"})]}),m.jsxs(ie,{variant:"outline",size:"sm",onClick:u,disabled:a,className:"flex items-center space-x-2 bg-green-50 hover:bg-green-100 border-green-200",children:[m.jsx("svg",{className:"h-4 w-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:m.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"})}),m.jsx("span",{children:"WhatsApp"})]}),m.jsxs(ie,{variant:"outline",size:"sm",onClick:x,className:"flex items-center space-x-2",children:[m.jsx(Vs,{className:"h-4 w-4"}),m.jsx("span",{children:"Copier le lien"})]}),m.jsxs(ie,{variant:"outline",size:"sm",onClick:h,className:"flex items-center space-x-2",children:[m.jsx(Os,{className:"h-4 w-4"}),m.jsx("span",{children:"Ouvrir l'annonce"})]})]})]})},_a=({listing:e,onToggleFavorite:s,showActions:t=!0})=>{var a,r;const{user:i}=ae(),n=f(),{images:l}=ka(e),[o,c]=p.useState(e.is_favorite||!1),[u,x]=p.useState(!1),g=e=>{const s="text-xs px-1 py-0.5 sm:px-2 sm:py-1 md:px-3 md:py-1.5 inline-flex items-center whitespace-nowrap";switch(e){case"approved":return m.jsx(Xe,{variant:"default",className:"badge-approved "+s,children:"ApprouvÃ©"});case"pending":return m.jsx(Xe,{variant:"secondary",className:s,children:"En attente"});case"rejected":return m.jsx(Xe,{variant:"destructive",className:s,children:"RejetÃ©"});default:return m.jsx(Xe,{variant:"outline",className:s,children:e})}};h.useEffect((()=>{c(e.is_favorite||!1)}),[e.is_favorite]);const j=e.featured||e.boosted||e.is_premium||e.premium;return m.jsxs(Vt.div,{whileHover:{y:-4},className:Ee("group rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden",j?"bg-gradient-to-br from-amber-50/50 to-yellow-100/50 border-2 border-amber-300/50 shadow-amber-200/50":"bg-card border border-border/50"),onClick:()=>{e.id&&n("/annonce/"+e.id)},children:[m.jsxs("div",{className:"relative h-40 sm:h-48 md:h-56 bg-muted overflow-hidden",children:[m.jsx(ga,{images:l,title:e.title,className:"h-full"}),m.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 sm:flex-row sm:gap-2 items-start",children:m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Xe,{variant:"secondary",className:"bg-black/70 text-white text-xs px-1 py-0.5 sm:px-2 sm:py-1 md:px-3 md:py-1.5 inline-flex items-center whitespace-nowrap",children:m.jsxs("span",{className:"inline-flex items-center",children:[(e=>{switch(e){case"real_estate":return"ğŸ ";case"automobile":return"ğŸš—";case"services":return"ğŸ”§";case"marketplace":return"ğŸ›ï¸";default:return"ğŸ“‹"}})(e.category)," ","real_estate"===e.category?"Immobilier":"automobile"===e.category?"Automobile":"services"===e.category?"Services":"Marketplace"]})}),"approved"===e.status&&j?m.jsx("span",{className:"hidden sm:inline-flex",children:g(e.status)}):g(e.status)]})}),t&&m.jsx(Vt.button,{onClick:t=>d(null,null,(function*(){if(t.stopPropagation(),i){if(!u)try{x(!0),c(!o),s&&(yield s(e.id))}catch(a){c(!o)}finally{x(!1)}}else n("/connexion")})),disabled:u,className:`absolute top-2 right-2 p-1.5 sm:p-2 rounded-full transition-all duration-200 ${o?"bg-red-500 hover:bg-red-600 text-white":"bg-black/20 hover:bg-black/40 text-white"} ${u?"opacity-50 cursor-not-allowed":""}`,whileHover:{scale:1.1},whileTap:{scale:.9},children:m.jsx(cs,{className:"h-4 w-4 sm:h-5 sm:w-5 "+(o?"fill-current":"")})})]}),m.jsxs("div",{className:"p-2 sm:p-4 md:p-6",children:[m.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-1 sm:mb-2 truncate group-hover:text-primary transition-colors",children:e.title}),m.jsxs("div",{className:"flex items-center text-muted-foreground mb-1 sm:mb-3",children:[m.jsx(We,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1.5 sm:mr-2 flex-shrink-0"}),m.jsx("span",{className:"truncate text-sm sm:text-base",children:e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:(null==(a=e.location)?void 0:a.city)||(null==(r=e.location)?void 0:r.country)||"Localisation non spÃ©cifiÃ©e"})]}),m.jsx("div",{className:Ee("text-xl sm:text-2xl font-bold mb-1 sm:mb-3",j?"text-slate-800":"text-primary"),children:e.price?(b=e.price,((e,s="XOF")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e))(b,e.currency||"XOF")):"Prix sur demande"}),m.jsx("p",{className:"text-muted-foreground mb-2 sm:mb-4 text-sm sm:text-base line-clamp-2 sm:line-clamp-2",children:e.description||"Aucune description disponible"}),j&&m.jsx("div",{className:"mb-2 sm:mb-3",children:m.jsx(Xe,{variant:"secondary",className:"bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border-amber-300 text-xs font-medium",children:"â­ Premium"})}),m.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Qe,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),m.jsx("span",{className:"text-xs sm:text-sm",children:e.created_at?(v=e.created_at,(e=>new Intl.DateTimeFormat("fr-FR",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)))(new Date(v))):"Date inconnue"})]}),m.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.views_count>0&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ke,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),m.jsx("span",{className:"text-xs sm:text-sm",children:e.views_count})]}),e.favorites_count>0&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(cs,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 flex-shrink-0"}),m.jsx("span",{className:"text-xs sm:text-sm",children:e.favorites_count})]})]})]}),m.jsx("div",{className:"mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-border/20",children:m.jsx(Ma,{listing:e,variant:"compact"})}),m.jsx(Pa,{listingId:e.id,listing:e,size:"small",showActions:t,className:"mt-2 sm:mt-3 pt-2 sm:pt-3 border-t border-border/20"})]})]});var v,b},Ea=({listings:e=[],category:s,hour:t,timeSlot:a,onListingClick:r})=>{var i;const[n,l]=p.useState(0),[o,c]=p.useState(!0),[d,u]=p.useState({hour:t,timeSlot:a}),x=f();p.useEffect((()=>{const e=()=>{const e=(new Date).getHours();var s;u({hour:e,timeSlot:(s=e,s>=6&&12>s?"matin":s>=12&&18>s?"aprÃ¨s-midi":s>=18&&22>s?"soirÃ©e":"nuit")})};e();const s=setInterval(e,6e4);return()=>clearInterval(s)}),[]),p.useEffect((()=>{if(!o||1>=e.length)return;const s=setInterval((()=>{l((s=>(s+1)%e.length))}),8e3);return()=>clearInterval(s)}),[o,e.length]);const h=p.useCallback((()=>c(!1)),[]),g=p.useCallback((()=>c(!0)),[]),j=p.useCallback((e=>{l(e)}),[]),v=p.useCallback((e=>{r?r(e):x("/annonce/"+e.id)}),[x,r]);if(!e||0===e.length)return m.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx(ss,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Aucune annonce disponible"}),m.jsx("p",{className:"text-gray-300",children:"Revenez plus tard pour dÃ©couvrir de nouvelles annonces"})]})});const b=e[n];return m.jsxs("div",{className:"relative h-screen overflow-hidden",onMouseEnter:h,onMouseLeave:g,children:[m.jsx(Ot,{mode:"wait",children:m.jsx(Vt.div,{initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.8,ease:"easeOut"},className:"absolute inset-0",children:m.jsx(pa,{src:(null==(i=b.images)?void 0:i[0])||b.image_url,alt:b.title,className:"w-full h-full object-cover",context:"hero",quality:"high",priority:"high",showSkeleton:!0,enableHeroAnimations:!0,showOverlay:!1})},b.id)}),m.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6 text-center relative z-10",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"flex justify-center items-center gap-4 mb-8",children:[m.jsxs(Xe,{className:Ee("text-white/80 border-0 text-sm",(e=>{switch(e){case"real_estate":return"bg-blue-500";case"automobile":return"bg-green-500";case"services":return"bg-purple-500";case"marketplace":return"bg-orange-500";default:return"bg-gray-500"}})(s)),children:[m.jsx("span",{className:"mr-1",children:(e=>{switch(e){case"real_estate":return"ğŸ ";case"automobile":return"ğŸš—";case"services":return"ğŸ”§";case"marketplace":return"ğŸ›ï¸";default:return"ğŸ“‹"}})(s)}),"real_estate"===s&&"Immobilier","automobile"===s&&"Automobile","services"===s&&"Services","marketplace"===s&&"Marketplace"]}),m.jsxs(Xe,{variant:"outline",className:"text-white/80 border-white/20 text-sm",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),d.timeSlot," â€¢ ",d.hour,"h"]})]}),m.jsxs(Vt.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.4},className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["Bienvenue sur"," ",m.jsx("span",{className:"gradient-text",children:"MaxiMarket"})]}),m.jsx(Vt.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.6},className:"text-xl md:text-2xl text-gray-300 mb-32 max-w-3xl mx-auto",children:"Explorez, dÃ©couvrez, connectez. Votre marketplace de confiance."}),m.jsxs(Vt.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:.8},className:"text-white/60 text-sm mb-4",children:["DÃ©couvrez : ",b.title]}),m.jsx(Vt.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.7,delay:1},className:"flex justify-center",children:m.jsx(ie,{variant:"ghost",size:"sm",className:"text-white/70 hover:text-white hover:bg-white/10 border border-white/20",onClick:()=>v(b),children:"Voir cette annonce"})})]})}),e.length>1&&m.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex gap-2 z-50",children:e.map(((e,s)=>m.jsx("button",{className:Ee("w-2 h-2 rounded-full transition-all duration-300 cursor-pointer",s===n?"bg-white scale-125":"bg-white/30 hover:bg-white/50"),onClick:()=>j(s)},s)))})]})},qa=()=>{const e=f(),{user:s}=ae(),[t,a]=p.useState([]),[r,i]=p.useState(!0),[n,l]=p.useState(null),[o,c]=p.useState([]),[u,x]=p.useState(!0),[h,g]=p.useState(null),{heroListings:j,heroInfo:v,loading:b,error:N}=((e=6)=>{const[s,t]=p.useState([]),[a,r]=p.useState({category:"",hour:0,timeSlot:""}),[i,n]=p.useState(!0),[l,o]=p.useState(null),[c,m]=p.useState(null),u=p.useCallback((()=>{const e=zs.get(za);if(!e)return!1;const s=Date.now()-e;return Aa>s}),[]),x=p.useCallback((()=>{try{const e=zs.get(Ca),s=zs.get(Sa),a=zs.get(za);return!!(e&&s&&a)&&(t(e),r(s),m(a),!0)}catch(e){return!1}}),[]),h=p.useCallback(((e,s)=>{try{const t=Date.now();zs.set(Ca,e,Aa),zs.set(Sa,s,Aa),zs.set(za,t,Aa),m(t)}catch(t){}}),[]),g=p.useCallback((()=>d(null,null,(function*(){var s;try{n(!0),o(null);const a=yield ys.getHeroListings(e),i=(null==a?void 0:a.data)||[],l={category:(null==a?void 0:a.category)||"",hour:(null==a?void 0:a.hour)||0,timeSlot:(null==(s=null==a?void 0:a.rotationInfo)?void 0:s.timeSlot)||""};t(i),r(l),h(i,l)}catch(a){o((null==a?void 0:a.message)||"Erreur lors du chargement des annonces hero")}finally{n(!1)}}))),[e,h]),j=p.useCallback((()=>d(null,null,(function*(){u()&&x()?n(!1):yield g()}))),[u,x,g]),v=p.useCallback((()=>d(null,null,(function*(){yield g()}))),[g]);return p.useEffect((()=>{j()}),[j]),p.useEffect((()=>{const e=setInterval((()=>{u()||g()}),36e5);return()=>clearInterval(e)}),[u,g]),{heroListings:s,heroInfo:a,loading:i,error:l,lastUpdate:c,forceRefresh:v,isCacheValid:u(),cacheStats:zs.getStats()}})(6);p.useEffect((()=>{let e;const s=()=>d(null,null,(function*(){try{i(!0);const e=yield ys.getTopViewedListings(6);a(e||[])}catch(e){l((null==e?void 0:e.message)||"Erreur lors du chargement des annonces populaires")}finally{i(!1)}})),t=()=>d(null,null,(function*(){try{x(!0);const e=yield ys.getPremiumListings(10);c((null==e?void 0:e.data)||[])}catch(e){g((null==e?void 0:e.message)||"Erreur lors du chargement des annonces premium")}finally{x(!1)}}));return s(),t(),e=setInterval((()=>{s(),t()}),18e5),()=>clearInterval(e)}),[]);const y={hidden:{opacity:0,y:20},visible:e=>({opacity:1,y:0,transition:{delay:.1*e,duration:.5,ease:"easeOut"}})},w=[{name:"Immobilier",icon:m.jsx(ce,{className:"h-10 w-10 mb-3 text-primary"}),path:"/immobilier",description:"Maisons, appartements, terrains."},{name:"Automobile",icon:m.jsx(Us,{className:"h-10 w-10 mb-3 text-primary"}),path:"/automobile",description:"Voitures, motos, utilitaires."},{name:"Services Pro",icon:m.jsx(me,{className:"h-10 w-10 mb-3 text-primary"}),path:"/services",description:"Experts qualifiÃ©s Ã  votre service."},{name:"Marketplace",icon:m.jsx(ue,{className:"h-10 w-10 mb-3 text-primary"}),path:"/marketplace",description:"Produits neufs et d'occasion."}];return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-900 to-blue-900/20 text-foreground pt-20",children:[b?m.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Chargement des annonces..."}),m.jsx("p",{className:"text-gray-300",children:"PrÃ©paration de votre expÃ©rience personnalisÃ©e"})]})}):N?m.jsx("div",{className:"relative h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-purple-900 flex items-center justify-center",children:m.jsxs("div",{className:"text-center text-white",children:[m.jsx("div",{className:"w-16 h-16 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx("span",{className:"text-2xl",children:"âš ï¸"})}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Erreur de chargement"}),m.jsx("p",{className:"text-gray-300",children:N})]})}):m.jsxs(m.Fragment,{children:[m.jsx(Ea,{listings:j,category:v.category,hour:v.hour,timeSlot:v.timeSlot}),m.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 w-full max-w-2xl px-4",style:{bottom:"120px"},children:m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1.2},children:m.jsxs("form",{onSubmit:s=>{s.preventDefault();const t=s.currentTarget.querySelector('input[name="q"]'),a=(null==t?void 0:t.value)||"",{section:r,params:i}=Xt(a),n=new URLSearchParams(i);e(`${"immobilier"===r?"/immobilier":"automobile"===r?"/automobile":"services"===r?"/services":"/marketplace"}?${n.toString()}`)},className:"relative",children:[m.jsx(Ce,{name:"q",type:"search",placeholder:"Que recherchez-vous sur MaxiMarket ?",className:"w-full py-4 px-6 pr-16 rounded-full text-lg bg-white/10 text-white placeholder-gray-400 border-2 border-transparent focus:border-primary focus:ring-primary focus:outline-none backdrop-blur-md h-16"}),m.jsx(ie,{type:"submit",size:"lg",className:"absolute right-2 top-1/2 transform -translate-y-1/2 rounded-full bg-primary hover:bg-primary/90 h-12 w-12 p-0",children:m.jsx(Bs,{className:"h-6 w-6 text-white"})})]})})})]}),m.jsx("section",{className:"py-16 md:py-24",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Vt.h2,{className:"text-3xl md:text-4xl font-bold text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["Explorez nos ",m.jsx("span",{className:"gradient-text",children:"Univers"})]}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:w.map(((s,t)=>m.jsxs(Vt.div,{custom:t,variants:y,initial:"hidden",animate:"visible",onClick:()=>{return t=s.path,void e(t);var t},className:"bg-card p-6 rounded-xl shadow-2xl hover:shadow-primary/40 transition-all duration-300 transform hover:-translate-y-2 flex flex-col items-center text-center glassmorphic-card border border-transparent hover:border-primary/50 cursor-pointer group",children:[s.icon,m.jsx("h3",{className:"text-xl font-semibold mb-2 group-hover:text-primary transition-colors",children:s.name}),m.jsx("p",{className:"text-muted-foreground text-sm mb-5 flex-grow group-hover:text-primary/80 transition-colors",children:s.description}),m.jsxs("div",{className:"w-full border border-primary/50 rounded-md px-3 py-2 text-primary group-hover:bg-primary group-hover:text-white transition-all duration-300 flex items-center justify-center",children:[m.jsx("span",{className:"text-sm",children:"DÃ©couvrir"}),m.jsx(ze,{className:"ml-2 h-3 w-3 group-hover:translate-x-1 transition-transform flex-shrink-0"})]})]},s.name)))})]})}),m.jsx("section",{className:"py-16 md:py-24 bg-background/30",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Vt.h2,{className:"text-3xl md:text-4xl font-bold text-center mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["â­ Annonces ",m.jsx("span",{className:"gradient-text",children:"Premium"})]}),h&&m.jsx("p",{className:"text-center text-destructive mb-8",children:h}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[u&&!o.length&&Array.from({length:10}).map(((e,s)=>m.jsxs("div",{className:"bg-gradient-to-br from-amber-50/80 to-yellow-100/80 rounded-lg shadow-xl overflow-hidden glassmorphic-card border-2 border-amber-300/50",children:[m.jsx("div",{className:"h-40 sm:h-48 md:h-56 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 animate-pulse"}),m.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[m.jsx("div",{className:"h-6 w-3/4 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 rounded mb-3 animate-pulse"}),m.jsx("div",{className:"h-4 w-1/2 bg-gradient-to-r from-amber-200/50 to-yellow-200/50 rounded mb-4 animate-pulse"}),m.jsx("div",{className:"h-10 w-1/3 bg-gradient-to-r from-amber-300/50 to-yellow-300/50 rounded animate-pulse"})]})]},s))),!u&&0===o.length&&m.jsxs("div",{className:"col-span-full text-center py-16",children:[m.jsx("div",{className:"text-6xl mb-4",children:"â­"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce premium pour le moment"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Soyez le premier Ã  passer premium et boostez votre visibilitÃ© !"}),m.jsx(ie,{onClick:()=>e("/creer-annonce"),variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"CrÃ©er une Annonce Premium"})]}),o.slice(0,10).map((e=>m.jsx(_a,{listing:e,showActions:!1},e.id)))]}),m.jsx("div",{className:"text-center mt-12",children:m.jsxs(ie,{size:"lg",variant:"default",className:"bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white shadow-lg",onClick:()=>e("/premium"),children:["Voir Toutes les Annonces Premium"," ",m.jsx(ze,{className:"ml-2 h-5 w-5"})]})})]})}),m.jsx("section",{className:"py-16 md:py-24 bg-background/30",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:["ğŸ”¥ ",m.jsx("span",{className:"gradient-text",children:"Annonces Populaires"})]}),n&&m.jsx("p",{className:"text-center text-destructive mb-8",children:n}),m.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:[r&&!t.length&&Array.from({length:6}).map(((e,s)=>m.jsxs("div",{className:"bg-card rounded-lg shadow-xl overflow-hidden glassmorphic-card border border-transparent",children:[m.jsx("div",{className:"h-40 sm:h-48 md:h-56 bg-muted animate-pulse"}),m.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[m.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-3 animate-pulse"}),m.jsx("div",{className:"h-4 w-1/2 bg-muted rounded mb-4 animate-pulse"}),m.jsx("div",{className:"h-10 w-1/3 bg-muted rounded animate-pulse"})]})]},s))),!r&&0===t.length&&m.jsx("p",{className:"col-span-full text-center text-muted-foreground",children:"Aucune annonce populaire pour le moment."}),t.slice(0,6).map((e=>m.jsx(_a,{listing:e,showActions:!1},e.id)))]}),m.jsx("div",{className:"text-center mt-12",children:m.jsxs(ie,{size:"lg",variant:"default",className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 text-primary-foreground",onClick:()=>e("/marketplace?sort=popular&per=24"),children:["Voir Toutes les Annonces ",m.jsx(ze,{className:"ml-2 h-5 w-5"})]})})]})}),m.jsx("section",{className:"py-20 md:py-32",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6 text-center",children:[m.jsxs(Vt.h2,{className:"text-3xl md:text-4xl font-bold mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["PrÃªt Ã  ",m.jsx("span",{className:"gradient-text",children:"Rejoindre MaxiMarket"})," ?"]}),m.jsx(Vt.p,{className:"text-lg text-muted-foreground mb-10 max-w-xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"CrÃ©ez un compte, publiez votre premiÃ¨re annonce ou trouvez l'affaire parfaite en quelques clics."}),m.jsxs(Vt.div,{className:"space-y-4 sm:space-y-0 sm:flex sm:justify-center sm:space-x-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[m.jsx(ie,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground w-full sm:w-auto",onClick:()=>{s?e("/creer-annonce"):e("/connexion",{state:{from:"/creer-annonce"}})},children:"Publier une Annonce"}),m.jsx(ie,{size:"lg",variant:"outline",className:"w-full sm:w-auto",onClick:()=>e("/inscription"),children:"CrÃ©er un Compte"})]})]})})]})},Fa=()=>{const{user:e}=ae(),s=f(),t=u(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",l=a.get("location")||"",[x,h]=p.useState({search:r,location:l,type:"",minPrice:i,maxPrice:n}),{listings:g,loading:j,error:v,hasMore:b,loadMore:N}=wa("real_estate",x),{toggleFavorite:y}=(()=>{const{user:e}=ae(),s=P(),[t,a]=p.useState(new Set),{data:r,isLoading:i,error:n,refetch:l}=E({queryKey:["favorites",null==e?void 0:e.id],queryFn:()=>ws.getUserFavorites(),enabled:!!e,staleTime:3e5,gcTime:6e5}),{data:m,isLoading:u,error:x}=E({queryKey:["favoriteIds",null==e?void 0:e.id],queryFn:()=>ws.getUserFavoritesWithStatus(),enabled:!!e,staleTime:12e4,gcTime:3e5});p.useEffect((()=>{m&&a(m)}),[m]);const h=_({mutationFn:s=>d(null,null,(function*(){if(!e)throw Error("Vous devez Ãªtre connectÃ© pour ajouter aux favoris");const t=yield ws.toggleFavorite(s);return c(o({},t),{listingId:s})})),onMutate:r=>d(null,null,(function*(){yield s.cancelQueries(["favorites",null==e?void 0:e.id]),yield s.cancelQueries(["favoriteIds",null==e?void 0:e.id]);const i=s.getQueryData(["favorites",null==e?void 0:e.id]),n=s.getQueryData(["favoriteIds",null==e?void 0:e.id]),l=new Set(t);return l.has(r)?l.delete(r):l.add(r),a(l),s.setQueryData(["favoriteIds",null==e?void 0:e.id],l),{previousFavorites:i,previousIds:n,listingId:r}})),onSuccess:(t,a)=>{s.invalidateQueries(["favorites",null==e?void 0:e.id]),s.invalidateQueries(["favoriteIds",null==e?void 0:e.id]),s.invalidateQueries(["listings"]),s.invalidateQueries(["userStats"])},onError:(t,r,i)=>{(null==i?void 0:i.previousIds)&&(a(i.previousIds),s.setQueryData(["favoriteIds",null==e?void 0:e.id],i.previousIds))}}),g=e=>t.has(e),j=e=>{h.mutate(e)};return{favorites:r||[],favoriteIds:t,isLoading:i||u,error:n||x,isToggling:h.isLoading,isFavorite:g,toggleFavorite:j,addToFavorites:e=>{g(e)||j(e)},removeFromFavorites:e=>{g(e)&&j(e)},refreshFavorites:()=>{l()},totalFavorites:(null==r?void 0:r.length)||0,toggleFavoriteMutation:h}})(),w=(e,s)=>{h((t=>c(o({},t),{[e]:s})))},k=()=>{h({search:"",location:"",type:"",minPrice:"",maxPrice:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-green-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur de l'",m.jsx("span",{className:"gradient-text-emerald",children:"Immobilier"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Appartements, maisons, terrains et locaux commerciaux. Trouvez votre prochaine propriÃ©tÃ© ou investissement ici."})]}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ce,{id:"search",type:"text",placeholder:"Entrez une ville, quartier, mots-clÃ©s...",value:x.search,onChange:e=>w("search",e.target.value),className:"pl-10"}),m.jsx(ge,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Ce,{id:"location",type:"text",placeholder:"Ville, rÃ©gion...",value:x.location,onChange:e=>w("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"minPrice",className:"block text-sm font-medium mb-1",children:"Prix min"}),m.jsx(Ce,{id:"minPrice",type:"number",placeholder:"0",value:x.minPrice,onChange:e=>w("minPrice",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"maxPrice",className:"block text-sm font-medium mb-1",children:"Prix max"}),m.jsx(Ce,{id:"maxPrice",type:"number",placeholder:"âˆ",value:x.maxPrice,onChange:e=>w("maxPrice",e.target.value)})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ie,{type:"submit",className:"flex-1",children:[m.jsx(ge,{className:"mr-2 h-4 w-4"}),"Rechercher"]}),m.jsx(ie,{type:"button",variant:"outline",onClick:k,children:m.jsx(bs,{className:"h-4 w-4"})})]})]})}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"text-center mb-12",children:m.jsx(ie,{onClick:()=>{s(e?"/creer-annonce/real-estate":"/connexion")},size:"lg",className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",children:"Publier une annonce immobiliÃ¨re"})}),j&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des annonces..."})]}),v&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:v}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ie,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ie,{onClick:()=>window.location.reload(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!j&&g.length>0&&m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:g.map(((e,s)=>m.jsx(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(_a,{listing:e,onToggleFavorite:y})},e.id)))}),!j&&!v&&0===g.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸ "}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce trouvÃ©e"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucune annonce immobiliÃ¨re ne correspond Ã  vos critÃ¨res de recherche."}),m.jsx(ie,{onClick:k,variant:"outline",children:"Effacer les filtres"})]}),b&&g.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ie,{onClick:N,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:j,children:j?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus d'annonces ",m.jsx(ze,{className:"ml-2 h-5 w-5"})]})})}),g.length>0&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[g.length," annonce",g.length>1?"s":""," immobiliÃ¨re",g.length>1?"s":""," trouvÃ©e",g.length>1?"s":""]})})]})})},La=()=>{const{user:e}=ae(),s=f(),t=u(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",l=a.get("location")||"",d=a.get("brand")||"",[x,h]=p.useState({search:r,location:l,brand:d,minPrice:i,maxPrice:n,year:"",fuel:""}),{listings:g,loading:j,error:v,hasMore:b,loadMore:N,toggleFavorite:y}=wa("automobile",x),w=(e,s)=>{h((t=>c(o({},t),{[e]:s})))},k=()=>{h({search:"",location:"",brand:"",minPrice:"",maxPrice:"",year:"",fuel:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-blue-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur de l'",m.jsx("span",{className:"gradient-text-blue",children:"Automobile"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Voitures, motos, utilitaires et piÃ¨ces dÃ©tachÃ©es. Trouvez votre prochain vÃ©hicule ou vendez le vÃ´tre ici."})]}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ce,{id:"search",type:"text",placeholder:"Marque, modÃ¨le, mots-clÃ©s...",className:"pl-10 h-12 text-base",value:x.search,onChange:e=>w("search",e.target.value)}),m.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Ce,{id:"location",type:"text",placeholder:"Ville, rÃ©gion...",className:"h-12 text-base",value:x.location,onChange:e=>w("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"brand",className:"block text-sm font-medium mb-1",children:"Marque"}),m.jsxs("select",{id:"brand",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:x.brand,onChange:e=>w("brand",e.target.value),children:[m.jsx("option",{value:"",children:"Toutes marques"}),m.jsx("option",{value:"Toyota",children:"Toyota"}),m.jsx("option",{value:"Peugeot",children:"Peugeot"}),m.jsx("option",{value:"Renault",children:"Renault"}),m.jsx("option",{value:"CitroÃ«n",children:"CitroÃ«n"}),m.jsx("option",{value:"Ford",children:"Ford"}),m.jsx("option",{value:"Volkswagen",children:"Volkswagen"}),m.jsx("option",{value:"BMW",children:"BMW"}),m.jsx("option",{value:"Mercedes",children:"Mercedes"}),m.jsx("option",{value:"Audi",children:"Audi"}),m.jsx("option",{value:"Honda",children:"Honda"}),m.jsx("option",{value:"Nissan",children:"Nissan"}),m.jsx("option",{value:"Hyundai",children:"Hyundai"}),m.jsx("option",{value:"Kia",children:"Kia"}),m.jsx("option",{value:"Autre",children:"Autre"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"year",className:"block text-sm font-medium mb-1",children:"AnnÃ©e"}),m.jsxs("select",{id:"year",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:x.year,onChange:e=>w("year",e.target.value),children:[m.jsx("option",{value:"",children:"Toutes annÃ©es"}),Array.from({length:25},((e,s)=>2024-s)).map((e=>m.jsx("option",{value:e,children:e},e)))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"fuel",className:"block text-sm font-medium mb-1",children:"Carburant"}),m.jsxs("select",{id:"fuel",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:x.fuel,onChange:e=>w("fuel",e.target.value),children:[m.jsx("option",{value:"",children:"Tous carburants"}),m.jsx("option",{value:"essence",children:"Essence"}),m.jsx("option",{value:"diesel",children:"Diesel"}),m.jsx("option",{value:"hybride",children:"Hybride"}),m.jsx("option",{value:"electrique",children:"Ã‰lectrique"}),m.jsx("option",{value:"gpl",children:"GPL"})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ie,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[m.jsx(bs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),m.jsx(ie,{type:"button",variant:"outline",className:"h-12 px-3",onClick:k,children:"Effacer"})]})]})}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:m.jsx(ie,{onClick:()=>{s(e?"/creer-annonce/automobile":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"ğŸš— Publier une annonce automobile"})}),j&&0===g.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin text-primary mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des vÃ©hicules..."})]}),v&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:v}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ie,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ie,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!j&&g.length>0&&m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:g.map(((e,s)=>m.jsx(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(_a,{listing:e,onToggleFavorite:y})},e.id)))}),!j&&!v&&0===g.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸš—"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun vÃ©hicule trouvÃ©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun vÃ©hicule ne correspond Ã  vos critÃ¨res de recherche."}),m.jsx(ie,{onClick:k,variant:"outline",children:"Effacer les filtres"})]}),b&&g.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ie,{onClick:N,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:j,children:j?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus de vÃ©hicules ",m.jsx(ze,{className:"ml-2 h-5 w-5"})]})})}),g.length>0&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[g.length," vÃ©hicule",g.length>1?"s":""," trouvÃ©",g.length>1?"s":""]})})]})})},Da=()=>{const{user:e}=ae(),s=f(),t=u(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("search")||"",i=a.get("minPrice")||"",n=a.get("maxPrice")||"",l=a.get("location")||"",[d,x]=p.useState({search:r,location:l,serviceType:"",minPrice:i,maxPrice:n}),{listings:h,loading:g,error:j,hasMore:v,loadMore:b,toggleFavorite:N}=wa("services",d),y=(e,s)=>{x((t=>c(o({},t),{[e]:s})))},w=()=>{x({search:"",location:"",serviceType:"",minPrice:"",maxPrice:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-purple-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur des ",m.jsx("span",{className:"gradient-text-purple",children:"Services"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Plomberie, Ã©lectricitÃ©, cours particuliers, Ã©vÃ©nementiel et bien plus. Trouvez le service dont vous avez besoin."})]}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ce,{id:"search",type:"text",placeholder:"Type de service, mots-clÃ©s...",className:"pl-10 h-12 text-base",value:d.search,onChange:e=>y("search",e.target.value)}),m.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Ce,{id:"location",type:"text",placeholder:"Ville, quartier...",className:"h-12 text-base",value:d.location,onChange:e=>y("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"service-type",className:"block text-sm font-medium mb-1",children:"Type de service"}),m.jsxs("select",{id:"service-type",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:d.serviceType,onChange:e=>y("serviceType",e.target.value),children:[m.jsx("option",{value:"",children:"Tous services"}),m.jsx("option",{value:"plomberie",children:"Plomberie"}),m.jsx("option",{value:"electricite",children:"Ã‰lectricitÃ©"}),m.jsx("option",{value:"menage",children:"MÃ©nage"}),m.jsx("option",{value:"jardinage",children:"Jardinage"}),m.jsx("option",{value:"education",children:"Ã‰ducation"}),m.jsx("option",{value:"informatique",children:"Informatique"}),m.jsx("option",{value:"coiffure",children:"Coiffure"}),m.jsx("option",{value:"beaute",children:"BeautÃ©"}),m.jsx("option",{value:"evenementiel",children:"Ã‰vÃ©nementiel"}),m.jsx("option",{value:"transport",children:"Transport"}),m.jsx("option",{value:"reparation",children:"RÃ©paration"}),m.jsx("option",{value:"conseil",children:"Conseil"}),m.jsx("option",{value:"autre",children:"Autre"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"price-range",className:"block text-sm font-medium mb-1",children:"Prix (FCFA)"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ce,{type:"number",placeholder:"Min",className:"h-12 text-base",value:d.minPrice,onChange:e=>y("minPrice",e.target.value)}),m.jsx(Ce,{type:"number",placeholder:"Max",className:"h-12 text-base",value:d.maxPrice,onChange:e=>y("maxPrice",e.target.value)})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ie,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[m.jsx(bs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),m.jsx(ie,{type:"button",variant:"outline",className:"h-12 px-3",onClick:w,children:"Effacer"})]})]})}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:m.jsx(ie,{onClick:()=>{s(e?"/creer-annonce/services":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"ğŸ”§ Proposer un service"})}),g&&0===h.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin text-primary mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des services..."})]}),j&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:j}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ie,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ie,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!g&&h.length>0&&m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:h.map(((e,s)=>m.jsx(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(_a,{listing:e,onToggleFavorite:N})},e.id)))}),!g&&!j&&0===h.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”§"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun service trouvÃ©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun service ne correspond Ã  vos critÃ¨res de recherche."}),m.jsx(ie,{onClick:w,variant:"outline",children:"Effacer les filtres"})]}),v&&h.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ie,{onClick:b,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:g,children:g?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus de services ",m.jsx(ze,{className:"ml-2 h-5 w-5"})]})})}),h.length>0&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[h.length," service",h.length>1?"s":""," trouvÃ©",h.length>1?"s":""]})})]})})},Ta=()=>{const{user:e}=ae(),s=f(),t=u(),a=p.useMemo((()=>new URLSearchParams(t.search)),[t.search]),r=a.get("sort")||"",i=parseInt(a.get("per")||"12",10),n=a.get("search")||"",l=a.get("minPrice")||"",d=a.get("maxPrice")||"",x=a.get("location")||"",[h,g]=p.useState({search:n,location:x,category:"",minPrice:l,maxPrice:d,condition:"",sort:r,per:isNaN(i)?12:Math.min(Math.max(i,6),48)}),{listings:j,loading:v,error:b,hasMore:N,loadMore:y,toggleFavorite:w}=wa("marketplace",h);p.useMemo((()=>"popular"===h.sort?[...j].sort(((e,s)=>((null==s?void 0:s.views_count)||0)-((null==e?void 0:e.views_count)||0))):j),[h.sort,j]);const k=(e,s)=>{g((t=>c(o({},t),{[e]:s})))},C=()=>{g({search:"",location:"",category:"",minPrice:"",maxPrice:"",condition:""})};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-orange-900/10 text-foreground py-12",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:["Le Meilleur ",m.jsx("span",{className:"gradient-text-orange",children:"Marketplace"})," en Afrique de l'Ouest"]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"TÃ©lÃ©phones, vÃªtements, meubles, livres et bien plus. Achetez et vendez en toute sÃ©curitÃ©."})]}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-card p-6 rounded-xl shadow-xl mb-12 glassmorphic-card",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault()},className:"grid grid-cols-1 md:grid-cols-7 gap-4 items-end",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"search",className:"block text-sm font-medium mb-1",children:"Recherche"}),m.jsxs("div",{className:"relative",children:[m.jsx(Ce,{id:"search",type:"text",placeholder:"Produit, marque, mots-clÃ©s...",className:"pl-10 h-12 text-base",value:h.search,onChange:e=>k("search",e.target.value)}),m.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Localisation"}),m.jsx(Ce,{id:"location",type:"text",placeholder:"Ville, quartier...",className:"h-12 text-base",value:h.location,onChange:e=>k("location",e.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"CatÃ©gorie"}),m.jsxs("select",{id:"category",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:h.category,onChange:e=>k("category",e.target.value),children:[m.jsx("option",{value:"",children:"Toutes catÃ©gories"}),m.jsx("option",{value:"telephonie",children:"TÃ©lÃ©phonie"}),m.jsx("option",{value:"informatique",children:"Informatique"}),m.jsx("option",{value:"vetements",children:"VÃªtements"}),m.jsx("option",{value:"chaussures",children:"Chaussures"}),m.jsx("option",{value:"accessoires",children:"Accessoires"}),m.jsx("option",{value:"mobilier",children:"Mobilier"}),m.jsx("option",{value:"electromenager",children:"Ã‰lectromÃ©nager"}),m.jsx("option",{value:"livres",children:"Livres"}),m.jsx("option",{value:"sport",children:"Sport"}),m.jsx("option",{value:"beaute",children:"BeautÃ©"}),m.jsx("option",{value:"jouets",children:"Jouets"}),m.jsx("option",{value:"bricolage",children:"Bricolage"}),m.jsx("option",{value:"jardinage",children:"Jardinage"}),m.jsx("option",{value:"autre",children:"Autre"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium mb-1",children:"Ã‰tat"}),m.jsxs("select",{id:"condition",className:"w-full h-12 rounded-md border border-input bg-transparent px-3 py-2 text-base ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",value:h.condition,onChange:e=>k("condition",e.target.value),children:[m.jsx("option",{value:"",children:"Tous Ã©tats"}),m.jsx("option",{value:"neuf",children:"Neuf"}),m.jsx("option",{value:"excellent",children:"Excellent"}),m.jsx("option",{value:"bon",children:"Bon"}),m.jsx("option",{value:"moyen",children:"Moyen"}),m.jsx("option",{value:"usage",children:"Usage"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"price-range",className:"block text-sm font-medium mb-1",children:"Prix (FCFA)"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ce,{type:"number",placeholder:"Min",className:"h-12 text-base",value:h.minPrice,onChange:e=>k("minPrice",e.target.value)}),m.jsx(Ce,{type:"number",placeholder:"Max",className:"h-12 text-base",value:h.maxPrice,onChange:e=>k("maxPrice",e.target.value)})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ie,{type:"submit",className:"h-12 text-base flex-1 bg-primary hover:bg-primary/90",children:[m.jsx(bs,{className:"mr-2 h-5 w-5"})," Rechercher"]}),m.jsx(ie,{type:"button",variant:"outline",className:"h-12 px-3",onClick:C,children:"Effacer"})]})]})}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-8 text-center",children:m.jsx(ie,{onClick:()=>{s(e?"/creer-annonce/marketplace":"/connexion")},size:"lg",className:"bg-primary hover:bg-primary/90 text-white px-8 py-3",children:"ğŸ›ï¸ Vendre un produit"})}),v&&0===j.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(re,{className:"h-12 w-12 animate-spin text-primary mb-4"}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"Chargement des produits..."})]}),b&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-20",children:[m.jsx(ls,{className:"h-12 w-12 text-destructive mb-4"}),m.jsx("p",{className:"text-lg text-destructive mb-2",children:"Erreur lors du chargement"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:b}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ie,{onClick:()=>window.location.reload(),className:"mt-4",children:"Recharger la page"}),m.jsx(ie,{onClick:()=>refresh(),variant:"outline",className:"mt-4",children:"RÃ©essayer"})]})]}),!v&&j.length>0&&m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 lg:gap-8",children:j.map(((e,s)=>m.jsx(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*s},children:m.jsx(_a,{listing:e,onToggleFavorite:w})},e.id)))}),!v&&!b&&0===j.length&&m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸ›ï¸"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucun produit trouvÃ©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Aucun produit ne correspond Ã  vos critÃ¨res de recherche."}),m.jsx(ie,{onClick:C,variant:"outline",children:"Effacer les filtres"})]}),N&&j.length>0&&m.jsx("div",{className:"text-center mt-16",children:m.jsx(ie,{onClick:y,size:"lg",variant:"ghost",className:"text-primary hover:text-primary/90",disabled:v,children:v?m.jsxs(m.Fragment,{children:[m.jsx(re,{className:"mr-2 h-5 w-5 animate-spin"}),"Chargement..."]}):m.jsxs(m.Fragment,{children:["Charger plus de produits ",m.jsx(ze,{className:"ml-2 h-5 w-5"})]})})}),j.length>0&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mt-16 text-center",children:m.jsxs("p",{className:"text-muted-foreground",children:[j.length," produit",j.length>1?"s":""," trouvÃ©",j.length>1?"s":""]})})]})})},Ia=()=>{const e=f(),[s,t]=p.useState([]),[a,r]=p.useState(!0),[i,n]=p.useState(null),[l,u]=p.useState(1),[x,h]=p.useState(1),[g,j]=p.useState(!1),[v,b]=p.useState({category:"",minPrice:"",maxPrice:"",location:"",search:""}),N=(...e)=>d(null,[...e],(function*(e=1,s=v){try{r(!0),n(null);const a=yield ys.getPremiumListings(100,!0);if(null==a?void 0:a.data){let r=a.data;s.category&&(r=r.filter((e=>e.category===s.category))),s.minPrice&&(r=r.filter((e=>e.price>=parseFloat(s.minPrice)))),s.maxPrice&&(r=r.filter((e=>e.price<=parseFloat(s.maxPrice)))),s.location&&(r=r.filter((e=>{var t,a,r,i;return(null==(a=null==(t=e.location)?void 0:t.city)?void 0:a.toLowerCase().includes(s.location.toLowerCase()))||(null==(i=null==(r=e.location)?void 0:r.country)?void 0:i.toLowerCase().includes(s.location.toLowerCase()))}))),s.search&&(r=r.filter((e=>e.title.toLowerCase().includes(s.search.toLowerCase())||e.description.toLowerCase().includes(s.search.toLowerCase()))));const i=12,n=r.length,l=Math.ceil(n/i),o=(e-1)*i,c=o+i,d=r.slice(o,c);t(d),h(l),j(l>e),u(e)}}catch(a){n((null==a?void 0:a.message)||"Erreur lors du chargement des annonces premium")}finally{r(!1)}}));p.useEffect((()=>{N(1,v)}),[]);const y=(e,s)=>{const t=c(o({},v),{[e]:s});b(t),u(1),N(1,t)},w=()=>{const e={category:"",minPrice:"",maxPrice:"",location:"",search:""};b(e),N(1,e)},k=e=>{1>e||e>x||N(e,v)};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-900 to-blue-900/20",children:[m.jsx(Vt.section,{className:"relative py-16 md:py-24 bg-gradient-to-r from-amber-500/10 via-yellow-500/10 to-orange-500/10",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[m.jsx("div",{className:"flex items-center mb-6",children:m.jsxs(ie,{variant:"ghost",onClick:()=>e(-1),className:"mr-4 hover:bg-amber-100",children:[m.jsx($s,{className:"h-5 w-5 mr-2"}),"Retour"]})}),m.jsxs(Vt.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[m.jsxs("div",{className:"flex justify-center items-center mb-6",children:[m.jsx(Xs,{className:"h-16 w-16 text-amber-500 mr-4"}),m.jsx(ts,{className:"h-12 w-12 text-yellow-500"})]}),m.jsxs("h1",{className:"text-4xl md:text-6xl font-bold mb-6",children:["Annonces ",m.jsx("span",{className:"gradient-text",children:"Premium"})]}),m.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground max-w-3xl mx-auto mb-8",children:"DÃ©couvrez notre sÃ©lection exclusive d'annonces premium. QualitÃ© garantie, visibilitÃ© maximale."}),m.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mb-8",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-amber-100 text-amber-800 border-amber-300",children:[m.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Mise en avant garantie"]}),m.jsxs(Xe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[m.jsx(ts,{className:"h-4 w-4 mr-2"}),"QualitÃ© premium"]}),m.jsxs(Xe,{variant:"secondary",className:"bg-orange-100 text-orange-800 border-orange-300",children:[m.jsx(Xs,{className:"h-4 w-4 mr-2"}),"Support prioritaire"]})]})]})]})}),m.jsx("section",{className:"py-8 bg-background/50",children:m.jsx("div",{className:"container mx-auto px-4 md:px-6",children:m.jsx(Vt.div,{className:"bg-card rounded-xl p-6 shadow-lg border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:m.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("form",{onSubmit:e=>{e.preventDefault(),N(1,v)},className:"relative",children:[m.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),m.jsx(Ce,{type:"text",placeholder:"Rechercher dans les annonces premium...",value:v.search,onChange:e=>y("search",e.target.value),className:"pl-10 pr-4 py-3"})]})}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsxs("select",{value:v.category,onChange:e=>y("category",e.target.value),className:"px-4 py-2 border border-border rounded-lg bg-background focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[m.jsx("option",{value:"",children:"Toutes catÃ©gories"}),[{value:"real_estate",label:"ğŸ  Immobilier",color:"bg-blue-100 text-blue-800"},{value:"automobile",label:"ğŸš— Automobile",color:"bg-green-100 text-green-800"},{value:"services",label:"ğŸ”§ Services",color:"bg-purple-100 text-purple-800"},{value:"marketplace",label:"ğŸ›ï¸ Marketplace",color:"bg-orange-100 text-orange-800"}].map((e=>m.jsx("option",{value:e.value,children:e.label},e.value)))]}),m.jsx(Ce,{type:"number",placeholder:"Prix min",value:v.minPrice,onChange:e=>y("minPrice",e.target.value),className:"w-32"}),m.jsx(Ce,{type:"number",placeholder:"Prix max",value:v.maxPrice,onChange:e=>y("maxPrice",e.target.value),className:"w-32"}),m.jsx(Ce,{type:"text",placeholder:"Localisation",value:v.location,onChange:e=>y("location",e.target.value),className:"w-40"}),m.jsxs(ie,{variant:"outline",onClick:w,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),"Effacer"]})]})]})})})}),m.jsx("section",{className:"py-16",children:m.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[i&&m.jsx(Vt.div,{className:"text-center text-destructive mb-8 p-4 bg-destructive/10 rounded-lg",initial:{opacity:0},animate:{opacity:1},children:i}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a?Array.from({length:9}).map(((e,s)=>m.jsxs(Vt.div,{className:"bg-card rounded-lg shadow-lg overflow-hidden border border-border",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:[m.jsx("div",{className:"h-48 bg-muted animate-pulse"}),m.jsxs("div",{className:"p-4",children:[m.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-3 animate-pulse"}),m.jsx("div",{className:"h-4 w-1/2 bg-muted rounded mb-4 animate-pulse"}),m.jsx("div",{className:"h-8 w-1/3 bg-muted rounded animate-pulse"})]})]},s))):s.length>0?s.map(((e,s)=>m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:m.jsx(_a,{listing:e,showActions:!1})},e.id))):m.jsxs(Vt.div,{className:"col-span-full text-center py-16",initial:{opacity:0},animate:{opacity:1},children:[m.jsx("div",{className:"text-6xl mb-4",children:"â­"}),m.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Aucune annonce premium trouvÃ©e"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Essayez de modifier vos filtres ou revenez plus tard"}),m.jsx(ie,{onClick:w,variant:"outline",className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Effacer les filtres"})]})}),!a&&x>1&&m.jsxs(Vt.div,{className:"flex justify-center items-center mt-12 gap-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[m.jsx(ie,{variant:"outline",onClick:()=>k(l-1),disabled:1===l,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"PrÃ©cÃ©dent"}),Array.from({length:x},((e,s)=>s+1)).map((e=>m.jsx(ie,{variant:l===e?"default":"outline",onClick:()=>k(e),className:l===e?"bg-amber-500 hover:bg-amber-600":"border-amber-300 text-amber-700 hover:bg-amber-100",children:e},e))),m.jsx(ie,{variant:"outline",onClick:()=>k(l+1),disabled:l===x,className:"border-amber-300 text-amber-700 hover:bg-amber-100",children:"Suivant"})]}),!a&&s.length>0&&m.jsx(Vt.div,{className:"text-center mt-8 text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:m.jsxs("p",{children:["Affichage de ",s.length," annonces premium",x>1&&` (page ${l} sur ${x})`]})})]})})]})},Ra=[{value:"real_estate",label:"Immobilier"},{value:"automobile",label:"Automobile"},{value:"services",label:"Service"},{value:"marketplace",label:"Produit"}],Va={title:"",description:"",price:"",currency:"XOF",category:"",subCategory:"",location:{city:"",country:""},images:[],videos:[],specificData:{}},Oa=({onSuccess:e,category:s,onDataChange:t,currentStep:a=1,onStepChange:r})=>{const{toast:i}=Me(),[n,l]=p.useState(c(o({},Va),{category:s?(u=s,{"real-estate":"real_estate",automobile:"automobile",services:"services",marketplace:"marketplace"}[u]||""):""}));var u;const[x,h]=p.useState(!1),[g,j]=p.useState(!1),[v,f]=p.useState({current:0,total:0}),[b,N]=p.useState(a);p.useEffect((()=>{N(a)}),[a]);const y=[{code:"BJ",name:"BÃ©nin",cities:["Cotonou","Porto-Novo","Parakou","Djougou","Bohicon","Kandi","Abomey","Natitingou","Ouidah","Lokossa"]},{code:"CI",name:"CÃ´te d'Ivoire",cities:["Abidjan","BouakÃ©","Daloa","Yamoussoukro","San Pedro","Korhogo","Man","Gagnoa","Abengourou","Divo"]},{code:"NG",name:"Nigeria",cities:["Lagos","Kano","Ibadan","Abuja","Port Harcourt","Benin City","Maiduguri","Zaria","Aba","Jos"]}],w=e=>{const{name:s,value:a}=e.target;if(s.startsWith("location.")){const e=s.split(".")[1];l((s=>c(o({},s),{location:c(o({},s.location),{[e]:a})})))}else l((e=>c(o({},e),{[s]:a})));t&&t({[s]:a})},k=e=>{const{name:s,value:t}=e.target;l((e=>c(o({},e),{specificData:c(o({},e.specificData),{[s]:t})})))},C=e=>new Promise((s=>{const t=new FileReader;t.onload=t=>{s({url:t.target.result,file:e,id:Date.now()+Math.random()})},t.readAsDataURL(e)})),S=e=>d(null,null,(function*(){const s=Array.from(e.target.files);if(s.length)if(n.images.length+s.length>8)i({title:"Limite atteinte",description:"Vous pouvez uploader jusqu'Ã  8 images maximum.",variant:"destructive"});else if(s.filter((e=>!e.type.startsWith("image/"))).length>0)i({title:"Type de fichier invalide",description:"Seules les images sont acceptÃ©es.",variant:"destructive"});else{j(!0),f({current:0,total:s.length});try{const e=yield Promise.all(s.map(C)),a=[...n.images,...e.map((e=>({url:e.url,isPreview:!0,id:e.id,file:e.file})))];l((e=>c(o({},e),{images:a}))),t&&t({images:a});const r=yield Promise.all(s.map((e=>((e,s=1920,t=.8)=>new Promise((a=>{const r=document.createElement("canvas"),i=r.getContext("2d"),n=new Image;n.onload=()=>{let{width:l,height:o}=n;l>s&&(o=o*s/l,l=s),r.width=l,r.height=o,i.drawImage(n,0,0,l,o),r.toBlob((s=>{const t=new File([s],e.name,{type:"image/jpeg",lastModified:Date.now()});a(t)}),"image/jpeg",t)},n.src=URL.createObjectURL(e)})))(e,1920,.8)))),m=(e,s)=>d(null,null,(function*(){const t=e.slice(s,s+3);return Promise.all(t.map(((t,a)=>d(null,null,(function*(){const r=s+a;try{const s=yield Hs.uploadImage(t,"listings");return f({current:r+1,total:e.length}),{success:!0,url:s,index:r}}catch(i){return f({current:r+1,total:e.length}),{success:!1,error:i.message,index:r}}})))))})),u=[];for(let s=0;s<r.length;s+=3){const e=yield m(r,s);u.push(...e)}const x=u.filter((e=>e.success)),h=u.filter((e=>!e.success));if(x.length>0){const s=[...a];x.forEach((({url:t,index:a})=>{const r=s.findIndex((s=>s.isPreview&&s.id===e[a].id));-1!==r&&(s[r]={url:t,isPreview:!1})})),l((e=>c(o({},e),{images:s}))),t&&t({images:s}),i({title:"Images ajoutÃ©es",description:x.length+" image(s) tÃ©lÃ©chargÃ©e(s) avec succÃ¨s."})}h.length>0&&i({title:"Erreurs d'upload",description:`Erreurs pour ${h.length} fichier(s): ${h.map((e=>e.error)).join(", ")}`,variant:"destructive"})}catch(a){i({title:"Erreur upload",description:(null==a?void 0:a.message)||"Erreur lors de l'upload.",variant:"destructive"})}finally{j(!1),f({current:0,total:0})}}})),z=()=>{switch(n.category){case"real_estate":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"propertyType",children:"Type de bien immobilier"}),m.jsx(Ce,{id:"propertyType",name:"propertyType",placeholder:"Ex: Appartement, Maison, Terrain, Local commercial...",value:n.specificData.propertyType||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"transactionType",children:"Type de transaction"}),m.jsx(Ce,{id:"transactionType",name:"transactionType",placeholder:"Ex: Vente, Location, Location-vente...",value:n.specificData.transactionType||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"bedrooms",children:"Nombre de chambres"}),m.jsx(Ce,{id:"bedrooms",name:"bedrooms",type:"number",placeholder:"Ex: 3",min:"0",value:n.specificData.bedrooms||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"bathrooms",children:"Nombre de salles de bain"}),m.jsx(Ce,{id:"bathrooms",name:"bathrooms",type:"number",placeholder:"Ex: 2",min:"0",value:n.specificData.bathrooms||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"areaSqMeters",children:"Surface en mÃ¨tres carrÃ©s"}),m.jsx(Ce,{id:"areaSqMeters",name:"areaSqMeters",type:"number",placeholder:"Ex: 120",min:"1",value:n.specificData.areaSqMeters||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{children:"CommoditÃ©s et Ã©quipements"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ajoutez les commoditÃ©s disponibles (piscine, parking, climatisation, etc.)"}),(n.specificData.amenities||[]).map(((e,s)=>m.jsxs("div",{className:"flex gap-2 mb-1",children:[m.jsx(Ce,{value:e,onChange:e=>_(s,e.target.value),placeholder:"Ex: Piscine, Parking, Climatisation..."}),m.jsx(ie,{type:"button",size:"icon",variant:"destructive",onClick:()=>q(s),title:"Supprimer",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Ã—"})]},s))),m.jsx(ie,{type:"button",size:"sm",variant:"outline",onClick:E,className:"mb-2 border-gray-400 text-gray-700 hover:bg-gray-50",children:"+ Ajouter une commoditÃ©"})]})]});case"automobile":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"vehicleType",children:"Type de vÃ©hicule"}),m.jsx(Ce,{id:"vehicleType",name:"vehicleType",placeholder:"Ex: Voiture, Moto, Camion, Bus...",value:n.specificData.vehicleType||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"make",children:"Marque du vÃ©hicule"}),m.jsx(Ce,{id:"make",name:"make",placeholder:"Ex: Toyota, Honda, BMW...",value:n.specificData.make||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"model",children:"ModÃ¨le du vÃ©hicule"}),m.jsx(Ce,{id:"model",name:"model",placeholder:"Ex: Corolla, Civic, X5...",value:n.specificData.model||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"year",children:"AnnÃ©e de fabrication"}),m.jsx(Ce,{id:"year",name:"year",type:"number",placeholder:"Ex: 2020",min:"1900",max:(new Date).getFullYear()+1,value:n.specificData.year||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"mileage",children:"KilomÃ©trage en km"}),m.jsx(Ce,{id:"mileage",name:"mileage",type:"number",placeholder:"Ex: 50000",min:"0",value:n.specificData.mileage||"",onChange:k})]})]});case"services":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"serviceCategory",children:"CatÃ©gorie de service"}),m.jsx(Ce,{id:"serviceCategory",name:"serviceCategory",placeholder:"Ex: Plomberie, Ã‰lectricitÃ©, Design, Formation...",value:n.specificData.serviceCategory||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"availability",children:"DisponibilitÃ©"}),m.jsx(Ce,{id:"availability",name:"availability",placeholder:"Ex: Lundi-Vendredi 9h-18h, Weekends...",value:n.specificData.availability||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"experienceYears",children:"AnnÃ©es d'expÃ©rience"}),m.jsx(Ce,{id:"experienceYears",name:"experienceYears",type:"number",placeholder:"Ex: 5",min:"0",value:n.specificData.experienceYears||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{children:"Liens de portfolio et rÃ©fÃ©rences"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Ajoutez des liens vers vos rÃ©alisations, portfolio ou rÃ©fÃ©rences"}),(n.specificData.portfolioLinks||[]).map(((e,s)=>m.jsxs("div",{className:"flex gap-2 mb-1",children:[m.jsx(Ce,{value:e,onChange:e=>A(s,e.target.value),placeholder:"https://votre-portfolio.com ou lien vers vos rÃ©alisations..."}),m.jsx(ie,{type:"button",size:"icon",variant:"destructive",onClick:()=>M(s),title:"Supprimer",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Ã—"})]},s))),m.jsx(ie,{type:"button",size:"sm",variant:"outline",onClick:P,className:"mb-2 border-gray-400 text-gray-700 hover:bg-gray-50",children:"+ Ajouter un lien de portfolio"})]})]});case"marketplace":return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"productCategory",children:"CatÃ©gorie de produit"}),m.jsx(Ce,{id:"productCategory",name:"productCategory",placeholder:"Ex: Ã‰lectronique, VÃªtements, Livres, Sport...",value:n.specificData.productCategory||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"brand",children:"Marque du produit"}),m.jsx(Ce,{id:"brand",name:"brand",placeholder:"Ex: Apple, Nike, Samsung...",value:n.specificData.brand||"",onChange:k})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"stockQuantity",children:"QuantitÃ© disponible en stock"}),m.jsx(Ce,{id:"stockQuantity",name:"stockQuantity",type:"number",placeholder:"Ex: 10",min:"0",value:n.specificData.stockQuantity||"",onChange:k})]})]});default:return null}},A=(e,s)=>{l((t=>{var a;return c(o({},t),{specificData:c(o({},t.specificData),{portfolioLinks:(null==(a=t.specificData.portfolioLinks)?void 0:a.map(((t,a)=>a===e?s:t)))||[]})})}))},P=()=>{l((e=>c(o({},e),{specificData:c(o({},e.specificData),{portfolioLinks:[...e.specificData.portfolioLinks||[],""]})})))},M=e=>{l((s=>{var t;return c(o({},s),{specificData:c(o({},s.specificData),{portfolioLinks:(null==(t=s.specificData.portfolioLinks)?void 0:t.filter(((s,t)=>t!==e)))||[]})})}))},_=(e,s)=>{l((t=>{var a;return c(o({},t),{specificData:c(o({},t.specificData),{amenities:(null==(a=t.specificData.amenities)?void 0:a.map(((t,a)=>a===e?s:t)))||[]})})}))},E=()=>{l((e=>c(o({},e),{specificData:c(o({},e.specificData),{amenities:[...e.specificData.amenities||[],""]})})))},q=e=>{l((s=>{var t;return c(o({},s),{specificData:c(o({},s.specificData),{amenities:(null==(t=s.specificData.amenities)?void 0:t.filter(((s,t)=>t!==e)))||[]})})}))};return m.jsxs("div",{className:"space-y-6",children:[(()=>{var e,s;switch(b){case 1:return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Informations de base"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Commencez par les informations essentielles de votre annonce."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"title",children:"Titre de l'annonce *"}),m.jsx(Ce,{id:"title",name:"title",value:n.title,onChange:w,placeholder:"Ex: Appartement moderne 3 piÃ¨ces Ã  Cotonou",required:!0,className:"h-12"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"description",children:"Description *"}),m.jsx(Js,{id:"description",name:"description",value:n.description,onChange:w,placeholder:"DÃ©crivez votre offre en dÃ©tail...",rows:4,required:!0,className:"max-w-2xl resize-none transition-all duration-200",style:{minHeight:"120px",height:"auto",overflow:"hidden"},onInput:e=>{e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,300)+"px"}})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"category",children:"CatÃ©gorie *"}),m.jsxs("select",{id:"category",name:"category",value:n.category,onChange:w,required:!0,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[m.jsx("option",{value:"",className:"text-foreground",children:"SÃ©lectionner une catÃ©gorie"}),Ra.map((e=>m.jsx("option",{value:e.value,className:"text-foreground",children:e.label},e.value)))]})]})]}),m.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[m.jsx("h4",{className:"text-lg font-medium text-foreground",children:"Prix et localisation"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"price",children:"Prix *"}),m.jsx(Ce,{id:"price",name:"price",type:"number",value:n.price,onChange:w,placeholder:"0",required:!0,className:"h-12"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"currency",children:"Devise"}),m.jsxs("select",{id:"currency",name:"currency",value:n.currency,onChange:w,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[m.jsx("option",{value:"XOF",className:"text-foreground",children:"XOF (Franc CFA)"}),m.jsx("option",{value:"EUR",className:"text-foreground",children:"EUR (Euro)"}),m.jsx("option",{value:"USD",className:"text-foreground",children:"USD (Dollar US)"}),m.jsx("option",{value:"NGN",className:"text-foreground",children:"NGN (Naira)"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"country",children:"Pays"}),m.jsxs("select",{id:"country",name:"location.country",value:n.location.country,onChange:w,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground",children:[m.jsx("option",{value:"",className:"text-foreground",children:"SÃ©lectionner un pays"}),y.map((e=>m.jsx("option",{value:e.name,className:"text-foreground",children:e.name},e.code)))]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"city",children:"Ville"}),m.jsxs("select",{id:"city",name:"location.city",value:n.location.city,onChange:w,required:!0,className:"w-full px-3 py-3 border border-input bg-background rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent h-12 text-foreground disabled:opacity-50 disabled:cursor-not-allowed",disabled:!n.location.country,children:[m.jsx("option",{value:"",className:"text-foreground",children:"SÃ©lectionner une ville"}),null==(s=null==(e=y.find((e=>e.name===n.location.country)))?void 0:e.cities)?void 0:s.map(((e,s)=>m.jsx("option",{value:e,className:"text-foreground",children:e},`${n.location.country||"unknown"}-${e}-${s}`)))]})]})]})]})]});case 2:return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"MÃ©dias et dÃ©tails"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Ajoutez des photos et des informations spÃ©cifiques Ã  votre catÃ©gorie."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"text-lg font-medium text-foreground",children:"Images et mÃ©dias"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"image-upload",children:"SÃ©lectionner des images"}),m.jsxs("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-6 text-center transition-colors "+(g?"border-blue-400 bg-blue-50":"hover:border-primary"),children:[m.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:S,className:"hidden",id:"image-upload",disabled:g}),m.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer "+(g?"cursor-not-allowed":""),children:m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"mx-auto w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:g?m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}):m.jsx(us,{className:"h-6 w-6 text-gray-600"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-gray-900",children:g?"Chargement en cours...":"Cliquez pour ajouter des images"}),m.jsx("p",{className:"text-xs text-gray-600",children:g?`Veuillez patienter (${v.current}/${v.total})`:"PNG, JPG jusqu'Ã  10MB"}),g&&v.total>0&&m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:v.current/v.total*100+"%"}})})]})]})})]})]}),n.images.length>0&&m.jsxs("div",{className:"space-y-3",children:[m.jsxs(Ie,{children:["Images sÃ©lectionnÃ©es (",n.images.length,")"]}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:n.images.map(((e,s)=>m.jsxs("div",{className:"relative group aspect-square",children:[m.jsx("img",{src:e.url,alt:"AperÃ§u "+(s+1),className:"w-full h-full object-cover rounded-lg border "+(e.isPreview?"opacity-70":"")}),e.isPreview&&m.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:m.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg",children:m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})}),m.jsx("button",{type:"button",onClick:()=>{return e=s,void l((s=>{const a=s.images.filter(((s,t)=>t!==e));return t&&t({images:a}),c(o({},s),{images:a})}));var e},className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1.5 text-xs opacity-0 group-hover:opacity-100 transition-opacity shadow-md",title:"Supprimer cette image",disabled:e.isPreview,children:"Ã—"})]},s)))})]})]}),m.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[m.jsx("h4",{className:"text-lg font-medium text-foreground",children:"DÃ©tails spÃ©cifiques Ã  la catÃ©gorie"}),n.category?m.jsx("div",{className:"space-y-4",children:z()}):m.jsx("div",{className:"text-center py-4",children:m.jsx("p",{className:"text-muted-foreground",children:"Veuillez d'abord sÃ©lectionner une catÃ©gorie Ã  l'Ã©tape 1."})})]})]});default:return null}})(),m.jsxs("div",{className:"flex justify-between items-center pt-6 border-t",children:[m.jsx(ie,{type:"button",variant:"outline",onClick:()=>{b>1&&(N(b-1),r&&r(b-1))},disabled:1===b,children:"PrÃ©cÃ©dent"}),m.jsx("div",{className:"flex items-center space-x-2",children:2>b?m.jsx(ie,{type:"button",onClick:()=>{2>b&&(N(b+1),r&&r(b+1))},disabled:!n.title||!n.description||!n.category,children:"Suivant"}):m.jsx(ie,{type:"submit",onClick:s=>d(null,null,(function*(){s.preventDefault();const t=!n.title||5>n.title.length?"Le titre est requis (min 5 caractÃ¨res)":!n.description||10>n.description.length?"La description est requise (min 10 caractÃ¨res)":!n.price||isNaN(+n.price)?"Le prix est requis et doit Ãªtre un nombre":n.category?null:"La catÃ©gorie est requise";if(t)i({title:"Erreur de validation",description:t,variant:"destructive"});else{h(!0);try{const s=n.images.filter((e=>!e.isPreview)).map((e=>e.url)),t=c(o({},n),{images:s,price:+n.price}),a=yield ys.createListing(t);i({title:"Annonce crÃ©Ã©e !",description:"Votre annonce a Ã©tÃ© soumise avec succÃ¨s."}),l(Va),e&&e(a)}catch(a){i({title:"Erreur",description:(null==a?void 0:a.message)||"Erreur lors de la crÃ©ation.",variant:"destructive"})}finally{h(!1)}}})),disabled:x,className:"bg-green-600 hover:bg-green-700",children:x?"Publication...":"Publier l'annonce"})})]})]})},Ba=({formData:e,onClose:s})=>{var t,a;const[r,i]=p.useState(0),[n,l]=p.useState(!1),d=(u=e.category,{real_estate:Qs,automobile:de,services:me,marketplace:ue}[u]||Qs);var u;const x=e.images&&Array.isArray(e.images)?e.images.map((e=>{const s=(t=e)?"string"==typeof t?t:(null==t?void 0:t.url)?t.url:(null==t?void 0:t.file)?URL.createObjectURL(t.file):(null==t?void 0:t.src)?t.src:null:null;var t;return s?c(o({},e),{displayUrl:s}):null})).filter(Boolean):[];return m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:s,children:m.jsxs(Vt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-background rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[m.jsxs("div",{className:"sticky top-0 bg-background border-b border-border px-6 py-4 flex items-center justify-between z-10",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"AperÃ§u de l'annonce"}),(!e.title||!e.description||!e.price)&&m.jsx(Xe,{variant:"outline",className:"text-xs text-yellow-600 border-yellow-600",children:"Preview partiel"})]}),m.jsx(ie,{variant:"ghost",size:"sm",onClick:s,className:"text-muted-foreground hover:text-foreground",children:"âœ•"})]}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"relative aspect-video bg-muted rounded-lg overflow-hidden",children:x.length>0?m.jsxs(m.Fragment,{children:[m.jsx(Ot,{mode:"wait",children:m.jsx(Vt.img,{src:null==(t=x[r])?void 0:t.displayUrl,alt:"Image "+(r+1),className:"w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}},r)}),x.length>1&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>{x.length>0&&i((e=>0===e?x.length-1:e))},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:m.jsx(Je,{className:"h-5 w-5"})}),m.jsx("button",{onClick:()=>{x.length>0&&i((e=>e===x.length-1?0:e+1))},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:m.jsx(He,{className:"h-5 w-5"})})]}),m.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm",children:[r+1," / ",x.length]}),m.jsxs("div",{className:"absolute top-4 left-4 flex space-x-2",children:[m.jsx("button",{onClick:()=>l(!n),className:"p-2 rounded-full transition-all "+(n?"bg-red-500 text-white":"bg-white bg-opacity-80 text-gray-700 hover:bg-opacity-100"),children:m.jsx(cs,{className:"h-5 w-5 "+(n?"fill-current":"")})}),m.jsx("button",{className:"p-2 rounded-full bg-white bg-opacity-80 text-gray-700 hover:bg-opacity-100 transition-all",children:m.jsx(Ts,{className:"h-5 w-5"})})]})]}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(Ws,{className:"h-8 w-8"})}),m.jsx("p",{children:"Aucune image"}),m.jsx("p",{className:"text-xs mt-1",children:"Ajoutez des images Ã  l'Ã©tape 2"})]})})}),x.length>1&&m.jsx("div",{className:"flex space-x-2 mt-4 overflow-x-auto",children:x.map(((e,s)=>m.jsx("button",{onClick:()=>(e=>{e>=0&&e<x.length&&i(e)})(s),className:"flex-shrink-0 w-20 h-16 rounded-lg overflow-hidden border-2 transition-all "+(s===r?"border-primary":"border-border hover:border-primary/50"),children:m.jsx("img",{src:e.displayUrl,alt:"Thumbnail "+(s+1),className:"w-full h-full object-cover"})},s)))})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2",children:[m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-primary/10 text-primary border-primary/20",children:[m.jsx(d,{className:"h-3 w-3 mr-1"}),(e=>({real_estate:"Immobilier",automobile:"Automobile",services:"Service",marketplace:"Produit"}[e]||"Autre"))(e.category)]}),m.jsx(Xe,{variant:"outline",className:"text-green-600 border-green-600",children:"Actif"})]}),m.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:e.title||"Titre de l'annonce (Ã  dÃ©finir)"}),m.jsxs("div",{className:"flex items-center text-muted-foreground text-sm",children:[m.jsx(We,{className:"h-4 w-4 mr-1"}),e.location&&"object"==typeof e.location&&e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non dÃ©finie"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"text-3xl font-bold text-foreground",children:e.price?`${e.price} ${e.currency||"XOF"}`:"Prix Ã  dÃ©finir"}),"real_estate"===e.category&&(null==(a=e.specificData)?void 0:a.areaSqMeters)&&m.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[e.specificData.areaSqMeters," mÂ²"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"Description"}),m.jsx("p",{className:"text-foreground leading-relaxed",children:e.description||"Description Ã  ajouter pour votre annonce."})]}),e.specificData&&Object.keys(e.specificData).length>0&&m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3",children:"DÃ©tails"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:["real_estate"===e.category&&m.jsxs(m.Fragment,{children:[e.specificData.propertyType&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Type:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.propertyType})]}),e.specificData.bedrooms&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Chambres:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.bedrooms})]}),e.specificData.bathrooms&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Salles de bain:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.bathrooms})]}),e.specificData.areaSqMeters&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Surface:"}),m.jsxs("div",{className:"font-medium text-foreground",children:[e.specificData.areaSqMeters," mÂ²"]})]})]}),"automobile"===e.category&&m.jsxs(m.Fragment,{children:[e.specificData.make&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"Marque:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.make})]}),e.specificData.model&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"ModÃ¨le:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.model})]}),e.specificData.year&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"AnnÃ©e:"}),m.jsx("div",{className:"font-medium text-foreground",children:e.specificData.year})]}),e.specificData.mileage&&m.jsxs("div",{children:[m.jsx("span",{className:"text-sm text-muted-foreground",children:"KilomÃ©trage:"}),m.jsxs("div",{className:"font-medium text-foreground",children:[e.specificData.mileage," km"]})]})]})]})]})]}),m.jsx("div",{className:"space-y-4",children:m.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[m.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Images"}),m.jsxs("div",{className:"text-sm text-muted-foreground",children:[m.jsxs("p",{children:["â€¢ ",x.length," image(s) ajoutÃ©e(s)"]}),0===x.length&&m.jsx("p",{className:"text-yellow-600 mt-1",children:"âš ï¸ Aucune image - Ajoutez des images Ã  l'Ã©tape 2"})]})]})})]})]})]})})},Ua=()=>{var e;const s=f(),{category:t,id:a}=N(),{toast:r}=Me(),[i,n]=p.useState(1),[l,c]=p.useState({}),[u,x]=p.useState(!1),[g,j]=p.useState(!1),[v,b]=p.useState(!1);h.useEffect((()=>{var e;a&&(j(!0),e=a,d(null,null,(function*(){try{b(!0);const s=yield ys.getListingById(e);if(s){const e={title:s.title||"",description:s.description||"",price:s.price||"",category:s.category||t,location:s.location||{},images:s.images||[],contact_info:s.contact_info||{},real_estate_details:s.real_estate_details||{},automobile_details:s.automobile_details||{},service_details:s.service_details||{},product_details:s.product_details||{}};c(e),r({title:"Annonce chargÃ©e",description:"Les donnÃ©es de l'annonce ont Ã©tÃ© chargÃ©es avec succÃ¨s."})}}catch(s){r({title:"Erreur",description:"Impossible de charger les donnÃ©es de l'annonce. Veuillez rÃ©essayer.",variant:"destructive"})}finally{b(!1)}})))}),[a]);const y=e=>({"real-estate":"ImmobiliÃ¨re",automobile:"Automobile",services:"de Service",marketplace:"Marketplace"}[e]||""),w={"real-estate":ce,automobile:de,services:me,marketplace:ue}[t]||ce,k=[{id:1,title:"Informations de base",description:"Titre, description, catÃ©gorie, prix et localisation",icon:Ks,completed:!1},{id:2,title:"MÃ©dias et publication",description:"Photos, vidÃ©os, caractÃ©ristiques spÃ©cifiques et publication",icon:us,completed:!1}],C=()=>l.title||l.description||l.price;return m.jsxs("div",{className:"min-h-screen bg-background",children:[m.jsx("div",{className:"bg-background/80 backdrop-blur-sm border-b border-border sticky top-0 z-50",children:m.jsx("div",{className:"container mx-auto px-4 py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs(ie,{variant:"ghost",size:"sm",onClick:()=>s(-1),className:"text-muted-foreground hover:text-foreground",children:[m.jsx($s,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsx("div",{className:"flex items-center space-x-3",children:t&&m.jsxs("div",{className:"flex items-center space-x-2 bg-primary/10 px-3 py-1 rounded-full",children:[m.jsx(w,{className:"h-4 w-4 text-primary"}),m.jsx("span",{className:"text-sm font-medium text-primary",children:y(t)})]})})]}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>x(!u),disabled:!C(),className:C()?"":"opacity-50 cursor-not-allowed",title:C()?"Voir l'aperÃ§u de votre annonce":l.title||l.description||l.price?"AperÃ§u disponible (certaines donnÃ©es peuvent Ãªtre manquantes)":"Commencez Ã  remplir le formulaire pour voir l'aperÃ§u",children:[m.jsx(Ke,{className:"h-4 w-4 mr-2"}),u?"Masquer":"AperÃ§u"]})})]})})}),m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground mb-3",children:g?"Modifier l'annonce":t?"CrÃ©er une annonce "+y(t):"CrÃ©er une annonce"}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:g?v?"Chargement des donnÃ©es de l'annonce...":"Modifiez les informations de votre annonce existante.":"Partagez votre offre avec notre communautÃ©. Remplissez les informations ci-dessous pour publier votre annonce."})]}),m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8",children:[m.jsx("div",{className:"flex items-center justify-center space-x-4",children:k.map(((e,s)=>m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 "+(i<e.id?"bg-card border-border text-muted-foreground":"bg-primary border-primary text-white"),children:i>e.id?m.jsx(os,{className:"h-5 w-5"}):m.jsx(e.icon,{className:"h-5 w-5"})}),s<k.length-1&&m.jsx("div",{className:"w-16 h-0.5 mx-2 "+(i>e.id?"bg-primary":"bg-border")})]},e.id)))}),m.jsx("div",{className:"text-center mt-4",children:m.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ã‰tape ",i," sur ",k.length," : ",null==(e=k[i-1])?void 0:e.title]})})]}),u&&m.jsx(Ba,{formData:l,onClose:()=>x(!1)}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsx(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:m.jsx(qe,{className:"shadow-lg border-0",children:m.jsx(Te,{className:"p-6",children:m.jsx(Oa,{onSuccess:e=>{(null==e?void 0:e.id)?s("/profile",{state:{message:g?"Annonce modifiÃ©e avec succÃ¨s ! Les changements sont maintenant visibles sur le site.":"Annonce crÃ©Ã©e avec succÃ¨s ! Elle est maintenant visible sur le site.",type:"success"}}):s("/profile")},category:t,onDataChange:e=>{c((s=>o(o({},s),e)))},currentStep:i,onStepChange:n})})})})}),m.jsxs("div",{className:"space-y-6",children:[m.jsx(Vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:m.jsx(qe,{className:"shadow-lg border-0",children:m.jsxs(Te,{className:"p-6",children:[m.jsxs("h3",{className:"text-lg font-semibold text-foreground mb-4 flex items-center",children:[m.jsx(os,{className:"h-5 w-5 text-green-500 mr-2"}),"Conseils pour une annonce rÃ©ussie"]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Utilisez un titre clair et descriptif"})]}),m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez des photos de qualitÃ©"})]}),m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"DÃ©crivez prÃ©cisÃ©ment votre offre"})]}),m.jsxs("div",{className:"flex items-start space-x-3",children:[m.jsx("div",{className:"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Fixez un prix compÃ©titif"})]})]})]})})}),m.jsx(Vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},children:m.jsx(qe,{className:"shadow-lg border-0",children:m.jsxs(Te,{className:"p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Besoin d'aide ?"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Notre Ã©quipe est lÃ  pour vous accompagner dans la crÃ©ation de votre annonce."}),m.jsx(ie,{variant:"outline",className:"w-full",onClick:()=>{const e=encodeURIComponent("Support crÃ©ation annonce - MaxiMarket"),s=encodeURIComponent(`Bonjour l'Ã©quipe MaxiMarket,\n\nJe rencontre des difficultÃ©s lors de la crÃ©ation de mon annonce et j'aurais besoin de votre aide.\n\nğŸ“‹ DÃ©tails de ma demande :\nâ€¢ CatÃ©gorie d'annonce : ${t?y(t):"Non spÃ©cifiÃ©e"}\nâ€¢ Ã‰tape actuelle : Ã‰tape ${i} sur ${k.length}\nâ€¢ ProblÃ¨me rencontrÃ© : [Veuillez dÃ©crire votre problÃ¨me ici]\n\nğŸ“§ Mon email de contact : [Votre email]\nğŸ“± Mon tÃ©lÃ©phone : [Votre tÃ©lÃ©phone]\n\nMerci de votre aide !\n\nCordialement,\n[Votre nom]\n\n---\nCe message a Ã©tÃ© gÃ©nÃ©rÃ© automatiquement depuis le formulaire de crÃ©ation d'annonce MaxiMarket.\nSupport : support@maximarket.com\nSite : https://maximarket.com`),a=`mailto:${xe.supportEmail}?subject=${e}&body=${s}`;window.open(a,"_blank")},children:"Contacter le support"})]})})})]})]})]})}),m.jsx(H,{})]})},$a=h.memo((({images:e=[],title:s="Galerie d'images"})=>{const[t,a]=p.useState(0),[r,i]=p.useState(!1),[n,l]=p.useState(!1),d=p.useRef(null);((e,s)=>{const[t,a]=p.useState(new Set),[r,i]=p.useState(new Map),n=p.useRef(new Map);p.useEffect((()=>()=>{n.current.forEach((e=>e.abort())),n.current.clear()}),[]),p.useEffect((()=>{e&&0!==e.length&&[e[s],e[(s+1)%e.length],e[(s-1+e.length)%e.length],e[(s+2)%e.length],e[(s-2+e.length)%e.length]].filter(Boolean).forEach(((e,s)=>{if(e&&!t.has(e)&&!r.has(e)){n.current.has(e)&&n.current.get(e).abort();const s=new AbortController;n.current.set(e,s),i((s=>new Map(s).set(e,"loading")));const t=new Image;t.onload=()=>{a((s=>new Set([...s,e]))),i((s=>{const t=new Map(s);return t.set(e,"loaded"),t})),n.current.delete(e)},t.onerror=()=>{i((s=>{const t=new Map(s);return t.set(e,"error"),t})),n.current.delete(e)},t.src=e}}))}),[s,e]),p.useCallback((e=>t.has(e)),[t]),p.useCallback((e=>r.get(e)||"idle"),[r]),p.useCallback((e=>{if(e&&!t.has(e)&&!r.has(e)){const s=new AbortController;n.current.set(e,s),i((s=>new Map(s).set(e,"loading")));const t=new Image;t.onload=()=>{a((s=>new Set([...s,e]))),i((s=>{const t=new Map(s);return t.set(e,"loaded"),t})),n.current.delete(e)},t.onerror=()=>{i((s=>{const t=new Map(s);return t.set(e,"error"),t})),n.current.delete(e)},t.src=e}}),[t,r])})(e,t);const{touchHandlers:u,zoomLevel:x}=((e,s,t)=>{const[a,r]=p.useState(1),[i,n]=p.useState(!1),l=p.useCallback((({scale:e})=>{const s=Math.max(.5,Math.min(3,e));r(s),n(!0),null==t||t(s)}),[t]),d=p.useCallback((()=>{a>1||null==e||e()}),[e,a]),m=p.useCallback((()=>{a>1||null==s||s()}),[s,a]),{touchHandlers:u}=((e={})=>{const{onSwipeLeft:s,onSwipeRight:t,onSwipeUp:a,onSwipeDown:r,onPinch:i,onDoubleTap:n,minSwipeDistance:l=50,minPinchDistance:d=10,doubleTapDelay:m=300}=e,[u,x]=p.useState({startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1,isDoubleTap:!1}),h=p.useRef(null),g=p.useRef(null),j=p.useRef(0),v=p.useCallback(((e,s)=>Math.hypot(e.clientX-s.clientX,e.clientY-s.clientY)),[]),f=p.useCallback(((e,s)=>180*Math.atan2(s.clientY-e.clientY,s.clientX-e.clientX)/Math.PI),[]),b=p.useCallback((e=>{const s=Date.now(),t=Array.from(e.touches);if(2===t.length){const e=v(t[0],t[1]),a=f(t[0],t[1]);x((t=>c(o({},t),{startDistance:e,startAngle:a,isPinching:!0,startTime:s})))}else if(1===t.length){const e=t[0],a=s-j.current;if(m>a)return x((e=>c(o({},e),{isDoubleTap:!0}))),null==n||n(e),void setTimeout((()=>{x((e=>c(o({},e),{isDoubleTap:!1})))}),100);j.current=s,x((t=>c(o({},t),{startX:e.clientX,startY:e.clientY,startTime:s,isPinching:!1})))}}),[v,f,n,m]),N=p.useCallback((e=>{e.preventDefault();const s=Array.from(e.touches);if(u.isPinching&&2===s.length){const e=v(s[0],s[1]),t=f(s[0],s[1]),a=e-u.startDistance,r=t-u.startAngle;if(Math.abs(a)>d){const t=e/u.startDistance;null==i||i({scale:t,distanceDelta:a,angleDelta:r,center:{x:(s[0].clientX+s[1].clientX)/2,y:(s[0].clientY+s[1].clientY)/2}})}}}),[u,v,f,d,i]),y=p.useCallback((e=>{const i=Array.from(e.changedTouches);if(u.isPinching)x((e=>c(o({},e),{isPinching:!1})));else{if(1===i.length&&!u.isDoubleTap){const e=i[0],n=e.clientX-u.startX,o=e.clientY-u.startY,c=Date.now()-u.startTime,d=Math.hypot(n,o),m=d/c;d>l&&m>.3&&(Math.abs(n)>Math.abs(o)?n>0?null==t||t({deltaX:n,deltaY:o,velocity:m,distance:d}):null==s||s({deltaX:n,deltaY:o,velocity:m,distance:d}):o>0?null==r||r({deltaX:n,deltaY:o,velocity:m,distance:d}):null==a||a({deltaX:n,deltaY:o,velocity:m,distance:d}))}x((e=>c(o({},e),{startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1})))}}),[u,l,s,t,a,r]),w=p.useCallback((()=>{x((e=>c(o({},e),{startX:0,startY:0,startDistance:0,startTime:0,isPinching:!1,isDoubleTap:!1})))}),[]),k=p.useCallback((()=>{h.current&&clearTimeout(h.current),g.current&&clearTimeout(g.current)}),[]);return{touchHandlers:{onTouchStart:b,onTouchMove:N,onTouchEnd:y,onTouchCancel:w},touchState:u,cleanup:k}})({onSwipeLeft:d,onSwipeRight:m,onPinch:l,minSwipeDistance:30}),x=p.useCallback((()=>{r(1),n(!1),null==t||t(1)}),[t]);return{touchHandlers:u,zoomLevel:a,isZooming:i,resetZoom:x}})((()=>a((s=>(s+1)%e.length))),(()=>a((s=>(s-1+e.length)%e.length))),(e=>l(e>1))),h=p.useCallback((()=>{a((s=>(s+1)%e.length))}),[e.length]),g=p.useCallback((()=>{a((s=>(s-1+e.length)%e.length))}),[e.length]),j=e=>{a(e)};p.useEffect((()=>{const e=e=>{if(r)switch(e.key){case"ArrowLeft":e.preventDefault(),g();break;case"ArrowRight":e.preventDefault(),h();break;case"Escape":e.preventDefault(),i(!1),l(!1);break;case" ":e.preventDefault(),l(!n)}};return r&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[r,n,h,g]);const v=()=>{r?l(!n):i(!0)};if(!e||0===e.length)return m.jsx("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-muted flex items-center justify-center",children:m.jsx("div",{className:"text-center text-muted-foreground",children:m.jsx("p",{children:"Aucune image disponible"})})});const f=e[t];return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"relative",children:[m.jsxs("div",c(o({ref:d,className:"relative aspect-video rounded-lg overflow-hidden bg-muted cursor-pointer group"},u),{onClick:v,children:[m.jsx(pa,{src:f,alt:`${s} - Image ${t+1}`,className:"w-full h-full",context:"gallery",quality:"high",showSkeleton:!0}),m.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300",children:m.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),i(!0)},children:m.jsx(Gs,{className:"h-4 w-4"})})}),e.length>1&&m.jsxs(m.Fragment,{children:[m.jsx(ie,{variant:"ghost",size:"sm",className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),g()},children:m.jsx(Je,{className:"h-4 w-4"})}),m.jsx(ie,{variant:"ghost",size:"sm",className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300",onClick:e=>{e.stopPropagation(),h()},children:m.jsx(He,{className:"h-4 w-4"})})]})]})),e.length>1&&m.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:e.map(((e,s)=>m.jsx("button",{onClick:()=>j(s),className:"w-2 h-2 rounded-full transition-all duration-300 "+(s===t?"bg-primary scale-125":"bg-muted-foreground/30 hover:bg-muted-foreground/50"),"aria-label":"Aller Ã  l'image "+(s+1)},s)))}),e.length>1&&m.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/50 text-white text-xs px-2 py-1 rounded",children:[t+1," / ",e.length]})]}),m.jsx(Ot,{children:r&&m.jsxs(Vt.div,c(o({initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center"},u),{children:[m.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white z-10",onClick:()=>{i(!1),l(!1)},children:m.jsx(be,{className:"h-6 w-6"})}),m.jsx(ie,{variant:"ghost",size:"sm",className:"absolute top-4 right-16 bg-black/50 hover:bg-black/70 text-white z-10",onClick:()=>{l(!n)},children:n?m.jsx(Ys,{className:"h-6 w-6"}):m.jsx(Gs,{className:"h-6 w-6"})}),m.jsx("div",{className:"relative w-full h-full flex items-center justify-center p-4",children:m.jsx(pa,{src:f,alt:`${s} - Image ${t+1}`,className:"max-w-full max-h-full object-contain transition-transform duration-300 "+(n?"cursor-zoom-out":"cursor-zoom-in"),context:"fullscreen",quality:"high",showSkeleton:!1,onClick:v,style:{transform:`scale(${x})`,cursor:n?"zoom-out":"zoom-in"}})}),e.length>1&&m.jsxs(m.Fragment,{children:[m.jsx(ie,{variant:"ghost",size:"lg",className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:g,children:m.jsx(Je,{className:"h-8 w-8"})}),m.jsx(ie,{variant:"ghost",size:"lg",className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white",onClick:h,children:m.jsx(He,{className:"h-8 w-8"})})]}),e.length>1&&m.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-3",children:e.map(((e,s)=>m.jsx("button",{onClick:()=>j(s),className:"w-3 h-3 rounded-full transition-all duration-300 "+(s===t?"bg-white scale-125":"bg-white/50 hover:bg-white/75"),"aria-label":"Aller Ã  l'image "+(s+1)},s)))}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 text-white text-sm px-3 py-1 rounded",children:[t+1," / ",e.length]}),m.jsx("div",{className:"absolute top-4 left-4 text-white/70 text-sm",children:m.jsx("p",{children:"â† â†’ Navigation â€¢ Espace Zoom â€¢ Ã‰chap Fermer"})})]}))})]})})),Xa=({rating:e=0,onRatingChange:s,readonly:t=!1,size:a="md",showLabel:r=!1,className:i=""})=>{const[n,l]=p.useState(0),o={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6"},c=()=>{t||l(0)};return m.jsxs("div",{className:Ee("flex items-center space-x-1",i),children:[m.jsx("div",{className:"flex items-center space-x-0.5",children:[1,2,3,4,5].map((r=>{return m.jsx("button",{type:"button",onClick:()=>{!t&&s&&s(r)},onMouseEnter:()=>{t||l(r)},onMouseLeave:c,disabled:t,className:Ee("transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 rounded-sm",o[a],t?"cursor-default":"cursor-pointer hover:scale-110",(i=r,i>(n||e)?"text-gray-300":"text-yellow-400 fill-current")),"aria-label":`${r} Ã©toile${r>1?"s":""}`,children:m.jsx(ts,{className:"w-full h-full"})},r);var i}))}),r&&m.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:(d=e,{0:"Aucune note",1:"TrÃ¨s mauvais",2:"Mauvais",3:"Moyen",4:"Bon",5:"Excellent"}[d]||"Aucune note")}),!t&&m.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:e>0?e+"/5":"Cliquez pour noter"})]});var d},Ja=Ut({content:$t().min(1,"Le commentaire ne peut pas Ãªtre vide").max(1e3,"Le commentaire ne peut pas dÃ©passer 1000 caractÃ¨res"),parent_id:$t().uuid().optional()}),Ha=({listingId:e,onSubmit:s,onCancel:t,initialData:a=null,parentId:r=null,className:i=""})=>{const{toast:n}=Me(),[l,u]=p.useState(!1),[x,h]=p.useState((null==a?void 0:a.rating)||0),{register:g,handleSubmit:j,watch:v,formState:{errors:f,isValid:b},reset:N}=Bt({resolver:W(Ja),defaultValues:{content:(null==a?void 0:a.content)||"",parent_id:r||(null==a?void 0:a.parent_id)},mode:"onChange"}),y=v("content"),w=!!a,k=i=>d(null,null,(function*(){u(!0);try{const l=c(o({},i),{rating:x||null,listing_id:e,parent_id:r||(null==a?void 0:a.parent_id)}),d=yield s(l);if(d.error)throw Error(d.error);n({title:w?"Commentaire modifiÃ©":"Commentaire ajoutÃ©",description:w?"Votre commentaire a Ã©tÃ© modifiÃ© avec succÃ¨s.":"Votre commentaire a Ã©tÃ© ajoutÃ© avec succÃ¨s."}),w||(N(),h(0)),t&&t()}catch(l){n({title:"Erreur",description:l.message||"Une erreur est survenue lors de l'envoi du commentaire.",variant:"destructive"})}finally{u(!1)}})),C=()=>(null==y?void 0:y.length)||0;return m.jsxs("div",{className:Ee("space-y-4",i),children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h3",{className:"text-lg font-semibold",children:w?"Modifier le commentaire":"Ajouter un commentaire"}),r&&m.jsx(Xe,{variant:"secondary",className:"text-xs",children:"RÃ©ponse"})]}),m.jsxs("form",{onSubmit:j(k),className:"space-y-4",children:[void 0,void 0,m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",children:"Votre note (optionnelle)"}),m.jsx(Xa,{rating:x,onRatingChange:e=>{h(e)},size:"lg",showLabel:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"content",className:"text-sm font-medium",children:"Votre commentaire *"}),m.jsx(Js,c(o({id:"content"},g("content")),{placeholder:w?"Modifiez votre commentaire...":"Partagez votre expÃ©rience avec cette annonce...",className:Ee("min-h-[120px] resize-none",f.content&&"border-red-500 focus:border-red-500"),maxLength:1e3})),m.jsx("div",{className:"flex items-center justify-between text-xs",children:m.jsxs("span",{className:(()=>{const e=C();return 0===e?"text-red-500":e>900?"text-orange-500":"text-muted-foreground"})(),children:[C(),"/1000 caractÃ¨res"]})}),f.content&&m.jsxs("p",{className:"text-sm text-red-500 flex items-center",children:[m.jsx(ls,{className:"h-4 w-4 mr-1"}),f.content.message]})]}),m.jsxs("div",{className:"flex items-center justify-between pt-2",children:[m.jsx("div",{className:"flex items-center space-x-2",children:t&&m.jsx(ie,{type:"button",variant:"outline",onClick:t,disabled:l,children:"Annuler"})}),m.jsx(ie,{type:"submit",disabled:l||!(null==y?void 0:y.trim()),className:"flex items-center space-x-2",onClick:e=>{e.preventDefault(),(null==y?void 0:y.trim())&&!l&&j(k)()},children:l?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),m.jsx("span",{children:"Envoi..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(Se,{className:"h-4 w-4"}),m.jsx("span",{children:w?"Modifier":"Publier"})]})})]})]})]})},Wa=({comment:e,onUpdate:s,onDelete:t,onReply:a,onReport:r,showReplies:i=!0,className:n=""})=>{var l;const{user:o}=ae(),{toast:c}=Me(),[u,x]=p.useState(!1),[h,g]=p.useState(!1),[j,v]=p.useState(!1),[f,b]=p.useState(e.replies||[]),N=(null==o?void 0:o.id)===e.user_id,y="admin"===(null==o?void 0:o.role),w=N||y,k=()=>{g(!0)};return u?m.jsx("div",{className:Ee("border rounded-lg p-4 bg-muted/30",n),children:m.jsx(Ha,{listingId:e.listing_id,onSubmit:t=>d(null,null,(function*(){try{const r=yield s(e.id,t);if(r.error)throw Error(r.error);return a=r.comment,x(!1),s&&s(a),r}catch(r){return{error:r.message}}var a})),onCancel:()=>x(!1),initialData:e})}):m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:Ee("transition-all",n),children:[m.jsxs("div",{className:"flex items-start justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(Q,{className:"h-10 w-10",children:m.jsx(K,{className:"bg-primary/10 text-primary",children:(C=e.user_id||"U",(null==C?void 0:C.split(" ").map((e=>e[0])).join("").toUpperCase().slice(0,2))||"U")})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("h4",{className:"font-medium text-sm",children:e.user_display_name||`Utilisateur ${null==(l=e.user_id)?void 0:l.slice(0,8)}...`}),e.is_verified_purchase&&m.jsxs(Xe,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-300",children:[m.jsx(os,{className:"h-3 w-3 mr-1"}),"Achat vÃ©rifiÃ©"]})]}),m.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[m.jsx("span",{children:Zs(e.created_at)}),e.updated_at!==e.created_at&&m.jsx("span",{children:"(modifiÃ©)"})]})]})]}),m.jsxs(Ls,{children:[m.jsx(Ds,{asChild:!0,children:m.jsx(ie,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:m.jsx(et,{className:"h-4 w-4"})})}),m.jsxs(Is,{align:"end",children:[m.jsxs(Rs,{onClick:k,children:[m.jsx(as,{className:"h-4 w-4 mr-2"}),"RÃ©pondre"]}),w&&m.jsxs(m.Fragment,{children:[m.jsxs(Rs,{onClick:()=>{x(!0)},children:[m.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Modifier"]}),m.jsxs(Rs,{onClick:()=>d(null,null,(function*(){if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce commentaire ?"))try{const s=yield t(e.id);if(s.error)throw Error(s.error);c({title:"Commentaire supprimÃ©",description:"Votre commentaire a Ã©tÃ© supprimÃ© avec succÃ¨s."})}catch(s){c({title:"Erreur",description:s.message||"Impossible de supprimer le commentaire.",variant:"destructive"})}})),className:"text-red-600",children:[m.jsx(es,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]}),!N&&m.jsxs(Rs,{onClick:()=>d(null,null,(function*(){try{const s=yield r(e.id,{reason:"inappropriate",description:"Commentaire signalÃ© par l'utilisateur"});if(s.error)throw Error(s.error);c({title:"Commentaire signalÃ©",description:"Le commentaire a Ã©tÃ© signalÃ© aux modÃ©rateurs."})}catch(s){c({title:"Erreur",description:s.message||"Impossible de signaler le commentaire.",variant:"destructive"})}})),children:[m.jsx(st,{className:"h-4 w-4 mr-2"}),"Signaler"]})]})]})]}),"approved"!==e.status&&m.jsx("div",{className:"mb-3",children:(e=>{switch(e){case"approved":return m.jsxs(Xe,{variant:"default",className:"bg-green-100 text-green-800 border-green-300",children:[m.jsx(os,{className:"h-3 w-3 mr-1"}),"ApprouvÃ©"]});case"pending":return m.jsxs(Xe,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 border-yellow-300",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),"En attente"]});case"rejected":return m.jsxs(Xe,{variant:"destructive",className:"bg-red-100 text-red-800 border-red-300",children:[m.jsx(st,{className:"h-3 w-3 mr-1"}),"RejetÃ©"]});default:return null}})(e.status)}),m.jsx("div",{className:"mb-3",children:m.jsx(Xa,{rating:e.rating,readonly:!0,size:"sm"})}),m.jsx("div",{className:"mb-4",children:m.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:e.content})}),m.jsxs("div",{className:"flex items-center justify-between pt-3 border-t",children:[m.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.likes_count>0&&m.jsxs("span",{children:[e.likes_count," j'aime"]}),e.replies_count>0&&m.jsxs("button",{onClick:()=>v(!j),className:"flex items-center space-x-1 hover:text-foreground transition-colors",children:[m.jsx(fe,{className:"h-3 w-3"}),m.jsxs("span",{children:[e.replies_count," rÃ©ponse",e.replies_count>1?"s":""]})]})]}),m.jsxs(ie,{variant:"ghost",size:"sm",onClick:k,className:"text-xs",children:[m.jsx(as,{className:"h-3 w-3 mr-1"}),"RÃ©pondre"]})]}),h&&m.jsx("div",{className:"mt-4 pt-4 border-t",children:m.jsx(Ha,{listingId:e.listing_id,onSubmit:e=>d(null,null,(function*(){try{const t=yield a(e);if(t.error)throw Error(t.error);return s=t.comment,g(!1),b((e=>[s,...e])),a&&a(s),t}catch(t){return{error:t.message}}var s})),onCancel:()=>g(!1),parentId:e.id})}),i&&e.replies_count>0&&j&&m.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[m.jsxs("h5",{className:"text-sm font-medium text-muted-foreground",children:["RÃ©ponses (",e.replies_count,")"]}),f.map((e=>m.jsx(Wa,{comment:e,onUpdate:s,onDelete:t,onReply:a,onReport:r,showReplies:!1,className:"ml-4 border-l-2 border-muted pl-4"},e.id)))]})]});var C},Qa=({listingId:e,listing:s,className:t="",showStats:a=!0,showFilters:r=!0})=>{const{user:i}=ae(),{toast:n}=Me(),[l,u]=p.useState(!1),{comments:x,loading:h,error:g,pagination:j,addComment:v,updateComment:f,deleteComment:b,reportComment:N,changePage:y,refresh:w,forceRefresh:k}=((e,s={})=>{const[t,a]=p.useState([]),[r,i]=p.useState(!0),[n,l]=p.useState(null),[m,u]=p.useState({}),[x,h]=p.useState(null),g=p.useCallback(((...t)=>d(null,[...t],(function*(t={}){if(e)try{i(!0),l(null);const{comments:r,pagination:n,error:c}=yield Ss.getComments(e,o(o({},s),t));if(c)throw Error(c);a(r),u(n)}catch(r){l(r.message)}finally{i(!1)}}))),[e]),j=p.useCallback((()=>d(null,null,(function*(){try{"undefined"!=typeof window&&window.localStorage&&Object.keys(localStorage).filter((e=>e.includes("comment")||e.includes("benome"))).forEach((e=>{localStorage.removeItem(e)}))}catch(e){}yield g({forceRefresh:!0})}))),[g]),v=p.useCallback((s=>d(null,null,(function*(){try{l(null);const{comment:t,error:r}=yield Ss.createComment(c(o({},s),{listing_id:e}));if(r)throw Error(r);return a((e=>[t,...e])),{comment:t,error:null}}catch(t){const e=t.message;return l(e),{comment:null,error:e}}}))),[e]),f=p.useCallback(((e,s)=>d(null,null,(function*(){try{l(null);const{comment:t,error:r}=yield Ss.updateComment(e,s);if(r)throw Error(r);return a((s=>s.map((s=>s.id===e?t:s)))),{comment:t,error:null}}catch(t){const e=t.message;return l(e),{comment:null,error:e}}}))),[]),b=p.useCallback((e=>d(null,null,(function*(){try{l(null);const{error:s}=yield Ss.deleteComment(e);if(s)throw Error(s);return a((s=>s.filter((s=>s.id!==e)))),{error:null}}catch(s){const e=s.message;return l(e),{error:e}}}))),[]),N=p.useCallback(((e,s)=>d(null,null,(function*(){try{l(null);const{report:t,error:a}=yield Ss.reportComment(e,s);if(a)throw Error(a);return{report:t,error:null}}catch(t){const e=t.message;return l(e),{report:null,error:e}}}))),[]),y=p.useCallback((e=>{g({page:e})}),[g]),w=p.useCallback((e=>{g(c(o({},e),{page:1}))}),[g]),k=p.useCallback((()=>{g()}),[g]);return p.useEffect((()=>{e&&g()}),[e]),{comments:t,loading:r,error:n,pagination:m,fetchComments:g,addComment:v,updateComment:f,deleteComment:b,reportComment:N,changePage:y,changeFilters:w,refresh:k,forceRefresh:j}})(e),C=(e,s)=>d(null,null,(function*(){return yield f(e,s)})),S=e=>d(null,null,(function*(){return yield b(e)})),z=e=>d(null,null,(function*(){return i?yield v(c(o({},e),{user_id:i.id})):(n({title:"Connexion requise",description:"Vous devez Ãªtre connectÃ© pour rÃ©pondre.",variant:"destructive"}),{error:"Connexion requise"})})),A=(e,s)=>d(null,null,(function*(){return i?yield N(e,c(o({},s),{reporter_id:i.id})):(n({title:"Connexion requise",description:"Vous devez Ãªtre connectÃ© pour signaler un commentaire.",variant:"destructive"}),{error:"Connexion requise"})}));return g?m.jsx(qe,{className:Ee("mt-8",t),children:m.jsx(Te,{className:"p-6",children:m.jsxs("div",{className:"text-center text-muted-foreground",children:[m.jsx(fe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Impossible de charger les commentaires"}),m.jsx("p",{className:"mb-4",children:"Une erreur est survenue lors du chargement des commentaires."}),m.jsxs(ie,{onClick:w,variant:"outline",children:[m.jsx(ne,{className:"h-4 w-4 mr-2"}),"RÃ©essayer"]})]})})}):m.jsxs("div",{className:Ee("space-y-6",t),children:[m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx(fe,{className:"h-6 w-6 text-primary"}),m.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Commentaires et Avis"})]}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>{k()},disabled:h,className:"flex items-center space-x-2",children:[m.jsx(ne,{className:"h-4 w-4 "+(h?"animate-spin":"")}),m.jsx("span",{className:"hidden sm:inline",children:"Actualiser"})]})})]}),m.jsx(Ot,{children:l&&m.jsx(Vt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:m.jsxs(qe,{children:[m.jsx(Fe,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(Le,{children:"Ajouter un commentaire"}),m.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:m.jsx(be,{className:"h-4 w-4"})})]})}),m.jsx(Te,{children:m.jsx(Ha,{listingId:e,onSubmit:e=>d(null,null,(function*(){if(!i)return void n({title:"Connexion requise",description:"Vous devez Ãªtre connectÃ© pour ajouter un commentaire.",variant:"destructive"});const s=yield v(c(o({},e),{user_id:i.id}));return s.error||u(!1),s})),onCancel:()=>u(!1)})})]})})}),m.jsx(qe,{children:m.jsx(Te,{className:"p-0",children:h?m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),m.jsx("p",{className:"text-muted-foreground",children:"Chargement des commentaires..."})]}):0===x.length?m.jsxs("div",{className:"p-8 text-center",children:[m.jsx(fe,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun commentaire"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Soyez le premier Ã  laisser un commentaire sur cette annonce !"}),i&&m.jsxs(ie,{onClick:()=>{u(!0)},children:[m.jsx(ds,{className:"h-4 w-4 mr-2"}),"Ajouter un commentaire"]})]}):m.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[m.jsx("div",{className:"divide-y divide-border",children:x.map(((e,s)=>m.jsx("div",{className:"p-4 hover:bg-muted/30 transition-colors",children:m.jsx(Wa,{comment:e,onUpdate:C,onDelete:S,onReply:z,onReport:A,className:"border-0 p-0 shadow-none"})},e.id)))}),j&&j.pages>1&&m.jsxs("div",{className:"flex items-center justify-center space-x-2 p-4 border-t",children:[m.jsx(ie,{variant:"outline",size:"sm",onClick:()=>y(j.page-1),disabled:1>=j.page,children:"PrÃ©cÃ©dent"}),m.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",j.page," sur ",j.pages]}),m.jsx(ie,{variant:"outline",size:"sm",onClick:()=>y(j.page+1),disabled:j.page>=j.pages,children:"Suivant"})]})]})})})]})},Ka=({listings:e=[],title:s="Annonces similaires"})=>{const[t,a]=p.useState(0),[r,i]=p.useState(!0),[n,l]=p.useState(!1),o=()=>"undefined"==typeof window?3:640>window.innerWidth?1:768>window.innerWidth?2:1024>window.innerWidth?3:4,[c,d]=p.useState(o()),u=Math.max(0,e.length-c);p.useEffect((()=>{const e=()=>{d(o())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),p.useEffect((()=>{if(!r||e.length<=c||n)return;const s=setInterval((()=>{a((e=>(e+1)%(u+1)))}),5e3);return()=>clearInterval(s)}),[r,e.length,c,u,n]);const x=p.useCallback((()=>l(!0)),[]),h=p.useCallback((()=>l(!1)),[]),j=p.useCallback((()=>{a((e=>(e+1)%(u+1)))}),[u]),v=p.useCallback((()=>{a((e=>(e-1+(u+1))%(u+1)))}),[u]),f=p.useCallback((e=>{a(Math.max(0,Math.min(e,u)))}),[u]),b=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return e&&0!==e.length?e.length>c?m.jsxs("div",{className:"mt-12",onMouseEnter:x,onMouseLeave:h,children:[m.jsx("div",{className:"mb-6",children:m.jsx("h2",{className:"text-2xl font-bold",children:s})}),m.jsxs("div",{className:"relative overflow-hidden",children:[e.length>c&&u>0&&m.jsxs(m.Fragment,{children:[m.jsx(ie,{variant:"outline",size:"sm",onClick:v,className:"absolute left-2 top-1/2 -translate-y-1/2 z-10 h-10 w-10 p-0 bg-black/20 hover:bg-black/40 text-white shadow-lg border-0 backdrop-blur-sm",children:m.jsx(Je,{className:"h-5 w-5"})}),m.jsx(ie,{variant:"outline",size:"sm",onClick:j,className:"absolute right-2 top-1/2 -translate-y-1/2 z-10 h-10 w-10 p-0 bg-black/20 hover:bg-black/40 text-white shadow-lg border-0 backdrop-blur-sm",children:m.jsx(He,{className:"h-5 w-5"})})]}),m.jsx(Ot,{mode:"wait",children:m.jsx(Vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.5,ease:"easeOut"},className:"flex gap-4",style:{transform:`translateX(-${t*(100/c)}%)`,width:e.length/c*100+"%",display:"flex",gap:"1rem"},children:e.map(((e,s)=>{var t;return m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s},className:"w-full sm:w-[calc(50%-8px)] md:w-[calc(33.333%-8px)] lg:w-[calc(25%-12px)] flex-shrink-0",children:m.jsx(g,{to:"/annonce/"+e.id,className:"group block",children:m.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary hover:shadow-lg",children:[m.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:e.title,src:(null==(t=e.images)?void 0:t[0])||"/placeholder-image.jpg",loading:"lazy"}),(e.is_featured||e.is_boosted||e.is_premium)&&m.jsx("div",{className:"absolute top-2 right-2",children:m.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white text-xs px-2 py-1 rounded-full",children:"â­ Premium"})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors line-clamp-1",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),e.location&&m.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[m.jsx("span",{className:"mr-1",children:"ğŸ“"}),m.jsx("span",{children:e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non spÃ©cifiÃ©e"})]}),m.jsx("p",{className:"text-lg font-bold text-primary",children:b(e.price)})]})]})})},e.id)}))},t)})]}),e.length>c&&u>0&&m.jsx("div",{className:"mt-6 flex justify-center",children:m.jsx("div",{className:"flex gap-2",children:Array.from({length:u+1}).map(((e,s)=>m.jsx("button",{onClick:()=>f(s),className:"w-3 h-3 rounded-full transition-all duration-300 "+(s===t?"bg-primary scale-125":"bg-muted hover:bg-muted-foreground")},s)))})})]}):m.jsxs("div",{className:"mt-12",children:[m.jsx("div",{className:"mb-6",children:m.jsx("h2",{className:"text-2xl font-bold",children:s})}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.map(((e,s)=>{var t;return m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*s},children:m.jsx(g,{to:"/annonce/"+e.id,className:"group block",children:m.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary hover:shadow-lg",children:[m.jsxs("div",{className:"aspect-video relative overflow-hidden",children:[m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:e.title,src:(null==(t=e.images)?void 0:t[0])||"/placeholder-image.jpg",loading:"lazy"}),(e.is_featured||e.is_boosted||e.is_premium)&&m.jsx("div",{className:"absolute top-2 right-2",children:m.jsx("span",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white text-xs px-2 py-1 rounded-full",children:"â­ Premium"})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors line-clamp-1",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:e.description}),e.location&&m.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-2",children:[m.jsx("span",{className:"mr-1",children:"ğŸ“"}),m.jsx("span",{children:e.location.city&&e.location.country?`${e.location.city}, ${e.location.country}`:"Localisation non spÃ©cifiÃ©e"})]}),m.jsx("p",{className:"text-lg font-bold text-primary",children:b(e.price)})]})]})})},e.id)}))})]}):null},Ga=({isOpen:e,onClose:s,listing:t,onReportSubmitted:a})=>{const[r,i]=p.useState(""),[n,l]=p.useState(""),[o,c]=p.useState("medium"),[u,x]=p.useState(!1),{toast:h}=Me(),g=()=>{u||s()};return e?m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:m.jsxs(qe,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[m.jsxs(Fe,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(st,{className:"h-5 w-5 text-red-500"}),m.jsxs("div",{children:[m.jsx(Le,{children:"Signaler cette annonce"}),m.jsx(De,{children:"Aidez-nous Ã  maintenir la qualitÃ© de notre plateforme"})]})]}),m.jsx(ie,{variant:"ghost",size:"sm",onClick:g,disabled:u,className:"h-8 w-8 p-0",children:m.jsx(be,{className:"h-4 w-4"})})]}),m.jsxs(Te,{className:"space-y-6",children:[m.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[m.jsx("h4",{className:"font-medium mb-2",children:"Annonce signalÃ©e :"}),m.jsxs("div",{className:"flex items-start space-x-3",children:[t.images&&t.images[0]&&m.jsx("img",{src:t.images[0],alt:t.title,className:"w-16 h-16 object-cover rounded-lg"}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h5",{className:"font-medium truncate",children:t.title}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["PubliÃ©e le ",new Date(t.created_at).toLocaleDateString()]}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:["CatÃ©gorie : ",t.category]})]})]})]}),m.jsxs("form",{onSubmit:e=>d(null,null,(function*(){if(e.preventDefault(),r)if(n.trim()){x(!0);try{const e={listing_id:t.id,type:"listing",reason:r,description:n.trim(),severity:o,status:"pending"};yield lt.createReport(e),h({title:"Signalement envoyÃ©",description:"Votre signalement a Ã©tÃ© enregistrÃ© et sera examinÃ© par notre Ã©quipe."}),i(""),l(""),c("medium"),s(),a&&a()}catch(d){h({title:"Erreur",description:"Impossible d'envoyer le signalement. Veuillez rÃ©essayer.",variant:"destructive"})}finally{x(!1)}}else h({title:"Erreur",description:"Veuillez dÃ©crire le problÃ¨me.",variant:"destructive"});else h({title:"Erreur",description:"Veuillez sÃ©lectionner une raison de signalement.",variant:"destructive"})})),className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"reason",children:"Raison du signalement *"}),m.jsxs(tt,{value:r,onValueChange:i,disabled:u,children:[m.jsx(at,{children:m.jsx(rt,{placeholder:"SÃ©lectionnez une raison"})}),m.jsx(it,{children:[{value:"inappropriate_content",label:"Contenu inappropriÃ©",description:"Contenu offensant, violent ou choquant"},{value:"fake_listing",label:"Annonce fausse",description:"Produit/service inexistant ou trompeur"},{value:"spam",label:"Spam",description:"Annonce rÃ©pÃ©titive ou non pertinente"},{value:"scam",label:"Arnaque",description:"Tentative de fraude ou d'escroquerie"},{value:"copyright",label:"Violation de droits",description:"Contenu protÃ©gÃ© par des droits d'auteur"},{value:"other",label:"Autre",description:"Autre raison non listÃ©e"}].map((e=>m.jsx(nt,{value:e.value,children:m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"font-medium",children:e.label}),m.jsx("span",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value)))})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"severity",children:"Niveau de gravitÃ©"}),m.jsxs(tt,{value:o,onValueChange:c,disabled:u,children:[m.jsx(at,{children:m.jsx(rt,{})}),m.jsx(it,{children:[{value:"low",label:"Faible",color:"bg-blue-100 text-blue-800"},{value:"medium",label:"Moyen",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"Ã‰levÃ©",color:"bg-red-100 text-red-800"}].map((e=>m.jsx(nt,{value:e.value,children:m.jsx(Xe,{className:e.color,variant:"secondary",children:e.label})},e.value)))})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs(Ie,{htmlFor:"description",children:["Description dÃ©taillÃ©e du problÃ¨me *",m.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:"(minimum 20 caractÃ¨res)"})]}),m.jsx(Js,{id:"description",value:n,onChange:e=>l(e.target.value),placeholder:"DÃ©crivez en dÃ©tail le problÃ¨me que vous avez identifiÃ©...",rows:4,disabled:u,minLength:20,required:!0}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length,"/500 caractÃ¨res"]})]}),m.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:m.jsxs("div",{className:"flex items-start space-x-2",children:[m.jsx(le,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[m.jsx("p",{className:"font-medium",children:"Important :"}),m.jsx("p",{children:"Les signalements abusifs peuvent entraÃ®ner la suspension de votre compte. Assurez-vous que votre signalement est justifiÃ© et basÃ© sur des faits."})]})]})}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx(ie,{type:"button",variant:"outline",onClick:g,disabled:u,children:"Annuler"}),m.jsx(ie,{type:"submit",disabled:u||!r||20>n.length,className:"bg-red-600 hover:bg-red-700",children:u?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent mr-2"}),"Envoi en cours..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Se,{className:"h-4 w-4 mr-2"}),"Envoyer le signalement"]})})]})]})]})]})}):null},Ya=()=>{const{id:e}=N(),s=f(),{user:t}=ae(),{toast:a}=Me(),[r,i]=p.useState(null),[n,l]=p.useState([]),[o,c]=p.useState(!0),[u,x]=p.useState(!1),[h,j]=p.useState(!1),[v,b]=p.useState(!1),[y,w]=p.useState(!1),{images:k}=ka(r);p.useEffect((()=>{e&&d(null,null,(function*(){c(!0);try{if(!e||""===e||"string"!=typeof e)throw Error(`ID d'annonce invalide: "${e}"`);const r=yield ys.getListingById(e);if(r){i(r);try{ys.incrementViews(r.id)}catch(t){}"approved"!==r.status&&a({title:"Annonce en attente",description:"Cette annonce est en cours de modÃ©ration.",variant:"default"});const{data:e}=yield ys.getAllListings({category:r.category,status:"approved",limit:15});l(e.filter((e=>e.id!==r.id)).slice(0,10))}else a({title:"Annonce non trouvÃ©e",description:"L'annonce que vous recherchez n'existe pas ou a Ã©tÃ© supprimÃ©e.",variant:"destructive"}),s("/marketplace")}catch(r){a({title:"Erreur",description:"Impossible de charger les dÃ©tails de l'annonce: "+r.message,variant:"destructive"}),s("/marketplace")}finally{c(!1)}}))}),[e,s,a]),p.useEffect((()=>{try{if("undefined"!=typeof window&&r){const e=(null==r?void 0:r.location)&&"object"==typeof r.location&&r.location.city||"";window.__MAXIMARKET_CONTEXT={listing:{id:r.id,title:r.title,price:r.price,locationCity:e,sellerId:r.user_id,category:r.category}}}}catch(e){}return()=>{try{"undefined"!=typeof window&&window.__MAXIMARKET_CONTEXT&&delete window.__MAXIMARKET_CONTEXT}catch(e){}}}),[r]);const C=e=>{switch(e){case"real_estate":return"Immobilier";case"automobile":return"Automobile";case"services":return"Services";case"marketplace":return"Marketplace";default:return"Autre"}},S=e=>d(null,null,(function*(){var i,n;if("whatsapp"!==e&&"phone"!==e){if("message"===e){if(!t)return a({title:"Connexion requise",description:"Connectez-vous pour envoyer un message privÃ© au vendeur.",variant:"default"}),void s("/connexion");if(r.user_id===t.id)return void a({title:"Action impossible",description:"Vous ne pouvez pas vous contacter vous-mÃªme.",variant:"destructive"});if(!r.user_id||"test-user-1"===r.user_id)return void a({title:"Annonce de test",description:"Cette annonce est en mode test. Les fonctionnalitÃ©s de contact ne sont pas disponibles.",variant:"default"});try{const e=yield ks.createConversation(r.user_id,r.id);s(`/messages?conversation=${e.id}&listing=${r.id}`),a({title:"Conversation crÃ©Ã©e",description:"Vous avez Ã©tÃ© redirigÃ© vers la messagerie."})}catch(l){a({title:"Erreur",description:"Impossible de crÃ©er la conversation. Veuillez rÃ©essayer.",variant:"destructive"})}}}else{const s=(null==(i=r.contact_info)?void 0:i.phone)||(null==(n=r.users)?void 0:n.phone_number);if(!s)return void a({title:"Pas de numÃ©ro disponible",description:"Aucun numÃ©ro de tÃ©lÃ©phone n'est disponible pour cette annonce.",variant:"destructive"});const t=s.replace(/[\s\-\(\)]/g,""),l=t.startsWith("+")?t:t.startsWith("221")?"+"+t:"+221"+t;if("phone"===e)window.open("tel:"+l,"_blank"),a({title:"Appel en cours",description:"Appel vers "+l});else if("whatsapp"===e){const e=encodeURIComponent(`Bonjour ! Je suis intÃ©ressÃ©(e) par votre annonce "${r.title}".\n\nPouvez-vous me donner plus d'informations ?`);window.open(`https://wa.me/${l}?text=${e}`,"_blank"),a({title:"WhatsApp ouvert",description:"Conversation WhatsApp avec "+l})}}}));return o?m.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de l'annonce..."})]})}):r?m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto px-4 py-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs(ie,{variant:"ghost",onClick:()=>s(-1),className:"mb-4",children:[m.jsx($s,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[m.jsx(g,{to:"/",className:"hover:text-primary",children:"Accueil"}),m.jsx("span",{children:"/"}),m.jsx(g,{to:"/"+("real_estate"===r.category?"immobilier":"automobile"===r.category?"automobile":"services"===r.category?"services":"marketplace"),className:"hover:text-primary",children:C(r.category)}),m.jsx("span",{children:"/"}),m.jsx("span",{className:"text-foreground",children:r.title})]})]}),m.jsx("div",{className:"max-w-4xl mx-auto",children:m.jsxs("div",{children:[m.jsx("div",{className:"mb-8",children:m.jsx($a,{images:k,title:r.title})}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.title}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(We,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"text-sm",children:r.location&&"object"==typeof r.location&&r.location.city?`${r.location.city}, ${r.location.country||""}`:"Localisation non spÃ©cifiÃ©e"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Qe,{className:"h-4 w-4 mr-1"}),m.jsxs("span",{className:"text-sm",children:["PubliÃ© le ",(A=r.created_at,new Date(A).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}))]})]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Ma,{listing:r,variant:"compact"}),m.jsxs(ie,{variant:"outline",size:"sm",onClick:()=>{t?j(!0):s("/connexion")},children:[m.jsx(st,{className:"h-4 w-4 mr-1"}),"Signaler"]})]})]}),m.jsxs("div",{className:"text-3xl font-bold text-primary mb-4",children:[(z=r.price,new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(z)),(r.is_featured||r.is_boosted||r.is_premium)&&m.jsx(Xe,{className:"ml-3 bg-gradient-to-r from-amber-500 to-yellow-500 text-white border-amber-600",children:"â­ Premium"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[m.jsxs(Xe,{variant:"secondary",className:"bg-primary/10 text-primary",children:[(e=>{switch(e){case"real_estate":return"ğŸ ";case"automobile":return"ğŸš—";case"services":return"ğŸ”§";case"marketplace":return"ğŸ›ï¸";default:return"ğŸ“‹"}})(r.category)," ",C(r.category)]}),"approved"===r.status&&m.jsx(Xe,{variant:"default",className:"badge-approved",children:"ApprouvÃ©"}),t&&r.user_id===t.id&&m.jsx(Pa,{listingId:r.id,listing:r,size:"default",showActions:!0,className:"ml-auto"})]})]}),m.jsx(ot,{className:"my-8"}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Description"}),m.jsx("div",{className:"prose prose-invert max-w-none",children:m.jsx("p",{className:"whitespace-pre-line",children:r.description})})]}),r.real_estate_details&&m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"DÃ©tails immobiliers"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.real_estate_details.type&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),m.jsx("p",{className:"font-medium",children:r.real_estate_details.type})]}),r.real_estate_details.rooms&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"PiÃ¨ces"}),m.jsx("p",{className:"font-medium",children:r.real_estate_details.rooms})]}),r.real_estate_details.surface&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Surface"}),m.jsxs("p",{className:"font-medium",children:[r.real_estate_details.surface," mÂ²"]})]})]})]}),r.automobile_details&&m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"DÃ©tails automobile"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.automobile_details.brand&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Marque"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.brand})]}),r.automobile_details.model&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"ModÃ¨le"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.model})]}),r.automobile_details.year&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"AnnÃ©e"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.year})]}),r.automobile_details.fuel&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Carburant"}),m.jsx("p",{className:"font-medium",children:r.automobile_details.fuel})]})]})]}),m.jsx("div",{className:"mt-12 mb-8",children:m.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Contacter le vendeur"}),r.users&&m.jsxs("div",{className:"mb-4",children:[m.jsx("p",{className:"text-sm text-muted-foreground",children:"Vendeur"}),m.jsxs("p",{className:"font-medium",children:[r.users.first_name," ",r.users.last_name]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[m.jsxs(ie,{className:"w-full bg-green-600 hover:bg-green-700",onClick:()=>S("whatsapp"),children:[m.jsx(fe,{className:"h-4 w-4 mr-2"}),"WhatsApp"]}),m.jsxs(ie,{className:"w-full",onClick:()=>S("phone"),children:[m.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Appeler"]}),m.jsxs(ie,{variant:"outline",className:"w-full",onClick:()=>S("message"),children:[m.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Message"]}),m.jsxs(ie,{variant:"outline",className:"w-full",onClick:()=>d(null,null,(function*(){if(t)try{x(!u),a({title:u?"RetirÃ© des favoris":"AjoutÃ© aux favoris",description:u?"L'annonce a Ã©tÃ© retirÃ©e de vos favoris.":"L'annonce a Ã©tÃ© ajoutÃ©e Ã  vos favoris."})}catch(e){a({title:"Erreur",description:"Impossible de modifier les favoris.",variant:"destructive"})}else s("/connexion")})),children:[m.jsx(cs,{className:"h-4 w-4 mr-2 "+(u?"fill-red-500 text-red-500":"")}),u?"Retirer":"Favoris"]})]}),!t&&m.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:m.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["ğŸ’¡ ",m.jsx("strong",{children:"Conseil :"})," Vous pouvez contacter le vendeur directement par WhatsApp ou tÃ©lÃ©phone sans crÃ©er de compte. Connectez-vous uniquement si vous souhaitez utiliser la messagerie privÃ©e."]})})]})}),m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"text-amber-600 dark:text-amber-400 text-lg mr-2",children:"âš ï¸"}),m.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Conseils de sÃ©curitÃ©"})]}),m.jsx("button",{onClick:()=>b(!v),className:"text-xs text-amber-600 dark:text-amber-400 hover:underline",children:v?"Masquer":"Voir plus"})]}),m.jsx("div",{className:"text-xs text-amber-700 dark:text-amber-300 mb-2",children:"ğŸ¤ Lieu public â€¢ ğŸ” VÃ©rifiez le bien â€¢ ğŸ’° Paiement sÃ©curisÃ© â€¢ ğŸš¨ Signalez les problÃ¨mes"}),v&&m.jsx("div",{className:"mt-3 pt-3 border-t border-amber-200 dark:border-amber-700",children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs",children:[m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Rencontre :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Lieu public, Ã©vitez les heures tardives"})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"VÃ©rification :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Inspectez, testez, demandez les documents"})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Paiement :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"EspÃ¨ces privilÃ©giÃ©es, mÃ©fiez-vous des prix bas"})]}),m.jsxs("div",{children:[m.jsx("strong",{className:"text-amber-800 dark:text-amber-200",children:"Signalement :"}),m.jsx("div",{className:"text-amber-700 dark:text-amber-300",children:"Conservez les communications, signalez les abus"})]})]})})]})}),m.jsx("div",{className:"mb-8",children:m.jsx(Qa,{listingId:r.id,listing:r,className:"mt-8"})}),m.jsx(Ka,{listings:n,title:"Annonces similaires"})]})}),m.jsx(Ga,{isOpen:h,onClose:()=>j(!1),listing:r,onReportSubmitted:()=>{}})]}):null;var z,A},Za=()=>{const{user:e}=ae(),[s,t]=p.useState([]),[a,r]=p.useState([]),[i,n]=p.useState(!0),[l,u]=p.useState("grid"),[x,h]=p.useState(""),[g,j]=p.useState([]),[v,f]=p.useState(null),[b,N]=p.useState("");p.useEffect((()=>{d(null,null,(function*(){if(e){n(!0);try{const{data:s,error:a}=yield Ue.from("favorites").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(a)throw a;const i=s.map((e=>e.listing_id));if(i.length>0){const{data:e,error:a}=yield Ue.from("listings").select("\n            *,\n            user:users(id, full_name, avatar_url),\n            category:categories(name, slug)\n          ").in("id",i).eq("status","approved");if(a)throw a;const n=s.map((s=>{const t=e.find((e=>e.id===s.listing_id));return c(o({},s),{listing:t})})).filter((e=>e.listing));t(n),r(e)}else t([]),r([])}catch(s){}finally{n(!1)}}}))}),[e]);const y=s.filter((e=>{var s,t;const a=e.listing;if(!a)return!1;const r=""===x||a.title.toLowerCase().includes(x.toLowerCase())||(null==(s=a.description)?void 0:s.toLowerCase().includes(x.toLowerCase()))||(null==(t=e.notes)?void 0:t.toLowerCase().includes(x.toLowerCase())),i=0===g.length||g.some((s=>{var t;return null==(t=e.tags)?void 0:t.includes(s)}));return r&&i})),w=[...new Set(s.flatMap((e=>e.tags||[])))].sort(),k={total:s.length,withNotes:s.filter((e=>e.notes)).length,withTags:s.filter((e=>e.tags&&e.tags.length>0)).length,categories:[...new Set(s.map((e=>{var s,t;return null==(t=null==(s=e.listing)?void 0:s.category)?void 0:t.name})).filter(Boolean))]};return e?m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Favoris"}),m.jsxs("p",{className:"text-gray-600 mt-2",children:[k.total," annonce(s) sauvegardÃ©e(s)"]})]}),m.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[m.jsxs("span",{children:[k.withNotes," avec notes"]}),m.jsxs("span",{children:[k.withTags," avec tags"]}),m.jsxs("span",{children:[k.categories.length," catÃ©gories"]})]})]})}),m.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsxs("div",{className:"relative",children:[m.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),m.jsx("input",{type:"text",placeholder:"Rechercher dans vos favoris...",value:x,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(bs,{size:20,className:"text-gray-400"}),m.jsxs("select",{value:g.length>0?g[0]:"",onChange:e=>j(e.target.value?[e.target.value]:[]),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"Tous les tags"}),w.map((e=>m.jsx("option",{value:e,children:e},e)))]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>u("grid"),className:"p-2 rounded "+("grid"===l?"bg-blue-100 text-blue-600":"text-gray-400"),children:m.jsx(ct,{size:20})}),m.jsx("button",{onClick:()=>u("list"),className:"p-2 rounded "+("list"===l?"bg-blue-100 text-blue-600":"text-gray-400"),children:m.jsx(dt,{size:20})})]})]})}),i?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement de vos favoris..."})]}):0===y.length?m.jsxs("div",{className:"text-center py-12",children:[m.jsx(cs,{className:"mx-auto h-12 w-12 text-gray-400"}),m.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:x||g.length>0?"Aucun rÃ©sultat":"Aucun favori"}),m.jsx("p",{className:"mt-2 text-gray-600",children:x||g.length>0?"Essayez de modifier vos critÃ¨res de recherche":"Commencez Ã  ajouter des annonces Ã  vos favoris"})]}):m.jsx("div",{className:"grid"===l?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:y.map((e=>m.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[m.jsx("div",{className:"p-4",children:m.jsx(_a,{listing:e.listing,compact:"list"===l})}),m.jsxs("div",{className:"px-4 pb-4",children:[e.tags&&e.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:e.tags.map((e=>m.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[m.jsx(Ws,{size:12,className:"mr-1"}),e]},e)))}),m.jsx("div",{className:"mb-3",children:v===e.id?m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:b,onChange:e=>N(e.target.value),placeholder:"Ajouter une note...",className:"w-full p-2 border border-gray-300 rounded text-sm resize-none",rows:"2"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>{return s=e.id,a=b,d(null,null,(function*(){try{const{error:e}=yield Ue.from("favorites").update({notes:a}).eq("id",s);if(e)throw e;t((e=>e.map((e=>e.id===s?c(o({},e),{notes:a}):e)))),f(null),N("")}catch(e){}}));var s,a},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Sauvegarder"}),m.jsx("button",{onClick:()=>{f(null),N("")},className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400",children:"Annuler"})]})]}):m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.notes||"Aucune note"}),m.jsx("button",{onClick:()=>{f(e.id),N(e.notes||"")},className:"ml-2 p-1 text-gray-400 hover:text-gray-600",children:m.jsx(mt,{size:14})})]})}),m.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[m.jsxs("span",{className:"text-xs text-gray-500",children:["AjoutÃ© le ",new Date(e.created_at).toLocaleDateString("fr-FR")]}),m.jsxs("button",{onClick:()=>{return s=e.id,d(null,null,(function*(){try{const{error:e}=yield Ue.from("favorites").delete().eq("id",s);if(e)throw e;t((e=>e.filter((e=>e.id!==s))))}catch(e){}}));var s},className:"flex items-center space-x-1 text-red-600 hover:text-red-800 text-sm",children:[m.jsx(ut,{size:14}),m.jsx("span",{children:"Retirer"})]})]})]})]},e.id)))})]}):m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-gray-500",children:"Connectez-vous pour voir vos favoris"})})},er=()=>m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsxs("div",{className:"flex items-center justify-center mb-4",children:[m.jsx(cs,{className:"h-12 w-12 text-primary mr-4"}),m.jsx("h1",{className:"text-4xl font-bold",children:"Mes Favoris"})]}),m.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Retrouvez toutes vos annonces sauvegardÃ©es et gÃ©rez vos favoris en toute simplicitÃ©."})]}),m.jsxs(qe,{className:"shadow-lg border-0",children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center space-x-2",children:[m.jsx(cs,{className:"h-5 w-5 text-primary"}),m.jsx("span",{children:"Annonces Favorites"})]})}),m.jsx(Te,{children:m.jsx(Za,{})})]}),m.jsxs("div",{className:"text-center mt-12",children:[m.jsx("p",{className:"text-muted-foreground mb-4",children:"Vous ne trouvez pas ce que vous cherchez ?"}),m.jsx(ie,{size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>window.location.href="/marketplace",children:"Explorer le Marketplace"})]})]})}),sr=({listingId:e,onPackageSelected:s,onClose:t})=>{const{user:a}=ae(),r=f(),[i,n]=p.useState([]),[l,o]=p.useState(!0),[c,u]=p.useState(null),[x,h]=p.useState(!1),[g,j]=p.useState(null);p.useEffect((()=>{v()}),[]);const v=()=>d(null,null,(function*(){try{o(!0);const e=yield As.getBoostPackages();n(e.packages||[])}catch(e){j("Erreur lors du chargement des packages de boost")}finally{o(!1)}})),b=e=>{switch(e){case"priority":return m.jsx(Ye,{className:"h-4 w-4"});case"badge":return m.jsx(ts,{className:"h-4 w-4"});case"featured":return m.jsx(Xs,{className:"h-4 w-4"});case"analytics":return m.jsx(js,{className:"h-4 w-4"});case"support":return m.jsx(Ge,{className:"h-4 w-4"});default:return m.jsx(xt,{className:"h-4 w-4"})}},N=(e,s)=>{switch(e){case"priority":return"highest"===s?"PrioritÃ© maximale":"high"===s?"PrioritÃ© Ã©levÃ©e":"PrioritÃ© moyenne";case"badge":return"Badge boostÃ© visible";case"featured":return s?"Mise en avant premium":"VisibilitÃ© standard";case"analytics":return"premium"===s?"Analytics dÃ©taillÃ©s":"detailed"===s?"Analytics avancÃ©s":"Analytics de base";case"support":return"Support prioritaire";default:return s}},y=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return l?m.jsx("div",{className:"flex items-center justify-center p-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):g?m.jsxs("div",{className:"text-center p-6",children:[m.jsx("div",{className:"text-red-500 mb-4",children:g}),m.jsx(ie,{onClick:v,variant:"outline",children:"RÃ©essayer"})]}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"ğŸš€ Booster votre annonce"}),m.jsx("p",{className:"text-muted-foreground",children:"Choisissez le package qui correspond Ã  vos besoins et boostez votre visibilitÃ© !"})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.map(((e,s)=>{var t,a;return m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},children:m.jsxs(qe,{className:"cursor-pointer transition-all duration-200 hover:shadow-lg "+((null==c?void 0:c.id)===e.id?"ring-2 ring-primary border-primary":"hover:border-primary/50"),onClick:()=>(e=>{u(e)})(e),children:[m.jsxs(Fe,{className:"text-center pb-4",children:[m.jsx("div",{className:"flex justify-center mb-3",children:(null==(t=e.features)?void 0:t.featured)?m.jsx(Xs,{className:"h-8 w-8 text-yellow-500"}):"highest"===(null==(a=e.features)?void 0:a.priority)?m.jsx(ts,{className:"h-8 w-8 text-purple-500"}):m.jsx(Fs,{className:"h-8 w-8 text-blue-500"})}),m.jsx(Le,{className:"text-xl",children:e.name}),m.jsx("p",{className:"text-muted-foreground text-sm",children:e.description})]}),m.jsxs(Te,{className:"space-y-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:y(e.price)}),m.jsxs("div",{className:"flex items-center justify-center text-sm text-muted-foreground",children:[m.jsx(ss,{className:"h-4 w-4 mr-1"}),e.duration_days," jour",e.duration_days>1?"s":""]})]}),m.jsx("div",{className:"space-y-2",children:Object.entries(e.features||{}).map((([e,s])=>m.jsxs("div",{className:"flex items-center text-sm",children:[m.jsx("div",{className:"text-primary mr-2",children:b(e)}),m.jsx("span",{children:N(e,s)})]},e)))}),(null==c?void 0:c.id)===e.id&&m.jsx("div",{className:"flex justify-center",children:m.jsxs(Xe,{variant:"default",className:"bg-primary",children:[m.jsx(xt,{className:"h-4 w-4 mr-1"}),"SÃ©lectionnÃ©"]})})]})]})},e.id)}))}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[m.jsx(ie,{onClick:t,variant:"outline",className:"flex-1 sm:flex-none",children:"Annuler"}),m.jsx(ie,{onClick:()=>d(null,null,(function*(){if(a)if(c)try{h(!0),j(null);const r=yield As.purchaseBoost(c.id,e,a.id);r.success&&(null==s||s(r),null==t||t())}catch(i){j(i.message||"Erreur lors de l'achat du boost")}finally{h(!1)}else j("Veuillez sÃ©lectionner un package");else r("/connexion",{state:{from:"/booster-annonce"}})})),disabled:!c||x,className:"flex-1 sm:flex-none bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:x?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Achat en cours..."]}):m.jsxs(m.Fragment,{children:["ğŸš€ Acheter le Boost",c&&" - "+y(c.price)]})})]}),m.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[m.jsx("p",{children:"ğŸ’¡ Les boosts sont activÃ©s immÃ©diatement aprÃ¨s confirmation du paiement"}),m.jsx("p",{children:"ğŸ”„ Vous pouvez renouveler ou annuler vos boosts Ã  tout moment"})]})]})},tr=()=>{var e;const{id:s}=N(),t=f(),{user:a}=ae(),{toast:r}=Me(),[i,n]=p.useState(null),[l,o]=p.useState(null),[c,u]=p.useState(!0),[x,h]=p.useState(null),[g,j]=p.useState(!1),[v,b]=p.useState(null);p.useEffect((()=>{s&&y()}),[s]);const y=()=>d(null,null,(function*(){try{u(!0),h(null);const e=yield ys.getListingById(s);n(e);const t=yield As.getBoostStatus(s);o(t)}catch(e){h(e.message||"Erreur lors du chargement des donnÃ©es")}finally{u(!1)}}));return c?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):x?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erreur"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:x}),m.jsx(ie,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})}):i?(null==a?void 0:a.id)!==i.user_id?m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸš«"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"AccÃ¨s non autorisÃ©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous ne pouvez booster que vos propres annonces."}),m.jsx(ie,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[m.jsxs(ie,{onClick:()=>t(-1),variant:"ghost",className:"mb-4",children:[m.jsx($s,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:"ğŸš€ Booster votre annonce"}),m.jsx("p",{className:"text-muted-foreground text-lg",children:"Augmentez votre visibilitÃ© et obtenez plus de contacts"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m.jsxs(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Votre annonce"}),m.jsx(_a,{listing:i,showActions:!1})]}),m.jsx(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:m.jsxs(qe,{children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center",children:[m.jsx(Ye,{className:"h-5 w-5 mr-2 text-primary"}),"Statut du boost"]})}),m.jsx(Te,{children:(null==l?void 0:l.hasActiveBoost)?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(ts,{className:"h-5 w-5 text-green-600 mr-2"}),m.jsxs("div",{children:[m.jsxs("p",{className:"font-semibold text-green-800",children:["Boost actif : ",null==(e=l.currentBoost.boost_packages)?void 0:e.name]}),m.jsxs("p",{className:"text-sm text-green-600",children:["Expire le ",new Date(l.currentBoost.end_date).toLocaleDateString("fr-FR")]})]})]}),m.jsx(Xe,{variant:"default",className:"bg-green-600",children:"Actif"})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx(ie,{onClick:()=>d(null,null,(function*(){if(null==l?void 0:l.currentBoost)try{(yield As.renewBoost(l.currentBoost.id,a.id)).success&&(r({title:"Boost renouvelÃ© !",description:"Votre boost a Ã©tÃ© prolongÃ© avec succÃ¨s."}),y())}catch(e){r({title:"Erreur",description:e.message||"Erreur lors du renouvellement",variant:"destructive"})}})),variant:"outline",className:"flex-1",children:"ğŸ”„ Renouveler"}),m.jsx(ie,{onClick:()=>d(null,null,(function*(){if((null==l?void 0:l.currentBoost)&&confirm("ÃŠtes-vous sÃ»r de vouloir annuler ce boost ?"))try{(yield As.cancelBoost(l.currentBoost.id,a.id)).success&&(r({title:"Boost annulÃ©",description:"Votre boost a Ã©tÃ© annulÃ© avec succÃ¨s."}),y())}catch(e){r({title:"Erreur",description:e.message||"Erreur lors de l'annulation",variant:"destructive"})}})),variant:"outline",className:"flex-1",children:"âŒ Annuler"})]})]}):m.jsxs("div",{className:"text-center py-8",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸ“ˆ"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Aucun boost actif"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre annonce n'est actuellement pas boostÃ©e"}),m.jsx(ie,{onClick:()=>j(!0),className:"bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:"ğŸš€ Booster maintenant"})]})})]})})]}),m.jsx(Vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"space-y-6",children:!(null==l?void 0:l.hasActiveBoost)&&m.jsx(qe,{className:"bg-gradient-to-br from-primary/10 to-blue-500/10 border-primary/20",children:m.jsxs(Te,{className:"p-6 text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:"ğŸš€"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"PrÃªt Ã  booster ?"}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Augmentez votre visibilitÃ© et obtenez plus de contacts"}),m.jsx(ie,{onClick:()=>j(!0),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:"Commencer maintenant"})]})})})]}),v&&m.jsx(ht,{open:!!v,onOpenChange:()=>b(null),children:m.jsxs(pt,{className:"sm:max-w-md",children:[m.jsx(gt,{children:m.jsx(jt,{className:"text-center",children:"ğŸ‰ Boost achetÃ© !"})}),m.jsxs("div",{className:"text-center py-6",children:[m.jsx("div",{className:"text-6xl mb-4",children:"âœ…"}),m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"FÃ©licitations !"}),m.jsx("p",{className:"text-muted-foreground mb-4",children:"Votre boost a Ã©tÃ© achetÃ© avec succÃ¨s et sera activÃ© aprÃ¨s confirmation du paiement."}),m.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:m.jsxs("p",{className:"text-sm text-green-800",children:[m.jsx("strong",{children:"Package :"})," ",v.packageData.name,m.jsx("br",{}),m.jsx("strong",{children:"Prix :"})," ",v.packageData.price," FCFA",m.jsx("br",{}),m.jsx("strong",{children:"DurÃ©e :"})," ",v.packageData.duration_days," jours"]})})]}),m.jsx("div",{className:"flex justify-center",children:m.jsx(ie,{onClick:()=>b(null),children:"Continuer"})})]})}),m.jsx(ht,{open:g,onOpenChange:j,children:m.jsxs(pt,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[m.jsx(gt,{children:m.jsx(jt,{children:"Choisir un package de boost"})}),m.jsx(sr,{listingId:s,onPackageSelected:e=>{b(e),j(!1),e.boostId?t("/paiement/"+e.boostId):r({title:"Erreur",description:"Erreur lors de la crÃ©ation du boost. Veuillez rÃ©essayer.",variant:"destructive"})},onClose:()=>j(!1)})]})})]})}):m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Annonce non trouvÃ©e"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"L'annonce que vous recherchez n'existe pas."}),m.jsx(ie,{onClick:()=>t(-1),variant:"outline",children:"Retour"})]})})},ar=({amount:e,currency:s="XOF",onPaymentMethodSelected:t,onClose:a,packageName:r="Package Premium",userCountry:i="BJ"})=>{var n,l;const[u,x]=p.useState(""),[h,g]=p.useState(""),[j,v]=p.useState({number:"",expiry:"",cvv:"",name:"",brand:"visa"}),[f,b]=p.useState(!1),[N,y]=p.useState(null),[w,k]=p.useState(!1),[C,S]=p.useState(""),[z,A]=p.useState(i),P=vt.getPaymentMethods(z),M=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:s,minimumFractionDigits:0,maximumFractionDigits:0}).format(e),_=e=>{switch(e){case"orange":return"border-orange-200 bg-gradient-to-r from-orange-50 to-amber-50 hover:from-orange-100 hover:to-amber-100";case"yellow":return"border-yellow-200 bg-gradient-to-r from-yellow-50 to-orange-50 hover:from-yellow-100 hover:to-orange-100";case"blue":return"border-blue-200 bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100";case"green":return"border-green-200 bg-gradient-to-r from-green-50 to-emerald-50 hover:from-green-100 hover:to-emerald-100";default:return"border-gray-200 bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100"}};return m.jsx(Ps,{children:m.jsxs("div",{className:"space-y-6",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"ğŸ’³ Choisir le mode de paiement"}),m.jsx("p",{className:"text-muted-foreground",children:"SÃ©lectionnez votre mÃ©thode de paiement prÃ©fÃ©rÃ©e pour finaliser votre achat"}),m.jsx("div",{className:"mt-4 flex justify-center",children:m.jsxs("div",{className:"flex items-center gap-2 bg-white/50 px-4 py-2 rounded-lg border",children:[m.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),m.jsx("span",{className:"text-sm text-muted-foreground",children:"Pays :"}),m.jsxs(tt,{value:z,onValueChange:A,children:[m.jsx(at,{className:"w-32 h-8",children:m.jsx(rt,{})}),m.jsxs(it,{children:[m.jsx(nt,{value:"BJ",children:"ğŸ‡§ğŸ‡¯ BÃ©nin"}),m.jsx(nt,{value:"CI",children:"ğŸ‡¨ğŸ‡® CÃ´te d'Ivoire"}),m.jsx(nt,{value:"SN",children:"ğŸ‡¸ğŸ‡³ SÃ©nÃ©gal"}),m.jsx(nt,{value:"ML",children:"ğŸ‡²ğŸ‡± Mali"}),m.jsx(nt,{value:"BF",children:"ğŸ‡§ğŸ‡« Burkina Faso"}),m.jsx(nt,{value:"NE",children:"ğŸ‡³ğŸ‡ª Niger"}),m.jsx(nt,{value:"TG",children:"ğŸ‡¹ğŸ‡¬ Togo"}),m.jsx(nt,{value:"GH",children:"ğŸ‡¬ğŸ‡­ Ghana"}),m.jsx(nt,{value:"NG",children:"ğŸ‡³ğŸ‡¬ Nigeria"})]})]})]})}),m.jsxs(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"mt-6 p-6 bg-gradient-to-r from-primary/5 to-blue-500/5 rounded-xl border border-primary/20 shadow-sm",children:[m.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"RÃ©sumÃ© de votre commande"}),m.jsx("div",{className:"font-semibold text-lg text-primary",children:r}),m.jsx("div",{className:"text-3xl font-bold text-primary",children:M(e)}),m.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"Paiement sÃ©curisÃ© via Kkiapay â€¢ Frais : 1.5% + 50 FCFA"})]})]}),m.jsx(G,{value:u,onValueChange:e=>{x(e),y(null)},children:m.jsx("div",{className:"space-y-4",children:Object.entries(P).map((([e,s],t)=>m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:[m.jsx(Y,{value:e,id:e,className:"sr-only"}),m.jsx(Ie,{htmlFor:e,className:"block cursor-pointer p-6 border-2 rounded-xl transition-all duration-300 hover:shadow-lg "+(u===e?"border-primary bg-gradient-to-r from-primary/5 to-blue-500/5 shadow-lg scale-[1.02]":_(s.color||"blue")),children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(Vt.div,{whileHover:{scale:1.1},className:"p-3 rounded-lg bg-white shadow-sm",children:m.jsx("span",{className:"text-2xl",children:s.icon})})}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("h3",{className:"font-semibold text-lg",children:s.name}),s.popular&&m.jsxs(Xe,{variant:"default",className:"bg-gradient-to-r from-orange-500 to-red-500 text-white text-xs",children:[m.jsx(ts,{className:"h-3 w-3 mr-1"}),"Populaire"]}),m.jsxs(Ms,{children:[m.jsx(_s,{children:m.jsx(ns,{className:"h-4 w-4 text-muted-foreground"})}),m.jsx(Es,{children:m.jsxs("p",{children:["Temps de traitement : ",s.processingTime]})})]})]}),m.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:["â±ï¸ Traitement : ",s.processingTime]})]}),m.jsx("div",{className:"flex-shrink-0",children:m.jsx("div",{className:"w-6 h-6 rounded-full border-2 transition-all duration-300 "+(u===e?"border-primary bg-primary shadow-lg":"border-gray-300"),children:u===e&&m.jsx(Vt.div,{initial:{scale:0},animate:{scale:1},className:"w-3 h-3 bg-white rounded-full m-0.5"})})})]})})]},e)))})}),m.jsx(Ot,{mode:"wait",children:u&&m.jsxs(Vt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4",children:[("orange_money"===u||"mtn_mobile_money"===u||"moov_money"===u)&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:m.jsxs(qe,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center gap-2",children:[m.jsx(bt,{className:"h-5 w-5"}),null==(n=P[u])?void 0:n.name]})}),m.jsxs(Te,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"phone",className:"text-sm font-medium",children:"NumÃ©ro de tÃ©lÃ©phone"}),m.jsx(Ce,{id:"phone",type:"tel",placeholder:"Ex: "+("BJ"===z?"90 12 34 56":"CI"===z?"07 08 09 10 11":"NumÃ©ro local"),value:h,onChange:e=>(e=>{const s=vt.formatPhoneNumber(e,z);g(s)})(e.target.value),className:"mt-2 h-12 text-lg",onFocus:()=>S("phone"),onBlur:()=>S("")}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Entrez votre numÃ©ro ",null==(l=P[u])?void 0:l.name]})]}),m.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(xs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-blue-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"Paiement sÃ©curisÃ©"}),m.jsx("p",{children:"Vous recevrez un SMS de confirmation pour valider le paiement"})]})]})})]})]})}),"card"===u&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:m.jsxs(qe,{className:"border-0 shadow-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[m.jsx(Fe,{children:m.jsxs(Le,{className:"flex items-center gap-2",children:[m.jsx(vs,{className:"h-5 w-5"}),"Informations de la carte"]})}),m.jsxs(Te,{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"cardNumber",className:"text-sm font-medium",children:"NumÃ©ro de carte"}),m.jsxs("div",{className:"relative mt-2",children:[m.jsx(Ce,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:j.number,onChange:e=>(e=>{var s;const t=(null==(s=e.replace(/\D/g,"").match(/.{1,4}/g))?void 0:s.join(" "))||"";v((e=>c(o({},e),{number:t})));const a=e.replace(/\D/g,"")[0];let r="visa";"5"===a?r="mastercard":"3"===a?r="amex":"6"===a&&(r="discover"),v((e=>c(o({},e),{brand:r})))})(e.target.value),maxLength:19,className:"h-12 text-lg pr-12",onFocus:()=>S("cardNumber"),onBlur:()=>S("")}),m.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-2xl",children:(j.brand,"ğŸ’³")})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"expiry",className:"text-sm font-medium",children:"Date d'expiration"}),m.jsx(Ce,{id:"expiry",type:"text",placeholder:"MM/AA",value:j.expiry,onChange:e=>(e=>{let s=e.replace(/\D/g,"");2>s.length||(s=s.substring(0,2)+"/"+s.substring(2,4)),v((e=>c(o({},e),{expiry:s})))})(e.target.value),maxLength:5,className:"mt-2 h-12",onFocus:()=>S("expiry"),onBlur:()=>S("")})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"cvv",className:"text-sm font-medium",children:"Code de sÃ©curitÃ©"}),m.jsxs("div",{className:"relative mt-2",children:[m.jsx(Ce,{id:"cvv",type:w?"text":"password",placeholder:"123",value:j.cvv,onChange:e=>v((s=>c(o({},s),{cvv:e.target.value}))),maxLength:4,className:"h-12 pr-12",onFocus:()=>S("cvv"),onBlur:()=>S("")}),m.jsx(ie,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0",onClick:()=>k(!w),children:w?m.jsx(Nt,{className:"h-4 w-4"}):m.jsx(Ke,{className:"h-4 w-4"})})]})]})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"cardName",className:"text-sm font-medium",children:"Nom sur la carte"}),m.jsx(Ce,{id:"cardName",type:"text",placeholder:"Nom et prÃ©nom",value:j.name,onChange:e=>v((s=>c(o({},s),{name:e.target.value}))),className:"mt-2 h-12",onFocus:()=>S("cardName"),onBlur:()=>S("")})]}),m.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Re,{className:"h-5 w-5 text-green-600 mt-0.5"}),m.jsxs("div",{className:"text-sm text-green-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"Paiement sÃ©curisÃ© SSL"}),m.jsx("p",{children:"Vos informations sont chiffrÃ©es et protÃ©gÃ©es"})]})]})})]})]})})]},u)}),m.jsx(Ot,{children:N&&m.jsx(Vt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:m.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[m.jsx(ls,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm",children:N})]})})}),m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row gap-3 justify-center",children:[m.jsx(ie,{onClick:a,variant:"outline",className:"flex-1 sm:flex-none h-12",children:"Annuler"}),m.jsx(ie,{onClick:()=>d(null,null,(function*(){if(y(null),u)if("orange_money"!==u&&"mtn_mobile_money"!==u&&"moov_money"!==u||h&&vt.validatePhoneNumber(h,z))if("card"!==u||j.number&&j.expiry&&j.cvv&&j.name)try{b(!0);const a=o(o({method:u,amount:e,currency:s,packageName:r,country:z},"orange_money"===u||"mtn_mobile_money"===u||"moov_money"===u?{phoneNumber:h}:{}),"card"===u?{cardData:j}:{});t(a)}catch(a){y(a.message||"Erreur lors de la sÃ©lection de la mÃ©thode de paiement")}finally{b(!1)}else y("Veuillez remplir tous les champs de la carte correctement");else y("Veuillez entrer un numÃ©ro de tÃ©lÃ©phone valide");else y("Veuillez sÃ©lectionner une mÃ©thode de paiement")})),disabled:!u||f,className:"flex-1 sm:flex-none h-12 bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 shadow-lg",children:f?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Traitement..."]}):m.jsxs(m.Fragment,{children:[m.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Payer ",M(e)]})})]}),m.jsxs(Vt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-sm text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[m.jsx(Re,{className:"h-4 w-4"}),m.jsx("span",{children:"Paiement 100% sÃ©curisÃ© via Kkiapay"})]}),m.jsx("p",{children:"Vos informations de paiement sont protÃ©gÃ©es par un chiffrement SSL de niveau bancaire"})]})]})})},rr=()=>{var e,s,t,a,r,i;const{boostId:n}=N(),l=f(),o=u(),{user:c}=ae(),{toast:x}=Me(),[h,g]=p.useState("method-selection"),[j,v]=p.useState(null),[b,y]=p.useState(null),[w,k]=p.useState("pending"),[C,S]=p.useState(!0),[z,A]=p.useState(null),[P,M]=p.useState(!1),[_,E]=p.useState(0),[q,F]=p.useState(0),[L,D]=p.useState(!1);p.useEffect((()=>{n&&T()}),[n]);const T=()=>d(null,null,(function*(){var e;try{if(S(!0),A(null),null==(e=o.state)?void 0:e.boostData)v(o.state.boostData);else{const e=yield As.getBoostStatus(n);if(e.currentBoost)v(e.currentBoost);else{const{data:e,error:s}=yield Ue.from("listing_boosts").select("\n              *,\n              boost_packages (*)\n            ").eq("id",n).single();if(s||!e)throw Error("Boost non trouvÃ©");v(e)}}}catch(s){A(s.message||"Erreur lors du chargement des donnÃ©es du boost"),x({title:"Erreur",description:s.message,variant:"destructive"})}finally{S(!1)}})),I=()=>{g("method-selection"),y(null),k("pending"),A(null),E(0)},R=e=>{switch(e){case"orange_money":return"Orange Money";case"mtn_mobile_money":return"MTN Mobile Money";case"card":return"Carte Bancaire";default:return"MÃ©thode de paiement"}};return c?C?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(qe,{className:"w-full max-w-md mx-4",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Chargement..."}),m.jsx("p",{className:"text-muted-foreground",children:"PrÃ©paration de votre paiement"})]})})}):z&&"error"===h?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(qe,{className:"w-full max-w-md mx-4",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"âš ï¸"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Erreur de paiement"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:z}),3>q&&m.jsx("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:m.jsxs("p",{className:"text-sm text-yellow-800",children:["Tentative ",q+1," sur 3"]})}),m.jsxs("div",{className:"space-y-3",children:[3>q&&m.jsxs(ie,{onClick:()=>d(null,null,(function*(){F((e=>e+1)),A(null),g("method-selection")})),className:"w-full",children:[m.jsx(ne,{className:"h-4 w-4 mr-2"}),"RÃ©essayer"]}),m.jsx(ie,{onClick:I,variant:"outline",className:"w-full",children:"Changer de mÃ©thode"}),m.jsx(ie,{onClick:()=>l(-1),variant:"ghost",className:"w-full",children:"Retour"})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[m.jsxs(ie,{onClick:()=>l(-1),variant:"ghost",className:"mb-4 hover:bg-white/50",children:[m.jsx($s,{className:"h-4 w-4 mr-2"}),"Retour"]}),m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"ğŸ’³ Paiement SÃ©curisÃ©"}),m.jsx("p",{className:"text-muted-foreground text-lg",children:"Finalisez votre achat de boost premium en toute sÃ©curitÃ©"})]})]}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[m.jsxs("div",{className:"flex items-center "+("method-selection"===h?"text-primary":"text-muted-foreground"),children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("method-selection"===h?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"1"}),m.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"MÃ©thode de paiement"})]}),m.jsx("div",{className:"w-8 h-1 bg-muted-foreground/30"}),m.jsxs("div",{className:"flex items-center "+("payment-processing"===h?"text-primary":"text-muted-foreground"),children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("payment-processing"===h?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"2"}),m.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"Traitement"})]}),m.jsx("div",{className:"w-8 h-1 bg-muted-foreground/30"}),m.jsxs("div",{className:"flex items-center "+("success"===h?"text-primary":"text-muted-foreground"),children:[m.jsx("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center transition-all duration-300 "+("success"===h?"border-primary bg-primary text-white shadow-lg":"border-muted-foreground"),children:"3"}),m.jsx("span",{className:"ml-3 text-sm font-medium hidden sm:block",children:"Confirmation"})]})]}),"payment-processing"===h&&m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx(yt,{value:_,className:"h-2"}),m.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-2",children:[_,"% terminÃ©"]})]})]}),m.jsxs(Ot,{mode:"wait",children:["method-selection"===h&&m.jsx(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"max-w-2xl mx-auto",children:m.jsx(ar,{amount:(null==(e=null==j?void 0:j.boost_packages)?void 0:e.price)||0,currency:"XOF",packageName:(null==(s=null==j?void 0:j.boost_packages)?void 0:s.name)||"Package Premium",onPaymentMethodSelected:e=>d(null,null,(function*(){try{g("payment-processing"),E(0);const s=j.boost_packages,t=(null==s?void 0:s.price)||0,a=yield vt.createPayment({userId:c.id,amount:t,currency:"XOF",paymentMethod:e.method,boostId:j.id,packageName:(null==s?void 0:s.name)||"Package Premium",listingId:j.listing_id,description:"Boost "+((null==s?void 0:s.name)||"Premium"),phoneNumber:e.phoneNumber,email:c.email,country:e.country,cardData:e.cardData});if(!a.success)throw Error("Erreur lors de la crÃ©ation du paiement");let r;if(E(30),"orange_money"===e.method?r=yield vt.initiateOrangeMoneyPayment(a.paymentId,e.phoneNumber):"mtn_mobile_money"===e.method?r=yield vt.initiateMTNPayment(a.paymentId,e.phoneNumber):"moov_money"===e.method?r=yield vt.initiateMoovPayment(a.paymentId,e.phoneNumber):"card"===e.method&&(r=yield vt.initiateCardPayment(a.paymentId,e.cardData)),E(60),!r.success)throw Error("Erreur lors de l'initialisation du paiement");if(E(80),!r.paymentUrl)throw Error("URL de paiement non disponible");window.location.href=r.paymentUrl,E(100)}catch(s){A(s.message),g("error")}})),onClose:()=>l(-1)})},"method-selection"),"payment-processing"===h&&m.jsx(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"max-w-md mx-auto",children:m.jsx(qe,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx(Vt.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0},className:"mb-6",children:(e=>{switch(e){case"orange_money":return m.jsx(St,{className:"h-6 w-6 text-orange-500"});case"mtn_mobile_money":return m.jsx(Ct,{className:"h-6 w-6 text-yellow-500"});case"card":return m.jsx(vs,{className:"h-6 w-6 text-blue-500"});default:return m.jsx(vs,{className:"h-6 w-6"})}})(null==b?void 0:b.method)}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Traitement en cours..."}),m.jsxs("p",{className:"text-muted-foreground mb-6",children:["Votre paiement via ",R(null==b?void 0:b.method)," est en cours de traitement."]}),m.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground mb-6",children:[m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(os,{className:"h-4 w-4 text-green-500"}),m.jsx("span",{children:"VÃ©rification de la transaction"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(os,{className:"h-4 w-4 text-green-500"}),m.jsx("span",{children:"Confirmation du paiement"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx(ss,{className:"h-4 w-4 text-blue-500"}),m.jsx("span",{children:"Activation de votre boost"})]})]}),m.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6",children:m.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[m.jsx(ns,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm",children:"Ne fermez pas cette page pendant le traitement"})]})}),m.jsx(ie,{onClick:I,variant:"outline",size:"sm",children:"Annuler"})]})})},"payment-processing"),"success"===h&&m.jsx(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"max-w-md mx-auto",children:m.jsx(qe,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 shadow-xl",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx(Vt.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"text-6xl mb-4",children:"ğŸ‰"}),m.jsx("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"Paiement rÃ©ussi !"}),m.jsx("p",{className:"text-green-700 mb-6",children:"Votre boost premium a Ã©tÃ© activÃ© avec succÃ¨s."}),m.jsx("div",{className:"bg-white p-4 rounded-lg border border-green-200 mb-6 shadow-sm",children:m.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Package :"}),m.jsx("span",{className:"font-semibold",children:null==(t=null==j?void 0:j.boost_packages)?void 0:t.name})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Montant :"}),m.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format((null==(a=null==j?void 0:j.boost_packages)?void 0:a.price)||0)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"MÃ©thode :"}),m.jsx("span",{children:R(null==b?void 0:b.method)})]})]})}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs(ie,{onClick:()=>{M(!0)},variant:"outline",className:"w-full hover:bg-green-50",children:[m.jsx(wt,{className:"h-4 w-4 mr-2"}),"Voir le reÃ§u"]}),m.jsxs(ie,{onClick:()=>l("/booster-annonce/"+(null==j?void 0:j.listing_id)),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90 shadow-lg",children:[m.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Voir mon boost"]}),m.jsx(ie,{onClick:()=>l("/mes-boosts"),variant:"ghost",className:"w-full hover:bg-green-50",children:"Mes boosts"})]})]})})},"success")]}),m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 text-center",children:m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-muted-foreground bg-white/50 px-4 py-2 rounded-full border",children:[m.jsx(xs,{className:"h-4 w-4"}),m.jsx("span",{children:"Paiement 100% sÃ©curisÃ© SSL"}),m.jsx(ie,{variant:"ghost",size:"sm",onClick:()=>D(!0),className:"h-6 w-6 p-0",children:m.jsx(ns,{className:"h-3 w-3"})})]})}),m.jsx(ht,{open:P,onOpenChange:M,children:m.jsxs(pt,{className:"sm:max-w-md",children:[m.jsx(gt,{children:m.jsxs(jt,{className:"flex items-center gap-2",children:[m.jsx(wt,{className:"h-5 w-5"}),"ReÃ§u de paiement"]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.jsxs("div",{className:"text-sm space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"NumÃ©ro de transaction :"}),m.jsxs("span",{className:"font-mono",children:["TXN-",Date.now()]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Date :"}),m.jsx("span",{children:(new Date).toLocaleDateString("fr-FR")})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Package :"}),m.jsx("span",{children:null==(r=null==j?void 0:j.boost_packages)?void 0:r.name})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Montant :"}),m.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format((null==(i=null==j?void 0:j.boost_packages)?void 0:i.price)||0)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"MÃ©thode :"}),m.jsx("span",{children:R(null==b?void 0:b.method)})]})]})}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ie,{onClick:()=>d(null,null,(function*(){try{const e=yield vt.generateReceipt(null==b?void 0:b.paymentId);if(e.success){const s=document.createElement("a");s.href=e.receiptUrl,s.download=`receipt-${n}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),x({title:"ReÃ§u tÃ©lÃ©chargÃ©",description:"Le reÃ§u a Ã©tÃ© tÃ©lÃ©chargÃ© avec succÃ¨s."})}}catch(e){x({title:"Erreur",description:"Impossible de tÃ©lÃ©charger le reÃ§u",variant:"destructive"})}})),className:"flex-1",children:[m.jsx(kt,{className:"h-4 w-4 mr-2"}),"TÃ©lÃ©charger"]}),m.jsx(ie,{onClick:()=>M(!1),variant:"outline",className:"flex-1",children:"Fermer"})]})]})]})}),m.jsx(ht,{open:L,onOpenChange:D,children:m.jsxs(pt,{className:"sm:max-w-md",children:[m.jsx(gt,{children:m.jsxs(jt,{className:"flex items-center gap-2",children:[m.jsx(xs,{className:"h-5 w-5"}),"SÃ©curitÃ© du paiement"]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Re,{className:"h-5 w-5 text-green-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"Chiffrement SSL"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Vos donnÃ©es sont protÃ©gÃ©es par un chiffrement de niveau bancaire"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(xs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"ConformitÃ© PCI DSS"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Nos partenaires de paiement respectent les standards internationaux"})]})]}),m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx(Ke,{className:"h-5 w-5 text-purple-600 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold",children:"Aucun stockage"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Nous ne stockons jamais vos informations de paiement"})]})]})]}),m.jsx(ie,{onClick:()=>D(!1),className:"w-full",children:"Compris"})]})]})})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(qe,{className:"w-full max-w-md mx-4",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”’"}),m.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Connexion requise"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Vous devez Ãªtre connectÃ© pour effectuer un paiement."}),m.jsx(ie,{onClick:()=>l("/connexion"),className:"w-full",children:"Se connecter"})]})})})},ir=()=>{const[e]=b(),s=f(),{toast:t}=Me(),[a,r]=p.useState("processing"),[i,n]=p.useState(null),[l,o]=p.useState(!0),[c,u]=p.useState(null);p.useEffect((()=>{x()}),[]);const x=()=>d(null,null,(function*(){try{o(!0);const s=e.get("payment_id"),a=e.get("transaction_id"),i=e.get("status"),l=e.get("reference");if(!s)throw Error("ID de paiement manquant");if("success"===i||"successful"===i){const e=yield vt.confirmPayment(s,{transactionId:a,reference:l,status:"successful"});if(!e.success)throw Error("Erreur lors de la confirmation du paiement");r("success"),n(e.paymentData),t({title:"ğŸ‰ Paiement rÃ©ussi !",description:"Votre boost a Ã©tÃ© activÃ© avec succÃ¨s."})}else if("failed"===i||"cancelled"===i)r("failed"),u("Le paiement a Ã©chouÃ© ou a Ã©tÃ© annulÃ©"),t({title:"âŒ Paiement Ã©chouÃ©",description:"Le paiement n'a pas pu Ãªtre traitÃ©.",variant:"destructive"});else{const e=yield vt.getPaymentStatus(s);"completed"===e.status?(r("success"),n(e)):"failed"===e.status||"cancelled"===e.status?(r("failed"),u("Le paiement a Ã©chouÃ©")):(r("pending"),u("Le statut du paiement est en attente de confirmation"))}}catch(s){r("error"),u(s.message),t({title:"Erreur",description:s.message,variant:"destructive"})}finally{o(!1)}}));return l?m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30 flex items-center justify-center",children:m.jsx(qe,{className:"w-full max-w-md mx-4",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("h2",{className:"text-lg font-semibold mb-2",children:"VÃ©rification du paiement..."}),m.jsx("p",{className:"text-muted-foreground",children:"Veuillez patienter pendant que nous vÃ©rifions votre transaction"})]})})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-slate-50 to-blue-50/30",children:m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsx("div",{className:"max-w-md mx-auto",children:m.jsx(Vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:m.jsx(qe,{className:"shadow-xl border-0",children:m.jsxs(Te,{className:"p-8 text-center",children:[m.jsx(Vt.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},className:"mb-6",children:(()=>{switch(a){case"success":return m.jsx(os,{className:"h-16 w-16 text-green-500"});case"failed":case"error":return m.jsx(qs,{className:"h-16 w-16 text-red-500"});case"pending":return m.jsx(ss,{className:"h-16 w-16 text-yellow-500"});default:return m.jsx(ls,{className:"h-16 w-16 text-blue-500"})}})()}),m.jsx("h1",{className:"text-2xl font-bold mb-2",children:(()=>{switch(a){case"success":return"Paiement rÃ©ussi !";case"failed":return"Paiement Ã©chouÃ©";case"error":return"Erreur de paiement";case"pending":return"Paiement en attente";default:return"Traitement en cours..."}})()}),m.jsx("p",{className:"text-muted-foreground mb-6",children:(()=>{switch(a){case"success":return"Votre boost premium a Ã©tÃ© activÃ© avec succÃ¨s.";case"failed":return"Le paiement n'a pas pu Ãªtre traitÃ©. Veuillez rÃ©essayer.";case"error":return"Une erreur s'est produite lors du traitement du paiement.";case"pending":return"Votre paiement est en cours de traitement.";default:return"VÃ©rification du statut de votre paiement..."}})()}),"success"===a&&i&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-green-50 p-4 rounded-lg border border-green-200 mb-6",children:m.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"RÃ©fÃ©rence :"}),m.jsx("span",{className:"font-mono",children:i.reference})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Montant :"}),m.jsx("span",{className:"font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:i.currency||"XOF"}).format(i.amount)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"MÃ©thode :"}),m.jsx("span",{children:i.paymentMethod})]})]})}),"failed"===a||"error"===a&&m.jsx(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-red-50 p-4 rounded-lg border border-red-200 mb-6",children:m.jsxs("div",{className:"text-sm text-red-800",children:[m.jsx("p",{className:"font-medium mb-1",children:"DÃ©tails de l'erreur :"}),m.jsx("p",{children:c})]})}),m.jsxs("div",{className:"space-y-3",children:["success"===a&&m.jsxs(m.Fragment,{children:[m.jsxs(ie,{onClick:()=>s("/mes-boosts"),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[m.jsx(ze,{className:"h-4 w-4 mr-2"}),"Voir mes boosts"]}),m.jsxs(ie,{onClick:()=>s("/dashboard"),variant:"outline",className:"w-full",children:[m.jsx(ce,{className:"h-4 w-4 mr-2"}),"Retour au tableau de bord"]})]}),("failed"===a||"error"===a)&&m.jsxs(m.Fragment,{children:[m.jsxs(ie,{onClick:()=>s(-2),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[m.jsx(ze,{className:"h-4 w-4 mr-2"}),"RÃ©essayer le paiement"]}),m.jsxs(ie,{onClick:()=>s("/"),variant:"outline",className:"w-full",children:[m.jsx(ce,{className:"h-4 w-4 mr-2"}),"Retour Ã  l'accueil"]})]}),"pending"===a&&m.jsxs(m.Fragment,{children:[m.jsxs(ie,{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-primary to-blue-600 hover:from-primary/90 hover:to-blue-600/90",children:[m.jsx(ze,{className:"h-4 w-4 mr-2"}),"Actualiser le statut"]}),m.jsxs(ie,{onClick:()=>s("/"),variant:"outline",className:"w-full",children:[m.jsx(ce,{className:"h-4 w-4 mr-2"}),"Retour Ã  l'accueil"]})]})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:m.jsx("p",{className:"text-xs text-muted-foreground",children:"Si vous avez des questions, contactez notre support client."})})]})})})})})})},nr=new class{constructor(){this.publicKey=void 0,this.secretKey=void 0,this.baseUrl="https://api.fedapay.com/v1",this.isTestMode=!1,this.isTestMode&&(this.baseUrl="https://sandbox-api.fedapay.com/v1")}initializePayment(e){return d(this,null,(function*(){try{const s=yield fetch(this.baseUrl+"/transactions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.secretKey},body:JSON.stringify({amount:e.amount,currency:e.currency||"XOF",description:e.description,customer:{email:e.email,phone:e.phone,name:e.name},payment_method:e.payment_method,callback_url:e.callback_url,metadata:{boost_id:e.boost_id,listing_id:e.listing_id,package_name:e.package_name,user_id:e.user_id}})}),t=yield s.json();if(!s.ok)throw Error(t.message||"Erreur lors de l'initialisation du paiement");return{success:!0,transactionId:t.id,reference:t.reference,paymentUrl:t.payment_url,status:t.status,message:"Paiement initialisÃ© avec succÃ¨s"}}catch(s){throw Error("Erreur FedaPay: "+s.message)}}))}verifyPayment(e){return d(this,null,(function*(){try{const s=yield fetch(`${this.baseUrl}/transactions/${e}`,{method:"GET",headers:{Authorization:"Bearer "+this.secretKey}}),t=yield s.json();if(!s.ok)throw Error(t.message||"Erreur lors de la vÃ©rification du paiement");return{success:!0,status:t.status,amount:t.amount,currency:t.currency,reference:t.reference,paymentMethod:t.payment_method,customer:t.customer,metadata:t.metadata,createdAt:t.created_at,updatedAt:t.updated_at}}catch(s){throw Error("Erreur vÃ©rification: "+s.message)}}))}refundPayment(e,s=null){return d(this,null,(function*(){try{const t=s?{amount:s}:{},a=yield fetch(`${this.baseUrl}/transactions/${e}/refunds`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.secretKey},body:JSON.stringify(t)}),r=yield a.json();if(!a.ok)throw Error(r.message||"Erreur lors du remboursement");return{success:!0,refundId:r.id,amount:r.amount,status:r.status,message:"Remboursement effectuÃ© avec succÃ¨s"}}catch(t){throw Error("Erreur remboursement: "+t.message)}}))}getPaymentMethods(e="BJ"){return[{id:"orange_money",name:"Orange Money",icon:"ğŸŸ ",description:"Paiement via Orange Money",available:!0,minAmount:100,maxAmount:5e5},{id:"mtn_mobile_money",name:"MTN Mobile Money",icon:"ğŸŸ¡",description:"Paiement via MTN Mobile Money",available:!0,minAmount:100,maxAmount:5e5},{id:"moov_money",name:"Moov Money",icon:"ğŸ”µ",description:"Paiement via Moov Money",available:!0,minAmount:100,maxAmount:5e5},{id:"card",name:"Carte Bancaire",icon:"ğŸ’³",description:"Paiement par carte Visa/Mastercard",available:!0,minAmount:100,maxAmount:1e6}]}calculateFees(e){const s=.025*e+50;return{amount:e,fee:Math.round(s),total:e+Math.round(s),percentage:2.5,fixedFee:50}}validatePhoneNumber(e,s="BJ"){return/^(\+229|229)?[0-9]{8}$/.test(e.replace(/\s/g,""))}formatPhoneNumber(e,s="BJ"){const t=e.replace(/\D/g,"");return 8===t.length?`+229 ${t.slice(0,2)} ${t.slice(2,4)} ${t.slice(4,6)} ${t.slice(6,8)}`:e}isConfigured(){return!(!this.publicKey||!this.secretKey)}getConfig(){return{isConfigured:this.isConfigured(),isTestMode:this.isTestMode,baseUrl:this.baseUrl,hasPublicKey:!!this.publicKey,hasSecretKey:!!this.secretKey}}};function lr(){const[e,s]=p.useState(null),[t,a]=p.useState(!1),[r,i]=p.useState(null),[n,l]=p.useState(null),[u,x]=p.useState({amount:1e3,currency:"XOF",description:"Test FedaPay - MaxiMarket",email:"test@maxiimarket.com",phone:"+229 90 12 34 56",name:"Test Utilisateur",payment_method:"orange_money"});p.useEffect((()=>{const e=nr.getConfig();s(e)}),[]);const h=(e,s)=>{x((t=>c(o({},t),{[e]:s})))},g=nr.getPaymentMethods(),j=nr.calculateFees(u.amount);return m.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{className:"flex items-center gap-2",children:"ğŸ¦ Test FedaPay - Paiements BÃ©nin"}),m.jsx(De,{children:"Testez l'intÃ©gration FedaPay pour les paiements Orange Money, MTN, Moov et cartes bancaires"})]}),m.jsxs(Te,{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Configuration"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx(Xe,{variant:(null==e?void 0:e.isConfigured)?"default":"destructive",children:(null==e?void 0:e.isConfigured)?"âœ… ConfigurÃ©":"âŒ Non configurÃ©"}),m.jsx(Xe,{variant:(null==e?void 0:e.isTestMode)?"secondary":"default",children:(null==e?void 0:e.isTestMode)?"ğŸ§ª Mode Test":"ğŸš€ Mode Production"}),m.jsx(Xe,{variant:(null==e?void 0:e.hasPublicKey)?"default":"destructive",children:(null==e?void 0:e.hasPublicKey)?"ğŸ”‘ ClÃ© Publique":"âŒ Pas de clÃ©"}),m.jsx(Xe,{variant:(null==e?void 0:e.hasSecretKey)?"default":"destructive",children:(null==e?void 0:e.hasSecretKey)?"ğŸ” ClÃ© SecrÃ¨te":"âŒ Pas de clÃ©"})]})]}),m.jsx(ot,{}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"DonnÃ©es de Test"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"amount",children:"Montant (FCFA)"}),m.jsx(Ce,{id:"amount",type:"number",value:u.amount,onChange:e=>h("amount",parseInt(e.target.value)),placeholder:"1000"})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"currency",children:"Devise"}),m.jsxs(tt,{value:u.currency,onValueChange:e=>h("currency",e),children:[m.jsx(at,{children:m.jsx(rt,{})}),m.jsxs(it,{children:[m.jsx(nt,{value:"XOF",children:"XOF (FCFA)"}),m.jsx(nt,{value:"EUR",children:"EUR (Euro)"})]})]})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"email",children:"Email"}),m.jsx(Ce,{id:"email",type:"email",value:u.email,onChange:e=>h("email",e.target.value),placeholder:"test@maxiimarket.com"})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"phone",children:"TÃ©lÃ©phone"}),m.jsx(Ce,{id:"phone",type:"tel",value:u.phone,onChange:e=>h("phone",e.target.value),placeholder:"+229 90 12 34 56"})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"name",children:"Nom complet"}),m.jsx(Ce,{id:"name",type:"text",value:u.name,onChange:e=>h("name",e.target.value),placeholder:"Test Utilisateur"})]}),m.jsxs("div",{children:[m.jsx(Ie,{htmlFor:"payment_method",children:"MÃ©thode de paiement"}),m.jsxs(tt,{value:u.payment_method,onValueChange:e=>h("payment_method",e),children:[m.jsx(at,{children:m.jsx(rt,{})}),m.jsx(it,{children:g.map((e=>m.jsxs(nt,{value:e.id,children:[e.icon," ",e.name]},e.id)))})]})]})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Calcul des Frais"}),m.jsx("div",{className:"bg-muted p-4 rounded-lg",children:m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Montant:"}),m.jsxs("div",{className:"text-lg font-bold",children:[j.amount.toLocaleString()," FCFA"]})]}),m.jsxs("div",{children:[m.jsxs("span",{className:"font-medium",children:["Frais (",j.percentage,"%):"]}),m.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fee.toLocaleString()," FCFA"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Frais fixes:"}),m.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fixedFee," FCFA"]})]}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Total:"}),m.jsxs("div",{className:"text-lg font-bold text-green-600",children:[j.total.toLocaleString()," FCFA"]})]})]})})]}),m.jsx(ot,{}),m.jsxs("div",{className:"flex flex-wrap gap-4",children:[m.jsx(ie,{onClick:()=>d(null,null,(function*(){a(!0),l(null),i(null);try{const e=yield nr.initializePayment(c(o({},u),{callback_url:window.location.origin+"/payment-callback?test=true"}));i(e),e.paymentUrl&&window.open(e.paymentUrl,"_blank")}catch(e){l(e.message)}finally{a(!1)}})),disabled:t||!(null==e?void 0:e.isConfigured),className:"flex-1",children:t?"â³ Initialisation...":"ğŸš€ Tester le Paiement"}),m.jsx(ie,{variant:"outline",onClick:()=>{i(null),l(null)},children:"ğŸ”„ RÃ©initialiser"})]}),(null==r?void 0:r.transactionId)&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-3",children:"VÃ©rification Manuelle"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ce,{placeholder:"ID de transaction",value:r.transactionId,readOnly:!0}),m.jsx(ie,{variant:"outline",onClick:()=>{return e=r.transactionId,d(null,null,(function*(){if(e){a(!0),l(null);try{const s=yield nr.verifyPayment(e);i(s)}catch(s){l(s.message)}finally{a(!1)}}else l("ID de transaction requis")}));var e},disabled:t,children:t?"â³ VÃ©rification...":"ğŸ” VÃ©rifier"})]})]}),n&&m.jsx(L,{variant:"destructive",children:m.jsxs(T,{children:[m.jsx("strong",{children:"Erreur:"})," ",n]})}),r&&m.jsx(L,{children:m.jsx(T,{children:m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Statut:"})," ",r.success?"âœ… SuccÃ¨s":"âŒ Ã‰chec"]}),r.transactionId&&m.jsxs("div",{children:[m.jsx("strong",{children:"ID Transaction:"})," ",r.transactionId]}),r.reference&&m.jsxs("div",{children:[m.jsx("strong",{children:"RÃ©fÃ©rence:"})," ",r.reference]}),r.paymentUrl&&m.jsxs("div",{children:[m.jsx("strong",{children:"URL Paiement:"})," ",m.jsx("a",{href:r.paymentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:r.paymentUrl})]}),r.status&&m.jsxs("div",{children:[m.jsx("strong",{children:"Statut:"})," ",r.status]}),r.message&&m.jsxs("div",{children:[m.jsx("strong",{children:"Message:"})," ",r.message]})]})})})]})]})})}function or(){return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8",children:m.jsxs("div",{className:"container mx-auto",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ğŸ¦ Test FedaPay - Paiements BÃ©nin"}),m.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Testez l'intÃ©gration FedaPay pour les paiements mobiles et cartes bancaires au BÃ©nin. Orange Money, MTN Mobile Money, Moov Money et cartes Visa/Mastercard."})]}),m.jsx(lr,{}),m.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:m.jsxs("p",{children:["ğŸ’¡ ",m.jsx("strong",{children:"Note:"})," Ceci est un environnement de test. Les paiements ne seront pas rÃ©ellement dÃ©bitÃ©s."]})})]})})}const cr=()=>m.jsxs("div",{className:"container mx-auto px-4 py-12 flex flex-col items-center justify-center min-h-[60vh]",children:[m.jsxs(Vt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center max-w-lg",children:[m.jsx("h1",{className:"text-9xl font-bold gradient-text mb-4",children:"404"}),m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Page non trouvÃ©e"}),m.jsx("p",{className:"text-muted-foreground mb-8",children:"La page que vous recherchez n'existe pas ou a Ã©tÃ© dÃ©placÃ©e."}),m.jsx(ie,{asChild:!0,size:"lg",children:m.jsxs(g,{to:"/",children:[m.jsx($s,{className:"mr-2 h-4 w-4"}),"Retour Ã  l'accueil"]})})]}),m.jsx("div",{className:"absolute top-1/3 left-1/4 w-64 h-64 bg-primary/5 rounded-full blur-3xl"}),m.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl"})]}),dr=()=>{const e=[{icon:m.jsx(At,{className:"h-8 w-8 text-primary"}),title:"Innovation Continue",description:"Nous repoussons constamment les limites pour offrir des solutions de pointe."},{icon:m.jsx(Pt,{className:"h-8 w-8 text-primary"}),title:"Confiance & SÃ©curitÃ©",description:"La sÃ©curitÃ© de vos transactions et de vos donnÃ©es est notre prioritÃ© absolue."},{icon:m.jsx(Ge,{className:"h-8 w-8 text-primary"}),title:"Approche Communautaire",description:"Nous construisons une plateforme pour et avec la communautÃ© ouest-africaine."},{icon:m.jsx(ft,{className:"h-8 w-8 text-primary"}),title:"Impact Local Positif",description:"Nous visons Ã  dynamiser l'Ã©conomie locale et Ã  crÃ©er des opportunitÃ©s."}];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-16",children:[m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Ã€ Propos de ",m.jsx("span",{className:"gradient-text",children:xe.siteName})]}),m.jsxs("p",{className:"text-xl text-muted-foreground",children:[xe.tagline,". Notre mission est de rÃ©volutionner le commerce en ligne en Afrique de l'Ouest grÃ¢ce Ã  une technologie innovante et une approche centrÃ©e sur l'utilisateur."]})]}),m.jsxs("div",{className:"max-w-5xl mx-auto",children:[m.jsxs(Vt.section,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"mb-20 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-3xl font-bold mb-6 flex items-center",children:[m.jsx(Qs,{className:"h-8 w-8 mr-3 text-primary"}),"Notre Histoire"]}),m.jsxs("p",{className:"text-muted-foreground mb-4",children:["FondÃ©e avec la vision de simplifier et de sÃ©curiser les Ã©changes commerciaux en Afrique de l'Ouest, ",xe.siteName," est nÃ©e d'une passion pour la technologie et d'un engagement profond envers le dÃ©veloppement Ã©conomique de la rÃ©gion. Nous avons identifiÃ© un besoin crucial pour une plateforme unifiÃ©e, moderne et fiable, capable de connecter acheteurs et vendeurs de maniÃ¨re transparente."]}),m.jsxs("p",{className:"text-muted-foreground",children:["Depuis nos dÃ©buts, nous avons travaillÃ© sans relÃ¢che pour construire une marketplace qui non seulement rÃ©pond aux besoins actuels, mais anticipe Ã©galement les tendances futures du commerce Ã©lectronique. Notre Ã©quipe est composÃ©e d'experts locaux et internationaux, tous unis par l'objectif de faire de ",xe.siteName," le leader incontestÃ© du marchÃ©."]})]}),m.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden shadow-2xl",children:[m.jsx("img",{className:"w-full h-full object-cover",alt:"Ã‰quipe MaxiMarket travaillant ensemble",src:"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=1932&auto=format&fit=crop"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]})]}),m.jsx(ot,{className:"my-20"}),m.jsxs(Vt.section,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-20 text-center",children:[m.jsxs("h2",{className:"text-3xl font-bold mb-10 flex items-center justify-center",children:[m.jsx(zt,{className:"h-8 w-8 mr-3 text-primary"}),"Notre Mission & Vision"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border glassmorphic-card",children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-primary",children:"Mission"}),m.jsx("p",{className:"text-muted-foreground",children:"Connecter l'Afrique de l'Ouest au futur du commerce en fournissant une plateforme marketplace innovante, sÃ©curisÃ©e et accessible Ã  tous. Nous nous engageons Ã  autonomiser les individus et les entreprises en facilitant les transactions et en stimulant la croissance Ã©conomique locale."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border glassmorphic-card",children:[m.jsx("h3",{className:"text-2xl font-semibold mb-4 text-primary",children:"Vision"}),m.jsx("p",{className:"text-muted-foreground",children:"Devenir la marketplace de rÃ©fÃ©rence en Afrique, reconnue pour son excellence technologique, son impact positif sur les communautÃ©s et sa contribution Ã  un Ã©cosystÃ¨me commercial numÃ©rique florissant et inclusif pour le continent."})]})]})]}),m.jsx(ot,{className:"my-20"}),m.jsxs(Vt.section,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.6},className:"mb-16",children:[m.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Nos Valeurs Fondamentales"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map(((e,s)=>m.jsxs(Vt.div,{className:"bg-card p-6 rounded-xl shadow-lg text-center border border-border hover:border-primary transition-colors duration-300 glassmorphic-card",whileHover:{y:-5},children:[m.jsx("div",{className:"p-4 bg-primary/10 rounded-full inline-block mb-4",children:e.icon}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},s)))})]}),m.jsx("div",{className:"text-center mt-16",children:m.jsxs("p",{className:"text-lg text-muted-foreground",children:["PrÃªt Ã  dÃ©couvrir la diffÃ©rence ",xe.siteName," ? ",m.jsx("a",{href:"/",className:"text-primary font-semibold hover:underline",children:"Explorez notre plateforme dÃ¨s maintenant."})]})})]})]})},mr=()=>{const{toast:e}=Me(),[s,t]=p.useState({name:"",email:"",subject:"",message:""}),[a,r]=p.useState(!1),i=e=>{const{name:s,value:a}=e.target;t((e=>c(o({},e),{[s]:a})))};return m.jsxs(Vt.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onSubmit:s=>{s.preventDefault(),r(!0),setTimeout((()=>{e({title:"Message envoyÃ© !",description:"Merci pour votre message. Je vous rÃ©pondrai dÃ¨s que possible.",duration:5e3}),t({name:"",email:"",subject:"",message:""}),r(!1)}),1500)},className:"space-y-6 gradient-border p-6 bg-card rounded-lg",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"name",children:"Nom"}),m.jsx(Ce,{id:"name",name:"name",placeholder:"Votre nom",value:s.name,onChange:i,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"email",children:"Email"}),m.jsx(Ce,{id:"email",name:"email",type:"email",placeholder:"votre@email.com",value:s.email,onChange:i,required:!0})]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"subject",children:"Sujet"}),m.jsx(Ce,{id:"subject",name:"subject",placeholder:"Sujet de votre message",value:s.subject,onChange:i,required:!0})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ie,{htmlFor:"message",children:"Message"}),m.jsx(Js,{id:"message",name:"message",placeholder:"Votre message...",rows:6,value:s.message,onChange:i,required:!0})]}),m.jsx(ie,{type:"submit",className:"w-full",disabled:a,children:a?m.jsxs("span",{className:"flex items-center",children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi en cours..."]}):m.jsxs("span",{className:"flex items-center",children:[m.jsx(Se,{className:"mr-2 h-4 w-4"}),"Envoyer le message"]})})]})},ur=()=>{const e=[{icon:m.jsx(Ae,{className:"h-6 w-6"}),label:"Email",value:xe.contactEmail,href:"mailto:"+xe.contactEmail},{icon:m.jsx(Pe,{className:"h-6 w-6"}),label:"TÃ©lÃ©phone",value:xe.phone,href:"tel:"+xe.phone},{icon:m.jsx(We,{className:"h-6 w-6"}),label:"Adresse",value:xe.address,href:"https://maps.google.com/?q="+encodeURIComponent(xe.address)}],s=[{icon:m.jsx(Mt,{className:"h-6 w-6"}),label:"GitHub",href:xe.socials.github},{icon:m.jsx(we,{className:"h-6 w-6"}),label:"Twitter",href:xe.socials.twitter},{icon:m.jsx(_t,{className:"h-6 w-6"}),label:"LinkedIn",href:xe.socials.linkedin}];return m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Contactez ",m.jsx("span",{className:"gradient-text",children:xe.name})]}),m.jsx("p",{className:"text-muted-foreground",children:"Vous avez un projet en tÃªte ou une question ? N'hÃ©sitez pas Ã  nous contacter !"})]}),m.jsx("div",{className:"max-w-5xl mx-auto",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[m.jsxs(Vt.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Informations de contact"}),m.jsx("div",{className:"space-y-6",children:e.map(((e,s)=>m.jsxs(Vt.a,{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-4 p-4 rounded-lg glass-effect hover:border-primary transition-colors",whileHover:{y:-5},whileTap:{scale:.95},children:[m.jsx("div",{className:"p-3 rounded-full bg-primary/10 text-primary",children:e.icon}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium",children:e.label}),m.jsx("p",{className:"text-muted-foreground",children:e.value})]})]},s)))})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"RÃ©seaux sociaux"}),m.jsx("div",{className:"flex space-x-4",children:s.map(((e,s)=>m.jsx(Vt.a,{href:e.href,target:"_blank",rel:"noopener noreferrer","aria-label":e.label,className:"p-4 rounded-full bg-secondary hover:bg-primary/20 transition-colors",whileHover:{y:-5},whileTap:{scale:.95},children:e.icon},s)))})]})]}),m.jsx(Vt.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},className:"space-y-8",children:m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Envoyez un message"}),m.jsx(mr,{})]})})]})})]})},xr=()=>{const e=[{title:"DÃ©veloppeur Frontend Senior (React)",location:"Dakar, SÃ©nÃ©gal (Hybride)",type:"Temps Plein",link:"#"},{title:"Chef de Produit Marketplace",location:"Abidjan, CÃ´te d'Ivoire",type:"Temps Plein",link:"#"},{title:"SpÃ©cialiste Marketing Digital",location:"Lagos, NigÃ©ria (Remote)",type:"Temps Plein",link:"#"},{title:"Responsable Service Client Bilingue",location:"Dakar, SÃ©nÃ©gal",type:"Temps Plein",link:"#"}];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-16",children:[m.jsx(me,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Rejoignez l'Ã‰quipe ",m.jsx("span",{className:"gradient-text",children:xe.siteName})]}),m.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"FaÃ§onnez l'avenir du commerce en Afrique de l'Ouest avec nous. DÃ©couvrez nos opportunitÃ©s de carriÃ¨re passionnantes."})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-16 bg-card p-8 md:p-12 rounded-xl shadow-xl glassmorphic-card",children:[m.jsxs("h2",{className:"text-3xl font-bold mb-8 text-center flex items-center justify-center",children:["Pourquoi travailler chez ",xe.siteName," ?"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[m.jsxs("div",{className:"p-6",children:[m.jsx(Et,{className:"h-12 w-12 text-yellow-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Impact Significatif"}),m.jsx("p",{className:"text-muted-foreground",children:"Contribuez Ã  un projet qui transforme rÃ©ellement la vie des gens et l'Ã©conomie locale."})]}),m.jsxs("div",{className:"p-6",children:[m.jsx(Ge,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Culture Collaborative"}),m.jsx("p",{className:"text-muted-foreground",children:"Rejoignez une Ã©quipe passionnÃ©e, diverse et solidaire oÃ¹ chaque voix compte."})]}),m.jsxs("div",{className:"p-6",children:[m.jsx(me,{className:"h-12 w-12 text-green-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Croissance et Apprentissage"}),m.jsx("p",{className:"text-muted-foreground",children:"BÃ©nÃ©ficiez d'opportunitÃ©s de dÃ©veloppement professionnel continu et relevez des dÃ©fis stimulants."})]})]})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[m.jsx("h2",{className:"text-3xl font-bold mb-10 text-center",children:"Postes Ouverts Actuellement"}),e.length>0?m.jsx("div",{className:"space-y-6 max-w-3xl mx-auto",children:e.map(((e,s)=>m.jsxs(Vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1*s+.5},className:"bg-card p-6 rounded-lg shadow-md border border-border hover:border-primary transition-colors flex flex-col sm:flex-row justify-between items-start sm:items-center",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-primary",children:e.title}),m.jsxs("p",{className:"text-muted-foreground text-sm",children:[e.location," - ",e.type]})]}),m.jsx(ie,{asChild:!0,className:"mt-4 sm:mt-0 bg-primary hover:bg-primary/90",children:m.jsxs("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:["Voir l'Offre ",m.jsx(Os,{className:"ml-2 h-4 w-4"})]})})]},s)))}):m.jsx("p",{className:"text-center text-muted-foreground text-lg",children:"Nous n'avons pas de postes ouverts pour le moment, mais nous sommes toujours Ã  la recherche de talents exceptionnels. N'hÃ©sitez pas Ã  nous envoyer une candidature spontanÃ©e !"}),m.jsx("div",{className:"text-center mt-12",children:m.jsx(ie,{variant:"outline",size:"lg",children:"Envoyer une Candidature SpontanÃ©e"})})]})]})},hr=()=>{const e={logos:[{name:"Logo Principal",format:"PNG, SVG",size:"2MB",url:"#"},{name:"Logo Monochrome",format:"PNG, SVG",size:"1.5MB",url:"#"}],photos:[{name:"Photos de l'Ã©quipe",format:"JPG",size:"5MB",url:"#"},{name:"Interface utilisateur",format:"JPG",size:"3MB",url:"#"}]},s={name:"Service Relations Presse",email:"press@maxiimarket.com",phone:xe.phone};return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(qt,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Espace ",m.jsx("span",{className:"gradient-text",children:"Presse"})]}),m.jsxs("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:["Retrouvez toutes les actualitÃ©s, ressources et informations pour la presse concernant ",xe.siteName,"."]})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-16",children:[m.jsxs("h2",{className:"text-2xl font-bold mb-8 flex items-center",children:[m.jsx(Ft,{className:"h-6 w-6 mr-2 text-primary"}),"Derniers CommuniquÃ©s de Presse"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{id:1,title:"MaxiMarket rÃ©volutionne le e-commerce en Afrique de l'Ouest",date:"01 Juin 2025",description:"Lancement officiel de la plateforme marketplace innovante MaxiMarket.",pdfUrl:"#"},{id:2,title:"Partenariat stratÃ©gique avec PayDunya",date:"15 Mai 2025",description:"MaxiMarket s'associe Ã  PayDunya pour faciliter les paiements en ligne.",pdfUrl:"#"}].map((e=>m.jsxs(qe,{className:"hover:border-primary transition-colors",children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:e.title}),m.jsx(De,{children:e.date})]}),m.jsxs(Te,{children:[m.jsx("p",{className:"mb-4 text-muted-foreground",children:e.description}),m.jsx(ie,{variant:"outline",className:"w-full",asChild:!0,children:m.jsxs("a",{href:e.pdfUrl,target:"_blank",rel:"noopener noreferrer",children:[m.jsx(kt,{className:"mr-2 h-4 w-4"})," TÃ©lÃ©charger le PDF"]})})]})]},e.id)))})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold mb-8",children:"Kit MÃ©dia"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"Logos"}),m.jsx(De,{children:"TÃ©lÃ©chargez nos logos officiels"})]}),m.jsx(Te,{children:m.jsx("ul",{className:"space-y-4",children:e.logos.map(((e,s)=>m.jsxs("li",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:e.name}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.format," â€¢ ",e.size]})]}),m.jsx(ie,{variant:"outline",size:"sm",asChild:!0,children:m.jsx("a",{href:e.url,download:!0,children:m.jsx(kt,{className:"h-4 w-4"})})})]},s)))})})]}),m.jsxs(qe,{children:[m.jsxs(Fe,{children:[m.jsx(Le,{children:"Photos"}),m.jsx(De,{children:"Photos officielles haute rÃ©solution"})]}),m.jsx(Te,{children:m.jsx("ul",{className:"space-y-4",children:e.photos.map(((e,s)=>m.jsxs("li",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:e.name}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.format," â€¢ ",e.size]})]}),m.jsx(ie,{variant:"outline",size:"sm",asChild:!0,children:m.jsx("a",{href:e.url,download:!0,children:m.jsx(kt,{className:"h-4 w-4"})})})]},s)))})})]})]})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"text-center bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Contact Presse"}),m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsx("p",{className:"font-medium text-lg mb-2",children:s.name}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Pour toute demande d'interview ou d'information complÃ©mentaire"}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(ie,{variant:"outline",className:"w-full",asChild:!0,children:m.jsxs("a",{href:"mailto:"+s.email,children:[m.jsx(Os,{className:"mr-2 h-4 w-4"}),s.email]})}),m.jsxs(ie,{variant:"outline",className:"w-full",children:[m.jsx(Os,{className:"mr-2 h-4 w-4"}),s.phone]})]})]})]})]})},pr=()=>{const[e,s]=p.useState(""),t=[{name:"Comptes et Profils",icon:m.jsx(Ge,{className:"h-8 w-8 text-primary"}),description:"Gestion de votre compte, paramÃ¨tres et notifications."},{name:"Acheter sur MaxiMarket",icon:m.jsx(Dt,{className:"h-8 w-8 text-primary"}),description:"Recherche, achat, paiements et livraisons."},{name:"Vendre sur MaxiMarket",icon:m.jsx(Ws,{className:"h-8 w-8 text-primary"}),description:"CrÃ©ation d'annonces, gestion des ventes, boosters."},{name:"SÃ©curitÃ© et Confiance",icon:m.jsx(Pt,{className:"h-8 w-8 text-primary"}),description:"ProtÃ©ger votre compte, Ã©viter les fraudes."}];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(ms,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Centre d'Aide ",m.jsx("span",{className:"gradient-text",children:xe.siteName})]}),m.jsx("p",{className:"text-xl text-muted-foreground",children:"Comment pouvons-nous vous aider aujourd'hui ?"})]}),m.jsxs(Vt.form,{onSubmit:e=>{e.preventDefault()},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"max-w-2xl mx-auto mb-16 relative",children:[m.jsx(Ce,{type:"search",placeholder:"Rechercher des articles d'aide (ex: mot de passe oubliÃ©)",className:"w-full h-14 pl-12 pr-4 text-lg rounded-full shadow-lg",value:e,onChange:e=>s(e.target.value)}),m.jsx(ge,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-6 w-6 text-muted-foreground"}),m.jsx(ie,{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-10 rounded-full",children:"Rechercher"})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Sujets Populaires"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[{title:"Comment publier une annonce ?",link:"/faq#publier-annonce"},{title:"SÃ©curiser mon compte",link:"/faq#securite-compte"},{title:"ProblÃ¨mes de paiement",link:"/faq#paiement"},{title:"Contacter un vendeur/acheteur",link:"/faq#contacter-utilisateur"},{title:"Signaler un problÃ¨me",link:"/faq#signaler-probleme"}].map(((e,s)=>m.jsxs(g,{to:e.link,className:"block bg-card p-6 rounded-lg shadow-md hover:shadow-lg hover:border-primary border border-transparent transition-all duration-300 transform hover:-translate-y-1 glassmorphic-card",children:[m.jsxs("h3",{className:"text-lg font-semibold text-primary mb-2 flex items-center",children:[e.title," ",m.jsx(ze,{className:"ml-auto h-4 w-4 opacity-50 group-hover:opacity-100"})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultez notre FAQ pour une rÃ©ponse rapide."})]},s)))})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"mb-16",children:[m.jsx("h2",{className:"text-2xl font-bold mb-8 text-center",children:"Parcourir par CatÃ©gorie"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(((e,s)=>m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s+.7},className:"bg-card p-6 rounded-xl shadow-lg text-center border border-border hover:border-primary transition-colors glassmorphic-card",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-full inline-block mb-4",children:e.icon}),m.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),m.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),m.jsx(ie,{variant:"outline",asChild:!0,children:m.jsx(g,{to:"/faq#cat-"+e.name.toLowerCase().replace(/\s+/g,"-"),children:"Explorer"})})]},s)))})]}),m.jsxs(Vt.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.8},className:"text-center bg-card p-8 md:p-12 rounded-xl shadow-xl glassmorphic-card border border-border",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Vous ne trouvez pas ce que vous cherchez ?"}),m.jsx("p",{className:"text-muted-foreground mb-6 max-w-xl mx-auto",children:"Notre Ã©quipe d'assistance est lÃ  pour vous aider. Contactez-nous directement ou consultez notre FAQ complÃ¨te."}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[m.jsx(ie,{size:"lg",asChild:!0,className:"bg-primary hover:bg-primary/90",children:m.jsxs(g,{to:"/contactez-nous",children:[m.jsx(fe,{className:"mr-2 h-5 w-5"})," Contacter le Support"]})}),m.jsx(ie,{size:"lg",variant:"outline",asChild:!0,children:m.jsxs(g,{to:"/faq",children:[m.jsx(Lt,{className:"mr-2 h-5 w-5"})," Consulter la FAQ"]})})]})]})]})},gr=()=>{const e=xe.siteName,s=[{id:"general-1",category:"GÃ©nÃ©ral",question:`Qu'est-ce que ${e} ?`,answer:e+" est une plateforme marketplace innovante conÃ§ue pour l'Afrique de l'Ouest, facilitant l'achat et la vente de biens immobiliers, vÃ©hicules, services professionnels et divers autres produits. Notre objectif est de simplifier le commerce en ligne et de le rendre plus sÃ»r et accessible."},{id:"compte-1",category:"Compte Utilisateur",question:`Comment crÃ©er un compte sur ${e} ?`,answer:"Pour crÃ©er un compte, cliquez sur le bouton 'Connexion / Inscription' en haut Ã  droite de la page. Vous pourrez alors vous inscrire en utilisant votre adresse e-mail ou via des services tiers comme Google ou Facebook (si activÃ©). Suivez simplement les instructions Ã  l'Ã©cran."},{id:"compte-2",category:"Compte Utilisateur",question:"J'ai oubliÃ© mon mot de passe, que faire ?",answer:"Si vous avez oubliÃ© votre mot de passe, cliquez sur le lien 'Mot de passe oubliÃ© ?' sur la page de connexion. Entrez votre adresse e-mail et nous vous enverrons un lien pour rÃ©initialiser votre mot de passe."},{id:"publier-annonce",category:"Vendre sur "+e,question:"Comment publier une annonce ?",answer:"Une fois connectÃ©, accÃ©dez Ã  votre tableau de bord et cherchez le bouton 'Publier une annonce' ou 'Nouvelle annonce'. Choisissez la catÃ©gorie appropriÃ©e, remplissez tous les champs requis (titre, description, prix, photos, etc.) et soumettez votre annonce. Elle sera examinÃ©e par notre Ã©quipe avant d'Ãªtre publiÃ©e."},{id:"paiement",category:"Paiements et Transactions",question:"Quels sont les moyens de paiement acceptÃ©s ?",answer:"Nous acceptons plusieurs moyens de paiement, y compris les cartes bancaires (Visa, Mastercard), les paiements mobiles (Orange Money, Wave, etc. selon disponibilitÃ© rÃ©gionale), PayPal et PayDunya. Les options exactes peuvent varier en fonction de votre pays."},{id:"securite-compte",category:"SÃ©curitÃ©",question:"Comment puis-je sÃ©curiser mon compte ?",answer:"Pour sÃ©curiser votre compte, utilisez un mot de passe fort et unique. Activez l'authentification Ã  deux facteurs (2FA) si disponible dans vos paramÃ¨tres de compte. MÃ©fiez-vous des e-mails de phishing et ne partagez jamais vos identifiants."},{id:"contacter-utilisateur",category:"Interaction",question:"Comment contacter un vendeur ou un acheteur ?",answer:"Sur la page d'une annonce, vous trouverez gÃ©nÃ©ralement un bouton ou un lien pour contacter le vendeur (par exemple, 'Contacter le vendeur', 'Envoyer un message'). Utilisez notre systÃ¨me de messagerie intÃ©grÃ© pour communiquer en toute sÃ©curitÃ©. Les coordonnÃ©es directes ne sont partagÃ©es qu'avec le consentement des deux parties."},{id:"signaler-probleme",category:"Support et Litiges",question:"Comment signaler un problÃ¨me ou une annonce suspecte ?",answer:"Si vous rencontrez un problÃ¨me ou si une annonce vous semble suspecte, vous pouvez la signaler en utilisant le lien 'Signaler cette annonce' prÃ©sent sur la page de l'annonce. Pour d'autres problÃ¨mes, contactez notre support client via le Centre d'Aide."}],t=[...new Set(s.map((e=>e.category)))];return m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(ms,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6 text-foreground",children:["Questions FrÃ©quemment PosÃ©es ",m.jsx("span",{className:"gradient-text",children:"(FAQ)"})]}),m.jsxs("p",{className:"text-xl text-muted-foreground",children:["Trouvez des rÃ©ponses rapides Ã  vos questions sur ",e,"."]})]}),t.map(((e,t)=>m.jsxs(Vt.section,{id:"cat-"+e.toLowerCase().replace(/\s+/g,"-"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*t},className:"mb-12 max-w-3xl mx-auto",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 border-l-4 border-primary pl-4 text-foreground",children:e}),m.jsx(Z,{type:"single",collapsible:!0,className:"w-full space-y-3",children:s.filter((s=>s.category===e)).map((e=>m.jsxs(ee,{value:e.id,className:"bg-card border border-border rounded-lg shadow-sm hover:border-primary/50 transition-colors",children:[m.jsx(se,{className:"p-6 text-left font-semibold hover:no-underline text-foreground",children:e.question}),m.jsx(te,{className:"p-6 pt-0 text-muted-foreground",children:e.answer})]},e.id)))})]},e))),m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2+.1*t.length},className:"text-center mt-16",children:[m.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Vous n'avez pas trouvÃ© de rÃ©ponse ?"}),m.jsx(ie,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-primary to-accent text-primary-foreground hover:opacity-90 transition-opacity",children:m.jsx(g,{to:"/contactez-nous",children:"Contactez notre support"})})]})]})},jr=()=>m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(Pt,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Politique de ",m.jsx("span",{className:"gradient-text",children:"ConfidentialitÃ©"})]}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"DerniÃ¨re mise Ã  jour : 02 Juin 2025"})]}),m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-3xl mx-auto space-y-8",children:[m.jsx("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:m.jsxs("p",{className:"text-lg mb-6",children:["Bienvenue sur ",xe.siteName,". Nous nous engageons Ã  protÃ©ger la confidentialitÃ© de vos informations personnelles. Cette politique de confidentialitÃ© explique comment nous collectons, utilisons, divulguons et protÃ©geons vos informations lorsque vous visitez notre site web et utilisez nos services."]})}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"1. Informations que nous collectons"]}),m.jsx("p",{className:"mb-4",children:"Nous pouvons collecter des informations personnelles vous concernant de diffÃ©rentes maniÃ¨res, notamment :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Informations fournies directement par vous :"})," Lorsque vous crÃ©ez un compte, publiez une annonce, effectuez une transaction, communiquez avec nous ou d'autres utilisateurs (nom, adresse e-mail, numÃ©ro de tÃ©lÃ©phone, informations de paiement, etc.)."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Informations collectÃ©es automatiquement :"})," Lorsque vous utilisez notre site, nous pouvons collecter des informations sur votre appareil, votre activitÃ© de navigation, votre adresse IP, votre localisation (si autorisÃ©e), les cookies et autres technologies de suivi."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Informations provenant de tiers :"})," Nous pouvons recevoir des informations vous concernant de la part de services tiers, tels que les fournisseurs de services de paiement ou les plateformes de mÃ©dias sociaux si vous choisissez de lier votre compte."]})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"2. Utilisation de vos informations"]}),m.jsx("p",{className:"mb-4",children:"Nous utilisons les informations que nous collectons pour :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsx("li",{children:"Fournir, exploiter et amÃ©liorer nos services."}),m.jsx("li",{children:"Traiter vos transactions et gÃ©rer votre compte."}),m.jsx("li",{children:"Personnaliser votre expÃ©rience sur notre plateforme."}),m.jsx("li",{children:"Communiquer avec vous, y compris pour le service client et les mises Ã  jour."}),m.jsx("li",{children:"Assurer la sÃ©curitÃ© de notre plateforme et prÃ©venir la fraude."}),m.jsx("li",{children:"Analyser l'utilisation de notre site et amÃ©liorer nos offres."}),m.jsx("li",{children:"Respecter nos obligations lÃ©gales."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"3. Partage de vos informations"]}),m.jsx("p",{className:"mb-4",children:"Nous pouvons partager vos informations personnelles dans les circonstances suivantes :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Avec d'autres utilisateurs :"})," Pour faciliter les transactions et les communications (par exemple, partager votre nom d'utilisateur ou les informations de contact nÃ©cessaires pour une transaction)."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Avec des fournisseurs de services tiers :"})," Qui nous aident Ã  exploiter notre plateforme (hÃ©bergement, traitement des paiements, analyse de donnÃ©es, marketing, etc.). Ces fournisseurs sont contractuellement tenus de protÃ©ger vos informations."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pour des raisons lÃ©gales :"})," Si la loi l'exige, ou pour rÃ©pondre Ã  une procÃ©dure lÃ©gale valide, protÃ©ger nos droits, notre propriÃ©tÃ© ou notre sÃ©curitÃ©, ou ceux de nos utilisateurs ou du public."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"En cas de transfert d'entreprise :"})," En cas de fusion, acquisition, rÃ©organisation ou vente d'actifs, vos informations peuvent Ãªtre transfÃ©rÃ©es."]})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"4. Vos droits et choix"]}),m.jsx("p",{className:"mb-4",children:"Selon votre juridiction, vous pouvez avoir certains droits concernant vos informations personnelles, tels que :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsx("li",{children:"Le droit d'accÃ©der Ã  vos informations."}),m.jsx("li",{children:"Le droit de corriger ou de mettre Ã  jour vos informations."}),m.jsx("li",{children:"Le droit de supprimer vos informations."}),m.jsx("li",{children:"Le droit de vous opposer ou de restreindre certains traitements."}),m.jsx("li",{children:"Le droit Ã  la portabilitÃ© des donnÃ©es."})]}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Vous pouvez gÃ©nÃ©ralement gÃ©rer les informations de votre compte et vos prÃ©fÃ©rences de communication via les paramÃ¨tres de votre compte. Pour exercer d'autres droits, veuillez nous contacter."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"5. SÃ©curitÃ© des donnÃ©es"]}),m.jsx("p",{className:"text-muted-foreground",children:"Nous mettons en Å“uvre des mesures de sÃ©curitÃ© techniques et organisationnelles raisonnables pour protÃ©ger vos informations personnelles contre l'accÃ¨s non autorisÃ©, la divulgation, l'altÃ©ration ou la destruction. Cependant, aucune mÃ©thode de transmission sur Internet ou de stockage Ã©lectronique n'est totalement sÃ©curisÃ©e."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"6. Conservation des donnÃ©es"]}),m.jsx("p",{className:"text-muted-foreground",children:"Nous conservons vos informations personnelles aussi longtemps que nÃ©cessaire pour atteindre les objectifs dÃ©crits dans cette politique de confidentialitÃ©, sauf si une pÃ©riode de conservation plus longue est requise ou autorisÃ©e par la loi."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"7. Transferts internationaux"]}),m.jsx("p",{className:"text-muted-foreground",children:"Vos informations peuvent Ãªtre transfÃ©rÃ©es et traitÃ©es dans des pays autres que votre pays de rÃ©sidence, oÃ¹ les lois sur la protection des donnÃ©es peuvent diffÃ©rer. Nous prendrons des mesures appropriÃ©es pour garantir que vos informations personnelles restent protÃ©gÃ©es conformÃ©ment Ã  cette politique."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"8. Modifications de cette politique"]}),m.jsx("p",{className:"text-muted-foreground",children:'Nous pouvons mettre Ã  jour cette politique de confidentialitÃ© de temps Ã  autre. Nous vous informerons de tout changement important en publiant la nouvelle politique sur notre site et en mettant Ã  jour la date de "DerniÃ¨re mise Ã  jour".'})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"9. Nous contacter"]}),m.jsxs("p",{className:"text-muted-foreground",children:["Si vous avez des questions ou des prÃ©occupations concernant cette politique de confidentialitÃ© ou nos pratiques en matiÃ¨re de donnÃ©es, veuillez nous contacter Ã  ",m.jsx("a",{href:"mailto:"+xe.infoEmail,className:"text-primary hover:underline",children:xe.infoEmail}),"."]})]})]})]}),vr=()=>m.jsxs("div",{className:"container mx-auto px-4 py-16",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[m.jsx(Ks,{className:"h-16 w-16 text-primary mx-auto mb-6"}),m.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:["Termes et ",m.jsx("span",{className:"gradient-text",children:"Conditions"})," d'Utilisation"]}),m.jsx("p",{className:"text-lg text-muted-foreground",children:"DerniÃ¨re mise Ã  jour : 02 Juin 2025"})]}),m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"max-w-3xl mx-auto space-y-8",children:[m.jsx("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:m.jsxs("p",{className:"text-lg",children:['Veuillez lire attentivement ces Termes et Conditions ("Termes") avant d\'utiliser le site web ',xe.siteName,' (le "Service") exploitÃ© par ',xe.siteName,' ("nous", "notre", ou "nos"). Votre accÃ¨s et votre utilisation du Service sont conditionnÃ©s par votre acceptation et votre respect de ces Termes. Ces Termes s\'appliquent Ã  tous les visiteurs, utilisateurs et autres personnes qui accÃ¨dent ou utilisent le Service.']})}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(le,{className:"mr-2 h-6 w-6 text-primary"}),"1. Acceptation des Termes"]}),m.jsx("p",{className:"text-muted-foreground",children:"En accÃ©dant ou en utilisant le Service, vous acceptez d'Ãªtre liÃ© par ces Termes. Si vous n'Ãªtes pas d'accord avec une partie des termes, vous ne pouvez pas accÃ©der au Service."})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"2. Comptes"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Lorsque vous crÃ©ez un compte chez nous, vous devez nous fournir des informations exactes, complÃ¨tes et Ã  jour Ã  tout moment. Le non-respect de cette obligation constitue une violation des Termes, ce qui peut entraÃ®ner la rÃ©siliation immÃ©diate de votre compte sur notre Service."}),m.jsx("p",{children:"Vous Ãªtes responsable de la protection du mot de passe que vous utilisez pour accÃ©der au Service et de toutes les activitÃ©s ou actions effectuÃ©es sous votre mot de passe, que votre mot de passe soit avec notre Service ou un service tiers."}),m.jsx("p",{children:"Vous acceptez de ne pas divulguer votre mot de passe Ã  un tiers. Vous devez nous informer immÃ©diatement dÃ¨s que vous prenez connaissance d'une violation de la sÃ©curitÃ© ou d'une utilisation non autorisÃ©e de votre compte."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"3. Contenu Utilisateur"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:'Notre Service vous permet de publier, lier, stocker, partager et autrement rendre disponible certaines informations, textes, graphiques, vidÃ©os ou autres supports ("Contenu Utilisateur"). Vous Ãªtes responsable du Contenu Utilisateur que vous publiez sur ou via le Service, y compris sa lÃ©galitÃ©, sa fiabilitÃ© et sa pertinence.'}),m.jsx("p",{children:"En publiant du Contenu Utilisateur sur ou via le Service, vous dÃ©clarez et garantissez que : (i) le Contenu Utilisateur vous appartient (vous en Ãªtes propriÃ©taire) et/ou vous avez le droit de l'utiliser et le droit de nous accorder les droits et la licence prÃ©vus dans ces Termes, et (ii) la publication de votre Contenu Utilisateur sur ou via le Service ne viole pas les droits Ã  la vie privÃ©e, les droits de publicitÃ©, les droits d'auteur, les droits contractuels ou tout autre droit de toute personne ou entitÃ©."}),m.jsx("p",{children:"Vous conservez tous vos droits sur tout Contenu Utilisateur que vous soumettez, publiez ou affichez sur ou via le Service et vous Ãªtes responsable de la protection de ces droits. Nous n'assumons aucune responsabilitÃ© et n'engageons aucune responsabilitÃ© pour le Contenu Utilisateur que vous ou un tiers publiez sur ou via le Service."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"4. Utilisation Acceptable"]}),m.jsx("p",{className:"mb-4",children:"Vous acceptez de ne pas utiliser le Service pour :"}),m.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[m.jsx("li",{children:"Publier du contenu illÃ©gal, nuisible, menaÃ§ant, abusif, harcelant, diffamatoire, vulgaire, obscÃ¨ne, haineux ou autrement rÃ©prÃ©hensible."}),m.jsx("li",{children:"Usurper l'identitÃ© d'une personne ou d'une entitÃ©, ou dÃ©clarer faussement ou dÃ©former autrement votre affiliation avec une personne ou une entitÃ©."}),m.jsx("li",{children:"TÃ©lÃ©charger, publier ou transmettre de quelque maniÃ¨re que ce soit tout contenu que vous n'avez pas le droit de transmettre en vertu d'une loi ou de relations contractuelles ou fiduciaires."}),m.jsx("li",{children:"Violer toute loi locale, Ã©tatique, nationale ou internationale applicable."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"5. PropriÃ©tÃ© Intellectuelle"]}),m.jsxs("p",{className:"text-muted-foreground",children:["Le Service et son contenu original (Ã  l'exclusion du Contenu Utilisateur), ses caractÃ©ristiques et fonctionnalitÃ©s sont et resteront la propriÃ©tÃ© exclusive de ",xe.siteName," et de ses concÃ©dants de licence. Le Service est protÃ©gÃ© par le droit d'auteur, les marques commerciales et d'autres lois. Nos marques et habillages commerciaux ne peuvent Ãªtre utilisÃ©s en relation avec un produit ou service sans le consentement Ã©crit prÃ©alable de ",xe.siteName,"."]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"6. Liens Vers D'autres Sites Web"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsxs("p",{children:["Notre Service peut contenir des liens vers des sites web ou des services tiers qui ne sont pas dÃ©tenus ou contrÃ´lÃ©s par ",xe.siteName,"."]}),m.jsxs("p",{children:[xe.siteName," n'a aucun contrÃ´le sur, et n'assume aucune responsabilitÃ© pour, le contenu, les politiques de confidentialitÃ© ou les pratiques de tout site web ou service tiers. Vous reconnaissez et acceptez en outre que ",xe.siteName," ne sera pas responsable, directement ou indirectement, de tout dommage ou perte causÃ© ou prÃ©sumÃ© avoir Ã©tÃ© causÃ© par ou en relation avec l'utilisation ou la confiance accordÃ©e Ã  un tel contenu, biens ou services disponibles sur ou via de tels sites web ou services."]}),m.jsx("p",{children:"Nous vous conseillons vivement de lire les termes et conditions et les politiques de confidentialitÃ© de tout site web ou service tiers que vous visitez."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"7. RÃ©siliation"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Nous pouvons rÃ©silier ou suspendre votre compte et interdire l'accÃ¨s au Service immÃ©diatement, sans prÃ©avis ni responsabilitÃ©, Ã  notre seule discrÃ©tion, pour quelque raison que ce soit et sans limitation, y compris mais sans s'y limiter, une violation des Termes."}),m.jsx("p",{children:"Si vous souhaitez rÃ©silier votre compte, vous pouvez simplement cesser d'utiliser le Service."}),m.jsx("p",{children:"Toutes les dispositions des Termes qui, de par leur nature, devraient survivre Ã  la rÃ©siliation survivront Ã  la rÃ©siliation, y compris, sans limitation, les dispositions relatives Ã  la propriÃ©tÃ©, les exclusions de garantie, l'indemnisation et les limitations de responsabilitÃ©."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"8. Limitation de ResponsabilitÃ©"]}),m.jsxs("p",{className:"text-muted-foreground",children:["En aucun cas ",xe.siteName,", ni ses administrateurs, employÃ©s, partenaires, agents, fournisseurs ou affiliÃ©s, ne pourront Ãªtre tenus responsables de tout dommage indirect, accessoire, spÃ©cial, consÃ©cutif ou punitif, y compris, sans limitation, la perte de profits, de donnÃ©es, d'utilisation, de clientÃ¨le ou d'autres pertes immatÃ©rielles, rÃ©sultant de votre accÃ¨s ou votre utilisation ou votre incapacitÃ© Ã  accÃ©der ou Ã  utiliser le Service."]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"9. Droit Applicable"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Ces Termes seront rÃ©gis et interprÃ©tÃ©s conformÃ©ment aux lois du SÃ©nÃ©gal, sans Ã©gard Ã  ses dispositions relatives aux conflits de lois."}),m.jsx("p",{children:"Notre manquement Ã  faire respecter un droit ou une disposition de ces Termes ne sera pas considÃ©rÃ© comme une renonciation Ã  ces droits. Si une disposition de ces Termes est jugÃ©e invalide ou inapplicable par un tribunal, les autres dispositions de ces Termes resteront en vigueur. Ces Termes constituent l'intÃ©gralitÃ© de l'accord entre nous concernant notre Service, et remplacent et annulent tous les accords antÃ©rieurs que nous pourrions avoir entre nous concernant le Service."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"10. Modifications"]}),m.jsxs("div",{className:"space-y-4 text-muted-foreground",children:[m.jsx("p",{children:"Nous nous rÃ©servons le droit, Ã  notre seule discrÃ©tion, de modifier ou de remplacer ces Termes Ã  tout moment. Si une rÃ©vision est importante, nous nous efforcerons de fournir un prÃ©avis d'au moins 30 jours avant l'entrÃ©e en vigueur des nouveaux termes. Ce qui constitue un changement important sera dÃ©terminÃ© Ã  notre seule discrÃ©tion."}),m.jsx("p",{children:"En continuant Ã  accÃ©der ou Ã  utiliser notre Service aprÃ¨s l'entrÃ©e en vigueur de ces rÃ©visions, vous acceptez d'Ãªtre liÃ© par les termes rÃ©visÃ©s. Si vous n'acceptez pas les nouveaux termes, veuillez cesser d'utiliser le Service."})]})]}),m.jsxs("div",{className:"bg-card p-8 rounded-xl shadow-lg border border-border",children:[m.jsxs("h2",{className:"flex items-center text-2xl font-bold mb-4",children:[m.jsx(Ks,{className:"mr-2 h-6 w-6 text-primary"}),"11. Nous Contacter"]}),m.jsxs("p",{className:"text-muted-foreground",children:["Si vous avez des questions concernant ces Termes, veuillez nous contacter Ã  ",m.jsx("a",{href:"mailto:"+xe.infoEmail,className:"text-primary hover:underline",children:xe.infoEmail}),"."]})]})]})]}),fr=({post:e,index:s,featured:t=!1})=>{const a=new Date(e.publishedAt),r=Jt(a,{addSuffix:!0,locale:Tt});return m.jsx(Vt.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*s},className:Ee("group overflow-hidden rounded-lg border border-border bg-card transition-all duration-300 card-hover",t?"col-span-full md:col-span-2 md:row-span-2":"md:col-span-1"),children:m.jsxs(g,{to:"/blog/"+(e.slug||e.id),className:"block h-full",children:[m.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Image de couverture pour l'article "+e.title,src:"https://images.unsplash.com/photo-1578811344633-3376eab0f8ce"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent opacity-70"}),t&&m.jsx("div",{className:"absolute top-4 left-4",children:m.jsx(Xe,{variant:"default",className:"bg-primary/90 backdrop-blur-sm",children:"Ã€ la une"})}),m.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[e.tags&&e.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.tags.slice(0,t?3:2).map(((e,s)=>m.jsx(Xe,{variant:"secondary",className:"bg-secondary/50 backdrop-blur-sm",children:e},s)))}),t&&m.jsx("h2",{className:"text-xl md:text-2xl font-bold text-white mb-2 line-clamp-2",children:e.title})]})]}),m.jsxs("div",{className:"p-5",children:[!t&&m.jsx("h2",{className:"text-lg font-bold mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:e.title}),m.jsx("p",{className:"text-muted-foreground line-clamp-2 mb-4",children:e.excerpt}),m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("span",{className:"flex items-center",children:[m.jsx(Qe,{className:"h-3 w-3 mr-1"}),r]}),m.jsxs("span",{className:"flex items-center",children:[m.jsx(ss,{className:"h-3 w-3 mr-1"}),e.readingTime]})]}),e.category&&m.jsxs("span",{className:"flex items-center",children:[m.jsx(Ws,{className:"h-3 w-3 mr-1"}),e.category]})]})]})]})})},br=e=>{const s=e.split(/\s+/).length;return Math.ceil(s/200)};let Nr=localStorage.getItem("blogPosts")?JSON.parse(localStorage.getItem("blogPosts")):[{id:"maximarket-welcome-post",title:"Bienvenue sur MaxiMarket : Votre Nouvelle Marketplace Futuriste !",slug:"bienvenue-sur-maximarket-marketplace-futuriste",excerpt:"DÃ©couvrez MaxiMarket, la plateforme innovante qui rÃ©volutionne le commerce en Afrique de l'Ouest. Immobilier, automobile, services et plus encore !",content:"\n# Bienvenue sur MaxiMarket : Votre Nouvelle Marketplace Futuriste !\n\nNous sommes ravis de vous accueillir sur **MaxiMarket**, la destination incontournable pour toutes vos transactions en Afrique de l'Ouest. Que vous cherchiez Ã  acheter, vendre ou louer, MaxiMarket vous offre une expÃ©rience utilisateur unique, moderne et sÃ©curisÃ©e.\n\n## Ce que MaxiMarket vous propose :\n\n### 1. Immobilier de Pointe\nTrouvez l'appartement de vos rÃªves, la maison idÃ©ale pour votre famille, un terrain pour construire votre avenir ou le local commercial parfait pour votre entreprise. Avec nos filtres avancÃ©s, nos visites virtuelles Ã  360Â° et nos outils d'estimation IA, la recherche immobiliÃ¨re n'a jamais Ã©tÃ© aussi simple et efficace.\n\n### 2. Automobile SimplifiÃ©\nParcourez notre vaste sÃ©lection de voitures, motos et vÃ©hicules utilitaires, neufs ou d'occasion. BÃ©nÃ©ficiez d'historiques de vÃ©hicules transparents, d'inspections virtuelles et de calculateurs de financement intÃ©grÃ©s pour prendre des dÃ©cisions Ã©clairÃ©es.\n\n### 3. Services Professionnels Ã  portÃ©e de clic\nBesoin d'un expert en BTP, d'un technicien qualifiÃ©, d'une aide domestique ou d'un professionnel de la santÃ© ? MaxiMarket vous met en relation avec des prestataires vÃ©rifiÃ©s. Prenez rendez-vous en ligne, consultez les portfolios et suivez l'avancement de vos projets en toute sÃ©rÃ©nitÃ©.\n\n### 4. Une Marketplace GÃ©nÃ©rale Riche et VariÃ©e\nExplorez un univers de produits allant de l'Ã©lectronique dernier cri Ã  la mode tendance, en passant par les articles pour la maison, les Ã©quipements sportifs et l'artisanat local authentique. MaxiMarket est votre guichet unique pour tous vos besoins.\n\n## Une ExpÃ©rience Utilisateur InÃ©galÃ©e\n\nChez MaxiMarket, nous avons mis l'accent sur un design futuriste et des fonctionnalitÃ©s innovantes :\n- **ThÃ¨me adaptatif sombre/clair** et effets visuels saisissants comme le glassmorphism.\n- **Recherche vocale** et **contrÃ´les gestuels** sur mobile pour une navigation intuitive.\n- **Tableaux de bord personnalisÃ©s** avec analyses dÃ©taillÃ©es pour les vendeurs.\n- **Intelligence Artificielle** intÃ©grÃ©e pour des recommandations personnalisÃ©es, des estimations de prix et une modÃ©ration intelligente.\n\n## Rejoignez la RÃ©volution MaxiMarket !\n\nNous sommes plus qu'une simple marketplace. Nous sommes une communautÃ© qui construit l'avenir du commerce en Afrique de l'Ouest. CrÃ©ez votre compte dÃ¨s aujourd'hui, publiez vos annonces ou trouvez exactement ce que vous cherchez.\n\nL'Ã©quipe MaxiMarket.\n    ",coverImage:"maximarket-marketplace-skyline-futuristic",author:{name:"L'Ã©quipe MaxiMarket",avatar:"maximarket-logo-avatar"},category:"Annonces MaxiMarket",tags:["MaxiMarket","Marketplace","Afrique de l'Ouest","Innovation","Immobilier","Automobile","Services"],publishedAt:"2025-06-02T10:00:00Z",readingTime:"4 min"},{id:"1",title:"Comment j'ai crÃ©Ã© une application React performante",slug:"comment-jai-cree-une-application-react-performante",excerpt:"DÃ©couvrez les techniques que j'ai utilisÃ©es pour optimiser les performances de mon application React.",content:"\n# Comment j'ai crÃ©Ã© une application React performante\n\nReact est une bibliothÃ¨que JavaScript populaire pour crÃ©er des interfaces utilisateur interactives. Cependant, Ã  mesure que les applications grandissent, les performances peuvent devenir un problÃ¨me. Dans cet article, je vais partager les techniques que j'ai utilisÃ©es pour optimiser les performances de mon application React.\n\n## 1. Utilisation de React.memo et useMemo\n\nL'un des premiers problÃ¨mes que j'ai rencontrÃ©s Ã©tait des rendus inutiles de composants. Pour rÃ©soudre ce problÃ¨me, j'ai utilisÃ© React.memo pour mÃ©moriser les composants et useMemo pour mÃ©moriser les valeurs calculÃ©es.\n\n```jsx\nconst ExpensiveComponent = React.memo(({ data }) => {\n  // Rendu du composant\n});\n\nfunction App() {\n  const expensiveCalculation = useMemo(() => {\n    return performExpensiveCalculation(data);\n  }, [data]);\n  \n  return <div>{expensiveCalculation}</div>;\n}\n```\n\n## 2. Optimisation des listes avec useCallback\n\nPour les listes, j'ai utilisÃ© useCallback pour Ã©viter de recrÃ©er des fonctions Ã  chaque rendu.\n\n```jsx\nfunction TodoList({ todos }) {\n  const handleDelete = useCallback((id) => {\n    // Logique de suppression\n  }, []);\n  \n  return (\n    <ul>\n      {todos.map(todo => (\n        <TodoItem \n          key={todo.id} \n          todo={todo} \n          onDelete={handleDelete} \n        />\n      ))}\n    </ul>\n  );\n}\n```\n\n## 3. Lazy Loading des composants\n\nJ'ai utilisÃ© le lazy loading pour charger les composants uniquement lorsqu'ils sont nÃ©cessaires.\n\n```jsx\nconst LazyComponent = React.lazy(() => import('./LazyComponent'));\n\nfunction App() {\n  return (\n    <React.Suspense fallback={<div>Loading...</div>}>\n      <LazyComponent />\n    </React.Suspense>\n  );\n}\n```\n\n## 4. Utilisation de la virtualisation pour les grandes listes\n\nPour les listes contenant de nombreux Ã©lÃ©ments, j'ai utilisÃ© la virtualisation pour ne rendre que les Ã©lÃ©ments visibles Ã  l'Ã©cran.\n\n## Conclusion\n\nL'optimisation des performances est un aspect crucial du dÃ©veloppement d'applications React. En utilisant ces techniques, j'ai pu amÃ©liorer considÃ©rablement les performances de mon application.\n    ",coverImage:"react-performance",author:{name:"DÃ©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"React",tags:["React","Performance","JavaScript","Optimisation"],publishedAt:"2023-09-15T10:00:00Z",readingTime:"8 min"},{id:"2",title:"Les meilleures pratiques pour l'architecture de vos projets React",slug:"meilleures-pratiques-architecture-projets-react",excerpt:"Une architecture bien pensÃ©e est essentielle pour maintenir des projets React Ã  long terme. Voici mes conseils.",content:"\n# Les meilleures pratiques pour l'architecture de vos projets React\n\nUne bonne architecture est la clÃ© pour maintenir des projets React Ã  long terme. Dans cet article, je partage mes meilleures pratiques pour structurer vos projets React.\n\n## 1. Organisation des dossiers\n\nJ'ai trouvÃ© qu'une structure de dossiers claire aide Ã©normÃ©ment Ã  naviguer dans le code. Voici comment j'organise gÃ©nÃ©ralement mes projets:\n\n```\nsrc/\n  â”œâ”€â”€ components/\n  â”‚   â”œâ”€â”€ common/\n  â”‚   â”œâ”€â”€ layout/\n  â”‚   â””â”€â”€ features/\n  â”œâ”€â”€ hooks/\n  â”œâ”€â”€ context/\n  â”œâ”€â”€ utils/\n  â”œâ”€â”€ services/\n  â”œâ”€â”€ pages/\n  â””â”€â”€ assets/\n```\n\n## 2. SÃ©paration des prÃ©occupations\n\nIl est important de sÃ©parer la logique mÃ©tier de la prÃ©sentation. J'utilise des hooks personnalisÃ©s pour encapsuler la logique et des composants pour la prÃ©sentation.\n\n## 3. Utilisation des patterns React modernes\n\nJ'ai adoptÃ© des patterns comme le Compound Component et le Render Props pour crÃ©er des composants flexibles et rÃ©utilisables.\n\n## 4. Tests unitaires et d'intÃ©gration\n\nLes tests sont essentiels pour maintenir la qualitÃ© du code. J'utilise Jest et React Testing Library pour tester mes composants.\n\n## Conclusion\n\nUne bonne architecture est un investissement qui paie sur le long terme. En suivant ces pratiques, vous pourrez maintenir et faire Ã©voluer vos projets React plus facilement.\n    ",coverImage:"react-architecture",author:{name:"DÃ©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"Architecture",tags:["React","Architecture","Bonnes pratiques","Structure de projet"],publishedAt:"2023-08-22T14:30:00Z",readingTime:"6 min"},{id:"3",title:"Comment j'ai intÃ©grÃ© TailwindCSS dans mon workflow",slug:"comment-jai-integre-tailwindcss-dans-mon-workflow",excerpt:"TailwindCSS a rÃ©volutionnÃ© ma faÃ§on de styliser mes applications. Voici comment je l'ai intÃ©grÃ© dans mon workflow.",content:"\n# Comment j'ai intÃ©grÃ© TailwindCSS dans mon workflow\n\nTailwindCSS est un framework CSS utilitaire qui a changÃ© ma faÃ§on de styliser mes applications. Dans cet article, je vais vous montrer comment je l'ai intÃ©grÃ© dans mon workflow et les avantages que j'en ai tirÃ©s.\n\n## 1. Installation et configuration\n\nL'installation de TailwindCSS est simple avec npm ou yarn:\n\n```bash\nnpm install -D tailwindcss postcss autoprefixer\nnpx tailwindcss init -p\n```\n\n## 2. Personnalisation du thÃ¨me\n\nJ'ai personnalisÃ© le thÃ¨me pour correspondre Ã  l'identitÃ© visuelle de mon projet:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  theme: {\n    extend: {\n      colors: {\n        primary: '#3490dc',\n        secondary: '#ffed4a',\n        danger: '#e3342f',\n      },\n    },\n  },\n  // ...\n}\n```\n\n## 3. CrÃ©ation de composants rÃ©utilisables\n\nJ'ai crÃ©Ã© des composants rÃ©utilisables avec TailwindCSS:\n\n```jsx\nfunction Button({ children, variant = 'primary' }) {\n  const baseClasses = 'px-4 py-2 rounded font-bold';\n  const variantClasses = {\n    primary: 'bg-primary text-white',\n    secondary: 'bg-secondary text-gray-800',\n    danger: 'bg-danger text-white',\n  };\n  \n  return (\n    <button className={`${baseClasses} ${variantClasses[variant]}`}>\n      {children}\n    </button>\n  );\n}\n```\n\n## 4. Optimisation pour la production\n\nPour la production, j'ai utilisÃ© PurgeCSS pour Ã©liminer les classes non utilisÃ©es:\n\n```js\n// tailwind.config.js\nmodule.exports = {\n  purge: ['./src/**/*.{js,jsx,ts,tsx}', './public/index.html'],\n  // ...\n}\n```\n\n## Conclusion\n\nTailwindCSS a considÃ©rablement amÃ©liorÃ© ma productivitÃ© en me permettant de styliser rapidement mes applications sans quitter mon HTML/JSX. Si vous n'avez pas encore essayÃ©, je vous encourage vivement Ã  le faire!\n    ",coverImage:"tailwindcss-workflow",author:{name:"DÃ©veloppeur MaxiMarket",avatar:"maximarket-dev-avatar"},category:"CSS",tags:["TailwindCSS","CSS","Workflow","Design"],publishedAt:"2023-07-10T09:15:00Z",readingTime:"5 min"}].map((e=>{return c(o({},e),{readingTime:br(e.content)+" min",author:e.author||{name:"MaxiMarket Admin",avatar:"maximarket-admin-avatar"},slug:e.slug||(s=e.title,s.toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"")),id:e.id||It(),publishedAt:e.publishedAt||(new Date).toISOString()});var s}));const yr=()=>{const[e,s]=p.useState(""),[t,a]=p.useState(""),[r,i]=p.useState(""),[n,l]=p.useState([]),[o,c]=p.useState([]),[d,u]=p.useState([]),[x,h]=p.useState([]);return p.useEffect((()=>{const e=[...Nr].sort(((e,s)=>new Date(s.publishedAt)-new Date(e.publishedAt)));l(e),c(e),u([...new Set(Nr.map((e=>e.category)).filter(Boolean))]),h((()=>{const e=Nr.flatMap((e=>e.tags||[]));return[...new Set(e.filter(Boolean))]})())}),[]),p.useEffect((()=>{let s=[...n];if(e){const t=e.toLowerCase();s=s.filter((e=>e.title.toLowerCase().includes(t)||e.excerpt.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)))}t&&(s=s.filter((e=>e.category===t))),r&&(s=s.filter((e=>e.tags.includes(r)))),c(s)}),[e,t,r,n]),m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsxs(Vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl mx-auto text-center mb-12",children:[m.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Mon ",m.jsx("span",{className:"gradient-text",children:"Blog"})]}),m.jsx("p",{className:"text-muted-foreground",children:"DÃ©couvrez mes articles sur le dÃ©veloppement web, les technologies et les bonnes pratiques."})]}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[m.jsxs("div",{className:"relative flex-grow",children:[m.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),m.jsx(Ce,{type:"text",placeholder:"Rechercher un article...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]}),(t||r||e)&&m.jsx(ie,{variant:"outline",onClick:()=>{s(""),a(""),i("")},children:"Effacer les filtres"})]}),m.jsxs("div",{className:"space-y-4",children:[d.length>0&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"text-sm font-medium",children:"CatÃ©gories"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(((e,s)=>m.jsx(Xe,{variant:t===e?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{a((s=>s===e?"":e))})(e),children:e},s)))})]}),x.length>0&&m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(bs,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"text-sm font-medium",children:"Tags"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(((e,s)=>m.jsx(Xe,{variant:r===e?"default":"outline",className:"cursor-pointer",onClick:()=>(e=>{i((s=>s===e?"":e))})(e),children:e},s)))})]})]})]}),o.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(((s,a)=>m.jsx(fr,{post:s,index:a,featured:0===a&&!e&&!t&&!r},s.id)))}):m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-muted-foreground",children:"Aucun article ne correspond Ã  votre recherche."})})]})},wr=()=>{const{id:e}=N(),[s,t]=p.useState(null),[a,r]=p.useState([]),[i,n]=p.useState(!0),{toast:l}=Me();if(p.useEffect((()=>{n(!0),setTimeout((()=>{const s=(a=e,Nr.find((e=>e.id===a||e.slug===a)));var a,i;if(s){t(s);const e=(i=s)?Nr.filter((e=>e.id!==i.id&&(e.category===i.category||e.tags&&i.tags&&e.tags.some((e=>i.tags.includes(e)))))).sort(((e,s)=>new Date(s.publishedAt)-new Date(e.publishedAt))).slice(0,3):[];r(e)}else l({title:"Article non trouvÃ©",description:"L'article que vous recherchez n'existe pas.",variant:"destructive"});n(!1)}),500)}),[e,l]),i)return m.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),m.jsx("p",{className:"mt-4 text-muted-foreground",children:"Chargement de l'article..."})]})});if(!s)return m.jsx("div",{className:"container mx-auto px-4 py-12 flex justify-center items-center min-h-[60vh]",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Article non trouvÃ©"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"L'article que vous recherchez n'existe pas ou a Ã©tÃ© supprimÃ©."}),m.jsx(ie,{asChild:!0,children:m.jsxs(g,{to:"/blog",children:[m.jsx($s,{className:"mr-2 h-4 w-4"}),"Retour aux articles"]})})]})});const o=new Date(s.publishedAt),c=Ht(o,"d MMMM yyyy",{locale:Tt});return m.jsx(Vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"container mx-auto px-4 py-12",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx(ie,{asChild:!0,variant:"outline",className:"mb-8",children:m.jsxs(g,{to:"/blog",children:[m.jsx($s,{className:"mr-2 h-4 w-4"}),"Retour aux articles"]})}),m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6",children:s.title}),m.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground mb-6",children:[s.author&&m.jsxs("div",{className:"flex items-center",children:[m.jsx($e,{className:"h-4 w-4 mr-1"}),s.author.name]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Qe,{className:"h-4 w-4 mr-1"}),c]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(ss,{className:"h-4 w-4 mr-1"}),s.readingTime]}),s.category&&m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ws,{className:"h-4 w-4 mr-1"}),s.category]})]}),s.coverImage&&m.jsx("div",{className:"relative aspect-[21/9] rounded-lg overflow-hidden mb-8",children:m.jsx("img",{className:"w-full h-full object-cover",alt:"Image de couverture pour l'article "+s.title,src:"https://images.unsplash.com/photo-1578470155518-c5697b07e280"})}),s.tags&&s.tags.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:s.tags.map(((e,s)=>m.jsx(Xe,{variant:"secondary",children:e},s)))}),m.jsx("div",{className:"prose prose-invert max-w-none",children:m.jsx("div",{className:"whitespace-pre-line",children:s.content})})]}),a.length>0&&m.jsxs(m.Fragment,{children:[m.jsx(ot,{className:"my-12"}),m.jsxs("div",{className:"mt-12",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Articles similaires"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:a.map((e=>m.jsx(g,{to:"/blog/"+(e.slug||e.id),className:"group block",children:m.jsxs("div",{className:"rounded-lg border border-border overflow-hidden transition-all duration-300 hover:border-primary",children:[e.coverImage&&m.jsx("div",{className:"aspect-video relative overflow-hidden",children:m.jsx("img",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",alt:"Image de couverture pour l'article "+e.title,src:"https://images.unsplash.com/photo-1578470155518-c5697b07e280"})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-bold mb-2 group-hover:text-primary transition-colors",children:e.title}),m.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.excerpt})]})]})},e.id)))})]})]})]})})},kr=p.lazy((()=>q((()=>import("./chatbot-CmDBeVrq.js").then((e=>e.C))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])))),Cr=p.lazy((()=>q((()=>import("./AdminLayout-v2YQ_Uc5.js")),__vite__mapDeps([15,1,2,3,4,5,6,7,8,9,10,11])))),Sr=p.lazy((()=>q((()=>import("./messaging-BP1mmKem.js").then((e=>e.M))),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,11,13,14])))),zr=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.bU))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Ar=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.bV))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Pr=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.bW))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Mr=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.bX))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),_r=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.bY))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Er=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.bZ))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),qr=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.b_))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Fr=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.b$))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Lr=p.lazy((()=>q((()=>import("./admin-xTumA9HW.js").then((e=>e.c0))),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11])))),Dr=()=>m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:m.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),Tr=()=>m.jsxs("div",{className:"flex items-center justify-center min-h-[400px] bg-background",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),m.jsx("span",{className:"ml-3 text-muted-foreground",children:"Chargement de l'interface admin..."})]}),Ir=()=>m.jsxs("div",{className:"flex items-center justify-center p-4",children:[m.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"}),m.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Chargement d'AIDA..."})]});function Rr(){return h.useEffect((()=>{Yt.register()}),[]),m.jsxs(F,{client:Kt,children:[m.jsx(ea,{children:m.jsxs(aa,{children:[m.jsxs(Rt,{children:[m.jsx(ta,{}),m.jsx(Ot,{mode:"wait",children:m.jsxs(y,{children:[m.jsx(w,{path:"messages",element:m.jsx(Wt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Dr,{}),children:m.jsx(Sr,{})})})}),m.jsxs(w,{path:"/",element:m.jsx(na,{}),children:[m.jsx(w,{index:!0,element:m.jsx(qa,{})}),m.jsx(w,{path:"connexion",element:m.jsx(oa,{})}),m.jsx(w,{path:"inscription",element:m.jsx(da,{})}),m.jsx(w,{path:"auth/callback",element:m.jsx(ya,{})}),m.jsx(w,{path:"mot-de-passe-oublie",element:m.jsx(ma,{})}),m.jsx(w,{path:"reinitialiser-mot-de-passe",element:m.jsx(ua,{})}),m.jsx(w,{path:"profile",element:m.jsx(Na,{})}),m.jsx(w,{path:"immobilier",element:m.jsx(Fa,{})}),m.jsx(w,{path:"automobile",element:m.jsx(La,{})}),m.jsx(w,{path:"services",element:m.jsx(Da,{})}),m.jsx(w,{path:"marketplace",element:m.jsx(Ta,{})}),m.jsx(w,{path:"premium",element:m.jsx(Ia,{})}),m.jsx(w,{path:"creer-annonce",element:m.jsx(Wt,{children:m.jsx(Ua,{})})}),m.jsx(w,{path:"creer-annonce/:category",element:m.jsx(Wt,{children:m.jsx(Ua,{})})}),m.jsx(w,{path:"create-listing",element:m.jsx(Wt,{children:m.jsx(Ua,{})})}),m.jsx(w,{path:"annonce/:id",element:m.jsx(Ya,{})}),m.jsx(w,{path:"booster-annonce/:id",element:m.jsx(Wt,{children:m.jsx(tr,{})})}),m.jsx(w,{path:"paiement/:boostId",element:m.jsx(Wt,{children:m.jsx(rr,{})})}),m.jsx(w,{path:"payment-callback",element:m.jsx(ir,{})}),m.jsx(w,{path:"fedapay-test",element:m.jsx(or,{})}),m.jsx(w,{path:"annonce/:id/modifier",element:m.jsx(Wt,{children:m.jsx(Ua,{})})}),m.jsx(w,{path:"favorites",element:m.jsx(Wt,{children:m.jsx(er,{})})}),m.jsxs(w,{path:"admin",element:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Cr,{})}),children:[m.jsx(w,{index:!0,element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(zr,{})})})}),m.jsx(w,{path:"users",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Ar,{})})})}),m.jsx(w,{path:"listings",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Pr,{})})})}),m.jsx(w,{path:"transactions",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Mr,{})})})}),m.jsx(w,{path:"analytics",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(_r,{})})})}),m.jsx(w,{path:"newsletter",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Lr,{})})})}),m.jsx(w,{path:"moderation",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Er,{})})})}),m.jsx(w,{path:"categories",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(qr,{})})})}),m.jsx(w,{path:"settings",element:m.jsx(Qt,{children:m.jsx(p.Suspense,{fallback:m.jsx(Tr,{}),children:m.jsx(Fr,{})})})})]}),m.jsx(w,{path:"a-propos",element:m.jsx(dr,{})}),m.jsx(w,{path:"contact",element:m.jsx(ur,{})}),m.jsx(w,{path:"carrieres",element:m.jsx(xr,{})}),m.jsx(w,{path:"presse",element:m.jsx(hr,{})}),m.jsx(w,{path:"aide",element:m.jsx(pr,{})}),m.jsx(w,{path:"faq",element:m.jsx(gr,{})}),m.jsx(w,{path:"politique-confidentialite",element:m.jsx(jr,{})}),m.jsx(w,{path:"conditions-utilisation",element:m.jsx(vr,{})}),m.jsx(w,{path:"blog",element:m.jsx(yr,{})}),m.jsx(w,{path:"blog/:id",element:m.jsx(wr,{})}),m.jsx(w,{path:"*",element:m.jsx(cr,{})})]})]})})]}),m.jsx(H,{}),m.jsx(p.Suspense,{fallback:m.jsx(Ir,{}),children:m.jsx(kr,{})})]})}),!1]})}class Vr extends h.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){}render(){if(this.state.hasError){const e=!1;return m.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f172a",color:"#e2e8f0",padding:24,textAlign:"center"},children:m.jsxs("div",{style:{maxWidth:720},children:[m.jsx("h1",{style:{marginBottom:12},children:"Une erreur est survenue"}),m.jsx("p",{style:{opacity:.9},children:"Une erreur inattendue a Ã©tÃ© dÃ©tectÃ©e."}),m.jsx("pre",{style:{textAlign:"left",background:"#111827",padding:12,borderRadius:8,overflow:"auto",marginTop:16},children:this.state.error+""}),e]})})}return this.props.children}}l.createRoot(document.getElementById("root")).render(m.jsx(h.StrictMode,{children:m.jsx(Vr,{children:m.jsx(k,{children:m.jsx(Rr,{})})})}))}},function(){return Qt||(0,Wt[a(Wt)[0]])((Qt={exports:{}}).exports,Qt),Qt.exports});export default Kt();
